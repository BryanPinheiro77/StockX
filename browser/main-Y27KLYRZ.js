var N7=Object.defineProperty,k7=Object.defineProperties;var F7=Object.getOwnPropertyDescriptors;var Vg=Object.getOwnPropertySymbols,L7=Object.getPrototypeOf,Z2=Object.prototype.hasOwnProperty,J2=Object.prototype.propertyIsEnumerable,V7=Reflect.get;var Q2=(n,e,t)=>e in n?N7(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Q=(n,e)=>{for(var t in e||={})Z2.call(e,t)&&Q2(n,t,e[t]);if(Vg)for(var t of Vg(e))J2.call(e,t)&&Q2(n,t,e[t]);return n},xe=(n,e)=>k7(n,F7(e));var eM=(n,e)=>{var t={};for(var r in n)Z2.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Vg)for(var r of Vg(n))e.indexOf(r)<0&&J2.call(n,r)&&(t[r]=n[r]);return t};var Bs=(n,e,t)=>V7(L7(n),t,e);var A=(n,e,t)=>new Promise((r,i)=>{var o=c=>{try{a(t.next(c))}catch(u){i(u)}},s=c=>{try{a(t.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((t=t.apply(n,e)).next())});function mx(n,e){return Object.is(n,e)}var Tn=null,Bg=!1,vx=1,ci=Symbol("SIGNAL");function Ke(n){let e=Tn;return Tn=n,e}function yx(){return Tn}var bf={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function If(n){if(Bg)throw new Error("");if(Tn===null)return;Tn.consumerOnSignalRead(n);let e=Tn.nextProducerIndex++;if(zg(Tn),e<Tn.producerNode.length&&Tn.producerNode[e]!==n&&Cf(Tn)){let t=Tn.producerNode[e];Hg(t,Tn.producerIndexOfThis[e])}Tn.producerNode[e]!==n&&(Tn.producerNode[e]=n,Tn.producerIndexOfThis[e]=Cf(Tn)?nM(n,Tn,e):0),Tn.producerLastReadVersion[e]=n.version}function tM(){vx++}function _x(n){if(!(Cf(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===vx)){if(!n.producerMustRecompute(n)&&!Cx(n)){gx(n);return}n.producerRecomputeValue(n),gx(n)}}function xx(n){if(n.liveConsumerNode===void 0)return;let e=Bg;Bg=!0;try{for(let t of n.liveConsumerNode)t.dirty||B7(t)}finally{Bg=e}}function wx(){return Tn?.consumerAllowSignalWrites!==!1}function B7(n){n.dirty=!0,xx(n),n.consumerMarkedDirty?.(n)}function gx(n){n.dirty=!1,n.lastCleanEpoch=vx}function jg(n){return n&&(n.nextProducerIndex=0),Ke(n)}function Ex(n,e){if(Ke(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Cf(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Hg(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Cx(n){zg(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(_x(t),r!==t.version))return!0}return!1}function bx(n){if(zg(n),Cf(n))for(let e=0;e<n.producerNode.length;e++)Hg(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function nM(n,e,t){if(rM(n),n.liveConsumerNode.length===0&&iM(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=nM(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Hg(n,e){if(rM(n),n.liveConsumerNode.length===1&&iM(n))for(let r=0;r<n.producerNode.length;r++)Hg(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];zg(i),i.producerIndexOfThis[r]=e}}function Cf(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function zg(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function rM(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function iM(n){return n.producerNode!==void 0}function Ix(n,e){let t=Object.create(U7);t.computation=n,e!==void 0&&(t.equal=e);let r=()=>{if(_x(t),If(t),t.value===Ug)throw t.error;return t.value};return r[ci]=t,r}var hx=Symbol("UNSET"),px=Symbol("COMPUTING"),Ug=Symbol("ERRORED"),U7=xe(Q({},bf),{value:hx,dirty:!0,error:null,equal:mx,kind:"computed",producerMustRecompute(n){return n.value===hx||n.value===px},producerRecomputeValue(n){if(n.value===px)throw new Error("Detected cycle in computations.");let e=n.value;n.value=px;let t=jg(n),r,i=!1;try{r=n.computation(),Ke(null),i=e!==hx&&e!==Ug&&r!==Ug&&n.equal(e,r)}catch(o){r=Ug,n.error=o}finally{Ex(n,t)}if(i){n.value=e;return}n.value=r,n.version++}});function j7(){throw new Error}var oM=j7;function sM(n){oM(n)}function Sx(n){oM=n}var H7=null;function Ax(n,e){let t=Object.create($g);t.value=n,e!==void 0&&(t.equal=e);let r=()=>(If(t),t.value);return r[ci]=t,r}function Sf(n,e){wx()||sM(n),n.equal(n.value,e)||(n.value=e,z7(n))}function Dx(n,e){wx()||sM(n),Sf(n,e(n.value))}var $g=xe(Q({},bf),{equal:mx,value:void 0,kind:"signal"});function z7(n){n.version++,tM(),xx(n),H7?.()}function Tx(n){let e=Ke(null);try{return n()}finally{Ke(e)}}var Mx;function Af(){return Mx}function Go(n){let e=Mx;return Mx=n,e}var Wg=Symbol("NotFound");function Se(n){return typeof n=="function"}function Ru(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Gg=Ru(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function oc(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var nn=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(Se(r))try{r()}catch(o){e=o instanceof Gg?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{aM(o)}catch(s){e=e??[],s instanceof Gg?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Gg(e)}}add(e){var t;if(e&&e!==this)if(this.closed)aM(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&oc(t,e)}remove(e){let{_finalizers:t}=this;t&&oc(t,e),e instanceof n&&e._removeParent(this)}};nn.EMPTY=(()=>{let n=new nn;return n.closed=!0,n})();var Ox=nn.EMPTY;function qg(n){return n instanceof nn||n&&"closed"in n&&Se(n.remove)&&Se(n.add)&&Se(n.unsubscribe)}function aM(n){Se(n)?n():n.unsubscribe()}var Oi={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Nu={setTimeout(n,e,...t){let{delegate:r}=Nu;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Nu;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Kg(n){Nu.setTimeout(()=>{let{onUnhandledError:e}=Oi;if(e)e(n);else throw n})}function Df(){}var cM=Px("C",void 0,void 0);function uM(n){return Px("E",void 0,n)}function lM(n){return Px("N",n,void 0)}function Px(n,e,t){return{kind:n,value:e,error:t}}var sc=null;function ku(n){if(Oi.useDeprecatedSynchronousErrorHandling){let e=!sc;if(e&&(sc={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=sc;if(sc=null,t)throw r}}else n()}function dM(n){Oi.useDeprecatedSynchronousErrorHandling&&sc&&(sc.errorThrown=!0,sc.error=n)}var ac=class extends nn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,qg(e)&&e.add(this)):this.destination=Y7}static create(e,t,r){return new Us(e,t,r)}next(e){this.isStopped?Nx(lM(e),this):this._next(e)}error(e){this.isStopped?Nx(uM(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Nx(cM,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},q7=Function.prototype.bind;function Rx(n,e){return q7.call(n,e)}var kx=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Yg(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Yg(r)}else Yg(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Yg(t)}}},Us=class extends ac{constructor(e,t,r){super();let i;if(Se(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Oi.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Rx(e.next,o),error:e.error&&Rx(e.error,o),complete:e.complete&&Rx(e.complete,o)}):i=e}this.destination=new kx(i)}};function Yg(n){Oi.useDeprecatedSynchronousErrorHandling?dM(n):Kg(n)}function K7(n){throw n}function Nx(n,e){let{onStoppedNotification:t}=Oi;t&&Nu.setTimeout(()=>t(n,e))}var Y7={closed:!0,next:Df,error:K7,complete:Df};var Fu=typeof Symbol=="function"&&Symbol.observable||"@@observable";function mr(n){return n}function Xg(...n){return Fx(n)}function Fx(n){return n.length===0?mr:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var Re=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=Q7(t)?t:new Us(t,r,i);return ku(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=fM(r),new r((i,o)=>{let s=new Us({next:a=>{try{t(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Fu](){return this}pipe(...t){return Fx(t)(this)}toPromise(t){return t=fM(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function fM(n){var e;return(e=n??Oi.Promise)!==null&&e!==void 0?e:Promise}function X7(n){return n&&Se(n.next)&&Se(n.error)&&Se(n.complete)}function Q7(n){return n&&n instanceof ac||X7(n)&&qg(n)}function Lx(n){return Se(n?.lift)}function je(n){return e=>{if(Lx(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function ke(n,e,t,r,i){return new Vx(n,e,t,r,i)}var Vx=class extends ac{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Lu(){return je((n,e)=>{let t=null;n._refCount++;let r=ke(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Vu=class extends Re{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Lx(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new nn;let t=this.getSubject();e.add(this.source.subscribe(ke(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=nn.EMPTY)}return e}refCount(){return Lu()(this)}};var hM=Ru(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var pn=(()=>{class n extends Re{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new Qg(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new hM}next(t){ku(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){ku(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ku(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Ox:(this.currentObservers=null,o.push(t),new nn(()=>{this.currentObservers=null,oc(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new Re;return t.source=this,t}}return n.create=(e,t)=>new Qg(e,t),n})(),Qg=class extends pn{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Ox}};var gn=class extends pn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Bx={now(){return(Bx.delegate||Date).now()},delegate:void 0};var Zg=class extends nn{constructor(e,t){super()}schedule(e,t=0){return this}};var Tf={setInterval(n,e,...t){let{delegate:r}=Tf;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Tf;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Bu=class extends Zg{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Tf.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Tf.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,oc(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Uu=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Uu.now=Bx.now;var ju=class extends Uu{constructor(e,t=Uu.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var Mf=new ju(Bu);var Jg=class extends Bu{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var em=class extends ju{};var Ux=new em(Jg);var Dr=new Re(n=>n.complete());function pM(n){return n&&Se(n.schedule)}function gM(n){return n[n.length-1]}function tm(n){return Se(gM(n))?n.pop():void 0}function js(n){return pM(gM(n))?n.pop():void 0}function jx(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function vM(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})}function mM(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function cc(n){return this instanceof cc?(this.v=n,this):new cc(n)}function yM(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(g){return Promise.resolve(g).then(h,d)}}function a(h,g){r[h]&&(i[h]=function(m){return new Promise(function(y,x){o.push([h,m,y,x])>1||c(h,m)})},g&&(i[h]=g(i[h])))}function c(h,g){try{u(r[h](g))}catch(m){f(o[0][3],m)}}function u(h){h.value instanceof cc?Promise.resolve(h.value.v).then(l,d):f(o[0][2],h)}function l(h){c("next",h)}function d(h){c("throw",h)}function f(h,g){h(g),o.shift(),o.length&&c(o[0][0],o[0][1])}}function _M(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof mM=="function"?mM(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(o){t[o]=n[o]&&function(s){return new Promise(function(a,c){s=n[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var nm=n=>n&&typeof n.length=="number"&&typeof n!="function";function rm(n){return Se(n?.then)}function im(n){return Se(n[Fu])}function om(n){return Symbol.asyncIterator&&Se(n?.[Symbol.asyncIterator])}function sm(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Z7(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var am=Z7();function cm(n){return Se(n?.[am])}function um(n){return yM(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield cc(t.read());if(i)return yield cc(void 0);yield yield cc(r)}}finally{t.releaseLock()}})}function lm(n){return Se(n?.getReader)}function wn(n){if(n instanceof Re)return n;if(n!=null){if(im(n))return J7(n);if(nm(n))return eU(n);if(rm(n))return tU(n);if(om(n))return xM(n);if(cm(n))return nU(n);if(lm(n))return rU(n)}throw sm(n)}function J7(n){return new Re(e=>{let t=n[Fu]();if(Se(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function eU(n){return new Re(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function tU(n){return new Re(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Kg)})}function nU(n){return new Re(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function xM(n){return new Re(e=>{iU(n,e).catch(t=>e.error(t))})}function rU(n){return xM(um(n))}function iU(n,e){var t,r,i,o;return vM(this,void 0,void 0,function*(){try{for(t=_M(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Tr(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function Hs(n,e=0){return je((t,r)=>{t.subscribe(ke(r,i=>Tr(r,n,()=>r.next(i),e),()=>Tr(r,n,()=>r.complete(),e),i=>Tr(r,n,()=>r.error(i),e)))})}function zs(n,e=0){return je((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function wM(n,e){return wn(n).pipe(zs(e),Hs(e))}function EM(n,e){return wn(n).pipe(zs(e),Hs(e))}function CM(n,e){return new Re(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function bM(n,e){return new Re(t=>{let r;return Tr(t,e,()=>{r=n[am](),Tr(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>Se(r?.return)&&r.return()})}function dm(n,e){if(!n)throw new Error("Iterable cannot be null");return new Re(t=>{Tr(t,e,()=>{let r=n[Symbol.asyncIterator]();Tr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function IM(n,e){return dm(um(n),e)}function SM(n,e){if(n!=null){if(im(n))return wM(n,e);if(nm(n))return CM(n,e);if(rm(n))return EM(n,e);if(om(n))return dm(n,e);if(cm(n))return bM(n,e);if(lm(n))return IM(n,e)}throw sm(n)}function Rt(n,e){return e?SM(n,e):wn(n)}function fe(...n){let e=js(n);return Rt(n,e)}function Hu(n,e){let t=Se(n)?n:()=>n,r=i=>i.error(t());return new Re(e?i=>e.schedule(r,0,i):r)}function Hx(n){return!!n&&(n instanceof Re||Se(n.lift)&&Se(n.subscribe))}var Pi=Ru(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function fm(n,e){let t=typeof e=="object";return new Promise((r,i)=>{let o=new Us({next:s=>{r(s),o.unsubscribe()},error:i,complete:()=>{t?r(e.defaultValue):i(new Pi)}});n.subscribe(o)})}function Ae(n,e){return je((t,r)=>{let i=0;t.subscribe(ke(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:oU}=Array;function sU(n,e){return oU(e)?n(...e):n(e)}function hm(n){return Ae(e=>sU(n,e))}var{isArray:aU}=Array,{getPrototypeOf:cU,prototype:uU,keys:lU}=Object;function pm(n){if(n.length===1){let e=n[0];if(aU(e))return{args:e,keys:null};if(dU(e)){let t=lU(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function dU(n){return n&&typeof n=="object"&&cU(n)===uU}function gm(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function Of(...n){let e=js(n),t=tm(n),{args:r,keys:i}=pm(n);if(r.length===0)return Rt([],e);let o=new Re(fU(r,e,i?s=>gm(i,s):mr));return t?o.pipe(hm(t)):o}function fU(n,e,t=mr){return r=>{AM(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)AM(e,()=>{let u=Rt(n[c],e),l=!1;u.subscribe(ke(r,d=>{o[c]=d,l||(l=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function AM(n,e,t){n?Tr(t,n,e):e()}function DM(n,e,t,r,i,o,s,a){let c=[],u=0,l=0,d=!1,f=()=>{d&&!c.length&&!u&&e.complete()},h=m=>u<r?g(m):c.push(m),g=m=>{o&&e.next(m),u++;let y=!1;wn(t(m,l++)).subscribe(ke(e,x=>{i?.(x),o?h(x):e.next(x)},()=>{y=!0},void 0,()=>{if(y)try{for(u--;c.length&&u<r;){let x=c.shift();s?Tr(e,s,()=>g(x)):g(x)}f()}catch(x){e.error(x)}}))};return n.subscribe(ke(e,h,()=>{d=!0,f()})),()=>{a?.()}}function mn(n,e,t=1/0){return Se(e)?mn((r,i)=>Ae((o,s)=>e(r,o,i,s))(wn(n(r,i))),t):(typeof e=="number"&&(t=e),je((r,i)=>DM(r,i,n,t)))}function zu(n=1/0){return mn(mr,n)}function TM(){return zu(1)}function $u(...n){return TM()(Rt(n,js(n)))}function mm(n){return new Re(e=>{wn(n()).subscribe(e)})}function zx(...n){let e=tm(n),{args:t,keys:r}=pm(n),i=new Re(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let l=0;l<s;l++){let d=!1;wn(t[l]).subscribe(ke(o,f=>{d||(d=!0,u--),a[l]=f},()=>c--,void 0,()=>{(!c||!d)&&(u||o.next(r?gm(r,a):a),o.complete())}))}});return e?i.pipe(hm(e)):i}function Mr(n,e){return je((t,r)=>{let i=0;t.subscribe(ke(r,o=>n.call(e,o,i++)&&r.next(o)))})}function qo(n){return je((e,t)=>{let r=null,i=!1,o;r=e.subscribe(ke(t,void 0,void 0,s=>{o=wn(n(s,qo(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function MM(n,e,t,r,i){return(o,s)=>{let a=t,c=e,u=0;o.subscribe(ke(s,l=>{let d=u++;c=a?n(c,l,d):(a=!0,l),r&&s.next(c)},i&&(()=>{a&&s.next(c),s.complete()})))}}function $s(n,e){return Se(e)?mn(n,e,1):mn(n,1)}function $x(n,e=Mf){return je((t,r)=>{let i=null,o=null,s=null,a=()=>{if(i){i.unsubscribe(),i=null;let u=o;o=null,r.next(u)}};function c(){let u=s+n,l=e.now();if(l<u){i=this.schedule(void 0,u-l),r.add(i);return}a()}t.subscribe(ke(r,u=>{o=u,s=e.now(),i||(i=e.schedule(c,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{o=i=null}))})}function Ws(n){return je((e,t)=>{let r=!1;e.subscribe(ke(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ko(n){return n<=0?()=>Dr:je((e,t)=>{let r=0;e.subscribe(ke(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function vm(n,e=mr){return n=n??hU,je((t,r)=>{let i,o=!0;t.subscribe(ke(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function hU(n,e){return n===e}function ym(n=pU){return je((e,t)=>{let r=!1;e.subscribe(ke(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function pU(){return new Pi}function Pf(n){return je((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function Yo(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Mr((i,o)=>n(i,o,r)):mr,Ko(1),t?Ws(e):ym(()=>new Pi))}function Wu(n){return n<=0?()=>Dr:je((e,t)=>{let r=[];e.subscribe(ke(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Wx(n,e){let t=arguments.length>=2;return r=>r.pipe(n?Mr((i,o)=>n(i,o,r)):mr,Wu(1),t?Ws(e):ym(()=>new Pi))}function _m(n,e){return je(MM(n,e,arguments.length>=2,!0))}function Gu(...n){let e=js(n);return je((t,r)=>{(e?$u(n,t,e):$u(n,t)).subscribe(r)})}function Or(n,e){return je((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(ke(r,c=>{i?.unsubscribe();let u=0,l=o++;wn(n(c,l)).subscribe(i=ke(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Gx(n){return je((e,t)=>{wn(n).subscribe(ke(t,()=>t.complete(),Df)),!t.closed&&e.subscribe(t)})}function $n(n,e,t){let r=Se(n)||e||t?{next:n,error:e,complete:t}:n;return r?je((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(ke(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):mr}var xO="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",se=class extends Error{code;constructor(e,t){super(wO(e,t)),this.code=e}};function gU(n){return`NG0${Math.abs(n)}`}function wO(n,e){return`${gU(n)}${e?": "+e:""}`}var EO=Symbol("InputSignalNode#UNSET"),mU=xe(Q({},$g),{transformFn:void 0,applyValueToInputSignal(n,e){Sf(n,e)}});function CO(n,e){let t=Object.create(mU);t.value=n,t.transformFn=e?.transform;function r(){if(If(t),t.value===EO){let i=null;throw new se(-950,i)}return t.value}return r[ci]=t,r}function $f(n){return{toString:n}.toString()}var xm="__parameters__";function vU(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function bO(n,e,t){return $f(()=>{let r=vU(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(c,u,l){let d=c.hasOwnProperty(xm)?c[xm]:Object.defineProperty(c,xm,{value:[]})[xm];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(s),c}}return i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var lc=globalThis;function At(n){for(let e in n)if(n[e]===At)return e;throw Error("Could not find renamed property on target object.")}function yU(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Rr(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(Rr).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let r=t.indexOf(`
`);return r>=0?t.slice(0,r):t}function OM(n,e){return n?e?`${n} ${e}`:n:e||""}var _U=At({__forward_ref__:At});function Wn(n){return n.__forward_ref__=Wn,n.toString=function(){return Rr(this())},n}function vr(n){return IO(n)?n():n}function IO(n){return typeof n=="function"&&n.hasOwnProperty(_U)&&n.__forward_ref__===Wn}function ne(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function kr(n){return{providers:n.providers||[],imports:n.imports||[]}}function e0(n){return PM(n,AO)||PM(n,DO)}function SO(n){return e0(n)!==null}function PM(n,e){return n.hasOwnProperty(e)?n[e]:null}function xU(n){let e=n&&(n[AO]||n[DO]);return e||null}function RM(n){return n&&(n.hasOwnProperty(NM)||n.hasOwnProperty(wU))?n[NM]:null}var AO=At({\u0275prov:At}),NM=At({\u0275inj:At}),DO=At({ngInjectableDef:At}),wU=At({ngInjectorDef:At}),ae=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=ne({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function TO(n){return n&&!!n.\u0275providers}var EU=At({\u0275cmp:At}),CU=At({\u0275dir:At}),bU=At({\u0275pipe:At}),IU=At({\u0275mod:At}),Tm=At({\u0275fac:At}),Ff=At({__NG_ELEMENT_ID__:At}),kM=At({__NG_ENV_ID__:At});function Ju(n){return typeof n=="string"?n:n==null?"":String(n)}function SU(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Ju(n)}function MO(n,e){throw new se(-200,n)}function tE(n,e){throw new se(-201,!1)}var Ne=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(Ne||{}),aw;function OO(){return aw}function Pr(n){let e=aw;return aw=n,e}function PO(n,e,t){let r=e0(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&Ne.Optional)return null;if(e!==void 0)return e;tE(n,"Injector")}var AU={},dc=AU,cw="__NG_DI_FLAG__",Mm=class{injector;constructor(e){this.injector=e}retrieve(e,t){let r=t;return this.injector.get(e,r.optional?Wg:dc,r)}},Om="ngTempTokenPath",DU="ngTokenPath",TU=/\n/gm,MU="\u0275",FM="__source";function OU(n,e=Ne.Default){if(Af()===void 0)throw new se(-203,!1);if(Af()===null)return PO(n,void 0,e);{let t=Af(),r;return t instanceof Mm?r=t.injector:r=t,r.get(n,e&Ne.Optional?null:void 0,e)}}function ce(n,e=Ne.Default){return(OO()||OU)(vr(n),e)}function G(n,e=Ne.Default){return ce(n,t0(e))}function t0(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function uw(n){let e=[];for(let t=0;t<n.length;t++){let r=vr(n[t]);if(Array.isArray(r)){if(r.length===0)throw new se(900,!1);let i,o=Ne.Default;for(let s=0;s<r.length;s++){let a=r[s],c=PU(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}e.push(ce(i,o))}else e.push(ce(r))}return e}function RO(n,e){return n[cw]=e,n.prototype[cw]=e,n}function PU(n){return n[cw]}function RU(n,e,t,r){let i=n[Om];throw e[FM]&&i.unshift(e[FM]),n.message=NU(`
`+n.message,i,t,r),n[DU]=i,n[Om]=null,n}function NU(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==MU?n.slice(2):n;let i=Rr(e);if(Array.isArray(e))i=e.map(Rr).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):Rr(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(TU,`
  `)}`}var Zr=RO(bO("Optional"),8);var kU=RO(bO("SkipSelf"),4);function hc(n,e){let t=n.hasOwnProperty(Tm);return t?n[Tm]:null}function FU(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],o=e[r];if(t&&(i=t(i),o=t(o)),o!==i)return!1}return!0}function LU(n){return n.flat(Number.POSITIVE_INFINITY)}function nE(n,e){n.forEach(t=>Array.isArray(t)?nE(t,e):e(t))}function NO(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Pm(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function VU(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function BU(n,e,t){let r=Wf(n,e);return r>=0?n[r|1]=t:(r=~r,VU(n,r,e,t)),r}function qx(n,e){let t=Wf(n,e);if(t>=0)return n[t|1]}function Wf(n,e){return UU(n,e,1)}function UU(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var pc={},ui=[],Lf=new ae(""),kO=new ae("",-1),FO=new ae(""),Rm=class{get(e,t=dc){if(t===dc){let r=new Error(`NullInjectorError: No provider for ${Rr(e)}!`);throw r.name="NullInjectorError",r}return t}};function LO(n,e){let t=n[IU]||null;if(!t&&e===!0)throw new Error(`Type ${Rr(n)} does not have '\u0275mod' property.`);return t}function gc(n){return n[EU]||null}function jU(n){return n[CU]||null}function HU(n){return n[bU]||null}function Jo(n){return{\u0275providers:n}}function rE(...n){return{\u0275providers:VO(!0,n),\u0275fromNgModule:!0}}function VO(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return nE(e,s=>{let a=s;lw(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&BO(i,o),t}function BO(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];iE(i,o=>{e(o,r)})}}function lw(n,e,t,r){if(n=vr(n),!n)return!1;let i=null,o=RM(n),s=!o&&gc(n);if(!o&&!s){let c=n.ngModule;if(o=RM(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)lw(u,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{nE(o.imports,l=>{lw(l,e,t,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&BO(u,e)}if(!a){let u=hc(i)||(()=>new i);e({provide:i,useFactory:u,deps:ui},i),e({provide:FO,useValue:i,multi:!0},i),e({provide:Lf,useValue:()=>ce(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=n;iE(c,l=>{e(l,u)})}}else return!1;return i!==n&&n.providers!==void 0}function iE(n,e){for(let t of n)TO(t)&&(t=t.\u0275providers),Array.isArray(t)?iE(t,e):e(t)}var zU=At({provide:String,useValue:At});function UO(n){return n!==null&&typeof n=="object"&&zU in n}function $U(n){return!!(n&&n.useExisting)}function WU(n){return!!(n&&n.useFactory)}function el(n){return typeof n=="function"}function GU(n){return!!n.useClass}var n0=new ae(""),Cm={},LM={},Kx;function oE(){return Kx===void 0&&(Kx=new Rm),Kx}var er=class{},Vf=class extends er{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,fw(e,s=>this.processProvider(s)),this.records.set(kO,qu(void 0,this)),i.has("environment")&&this.records.set(er,qu(void 0,this));let o=this.records.get(n0);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(FO,ui,Ne.Self))}retrieve(e,t){let r=t;return this.get(e,r.optional?Wg:dc,r)}destroy(){Nf(this),this._destroyed=!0;let e=Ke(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ke(e)}}onDestroy(e){return Nf(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Nf(this);let t=Go(this),r=Pr(void 0),i;try{return e()}finally{Go(t),Pr(r)}}get(e,t=dc,r=Ne.Default){if(Nf(this),e.hasOwnProperty(kM))return e[kM](this);r=t0(r);let i,o=Go(this),s=Pr(void 0);try{if(!(r&Ne.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=QU(e)&&e0(e);u&&this.injectableDefInScope(u)?c=qu(dw(e),Cm):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,r)}let a=r&Ne.Self?oE():this.parent;return t=r&Ne.Optional&&t===dc?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Om]=a[Om]||[]).unshift(Rr(e)),o)throw a;return RU(a,e,"R3InjectorError",this.source)}else throw a}finally{Pr(s),Go(o)}}resolveInjectorInitializers(){let e=Ke(null),t=Go(this),r=Pr(void 0),i;try{let o=this.get(Lf,ui,Ne.Self);for(let s of o)s()}finally{Go(t),Pr(r),Ke(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(Rr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=vr(e);let t=el(e)?e:vr(e&&e.provide),r=KU(e);if(!el(e)&&e.multi===!0){let i=this.records.get(t);i||(i=qu(void 0,Cm,!0),i.factory=()=>uw(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t,r){let i=Ke(null);try{return t.value===LM?MO(Rr(e)):t.value===Cm&&(t.value=LM,t.value=t.factory(void 0,r)),typeof t.value=="object"&&t.value&&XU(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ke(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=vr(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function dw(n){let e=e0(n),t=e!==null?e.factory:hc(n);if(t!==null)return t;if(n instanceof ae)throw new se(204,!1);if(n instanceof Function)return qU(n);throw new se(204,!1)}function qU(n){if(n.length>0)throw new se(204,!1);let t=xU(n);return t!==null?()=>t.factory(n):()=>new n}function KU(n){if(UO(n))return qu(void 0,n.useValue);{let e=jO(n);return qu(e,Cm)}}function jO(n,e,t){let r;if(el(n)){let i=vr(n);return hc(i)||dw(i)}else if(UO(n))r=()=>vr(n.useValue);else if(WU(n))r=()=>n.useFactory(...uw(n.deps||[]));else if($U(n))r=(i,o)=>ce(vr(n.useExisting),o!==void 0&&o&Ne.Optional?Ne.Optional:void 0);else{let i=vr(n&&(n.useClass||n.provide));if(YU(n))r=()=>new i(...uw(n.deps));else return hc(i)||dw(i)}return r}function Nf(n){if(n.destroyed)throw new se(205,!1)}function qu(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function YU(n){return!!n.deps}function XU(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function QU(n){return typeof n=="function"||typeof n=="object"&&n instanceof ae}function fw(n,e){for(let t of n)Array.isArray(t)?fw(t,e):t&&TO(t)?fw(t.\u0275providers,e):e(t)}function nr(n,e){let t;n instanceof Vf?(Nf(n),t=n):t=new Mm(n);let r,i=Go(t),o=Pr(void 0);try{return e()}finally{Go(i),Pr(o)}}function HO(){return OO()!==void 0||Af()!=null}function sE(n){if(!HO())throw new se(-203,!1)}function ZU(n){return typeof n=="function"}var es=0,Be=1,Ce=2,tr=3,Ni=4,ki=5,Nm=6,km=7,Nr=8,mc=9,Xo=10,Mn=11,Bf=12,VM=13,sl=14,io=15,vc=16,Ku=17,Qo=18,r0=19,zO=20,Gs=21,Yx=22,Fm=23,li=24,Qu=25,Qr=26,$O=1;var yc=7,Lm=8,tl=9,Xr=10;function qs(n){return Array.isArray(n)&&typeof n[$O]=="object"}function ts(n){return Array.isArray(n)&&n[$O]===!0}function WO(n){return(n.flags&4)!==0}function al(n){return n.componentOffset>-1}function aE(n){return(n.flags&1)===1}function oo(n){return!!n.template}function Vm(n){return(n[Ce]&512)!==0}function cl(n){return(n[Ce]&256)===256}var hw=class{previousValue;currentValue;firstChange;constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function GO(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}var di=(()=>{let n=()=>qO;return n.ngInherit=!0,n})();function qO(n){return n.type.prototype.ngOnChanges&&(n.setInput=ej),JU}function JU(){let n=YO(this),e=n?.current;if(e){let t=n.previous;if(t===pc)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function ej(n,e,t,r,i){let o=this.declaredInputs[r],s=YO(n)||tj(n,{previous:pc,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new hw(u&&u.currentValue,t,c===pc),GO(n,e,i,t)}var KO="__ngSimpleChanges__";function YO(n){return n[KO]||null}function tj(n,e){return n[KO]=e}var BM=null;var wt=function(n,e=null,t){BM?.(n,e,t)},nj="svg",rj="math";function so(n){for(;Array.isArray(n);)n=n[es];return n}function XO(n,e){return so(e[n])}function lo(n,e){return so(e[n.index])}function QO(n,e){return n.data[e]}function cE(n,e){return n[e]}function ao(n,e){let t=e[n];return qs(t)?t:t[es]}function ij(n){return(n[Ce]&4)===4}function uE(n){return(n[Ce]&128)===128}function oj(n){return ts(n[tr])}function Bm(n,e){return e==null?null:n[e]}function ZO(n){n[Ku]=0}function JO(n){n[Ce]&1024||(n[Ce]|=1024,uE(n)&&Gf(n))}function sj(n,e){for(;n>0;)e=e[sl],n--;return e}function i0(n){return!!(n[Ce]&9216||n[li]?.dirty)}function pw(n){n[Xo].changeDetectionScheduler?.notify(8),n[Ce]&64&&(n[Ce]|=1024),i0(n)&&Gf(n)}function Gf(n){n[Xo].changeDetectionScheduler?.notify(0);let e=_c(n);for(;e!==null&&!(e[Ce]&8192||(e[Ce]|=8192,!uE(e)));)e=_c(e)}function eP(n,e){if(cl(n))throw new se(911,!1);n[Gs]===null&&(n[Gs]=[]),n[Gs].push(e)}function aj(n,e){if(n[Gs]===null)return;let t=n[Gs].indexOf(e);t!==-1&&n[Gs].splice(t,1)}function _c(n){let e=n[tr];return ts(e)?e[tr]:e}function lE(n){return n[km]??=[]}function dE(n){return n.cleanup??=[]}function cj(n,e,t,r){let i=lE(e);i.push(t),n.firstCreatePass&&dE(n).push(r,i.length-1)}var Fe={lFrame:uP(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var gw=!1;function uj(){return Fe.lFrame.elementDepthCount}function lj(){Fe.lFrame.elementDepthCount++}function dj(){Fe.lFrame.elementDepthCount--}function tP(){return Fe.bindingsEnabled}function fj(){return Fe.skipHydrationRootTNode!==null}function hj(n){return Fe.skipHydrationRootTNode===n}function pj(){Fe.skipHydrationRootTNode=null}function Qe(){return Fe.lFrame.lView}function rr(){return Fe.lFrame.tView}function ge(n){return Fe.lFrame.contextLView=n,n[Nr]}function me(n){return Fe.lFrame.contextLView=null,n}function Fr(){let n=nP();for(;n!==null&&n.type===64;)n=n.parent;return n}function nP(){return Fe.lFrame.currentTNode}function gj(){let n=Fe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function qf(n,e){let t=Fe.lFrame;t.currentTNode=n,t.isParent=e}function rP(){return Fe.lFrame.isParent}function mj(){Fe.lFrame.isParent=!1}function vj(){return Fe.lFrame.contextLView}function iP(){return gw}function UM(n){let e=gw;return gw=n,e}function o0(){let n=Fe.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function yj(){return Fe.lFrame.bindingIndex}function _j(n){return Fe.lFrame.bindingIndex=n}function s0(){return Fe.lFrame.bindingIndex++}function oP(n){let e=Fe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function xj(){return Fe.lFrame.inI18n}function wj(n,e){let t=Fe.lFrame;t.bindingIndex=t.bindingRootIndex=n,mw(e)}function Ej(){return Fe.lFrame.currentDirectiveIndex}function mw(n){Fe.lFrame.currentDirectiveIndex=n}function Cj(n){let e=Fe.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function sP(){return Fe.lFrame.currentQueryIndex}function fE(n){Fe.lFrame.currentQueryIndex=n}function bj(n){let e=n[Be];return e.type===2?e.declTNode:e.type===1?n[ki]:null}function aP(n,e,t){if(t&Ne.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&Ne.Host);)if(i=bj(o),i===null||(o=o[sl],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=Fe.lFrame=cP();return r.currentTNode=e,r.lView=n,!0}function hE(n){let e=cP(),t=n[Be];Fe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function cP(){let n=Fe.lFrame,e=n===null?null:n.child;return e===null?uP(n):e}function uP(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function lP(){let n=Fe.lFrame;return Fe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var dP=lP;function pE(){let n=lP();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Ij(n){return(Fe.lFrame.contextLView=sj(n,Fe.lFrame.contextLView))[Nr]}function Ac(){return Fe.lFrame.selectedIndex}function xc(n){Fe.lFrame.selectedIndex=n}function gE(){let n=Fe.lFrame;return QO(n.tView,n.selectedIndex)}function Sj(){return Fe.lFrame.currentNamespace}var fP=!0;function mE(){return fP}function vE(n){fP=n}function Aj(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=qO(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function hP(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),u&&((n.viewHooks??=[]).push(t,u),(n.viewCheckHooks??=[]).push(t,u)),l!=null&&(n.destroyHooks??=[]).push(t,l)}}function bm(n,e,t){pP(n,e,3,t)}function Im(n,e,t,r){(n[Ce]&3)===t&&pP(n,e,t,r)}function Xx(n,e){let t=n[Ce];(t&3)===e&&(t&=16383,t+=1,n[Ce]=t)}function pP(n,e,t,r){let i=r!==void 0?n[Ku]&65535:0,o=r??-1,s=e.length-1,a=0;for(let c=i;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[Ku]+=65536),(a<o||o==-1)&&(Dj(n,t,e,c),n[Ku]=(n[Ku]&4294901760)+c+2),c++}function jM(n,e){wt(4,n,e);let t=Ke(null);try{e.call(n)}finally{Ke(t),wt(5,n,e)}}function Dj(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[Ce]>>14<n[Ku]>>16&&(n[Ce]&3)===e&&(n[Ce]+=16384,jM(a,o)):jM(a,o)}var Zu=-1,wc=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,r){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=r}};function Tj(n){return(n.flags&8)!==0}function Mj(n){return(n.flags&16)!==0}function Oj(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];Pj(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function gP(n){return n===3||n===4||n===6}function Pj(n){return n.charCodeAt(0)===64}function Uf(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?HM(n,t,i,null,e[++r]):HM(n,t,i,null,null))}}return n}function HM(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){i!==null&&(n[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),i!==null&&n.splice(o++,0,i)}function mP(n){return n!==Zu}function Um(n){return n&32767}function Rj(n){return n>>16}function jm(n,e){let t=Rj(n),r=e;for(;t>0;)r=r[sl],t--;return r}var vw=!0;function Hm(n){let e=vw;return vw=n,e}var Nj=256,vP=Nj-1,yP=5,kj=0,ro={};function Fj(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ff)&&(r=t[Ff]),r==null&&(r=t[Ff]=kj++);let i=r&vP,o=1<<i;e.data[n+(i>>yP)]|=o}function zm(n,e){let t=_P(n,e);if(t!==-1)return t;let r=e[Be];r.firstCreatePass&&(n.injectorIndex=e.length,Qx(r.data,n),Qx(e,null),Qx(r.blueprint,null));let i=yE(n,e),o=n.injectorIndex;if(mP(i)){let s=Um(i),a=jm(i,e),c=a[Be].data;for(let u=0;u<8;u++)e[o+u]=a[s+u]|c[s+u]}return e[o+8]=i,o}function Qx(n,e){n.push(0,0,0,0,0,0,0,0,e)}function _P(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function yE(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=bP(i),r===null)return Zu;if(t++,i=i[sl],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return Zu}function yw(n,e,t){Fj(n,e,t)}function Lj(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(gP(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function xP(n,e,t){if(t&Ne.Optional||n!==void 0)return n;tE(e,"NodeInjector")}function wP(n,e,t,r){if(t&Ne.Optional&&r===void 0&&(r=null),(t&(Ne.Self|Ne.Host))===0){let i=n[mc],o=Pr(void 0);try{return i?i.get(e,r,t&Ne.Optional):PO(e,r,t&Ne.Optional)}finally{Pr(o)}}return xP(r,e,t)}function EP(n,e,t,r=Ne.Default,i){if(n!==null){if(e[Ce]&2048&&!(r&Ne.Self)){let s=jj(n,e,t,r,ro);if(s!==ro)return s}let o=CP(n,e,t,r,ro);if(o!==ro)return o}return wP(e,t,r,i)}function CP(n,e,t,r,i){let o=Bj(t);if(typeof o=="function"){if(!aP(e,n,r))return r&Ne.Host?xP(i,t,r):wP(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&Ne.Optional))tE(t);else return s}finally{dP()}}else if(typeof o=="number"){let s=null,a=_P(n,e),c=Zu,u=r&Ne.Host?e[io][ki]:null;for((a===-1||r&Ne.SkipSelf)&&(c=a===-1?yE(n,e):e[a+8],c===Zu||!$M(r,!1)?a=-1:(s=e[Be],a=Um(c),e=jm(c,e)));a!==-1;){let l=e[Be];if(zM(o,a,l.data)){let d=Vj(a,e,t,s,r,u);if(d!==ro)return d}c=e[a+8],c!==Zu&&$M(r,e[Be].data[a+8]===u)&&zM(o,a,e)?(s=l,a=Um(c),e=jm(c,e)):a=-1}}return i}function Vj(n,e,t,r,i,o){let s=e[Be],a=s.data[n+8],c=r==null?al(a)&&vw:r!=s&&(a.type&3)!==0,u=i&Ne.Host&&o===a,l=Sm(a,s,t,c,u);return l!==null?jf(e,s,l,a,i):ro}function Sm(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,c=n.directiveStart,u=n.directiveEnd,l=o>>20,d=r?a:a+l,f=i?a+l:u;for(let h=d;h<f;h++){let g=s[h];if(h<c&&t===g||h>=c&&g.type===t)return h}if(i){let h=s[c];if(h&&oo(h)&&h.type===t)return c}return null}function jf(n,e,t,r,i){let o=n[t],s=e.data;if(o instanceof wc){let a=o;a.resolving&&MO(SU(s[t]));let c=Hm(a.canSeeViewProviders);a.resolving=!0;let u,l=a.injectImpl?Pr(a.injectImpl):null,d=aP(n,r,Ne.Default);try{o=n[t]=a.factory(void 0,i,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&Aj(t,s[t],e)}finally{l!==null&&Pr(l),Hm(c),a.resolving=!1,dP()}}return o}function Bj(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ff)?n[Ff]:void 0;return typeof e=="number"?e>=0?e&vP:Uj:e}function zM(n,e,t){let r=1<<n;return!!(t[e+(n>>yP)]&r)}function $M(n,e){return!(n&Ne.Self)&&!(n&Ne.Host&&e)}var fc=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return EP(this._tNode,this._lView,e,t0(r),t)}};function Uj(){return new fc(Fr(),Qe())}function Jr(n){return $f(()=>{let e=n.prototype.constructor,t=e[Tm]||_w(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Tm]||_w(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function _w(n){return IO(n)?()=>{let e=_w(vr(n));return e&&e()}:hc(n)}function jj(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[Ce]&2048&&!Vm(s);){let a=CP(o,s,t,r|Ne.Self,ro);if(a!==ro)return a;let c=o.parent;if(!c){let u=s[zO];if(u){let l=u.get(t,ro,r);if(l!==ro)return l}c=bP(s),s=s[sl]}o=c}return i}function bP(n){let e=n[Be],t=e.type;return t===2?e.declTNode:t===1?n[ki]:null}function _E(n){return Lj(Fr(),n)}function WM(n,e=null,t=null,r){let i=IP(n,e,t,r);return i.resolveInjectorInitializers(),i}function IP(n,e=null,t=null,r,i=new Set){let o=[t||ui,rE(n)];return r=r||(typeof n=="object"?void 0:Rr(n)),new Vf(o,e||oE(),r||null,i)}var En=class n{static THROW_IF_NOT_FOUND=dc;static NULL=new Rm;static create(e,t){if(Array.isArray(e))return WM({name:""},t,e,"");{let r=e.name??"";return WM({name:r},e.parent,e.providers,r)}}static \u0275prov=ne({token:n,providedIn:"any",factory:()=>ce(kO)});static __NG_ELEMENT_ID__=-1};var Hj=new ae("");Hj.__NG_ELEMENT_ID__=n=>{let e=Fr();if(e===null)throw new se(204,!1);if(e.type&2)return e.value;if(n&Ne.Optional)return null;throw new se(204,!1)};var SP=!1,ul=(()=>{class n{static __NG_ELEMENT_ID__=zj;static __NG_ENV_ID__=t=>t}return n})(),xw=class extends ul{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return cl(t)?(e(),()=>{}):(eP(t,e),()=>aj(t,e))}};function zj(){return new xw(Qe())}var Ec=class{},AP=new ae("",{providedIn:"root",factory:()=>!1});var DP=new ae(""),TP=new ae(""),Dc=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new gn(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}return n})(),a0=(()=>{class n{internalPendingTasks=G(Dc);scheduler=G(Ec);add(){let t=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(t)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(t))}}run(t){return A(this,null,function*(){let r=this.add();try{return yield t()}finally{r()}})}static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}return n})(),ww=class extends pn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,HO()&&(this.destroyRef=G(ul,{optional:!0})??void 0,this.pendingTasks=G(Dc,{optional:!0})??void 0)}emit(e){let t=Ke(null);try{super.next(e)}finally{Ke(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof nn&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},$e=ww;function $m(...n){}function MP(n){let e,t;function r(){n=$m;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function GM(n){return queueMicrotask(()=>n()),()=>{n=$m}}var xE="isAngularZone",Wm=xE+"_ID",$j=0,He=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new $e(!1);onMicrotaskEmpty=new $e(!1);onStable=new $e(!1);onError=new $e(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=SP}=e;if(typeof Zone>"u")throw new se(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,qj(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(xE)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new se(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new se(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,Wj,$m,$m);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},Wj={};function wE(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Gj(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){MP(()=>{n.callbackScheduled=!1,Ew(n),n.isCheckStableRunning=!0,wE(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),Ew(n)}function qj(n){let e=()=>{Gj(n)},t=$j++;n._inner=n._inner.fork({name:"angular",properties:{[xE]:!0,[Wm]:t,[Wm+t]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(Kj(c))return r.invokeTask(o,s,a,c);try{return qM(n),r.invokeTask(o,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),KM(n)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return qM(n),r.invoke(o,s,a,c,u)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Yj(c)&&e(),KM(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,Ew(n),wE(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function Ew(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function qM(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function KM(n){n._nesting--,wE(n)}var Cw=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new $e;onMicrotaskEmpty=new $e;onStable=new $e;onError=new $e;run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function Kj(n){return OP(n,"__ignore_ng_zone__")}function Yj(n){return OP(n,"__scheduler_tick__")}function OP(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var co=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Xj=new ae("",{providedIn:"root",factory:()=>{let n=G(He),e=G(co);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function YM(n,e){return CO(n,e)}function Qj(n){return CO(EO,n)}var PP=(YM.required=Qj,YM);function Zj(){return ll(Fr(),Qe())}function ll(n,e){return new ir(lo(n,e))}var ir=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=Zj}return n})();function Jj(n){return n instanceof ir?n.nativeElement:n}function eH(n){return typeof n=="function"&&n[ci]!==void 0}function Tc(n,e){let t=Ax(n,e?.equal),r=t[ci];return t.set=i=>Sf(r,i),t.update=i=>Dx(r,i),t.asReadonly=tH.bind(t),t}function tH(){let n=this[ci];if(n.readonlyFn===void 0){let e=()=>this();e[ci]=n,n.readonlyFn=e}return n.readonlyFn}function RP(n){return eH(n)&&typeof n.set=="function"}function nH(){return this._results[Symbol.iterator]()}var bw=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new pn}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let r=LU(e);(this._changesDetected=!FU(this._results,r,t))&&(this._results=r,this.length=r.length,this.last=r[this.length-1],this.first=r[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=nH};function NP(n){return(n.flags&128)===128}var kP=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(kP||{}),FP=new Map,rH=0;function iH(){return rH++}function oH(n){FP.set(n[r0],n)}function Iw(n){FP.delete(n[r0])}var XM="__ngContext__";function Kf(n,e){qs(e)?(n[XM]=e[r0],oH(e)):n[XM]=e}function LP(n){return BP(n[Bf])}function VP(n){return BP(n[Ni])}function BP(n){for(;n!==null&&!ts(n);)n=n[Ni];return n}var Sw;function UP(n){Sw=n}function sH(){if(Sw!==void 0)return Sw;if(typeof document<"u")return document;throw new se(210,!1)}var c0=new ae("",{providedIn:"root",factory:()=>aH}),aH="ng",EE=new ae(""),Ys=new ae("",{providedIn:"platform",factory:()=>"unknown"});var CE=new ae("",{providedIn:"root",factory:()=>sH().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var cH="h",uH="b";var jP=!1,lH=new ae("",{providedIn:"root",factory:()=>jP});var bE=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(bE||{}),dl=new ae(""),QM=new Set;function Yf(n){QM.has(n)||(QM.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var HP=(()=>{class n{view;node;constructor(t,r){this.view=t,this.node=r}static __NG_ELEMENT_ID__=dH}return n})();function dH(){return new HP(Qe(),Fr())}var Yu=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Yu||{}),zP=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}return n})(),fH=[Yu.EarlyRead,Yu.Write,Yu.MixedReadWrite,Yu.Read],hH=(()=>{class n{ngZone=G(He);scheduler=G(Ec);errorHandler=G(co,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){G(dl,{optional:!0})}execute(){let t=this.sequences.size>0;t&&wt(16),this.executing=!0;for(let r of fH)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),t&&wt(17)}register(t){let{view:r}=t;r!==void 0?((r[Qu]??=[]).push(t),Gf(r),r[Ce]|=8192):this.executing?this.deferredRegistrations.add(t):this.addSequence(t)}addSequence(t){this.sequences.add(t),this.scheduler.notify(7)}unregister(t){this.executing&&this.sequences.has(t)?(t.erroredOrDestroyed=!0,t.pipelinedValue=void 0,t.once=!0):(this.sequences.delete(t),this.deferredRegistrations.delete(t))}maybeTrace(t,r){return r?r.run(bE.AFTER_NEXT_RENDER,t):t()}static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new n})}return n})(),Aw=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,t,r,i,o,s=null){this.impl=e,this.hooks=t,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Qu];e&&(this.view[Qu]=e.filter(t=>t!==this))}};function IE(n,e){!e?.injector&&sE(IE);let t=e?.injector??G(En);return Yf("NgAfterNextRender"),gH(n,t,e,!0)}function pH(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function gH(n,e,t,r){let i=e.get(zP);i.impl??=e.get(hH);let o=e.get(dl,null,{optional:!0}),s=t?.phase??Yu.MixedReadWrite,a=t?.manualCleanup!==!0?e.get(ul):null,c=e.get(HP,null,{optional:!0}),u=new Aw(i.impl,pH(n,s),c?.view,r,a,o?.snapshot(null));return i.impl.register(u),u}var mH=()=>null;function $P(n,e,t=!1){return mH(n,e,t)}function WP(n,e){let t=n.contentQueries;if(t!==null){let r=Ke(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];fE(o),a.contentQueries(2,e[s],s)}}}finally{Ke(r)}}}function Dw(n,e,t){fE(0);let r=Ke(null);try{e(n,t)}finally{Ke(r)}}function GP(n,e,t){if(WO(e)){let r=Ke(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Ke(r)}}}var uo=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(uo||{});var wm;function vH(){if(wm===void 0&&(wm=null,lc.trustedTypes))try{wm=lc.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return wm}function ZM(n){return vH()?.createScriptURL(n)||n}var Gm=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${xO})`}};function u0(n){return n instanceof Gm?n.changingThisBreaksApplicationSecurity:n}function qP(n,e){let t=yH(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${xO})`)}return t===e}function yH(n){return n instanceof Gm&&n.getTypeName()||null}var _H=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function xH(n){return n=String(n),n.match(_H)?n:"unsafe:"+n}var SE=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(SE||{});function AE(n){let e=YP();return e?e.sanitize(SE.URL,n)||"":qP(n,"URL")?u0(n):xH(Ju(n))}function wH(n){let e=YP();if(e)return ZM(e.sanitize(SE.RESOURCE_URL,n)||"");if(qP(n,"ResourceURL"))return ZM(u0(n));throw new se(904,!1)}function EH(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?wH:AE}function KP(n,e,t){return EH(e,t)(n)}function YP(){let n=Qe();return n&&n[Xo].sanitizer}function XP(n){return n instanceof Function?n():n}function CH(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}var QP="ng-template";function bH(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&CH(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(DE(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function DE(n){return n.type===4&&n.value!==QP}function IH(n,e,t){let r=n.type===4&&!t?QP:n.value;return e===r}function SH(n,e,t){let r=4,i=n.attrs,o=i!==null?TH(i):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!Ri(r)&&!Ri(c))return!1;if(s&&Ri(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!IH(n,c,t)||c===""&&e.length===1){if(Ri(r))return!1;s=!0}}else if(r&8){if(i===null||!bH(n,i,c,t)){if(Ri(r))return!1;s=!0}}else{let u=e[++a],l=AH(c,i,DE(n),t);if(l===-1){if(Ri(r))return!1;s=!0;continue}if(u!==""){let d;if(l>o?d="":d=i[l+1].toLowerCase(),r&2&&u!==d){if(Ri(r))return!1;s=!0}}}}return Ri(r)||s}function Ri(n){return(n&1)===0}function AH(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return MH(e,n)}function DH(n,e,t=!1){for(let r=0;r<e.length;r++)if(SH(n,e[r],t))return!0;return!1}function TH(n){for(let e=0;e<n.length;e++){let t=n[e];if(gP(t))return e}return n.length}function MH(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function JM(n,e){return n?":not("+e.trim()+")":e}function OH(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Ri(s)&&(e+=JM(o,i),i=""),r=s,o=o||!Ri(r);t++}return i!==""&&(e+=JM(o,i)),e}function PH(n){return n.map(OH).join(",")}function RH(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Ri(i))break;i=o}r++}return t.length&&e.push(1,...t),e}var ns={};function NH(n,e){return n.createText(e)}function kH(n,e,t){n.setValue(e,t)}function ZP(n,e,t){return n.createElement(e,t)}function qm(n,e,t,r,i){n.insertBefore(e,t,r,i)}function JP(n,e,t){n.appendChild(e,t)}function eO(n,e,t,r,i){r!==null?qm(n,e,t,r,i):JP(n,e,t)}function FH(n,e,t){n.removeChild(null,e,t)}function LH(n,e,t){n.setAttribute(e,"style",t)}function VH(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function eR(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Oj(n,e,r),i!==null&&VH(n,e,i),o!==null&&LH(n,e,o)}function TE(n,e,t,r,i,o,s,a,c,u,l){let d=Qr+r,f=d+i,h=BH(d,f),g=typeof u=="function"?u():u;return h[Be]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:l}}function BH(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:ns);return t}function UH(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=TE(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function ME(n,e,t,r,i,o,s,a,c,u,l){let d=e.blueprint.slice();return d[es]=i,d[Ce]=r|4|128|8|64|1024,(u!==null||n&&n[Ce]&2048)&&(d[Ce]|=2048),ZO(d),d[tr]=d[sl]=n,d[Nr]=t,d[Xo]=s||n&&n[Xo],d[Mn]=a||n&&n[Mn],d[mc]=c||n&&n[mc]||null,d[ki]=o,d[r0]=iH(),d[Nm]=l,d[zO]=u,d[io]=e.type==2?n[io]:d,d}function jH(n,e,t){let r=lo(e,n),i=UH(t),o=n[Xo].rendererFactory,s=OE(n,ME(n,i,null,tR(t),r,e,null,o.createRenderer(r,t),null,null,null));return n[e.index]=s}function tR(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function nR(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function OE(n,e){return n[Bf]?n[VM][Ni]=e:n[Bf]=e,n[VM]=e,e}function $(n=1){rR(rr(),Qe(),Ac()+n,!1)}function rR(n,e,t,r){if(!r)if((e[Ce]&3)===3){let o=n.preOrderCheckHooks;o!==null&&bm(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Im(e,o,0,t)}xc(t)}var l0=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(l0||{});function Tw(n,e,t,r){let i=Ke(null);try{let[o,s,a]=n.inputs[t],c=null;(s&l0.SignalBased)!==0&&(c=e[o][ci]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(e,r)),n.setInput!==null?n.setInput(e,c,r,t,o):GO(e,c,o,r)}finally{Ke(i)}}function iR(n,e,t,r,i){let o=Ac(),s=r&2;try{xc(-1),s&&e.length>Qr&&rR(n,e,Qr,!1),wt(s?2:0,i),t(r,i)}finally{xc(o),wt(s?3:1,i)}}function PE(n,e,t){qH(n,e,t),(t.flags&64)===64&&KH(n,e,t)}function oR(n,e,t=lo){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function HH(n,e,t,r){let o=r.get(lH,jP)||t===uo.ShadowDom,s=n.selectRootElement(e,o);return zH(s),s}function zH(n){$H(n)}var $H=()=>null;function WH(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function sR(n,e,t,r,i,o,s,a){if(!a&&RE(e,n,t,r,i)){al(e)&&GH(t,e.index);return}if(e.type&3){let c=lo(e,t);r=WH(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(c,r,i)}else e.type&12}function GH(n,e){let t=ao(e,n);t[Ce]&16||(t[Ce]|=64)}function qH(n,e,t){let r=t.directiveStart,i=t.directiveEnd;al(t)&&jH(e,t,n.data[r+t.componentOffset]),n.firstCreatePass||zm(t,e);let o=t.initialInputs;for(let s=r;s<i;s++){let a=n.data[s],c=jf(e,n,s,t);if(Kf(c,e),o!==null&&ZH(e,s-r,c,a,t,o),oo(a)){let u=ao(t.index,e);u[Nr]=jf(e,n,s,t)}}}function KH(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=Ej();try{xc(o);for(let a=r;a<i;a++){let c=n.data[a],u=e[a];mw(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&YH(c,u)}}finally{xc(-1),mw(s)}}function YH(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function aR(n,e){let t=n.directiveRegistry,r=null;if(t)for(let i=0;i<t.length;i++){let o=t[i];DH(e,o.selectors,!1)&&(r??=[],oo(o)?r.unshift(o):r.push(o))}return r}function XH(n,e,t,r,i,o){let s=lo(n,e);QH(e[Mn],s,o,n.value,t,r,i)}function QH(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?Ju(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function ZH(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];Tw(r,t,c,u)}}function JH(n,e){let t=n[mc],r=t?t.get(co,null):null;r&&r.handleError(e)}function RE(n,e,t,r,i){let o=n.inputs?.[r],s=n.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1],d=e.data[u];Tw(d,t[u],l,i),a=!0}if(o)for(let c of o){let u=t[c],l=e.data[c];Tw(l,u,r,i),a=!0}return a}function ez(n,e){let t=ao(e,n),r=t[Be];tz(r,t);let i=t[es];i!==null&&t[Nm]===null&&(t[Nm]=$P(i,t[mc])),wt(18),NE(r,t,t[Nr]),wt(19,t[Nr])}function tz(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function NE(n,e,t){hE(e);try{let r=n.viewQuery;r!==null&&Dw(1,r,t);let i=n.template;i!==null&&iR(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[Qo]?.finishViewCreation(n),n.staticContentQueries&&WP(n,e),n.staticViewQueries&&Dw(2,n.viewQuery,t);let o=n.components;o!==null&&nz(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ce]&=-5,pE()}}function nz(n,e){for(let t=0;t<e.length;t++)ez(n,e[t])}function rz(n,e,t,r){let i=Ke(null);try{let o=e.tView,a=n[Ce]&4096?4096:16,c=ME(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=n[e.index];c[vc]=u;let l=n[Qo];return l!==null&&(c[Qo]=l.createEmbeddedView(o)),NE(o,c,t),c}finally{Ke(i)}}function tO(n,e){return!e||e.firstChild===null||NP(n)}var iz;function kE(n,e){return iz(n,e)}var Zo=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Zo||{});function cR(n){return(n.flags&32)===32}function Xu(n,e,t,r,i){if(r!=null){let o,s=!1;ts(r)?o=r:qs(r)&&(s=!0,r=r[es]);let a=so(r);n===0&&t!==null?i==null?JP(e,t,a):qm(e,t,a,i||null,!0):n===1&&t!==null?qm(e,t,a,i||null,!0):n===2?FH(e,a,s):n===3&&e.destroyNode(a),o!=null&&mz(e,n,o,t,i)}}function oz(n,e){uR(n,e),e[es]=null,e[ki]=null}function sz(n,e,t,r,i,o){r[es]=i,r[ki]=e,d0(n,r,t,1,i,o)}function uR(n,e){e[Xo].changeDetectionScheduler?.notify(9),d0(n,e,e[Mn],2,null,null)}function az(n){let e=n[Bf];if(!e)return Zx(n[Be],n);for(;e;){let t=null;if(qs(e))t=e[Bf];else{let r=e[Xr];r&&(t=r)}if(!t){for(;e&&!e[Ni]&&e!==n;)qs(e)&&Zx(e[Be],e),e=e[tr];e===null&&(e=n),qs(e)&&Zx(e[Be],e),t=e&&e[Ni]}e=t}}function FE(n,e){let t=n[tl],r=t.indexOf(e);t.splice(r,1)}function lR(n,e){if(cl(e))return;let t=e[Mn];t.destroyNode&&d0(n,e,t,3,null,null),az(e)}function Zx(n,e){if(cl(e))return;let t=Ke(null);try{e[Ce]&=-129,e[Ce]|=256,e[li]&&bx(e[li]),uz(n,e),cz(n,e),e[Be].type===1&&e[Mn].destroy();let r=e[vc];if(r!==null&&ts(e[tr])){r!==e[tr]&&FE(r,e);let i=e[Qo];i!==null&&i.detachView(n)}Iw(e)}finally{Ke(t)}}function cz(n,e){let t=n.cleanup,r=e[km];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[t[s+1]];t[s].call(a)}r!==null&&(e[km]=null);let i=e[Gs];if(i!==null){e[Gs]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[Fm];if(o!==null){e[Fm]=null;for(let s of o)s.destroy()}}function uz(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof wc)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];wt(4,a,c);try{c.call(a)}finally{wt(5,a,c)}}else{wt(4,i,o);try{o.call(i)}finally{wt(5,i,o)}}}}}function lz(n,e,t){return dz(n,e.parent,t)}function dz(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[es];if(al(r)){let{encapsulation:i}=n.data[r.directiveStart+r.componentOffset];if(i===uo.None||i===uo.Emulated)return null}return lo(r,t)}function fz(n,e,t){return pz(n,e,t)}function hz(n,e,t){return n.type&40?lo(n,t):null}var pz=hz,nO;function LE(n,e,t,r){let i=lz(n,r,e),o=e[Mn],s=r.parent||e[ki],a=fz(s,r,e);if(i!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)eO(o,i,t[c],a,!1);else eO(o,i,t,a,!1);nO!==void 0&&nO(o,r,e,t,i)}function kf(n,e){if(e!==null){let t=e.type;if(t&3)return lo(e,n);if(t&4)return Mw(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return kf(n,r);{let i=n[e.index];return ts(i)?Mw(-1,i):so(i)}}else{if(t&128)return kf(n,e.next);if(t&32)return kE(e,n)()||so(n[e.index]);{let r=dR(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=_c(n[io]);return kf(i,r)}else return kf(n,e.next)}}}return null}function dR(n,e){if(e!==null){let r=n[io][ki],i=e.projection;return r.projection[i]}return null}function Mw(n,e){let t=Xr+n+1;if(t<e.length){let r=e[t],i=r[Be].firstChild;if(i!==null)return kf(r,i)}return e[yc]}function VE(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&Kf(so(a),r),t.flags|=2),!cR(t))if(c&8)VE(n,e,t.child,r,i,o,!1),Xu(e,n,i,a,o);else if(c&32){let u=kE(t,r),l;for(;l=u();)Xu(e,n,i,l,o);Xu(e,n,i,a,o)}else c&16?gz(n,e,r,t,i,o):Xu(e,n,i,a,o);t=s?t.projectionNext:t.next}}function d0(n,e,t,r,i,o){VE(t,r,n.firstChild,e,i,o,!1)}function gz(n,e,t,r,i,o){let s=t[io],c=s[ki].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];Xu(e,n,i,l,o)}else{let u=c,l=s[tr];NP(r)&&(u.flags|=128),VE(n,e,u,l,i,o,!0)}}function mz(n,e,t,r,i){let o=t[yc],s=so(t);o!==s&&Xu(e,n,r,o,i);for(let a=Xr;a<t.length;a++){let c=t[a];d0(c[Be],c,n,e,r,o)}}function vz(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:Zo.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Zo.Important),n.setStyle(t,r,i,o))}}function Km(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(so(o)),ts(o)&&yz(o,r);let s=t.type;if(s&8)Km(n,e,t.child,r);else if(s&32){let a=kE(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=dR(e,t);if(Array.isArray(a))r.push(...a);else{let c=_c(e[io]);Km(c[Be],c,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function yz(n,e){for(let t=Xr;t<n.length;t++){let r=n[t],i=r[Be].firstChild;i!==null&&Km(r[Be],r,i,e)}n[yc]!==n[es]&&e.push(n[yc])}function fR(n){if(n[Qu]!==null){for(let e of n[Qu])e.impl.addSequence(e);n[Qu].length=0}}var hR=[];function _z(n){return n[li]??xz(n)}function xz(n){let e=hR.pop()??Object.create(Ez);return e.lView=n,e}function wz(n){n.lView[li]!==n&&(n.lView=null,hR.push(n))}var Ez=xe(Q({},bf),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Gf(n.lView)},consumerOnSignalRead(){this.lView[li]=this}});function Cz(n){let e=n[li]??Object.create(bz);return e.lView=n,e}var bz=xe(Q({},bf),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=_c(n.lView);for(;e&&!pR(e[Be]);)e=_c(e);e&&JO(e)},consumerOnSignalRead(){this.lView[li]=this}});function pR(n){return n.type!==2}function gR(n){if(n[Fm]===null)return;let e=!0;for(;e;){let t=!1;for(let r of n[Fm])r.dirty&&(t=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=t&&!!(n[Ce]&8192)}}var Iz=100;function mR(n,e=!0,t=0){let i=n[Xo].rendererFactory,o=!1;o||i.begin?.();try{Sz(n,t)}catch(s){throw e&&JH(n,s),s}finally{o||i.end?.()}}function Sz(n,e){let t=iP();try{UM(!0),Ow(n,e);let r=0;for(;i0(n);){if(r===Iz)throw new se(103,!1);r++,Ow(n,1)}}finally{UM(t)}}function Az(n,e,t,r){if(cl(e))return;let i=e[Ce],o=!1,s=!1;hE(e);let a=!0,c=null,u=null;o||(pR(n)?(u=_z(e),c=jg(u)):yx()===null?(a=!1,u=Cz(e),c=jg(u)):e[li]&&(bx(e[li]),e[li]=null));try{ZO(e),_j(n.bindingStartIndex),t!==null&&iR(n,e,t,2,r);let l=(i&3)===3;if(!o)if(l){let h=n.preOrderCheckHooks;h!==null&&bm(e,h,null)}else{let h=n.preOrderHooks;h!==null&&Im(e,h,0,null),Xx(e,0)}if(s||Dz(e),gR(e),vR(e,0),n.contentQueries!==null&&WP(n,e),!o)if(l){let h=n.contentCheckHooks;h!==null&&bm(e,h)}else{let h=n.contentHooks;h!==null&&Im(e,h,1),Xx(e,1)}Mz(n,e);let d=n.components;d!==null&&_R(e,d,0);let f=n.viewQuery;if(f!==null&&Dw(2,f,r),!o)if(l){let h=n.viewCheckHooks;h!==null&&bm(e,h)}else{let h=n.viewHooks;h!==null&&Im(e,h,2),Xx(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[Yx]){for(let h of e[Yx])h();e[Yx]=null}o||(fR(e),e[Ce]&=-73)}catch(l){throw o||Gf(e),l}finally{u!==null&&(Ex(u,c),a&&wz(u)),pE()}}function vR(n,e){for(let t=LP(n);t!==null;t=VP(t))for(let r=Xr;r<t.length;r++){let i=t[r];yR(i,e)}}function Dz(n){for(let e=LP(n);e!==null;e=VP(e)){if(!(e[Ce]&2))continue;let t=e[tl];for(let r=0;r<t.length;r++){let i=t[r];JO(i)}}}function Tz(n,e,t){wt(18);let r=ao(e,n);yR(r,t),wt(19,r[Nr])}function yR(n,e){uE(n)&&Ow(n,e)}function Ow(n,e){let r=n[Be],i=n[Ce],o=n[li],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Cx(o)),s||=!1,o&&(o.dirty=!1),n[Ce]&=-9217,s)Az(r,n,r.template,n[Nr]);else if(i&8192){gR(n),vR(n,1);let a=r.components;a!==null&&_R(n,a,1),fR(n)}}function _R(n,e,t){for(let r=0;r<e.length;r++)Tz(n,e[r],t)}function Mz(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)xc(~i);else{let o=i,s=t[++r],a=t[++r];wj(s,o);let c=e[o];wt(24,c),a(2,c),wt(25,c)}}}finally{xc(-1)}}function BE(n,e){let t=iP()?64:1088;for(n[Xo].changeDetectionScheduler?.notify(e);n;){n[Ce]|=t;let r=_c(n);if(Vm(n)&&!r)return n;n=r}return null}function xR(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function Oz(n,e,t,r=!0){let i=e[Be];if(Pz(i,e,n,t),r){let s=Mw(t,n),a=e[Mn],c=a.parentNode(n[yc]);c!==null&&sz(i,n[ki],a,e,c,s)}let o=e[Nm];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Pw(n,e){if(n.length<=Xr)return;let t=Xr+e,r=n[t];if(r){let i=r[vc];i!==null&&i!==n&&FE(i,r),e>0&&(n[t-1][Ni]=r[Ni]);let o=Pm(n,Xr+e);oz(r[Be],r);let s=o[Qo];s!==null&&s.detachView(o[Be]),r[tr]=null,r[Ni]=null,r[Ce]&=-129}return r}function Pz(n,e,t,r){let i=Xr+r,o=t.length;r>0&&(t[i-1][Ni]=e),r<o-Xr?(e[Ni]=t[i],NO(t,Xr+r,e)):(t.push(e),e[Ni]=null),e[tr]=t;let s=e[vc];s!==null&&t!==s&&wR(s,e);let a=e[Qo];a!==null&&a.insertView(n),pw(e),e[Ce]|=128}function wR(n,e){let t=n[tl],r=e[tr];if(qs(r))n[Ce]|=2;else{let i=r[tr][io];e[io]!==i&&(n[Ce]|=2)}t===null?n[tl]=[e]:t.push(e)}var Hf=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[Be];return Km(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r}get context(){return this._lView[Nr]}set context(e){this._lView[Nr]=e}get destroyed(){return cl(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[tr];if(ts(e)){let t=e[Lm],r=t?t.indexOf(this):-1;r>-1&&(Pw(e,r),Pm(t,r))}this._attachedToViewContainer=!1}lR(this._lView[Be],this._lView)}onDestroy(e){eP(this._lView,e)}markForCheck(){BE(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[Ce]&=-129}reattach(){pw(this._lView),this._lView[Ce]|=128}detectChanges(){this._lView[Ce]|=1024,mR(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new se(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Vm(this._lView),t=this._lView[vc];t!==null&&!e&&FE(t,this._lView),uR(this._lView[Be],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new se(902,!1);this._appRef=e;let t=Vm(this._lView),r=this._lView[vc];r!==null&&!t&&wR(r,this._lView),pw(this._lView)}};var Cc=(()=>{class n{static __NG_ELEMENT_ID__=kz}return n})(),Rz=Cc,Nz=class extends Rz{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=rz(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Hf(i)}};function kz(){return UE(Fr(),Qe())}function UE(n,e){return n.type&4?new Nz(e,n,ll(n,e)):null}function jE(n,e,t,r,i){let o=n.data[e];if(o===null)o=Fz(n,e,t,r,i),xj()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=gj();o.injectorIndex=s===null?-1:s.injectorIndex}return qf(o,!0),o}function Fz(n,e,t,r,i){let o=nP(),s=rP(),a=s?o:o&&o.parent,c=n.data[e]=Vz(n,a,t,e,r,i);return Lz(n,c,o,s),c}function Lz(n,e,t,r){n.firstChild===null&&(n.firstChild=e),t!==null&&(r?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function Vz(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return fj()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var vxe=new RegExp(`^(\\d+)*(${uH}|${cH})*(.*)`);var Bz=()=>null;function rO(n,e){return Bz(n,e)}var Uz=class{},ER=class{},Rw=class{resolveComponentFactory(e){throw Error(`No component factory found for ${Rr(e)}.`)}},f0=class{static NULL=new Rw},nl=class{},fo=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>jz()}return n})();function jz(){let n=Qe(),e=Fr(),t=ao(e.index,n);return(qs(t)?t:n)[Mn]}var Hz=(()=>{class n{static \u0275prov=ne({token:n,providedIn:"root",factory:()=>null})}return n})();var Jx={},Nw=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=t0(r);let i=this.injector.get(e,Jx,r);return i!==Jx||t===Jx?i:this.parentInjector.get(e,t,r)}};function iO(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=OM(i,a);else if(o==2){let c=a,u=e[++s];r=OM(r,c+": "+u+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function z(n,e=Ne.Default){let t=Qe();if(t===null)return ce(n,e);let r=Fr();return EP(r,t,vr(n),e)}function CR(){let n="invalid";throw new Error(n)}function bR(n,e,t,r,i){let o=r===null?null:{"":-1},s=i(n,t);if(s!==null){let a,c=null,u=null,l=$z(s);l===null?a=s:[a,c,u]=l,qz(n,e,t,a,o,c,u)}o!==null&&r!==null&&zz(t,r,o)}function zz(n,e,t){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new se(-301,!1);r.push(e[i],o)}}function $z(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&oo(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let r=null,i=null,o=null;for(let s of n)s.findHostDirectiveDefs!==null&&(r??=[],i??=new Map,o??=new Map,Wz(s,r,o,i)),s===e&&(r??=[],r.push(s));return r!==null?(r.push(...e===null?n:n.slice(1)),[r,i,o]):null}function Wz(n,e,t,r){let i=e.length;n.findHostDirectiveDefs(n,e,r),t.set(n,[i,e.length-1])}function Gz(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function qz(n,e,t,r,i,o,s){let a=r.length,c=!1;for(let f=0;f<a;f++){let h=r[f];!c&&oo(h)&&(c=!0,Gz(n,t,f)),yw(zm(t,e),n,h.type)}Jz(t,n.data.length,a);for(let f=0;f<a;f++){let h=r[f];h.providersResolver&&h.providersResolver(h)}let u=!1,l=!1,d=nR(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let f=0;f<a;f++){let h=r[f];if(t.mergedAttrs=Uf(t.mergedAttrs,h.hostAttrs),Yz(n,t,e,d,h),Zz(d,h,i),s!==null&&s.has(h)){let[m,y]=s.get(h);t.directiveToIndex.set(h.type,[d,m+t.directiveStart,y+t.directiveStart])}else(o===null||!o.has(h))&&t.directiveToIndex.set(h.type,d);h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let g=h.type.prototype;!u&&(g.ngOnChanges||g.ngOnInit||g.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),u=!0),!l&&(g.ngOnChanges||g.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),l=!0),d++}Kz(n,t,o)}function Kz(n,e,t){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=n.data[r];if(t===null||!t.has(i))oO(0,e,i,r),oO(1,e,i,r),aO(e,r,!1);else{let o=t.get(i);sO(0,e,o,r),sO(1,e,o,r),aO(e,r,!0)}}}function oO(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),IR(e,o)}}function sO(n,e,t,r){let i=n===0?t.inputs:t.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),IR(e,s)}}function IR(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function aO(n,e,t){let{attrs:r,inputs:i,hostDirectiveInputs:o}=n;if(r===null||!t&&i===null||t&&o===null||DE(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!t&&i.hasOwnProperty(c)){let u=i[c];for(let l of u)if(l===e){s??=[],s.push(c,r[a+1]);break}}else if(t&&o.hasOwnProperty(c)){let u=o[c];for(let l=0;l<u.length;l+=2)if(u[l]===e){s??=[],s.push(u[l+1],r[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function Yz(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=hc(i.type,!0)),s=new wc(o,oo(i),z);n.blueprint[r]=s,t[r]=s,Xz(n,e,r,nR(n,t,i.hostVars,ns),i)}function Xz(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Qz(s)!=a&&s.push(a),s.push(t,r,o)}}function Qz(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Zz(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;oo(e)&&(t[""]=n)}}function Jz(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function SR(n,e,t,r,i,o,s,a){let c=e.consts,u=Bm(c,s),l=jE(e,n,2,r,u);return o&&bR(e,t,l,Bm(c,a),i),l.mergedAttrs=Uf(l.mergedAttrs,l.attrs),l.attrs!==null&&iO(l,l.attrs,!1),l.mergedAttrs!==null&&iO(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function AR(n,e){hP(n,e),WO(e)&&n.queries.elementEnd(e)}var Ym=class extends f0{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=gc(e);return new rl(t,this.ngModule)}};function e$(n){return Object.keys(n).map(e=>{let[t,r,i]=n[e],o={propName:t,templateName:e,isSignal:(r&l0.SignalBased)!==0};return i&&(o.transform=i),o})}function t$(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function n$(n,e,t){let r=e instanceof er?e:e?.injector;return r&&n.getStandaloneInjector!==null&&(r=n.getStandaloneInjector(r)||r),r?new Nw(t,r):t}function r$(n){let e=n.get(nl,null);if(e===null)throw new se(407,!1);let t=n.get(Hz,null),r=n.get(Ec,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:r}}function i$(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return ZP(e,t,t==="svg"?nj:t==="math"?rj:null)}var rl=class extends ER{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=e$(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=t$(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=PH(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,r,i){wt(22);let o=Ke(null);try{let s=this.componentDef,a=r?["ng-version","19.2.11"]:RH(this.componentDef.selectors[0]),c=TE(0,null,null,1,0,null,null,null,null,[a],null),u=n$(s,i||this.ngModule,e),l=r$(u),d=l.rendererFactory.createRenderer(null,s),f=r?HH(d,r,s.encapsulation,u):i$(s,d),h=ME(null,c,null,512|tR(s),null,null,l,d,u,null,$P(f,u,!0));h[Qr]=f,hE(h);let g=null;try{let m=SR(Qr,c,h,"#host",()=>[this.componentDef],!0,0);f&&(eR(d,f,m),Kf(f,h)),PE(c,h,m),GP(c,m,h),AR(c,m),t!==void 0&&o$(m,this.ngContentSelectors,t),g=ao(m.index,h),h[Nr]=g[Nr],NE(c,h,null)}catch(m){throw g!==null&&Iw(g),Iw(h),m}finally{wt(23),pE()}return new kw(this.componentType,h)}finally{Ke(o)}}},kw=class extends Uz{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=QO(t[Be],Qr),this.location=ll(this._tNode,t),this.instance=ao(this._tNode.index,t)[Nr],this.hostView=this.changeDetectorRef=new Hf(t,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,o=RE(r,i[Be],i,e,t);this.previousInputValues.set(e,t);let s=ao(r.index,i);BE(s,1)}get injector(){return new fc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function o$(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Xs=(()=>{class n{static __NG_ELEMENT_ID__=s$}return n})();function s$(){let n=Fr();return TR(n,Qe())}var a$=Xs,DR=class extends a${_lContainer;_hostTNode;_hostLView;constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return ll(this._hostTNode,this._hostLView)}get injector(){return new fc(this._hostTNode,this._hostLView)}get parentInjector(){let e=yE(this._hostTNode,this._hostLView);if(mP(e)){let t=jm(e,this._hostLView),r=Um(e),i=t[Be].data[r+8];return new fc(i,t)}else return new fc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=cO(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Xr}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=rO(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,tO(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!ZU(e),a;if(s)a=t;else{let g=t||{};a=g.index,r=g.injector,i=g.projectableNodes,o=g.environmentInjector||g.ngModuleRef}let c=s?e:new rl(gc(e)),u=r||this.parentInjector;if(!o&&c.ngModule==null){let m=(s?u:this.parentInjector).get(er,null);m&&(o=m)}let l=gc(c.componentType??{}),d=rO(this._lContainer,l?.id??null),f=d?.firstChild??null,h=c.create(u,i,f,o);return this.insertImpl(h.hostView,a,tO(this._hostTNode,d)),h}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(oj(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[tr],u=new DR(c,c[ki],c[tr]);u.detach(u.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Oz(s,i,o,r),e.attachToViewContainerRef(),NO(ew(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=cO(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=Pw(this._lContainer,t);r&&(Pm(ew(this._lContainer),t),lR(r[Be],r))}detach(e){let t=this._adjustIndex(e,-1),r=Pw(this._lContainer,t);return r&&Pm(ew(this._lContainer),t)!=null?new Hf(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function cO(n){return n[Lm]}function ew(n){return n[Lm]||(n[Lm]=[])}function TR(n,e){let t,r=e[n.index];return ts(r)?t=r:(t=xR(r,e,null,n),e[n.index]=t,OE(e,t)),u$(t,e,n,r),new DR(t,n,e)}function c$(n,e){let t=n[Mn],r=t.createComment(""),i=lo(e,n),o=t.parentNode(i);return qm(t,o,r,t.nextSibling(i),!1),r}var u$=f$,l$=()=>!1;function d$(n,e,t){return l$(n,e,t)}function f$(n,e,t,r){if(n[yc])return;let i;t.type&8?i=so(r):i=c$(e,t),n[yc]=i}var Fw=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Lw=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let r=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let o=0;o<r;o++){let s=t.getByIndex(o),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)HE(e,t).matches!==null&&this.queries[t].setDirty()}},Vw=class{flags;read;predicate;constructor(e,t,r=null){this.flags=t,this.read=r,typeof e=="string"?this.predicate=x$(e):this.predicate=e}},Bw=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){let i=t!==null?t.length:0,o=this.getByIndex(r).embeddedTView(e,i);o&&(o.indexInDeclarationView=r,t!==null?t.push(o):t=[o])}return t!==null?new n(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Uw=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,r=e.parent;for(;r!==null&&r.type&8&&r.index!==t;)r=r.parent;return t===(r!==null?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){let o=r[i];this.matchTNodeWithReadOption(e,t,h$(t,o)),this.matchTNodeWithReadOption(e,t,Sm(t,e,o,!1,!1))}else r===Cc?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Sm(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(r!==null){let i=this.metadata.read;if(i!==null)if(i===ir||i===Xs||i===Cc&&t.type&4)this.addMatch(t.index,-2);else{let o=Sm(t,e,i,!1,!1);o!==null&&this.addMatch(t.index,o)}else this.addMatch(t.index,r)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function h$(n,e){let t=n.localNames;if(t!==null){for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1]}return null}function p$(n,e){return n.type&11?ll(n,e):n.type&4?UE(n,e):null}function g$(n,e,t,r){return t===-1?p$(e,n):t===-2?m$(n,e,r):jf(n,n[Be],t,e)}function m$(n,e,t){if(t===ir)return ll(e,n);if(t===Cc)return UE(e,n);if(t===Xs)return TR(e,n)}function MR(n,e,t,r){let i=e[Qo].queries[r];if(i.matches===null){let o=n.data,s=t.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let u=s[c];if(u<0)a.push(null);else{let l=o[u];a.push(g$(e,l,s[c+1],t.metadata.read))}}i.matches=a}return i.matches}function jw(n,e,t,r){let i=n.queries.getByIndex(t),o=i.matches;if(o!==null){let s=MR(n,e,i,t);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)r.push(s[a/2]);else{let u=o[a+1],l=e[-c];for(let d=Xr;d<l.length;d++){let f=l[d];f[vc]===f[tr]&&jw(f[Be],f,u,r)}if(l[tl]!==null){let d=l[tl];for(let f=0;f<d.length;f++){let h=d[f];jw(h[Be],h,u,r)}}}}}return r}function v$(n,e){return n[Qo].queries[e].queryList}function y$(n,e,t){let r=new bw((t&4)===4);return cj(n,e,r,r.destroy),(e[Qo]??=new Lw).queries.push(new Fw(r))-1}function _$(n,e,t){let r=rr();return r.firstCreatePass&&(w$(r,new Vw(n,e,t),-1),(e&2)===2&&(r.staticViewQueries=!0)),y$(r,Qe(),e)}function x$(n){return n.split(",").map(e=>e.trim())}function w$(n,e,t){n.queries===null&&(n.queries=new Bw),n.queries.track(new Uw(e,t))}function HE(n,e){return n.queries.getByIndex(e)}function E$(n,e){let t=n[Be],r=HE(t,e);return r.crossesNgTemplate?jw(t,n,e,[]):MR(t,n,r,e)}var il=class{},zE=class{};var Hw=class extends il{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new Ym(this);constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t;let o=LO(e);this._bootstrapComponents=XP(o.bootstrap),this._r3Injector=IP(e,t,[{provide:il,useValue:this},{provide:f0,useValue:this.componentFactoryResolver},...r],Rr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},zw=class extends zE{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Hw(this.moduleType,e,[])}};var Xm=class extends il{injector;componentFactoryResolver=new Ym(this);instance=null;constructor(e){super();let t=new Vf([...e.providers,{provide:il,useValue:this},{provide:f0,useValue:this.componentFactoryResolver}],e.parent||oE(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Xf(n,e,t=null){return new Xm({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var C$=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=VO(!1,t.type),i=r.length>0?Xf([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=ne({token:n,providedIn:"environment",factory:()=>new n(ce(er))})}return n})();function it(n){return $f(()=>{let e=OR(n),t=xe(Q({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===kP.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(C$).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||uo.Emulated,styles:n.styles||ui,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Yf("NgStandalone"),PR(t);let r=n.dependencies;return t.directiveDefs=uO(r,!1),t.pipeDefs=uO(r,!0),t.id=D$(t),t})}function b$(n){return gc(n)||jU(n)}function I$(n){return n!==null}function Lr(n){return $f(()=>({type:n.type,bootstrap:n.bootstrap||ui,declarations:n.declarations||ui,imports:n.imports||ui,exports:n.exports||ui,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function S$(n,e){if(n==null)return pc;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=l0.None,c=null),t[o]=[r,a,c],e[o]=s}return t}function A$(n){if(n==null)return pc;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Ze(n){return $f(()=>{let e=OR(n);return PR(e),e})}function h0(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function OR(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||pc,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||ui,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:S$(n.inputs,e),outputs:A$(n.outputs),debugInfo:null}}function PR(n){n.features?.forEach(e=>e(n))}function uO(n,e){if(!n)return null;let t=e?HU:b$;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(I$)}function D$(n){let e=0,t=typeof n.consts=="function"?"":n.consts,r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function T$(n){return Object.getPrototypeOf(n.prototype).constructor}function Cn(n){let e=T$(n.type),t=!0,r=[n];for(;e;){let i;if(oo(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new se(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=tw(n.inputs),s.declaredInputs=tw(n.declaredInputs),s.outputs=tw(n.outputs);let a=i.hostBindings;a&&N$(n,a);let c=i.viewQuery,u=i.contentQueries;if(c&&P$(n,c),u&&R$(n,u),M$(n,i),yU(n.outputs,i.outputs),oo(i)&&i.data.animation){let l=n.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===Cn&&(t=!1)}}e=Object.getPrototypeOf(e)}O$(r)}function M$(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t])}}function O$(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Uf(i.hostAttrs,t=Uf(t,i.hostAttrs))}}function tw(n){return n===pc?{}:n===ui?[]:n}function P$(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function R$(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function N$(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function RR(n){return F$(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function k$(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function F$(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function NR(n,e,t){return n[e]=t}function Ks(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function kR(n,e,t,r){let i=Ks(n,e,t);return Ks(n,e+1,r)||i}function L$(n,e,t,r,i,o,s,a,c){let u=e.consts,l=jE(e,n,4,s||null,a||null);tP()&&bR(e,t,l,Bm(u,c),aR),l.mergedAttrs=Uf(l.mergedAttrs,l.attrs),hP(e,l);let d=l.tView=TE(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function V$(n,e,t,r,i,o,s,a,c,u){let l=t+Qr,d=e.firstCreatePass?L$(l,e,n,r,i,o,s,a,c):e.data[l];qf(d,!1);let f=B$(e,n,d,t);mE()&&LE(e,n,f,d),Kf(f,n);let h=xR(f,n,f,d);return n[l]=h,OE(n,h),d$(h,d,n),aE(d)&&PE(e,n,d),c!=null&&oR(n,d,u),d}function Le(n,e,t,r,i,o,s,a){let c=Qe(),u=rr(),l=Bm(u.consts,o);return V$(c,u,n,e,t,r,i,l,s,a),Le}var B$=U$;function U$(n,e,t,r){return vE(!0),e[Mn].createComment("")}var FR=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();var LR=new ae("");var j$=(()=>{class n{static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new $w})}return n})(),$w=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,r=this.queues.get(t);r.has(e)&&(r.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let r=this.queues.get(t);r.has(e)||(this.queuedEffectCount++,r.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function Qs(n){return!!n&&typeof n.then=="function"}function $E(n){return!!n&&typeof n.subscribe=="function"}var VR=new ae("");function WE(n){return Jo([{provide:VR,multi:!0,useValue:n}])}var BR=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r});appInits=G(VR,{optional:!0})??[];injector=G(En);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=nr(this.injector,i);if(Qs(o))t.push(o);else if($E(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),p0=new ae("");function H$(){Sx(()=>{throw new se(600,!1)})}function z$(n){return n.isBoundToModule}var $$=10;var bc=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=G(Xj);afterRenderManager=G(zP);zonelessEnabled=G(AP);rootEffectScheduler=G(j$);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new pn;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=G(Dc).hasPendingTasks.pipe(Ae(t=>!t));constructor(){G(dl,{optional:!0})}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}_injector=G(er);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,r){return this.bootstrapImpl(t,r)}bootstrapImpl(t,r,i=En.NULL){wt(10);let o=t instanceof ER;if(!this._injector.get(BR).done){let h="";throw new se(405,h)}let a;o?a=t:a=this._injector.get(f0).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let c=z$(a)?void 0:this._injector.get(il),u=r||a.selector,l=a.create(i,[],u,c),d=l.location.nativeElement,f=l.injector.get(LR,null);return f?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),Am(this.components,l),f?.unregisterApplication(d)}),this._loadComponent(l),wt(11,l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){wt(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(bE.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new se(101,!1);let t=Ke(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Ke(t),this.afterTick.next(),wt(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(nl,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<$$;)wt(14),this.synchronizeOnce(),wt(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r,notifyErrorHandler:i}of this.allViews)W$(r,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>i0(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Am(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(p0,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Am(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new se(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Am(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function W$(n,e,t,r){if(!t&&!i0(n))return;mR(n,e,t&&!r?0:1)}function Mc(n,e,t,r){let i=Qe(),o=s0();if(Ks(i,o,e)){let s=rr(),a=gE();XH(a,i,n,e,t,r)}return Mc}function G$(n,e,t,r){return Ks(n,s0(),t)?e+Ju(t)+r:ns}function q$(n,e,t,r,i,o){let s=yj(),a=kR(n,s,t,i);return oP(2),a?e+Ju(t)+r+Ju(i)+o:ns}function Em(n,e){return n<<17|e<<2}function Ic(n){return n>>17&32767}function K$(n){return(n&2)==2}function Y$(n,e){return n&131071|e<<17}function Ww(n){return n|2}function ol(n){return(n&131068)>>2}function nw(n,e){return n&-131069|e<<2}function X$(n){return(n&1)===1}function Gw(n){return n|1}function Q$(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Ic(s),c=ol(s);n[r]=t;let u=!1,l;if(Array.isArray(t)){let d=t;l=d[1],(l===null||Wf(d,l)>0)&&(u=!0)}else l=t;if(i)if(c!==0){let f=Ic(n[a+1]);n[r+1]=Em(f,a),f!==0&&(n[f+1]=nw(n[f+1],r)),n[a+1]=Y$(n[a+1],r)}else n[r+1]=Em(a,0),a!==0&&(n[a+1]=nw(n[a+1],r)),a=r;else n[r+1]=Em(c,0),a===0?a=r:n[c+1]=nw(n[c+1],r),c=r;u&&(n[r+1]=Ww(n[r+1])),lO(n,l,r,!0),lO(n,l,r,!1),Z$(e,l,n,r,o),s=Em(a,c),o?e.classBindings=s:e.styleBindings=s}function Z$(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&Wf(o,e)>=0&&(t[r+1]=Gw(t[r+1]))}function lO(n,e,t,r){let i=n[t+1],o=e===null,s=r?Ic(i):ol(i),a=!1;for(;s!==0&&(a===!1||o);){let c=n[s],u=n[s+1];J$(c,e)&&(a=!0,n[s+1]=r?Gw(u):Ww(u)),s=r?Ic(u):ol(u)}a&&(n[t+1]=r?Ww(i):Gw(i))}function J$(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Wf(n,e)>=0:!1}function te(n,e,t){let r=Qe(),i=s0();if(Ks(r,i,e)){let o=rr(),s=gE();sR(o,s,r,n,e,r[Mn],t,!1)}return te}function dO(n,e,t,r,i){RE(e,n,t,i?"class":"style",r)}function GE(n,e,t){return UR(n,e,t,!1),GE}function fl(n,e){return UR(n,e,null,!0),fl}function UR(n,e,t,r){let i=Qe(),o=rr(),s=oP(2);if(o.firstUpdatePass&&tW(o,n,s,r),e!==ns&&Ks(i,s,e)){let a=o.data[Ac()];sW(o,a,i,i[Mn],n,i[s+1]=aW(e,t),r,s)}}function eW(n,e){return e>=n.expandoStartIndex}function tW(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[Ac()],s=eW(n,t);cW(o,r)&&e===null&&!s&&(e=!1),e=nW(i,o,e,r),Q$(i,o,e,t,s,r)}}function nW(n,e,t,r){let i=Cj(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=rw(null,n,e,t,r),t=zf(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=rw(i,n,e,t,r),o===null){let c=rW(n,e,r);c!==void 0&&Array.isArray(c)&&(c=rw(null,n,e,c[1],r),c=zf(c,e.attrs,r),iW(n,e,r,c))}else o=oW(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function rW(n,e,t){let r=t?e.classBindings:e.styleBindings;if(ol(r)!==0)return n[Ic(r)]}function iW(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Ic(i)]=r}function oW(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=zf(r,s,t)}return zf(r,e.attrs,t)}function rw(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=zf(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function zf(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),BU(n,s,t?!0:e[++o]))}return n===void 0?null:n}function sW(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let c=n.data,u=c[a+1],l=X$(u)?fO(c,e,t,i,ol(u),s):void 0;if(!Qm(l)){Qm(o)||K$(u)&&(o=fO(c,null,t,i,a,s));let d=XO(Ac(),t);vz(r,s,d,i,o)}}function fO(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let c=n[i],u=Array.isArray(c),l=u?c[1]:c,d=l===null,f=t[i+1];f===ns&&(f=d?ui:void 0);let h=d?qx(f,r):l===r?f:void 0;if(u&&!Qm(h)&&(h=qx(c,r)),Qm(h)&&(a=h,s))return a;let g=n[i+1];i=s?Ic(g):ol(g)}if(e!==null){let c=o?e.residualClasses:e.residualStyles;c!=null&&(a=qx(c,r))}return a}function Qm(n){return n!==void 0}function aW(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=Rr(u0(n)))),n}function cW(n,e){return(n.flags&(e?8:16))!==0}function F(n,e,t,r){let i=Qe(),o=rr(),s=Qr+n,a=i[Mn],c=o.firstCreatePass?SR(s,o,i,e,aR,tP(),t,r):o.data[s],u=uW(o,i,c,a,e,n);i[s]=u;let l=aE(c);return qf(c,!0),eR(a,u,c),!cR(c)&&mE()&&LE(o,i,u,c),(uj()===0||l)&&Kf(u,i),lj(),l&&(PE(o,i,c),GP(o,c,i)),r!==null&&oR(i,c),F}function L(){let n=Fr();rP()?mj():(n=n.parent,qf(n,!1));let e=n;hj(e)&&pj(),dj();let t=rr();return t.firstCreatePass&&AR(t,e),e.classesWithoutHost!=null&&Tj(e)&&dO(t,e,Qe(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&Mj(e)&&dO(t,e,Qe(),e.stylesWithoutHost,!1),L}function dt(n,e,t,r){return F(n,e,t,r),L(),dt}var uW=(n,e,t,r,i,o)=>(vE(!0),ZP(r,i,Sj()));function bn(){return Qe()}var uc=void 0;function lW(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var dW=["en",[["a","p"],["AM","PM"],uc],[["AM","PM"],uc,uc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],uc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],uc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",uc,"{1} 'at' {0}",uc],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",lW],iw={};function g0(n){let e=fW(n),t=hO(e);if(t)return t;let r=e.split("-")[0];if(t=hO(r),t)return t;if(r==="en")return dW;throw new se(701,!1)}function hO(n){return n in iw||(iw[n]=lc.ng&&lc.ng.common&&lc.ng.common.locales&&lc.ng.common.locales[n]),iw[n]}var Oc=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Oc||{});function fW(n){return n.toLowerCase().replace(/_/g,"-")}var Zm="en-US",hW="USD";var pW=Zm;function gW(n){typeof n=="string"&&(pW=n.toLowerCase().replace(/_/g,"-"))}function pO(n,e,t){return function r(i){if(i===Function)return t;let o=al(n)?ao(n.index,e):e;BE(o,5);let s=e[Nr],a=gO(e,s,t,i),c=r.__ngNextListenerFn__;for(;c;)a=gO(e,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function gO(n,e,t,r){let i=Ke(null);try{return wt(6,e,t),t(r)!==!1}catch(o){return mW(n,o),!1}finally{wt(7,e,t),Ke(i)}}function mW(n,e){let t=n[mc],r=t?t.get(co,null):null;r&&r.handleError(e)}function mO(n,e,t,r,i,o){let s=e[t],a=e[Be],u=a.data[t].outputs[r],l=s[u],d=a.firstCreatePass?dE(a):null,f=lE(e),h=l.subscribe(o),g=f.length;f.push(o,h),d&&d.push(i,n.index,g,-(g+1))}var vW=new Map;function re(n,e,t,r){let i=Qe(),o=rr(),s=Fr();return jR(o,i,i[Mn],s,n,e,r),re}function yW(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[km],c=i[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function jR(n,e,t,r,i,o,s){let a=aE(r),u=n.firstCreatePass?dE(n):null,l=lE(e),d=!0;if(r.type&3||s){let f=lo(r,e),h=s?s(f):f,g=l.length,m=s?x=>s(so(x[r.index])):r.index,y=null;if(!s&&a&&(y=yW(n,e,i,r.index)),y!==null){let x=y.__ngLastListenerFn__||y;x.__ngNextListenerFn__=o,y.__ngLastListenerFn__=o,d=!1}else{o=pO(r,e,o);let x=e[mc].get(c0);vW.get(x)?.(h,i,o);let b=t.listen(h,i,o);l.push(o,b),u&&u.push(i,m,g,g+1)}}else o=pO(r,e,o);if(d){let f=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let g=0;g<h.length;g+=2){let m=h[g],y=h[g+1];mO(r,e,m,y,i,o)}if(f&&f.length)for(let g of f)mO(r,e,g,i,i,o)}}function _e(n=1){return Ij(n)}function hl(n,e,t){_$(n,e,t)}function Pc(n){let e=Qe(),t=rr(),r=sP();fE(r+1);let i=HE(t,r);if(n.dirty&&ij(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let o=E$(e,r);n.reset(o,Jj),n.notifyOnChanges()}return!0}return!1}function Rc(){return v$(Qe(),sP())}function _W(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function ho(n){let e=vj();return cE(e,Qr+n)}function U(n,e=""){let t=Qe(),r=rr(),i=n+Qr,o=r.firstCreatePass?jE(r,i,1,e,null):r.data[i],s=xW(r,t,o,e,n);t[i]=s,mE()&&LE(r,t,s,o),qf(o,!1)}var xW=(n,e,t,r,i)=>(vE(!0),NH(e[Mn],r));function rn(n){return Yt("",n,""),rn}function Yt(n,e,t){let r=Qe(),i=G$(r,n,e,t);return i!==ns&&HR(r,Ac(),i),Yt}function Qf(n,e,t,r,i){let o=Qe(),s=q$(o,n,e,t,r,i);return s!==ns&&HR(o,Ac(),s),Qf}function HR(n,e,t){let r=XO(e,n);kH(n[Mn],r,t)}function mt(n,e,t){RP(e)&&(e=e());let r=Qe(),i=s0();if(Ks(r,i,e)){let o=rr(),s=gE();sR(o,s,r,n,e,r[Mn],t,!1)}return mt}function Et(n,e){let t=RP(n);return t&&n.set(e),t}function vt(n,e){let t=Qe(),r=rr(),i=Fr();return jR(r,t,t[Mn],i,n,e),vt}function wW(n,e,t){let r=rr();if(r.firstCreatePass){let i=oo(n);qw(t,r.data,r.blueprint,i,!0),qw(e,r.data,r.blueprint,i,!1)}}function qw(n,e,t,r,i){if(n=vr(n),Array.isArray(n))for(let o=0;o<n.length;o++)qw(n[o],e,t,r,i);else{let o=rr(),s=Qe(),a=Fr(),c=el(n)?n:vr(n.provide),u=jO(n),l=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(el(n)||!n.multi){let h=new wc(u,i,z),g=sw(c,e,i?l:l+f,d);g===-1?(yw(zm(a,s),o,c),ow(o,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(h),s.push(h)):(t[g]=h,s[g]=h)}else{let h=sw(c,e,l+f,d),g=sw(c,e,l,l+f),m=h>=0&&t[h],y=g>=0&&t[g];if(i&&!y||!i&&!m){yw(zm(a,s),o,c);let x=bW(i?CW:EW,t.length,i,r,u);!i&&y&&(t[g].providerFactory=x),ow(o,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(x),s.push(x)}else{let x=zR(t[i?g:h],u,!i&&r);ow(o,n,h>-1?h:g,x)}!i&&r&&y&&t[g].componentProviders++}}}function ow(n,e,t,r){let i=el(e),o=GU(e);if(i||o){let c=(o?vr(e.useClass):e).prototype.ngOnDestroy;if(c){let u=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let l=u.indexOf(t);l===-1?u.push(t,[r,c]):u[l+1].push(r,c)}else u.push(t,c)}}}function zR(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function sw(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function EW(n,e,t,r,i){return Kw(this.multi,[])}function CW(n,e,t,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=jf(r,r[Be],this.providerFactory.index,i);s=c.slice(0,a),Kw(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],Kw(o,s);return s}function Kw(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function bW(n,e,t,r,i){let o=new wc(n,t,z);return o.multi=[],o.index=e,o.componentProviders=0,zR(o,i,r&&!t),o}function yr(n,e=[]){return t=>{t.providersResolver=(r,i)=>wW(r,i?i(n):n,e)}}function m0(n,e,t,r){return WR(Qe(),o0(),n,e,t,r)}function Zs(n,e,t,r,i){return GR(Qe(),o0(),n,e,t,r,i)}function $R(n,e){let t=n[e];return t===ns?void 0:t}function WR(n,e,t,r,i,o){let s=e+t;return Ks(n,s,i)?NR(n,s+1,o?r.call(o,i):r(i)):$R(n,s+1)}function GR(n,e,t,r,i,o,s){let a=e+t;return kR(n,a,i,o)?NR(n,a+2,s?r.call(s,i,o):r(i,o)):$R(n,a+2)}function pl(n,e){let t=rr(),r,i=n+Qr;t.firstCreatePass?(r=IW(e,t.pipeRegistry),t.data[i]=r,r.onDestroy&&(t.destroyHooks??=[]).push(i,r.onDestroy)):r=t.data[i];let o=r.factory||(r.factory=hc(r.type,!0)),s,a=Pr(z);try{let c=Hm(!1),u=o();return Hm(c),_W(t,Qe(),i,u),u}finally{Pr(a)}}function IW(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function qR(n,e,t){let r=n+Qr,i=Qe(),o=cE(i,r);return KR(i,r)?WR(i,o0(),e,o.transform,t,o):o.transform(t)}function Zf(n,e,t,r){let i=n+Qr,o=Qe(),s=cE(o,i);return KR(o,i)?GR(o,o0(),e,s.transform,t,r,s):s.transform(t,r)}function KR(n,e){return n[Be].data[e].pure}var Sc=class{full;major;minor;patch;constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},YR=new Sc("19.2.11"),Yw=class{ngModuleFactory;componentFactories;constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},XR=(()=>{class n{compileModuleSync(t){return new zw(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=LO(t),o=XP(i.declarations).reduce((s,a)=>{let c=gc(a);return c&&s.push(new rl(c)),s},[]);return new Yw(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var SW=(()=>{class n{zone=G(He);changeDetectionScheduler=G(Ec);applicationRef=G(bc);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function AW({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new He(xe(Q({},DW()),{scheduleInRootZone:t})),[{provide:He,useFactory:n},{provide:Lf,multi:!0,useFactory:()=>{let r=G(SW,{optional:!0});return()=>r.initialize()}},{provide:Lf,multi:!0,useFactory:()=>{let r=G(TW);return()=>{r.initialize()}}},e===!0?{provide:DP,useValue:!0}:[],{provide:TP,useValue:t??SP}]}function DW(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var TW=(()=>{class n{subscription=new nn;initialized=!1;zone=G(He);pendingTasks=G(Dc);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{He.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{He.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var MW=(()=>{class n{appRef=G(bc);taskService=G(Dc);ngZone=G(He);zonelessEnabled=G(AP);tracing=G(dl,{optional:!0});disableScheduling=G(DP,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new nn;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Wm):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(G(TP,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Cw||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let r=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,r=!0;break}case 12:{this.appRef.dirtyFlags|=16,r=!0;break}case 13:{this.appRef.dirtyFlags|=2,r=!0;break}case 11:{r=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(r))return;let i=this.useMicrotaskScheduler?GM:MP;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Wm+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,GM(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function OW(){return typeof $localize<"u"&&$localize.locale||Zm}var Jf=new ae("",{providedIn:"root",factory:()=>G(Jf,Ne.Optional|Ne.SkipSelf)||OW()}),QR=new ae("",{providedIn:"root",factory:()=>hW});var Xw=new ae(""),PW=new ae("");function Rf(n){return!n.moduleRef}function RW(n){let e=Rf(n)?n.r3Injector:n.moduleRef.injector,t=e.get(He);return t.run(()=>{Rf(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(co,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Rf(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Xw);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Xw);s.add(o),n.moduleRef.onDestroy(()=>{Am(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return kW(r,t,()=>{let o=e.get(BR);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(Jf,Zm);if(gW(s||Zm),!e.get(PW,!0))return Rf(n)?e.get(bc):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(Rf(n)){let c=e.get(bc);return n.rootComponent!==void 0&&c.bootstrap(n.rootComponent),c}else return NW(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function NW(n,e){let t=n.injector.get(bc);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new se(-403,!1);e.push(n)}function kW(n,e,t){try{let r=t();return Qs(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Dm=null;function FW(n=[],e){return En.create({name:e,providers:[{provide:n0,useValue:"platform"},{provide:Xw,useValue:new Set([()=>Dm=null])},...n]})}function LW(n=[]){if(Dm)return Dm;let e=FW(n);return Dm=e,H$(),VW(e),e}function VW(n){let e=n.get(EE,null);nr(n,()=>{e?.forEach(t=>t())})}function qE(){return!1}var Vr=(()=>{class n{static __NG_ELEMENT_ID__=BW}return n})();function BW(n){return UW(Fr(),Qe(),(n&16)===16)}function UW(n,e,t){if(al(n)&&!t){let r=ao(n.index,e);return new Hf(r,r)}else if(n.type&175){let r=e[io];return new Hf(r,e)}return null}var Qw=class{constructor(){}supports(e){return RR(e)}create(e){return new Zw(e)}},jW=(n,e)=>e,Zw=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||jW}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<vO(r,i,o)?t:r,a=vO(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,l=c-i;if(u!=l){for(let f=0;f<u;f++){let h=f<o.length?o[f]:o[f]=0,g=h+f;l<=g&&g<u&&(o[f]=h+1)}let d=s.previousIndex;o[d]=l-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!RR(e))throw new se(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,k$(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new Jw(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Jm),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Jm),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Jw=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,t){this.item=e,this.trackById=t}},eE=class{_head=null;_tail=null;add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Jm=class{map=new Map;put(e){let t=e.trackById,r=this.map.get(t);r||(r=new eE,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function vO(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function yO(){return new KE([new Qw])}var KE=(()=>{class n{factories;static \u0275prov=ne({token:n,providedIn:"root",factory:yO});constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||yO()),deps:[[n,new kU,new Zr]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new se(901,!1)}}return n})();function ZR(n){wt(8);try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,i=LW(r),o=[AW({}),{provide:Ec,useExisting:MW},...t||[]],s=new Xm({providers:o,parent:i,debugName:"",runEnvironmentInitializers:!1});return RW({r3Injector:s.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}finally{wt(9)}}function rs(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function ei(n){return Tx(n)}function Nc(n,e){return Ix(n,e?.equal)}var _O=class{[ci];constructor(e){this[ci]=e}destroy(){this[ci].destroy()}};function JR(n){let e=gc(n);if(!e)return null;let t=new rl(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var Fn=new ae("");var nN=null;function fi(){return nN}function YE(n){nN??=n}var eh=class{},th=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>G(rN),providedIn:"platform"})}return n})(),XE=new ae(""),rN=(()=>{class n extends th{_location;_history;_doc=G(Fn);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return fi().getBaseHref(this._doc)}onPopState(t){let r=fi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=fi().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>new n,providedIn:"platform"})}return n})();function v0(n,e){return n?e?n.endsWith("/")?e.startsWith("/")?n+e.slice(1):n+e:e.startsWith("/")?n+e:`${n}/${e}`:n:e}function eN(n){let e=n.search(/#|\?|$/);return n[e-1]==="/"?n.slice(0,e-1)+n.slice(e):n}function Fi(n){return n&&n[0]!=="?"?`?${n}`:n}var Li=(()=>{class n{historyGo(t){throw new Error("")}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>G(_0),providedIn:"root"})}return n})(),y0=new ae(""),_0=(()=>{class n extends Li{_platformLocation;_baseHref;_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??G(Fn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return v0(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Fi(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Fi(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Fi(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ce(th),ce(y0,8))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Js=(()=>{class n{_subject=new pn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(t){this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=$W(eN(tN(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Fi(r))}normalize(t){return n.stripTrailingSlash(zW(this._basePath,tN(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fi(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Fi(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Fi;static joinWithSlash=v0;static stripTrailingSlash=eN;static \u0275fac=function(r){return new(r||n)(ce(Li))};static \u0275prov=ne({token:n,factory:()=>HW(),providedIn:"root"})}return n})();function HW(){return new Js(ce(Li))}function zW(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function tN(n){return n.replace(/\/index.html$/,"")}function $W(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}var nC=(()=>{class n extends Li{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(t,r){super(),this._platformLocation=t,r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=v0(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Fi(o))||this._platformLocation.pathname;this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Fi(o))||this._platformLocation.pathname;this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static \u0275fac=function(r){return new(r||n)(ce(th),ce(y0,8))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),uN={ADP:[void 0,void 0,0],AFN:[void 0,"\u060B",0],ALL:[void 0,void 0,0],AMD:[void 0,"\u058F",2],AOA:[void 0,"Kz"],ARS:[void 0,"$"],AUD:["A$","$"],AZN:[void 0,"\u20BC"],BAM:[void 0,"KM"],BBD:[void 0,"$"],BDT:[void 0,"\u09F3"],BHD:[void 0,void 0,3],BIF:[void 0,void 0,0],BMD:[void 0,"$"],BND:[void 0,"$"],BOB:[void 0,"Bs"],BRL:["R$"],BSD:[void 0,"$"],BWP:[void 0,"P"],BYN:[void 0,void 0,2],BYR:[void 0,void 0,0],BZD:[void 0,"$"],CAD:["CA$","$",2],CHF:[void 0,void 0,2],CLF:[void 0,void 0,4],CLP:[void 0,"$",0],CNY:["CN\xA5","\xA5"],COP:[void 0,"$",2],CRC:[void 0,"\u20A1",2],CUC:[void 0,"$"],CUP:[void 0,"$"],CZK:[void 0,"K\u010D",2],DJF:[void 0,void 0,0],DKK:[void 0,"kr",2],DOP:[void 0,"$"],EGP:[void 0,"E\xA3"],ESP:[void 0,"\u20A7",0],EUR:["\u20AC"],FJD:[void 0,"$"],FKP:[void 0,"\xA3"],GBP:["\xA3"],GEL:[void 0,"\u20BE"],GHS:[void 0,"GH\u20B5"],GIP:[void 0,"\xA3"],GNF:[void 0,"FG",0],GTQ:[void 0,"Q"],GYD:[void 0,"$",2],HKD:["HK$","$"],HNL:[void 0,"L"],HRK:[void 0,"kn"],HUF:[void 0,"Ft",2],IDR:[void 0,"Rp",2],ILS:["\u20AA"],INR:["\u20B9"],IQD:[void 0,void 0,0],IRR:[void 0,void 0,0],ISK:[void 0,"kr",0],ITL:[void 0,void 0,0],JMD:[void 0,"$"],JOD:[void 0,void 0,3],JPY:["\xA5",void 0,0],KHR:[void 0,"\u17DB"],KMF:[void 0,"CF",0],KPW:[void 0,"\u20A9",0],KRW:["\u20A9",void 0,0],KWD:[void 0,void 0,3],KYD:[void 0,"$"],KZT:[void 0,"\u20B8"],LAK:[void 0,"\u20AD",0],LBP:[void 0,"L\xA3",0],LKR:[void 0,"Rs"],LRD:[void 0,"$"],LTL:[void 0,"Lt"],LUF:[void 0,void 0,0],LVL:[void 0,"Ls"],LYD:[void 0,void 0,3],MGA:[void 0,"Ar",0],MGF:[void 0,void 0,0],MMK:[void 0,"K",0],MNT:[void 0,"\u20AE",2],MRO:[void 0,void 0,0],MUR:[void 0,"Rs",2],MXN:["MX$","$"],MYR:[void 0,"RM"],NAD:[void 0,"$"],NGN:[void 0,"\u20A6"],NIO:[void 0,"C$"],NOK:[void 0,"kr",2],NPR:[void 0,"Rs"],NZD:["NZ$","$"],OMR:[void 0,void 0,3],PHP:["\u20B1"],PKR:[void 0,"Rs",2],PLN:[void 0,"z\u0142"],PYG:[void 0,"\u20B2",0],RON:[void 0,"lei"],RSD:[void 0,void 0,0],RUB:[void 0,"\u20BD"],RWF:[void 0,"RF",0],SBD:[void 0,"$"],SEK:[void 0,"kr",2],SGD:[void 0,"$"],SHP:[void 0,"\xA3"],SLE:[void 0,void 0,2],SLL:[void 0,void 0,0],SOS:[void 0,void 0,0],SRD:[void 0,"$"],SSP:[void 0,"\xA3"],STD:[void 0,void 0,0],STN:[void 0,"Db"],SYP:[void 0,"\xA3",0],THB:[void 0,"\u0E3F"],TMM:[void 0,void 0,0],TND:[void 0,void 0,3],TOP:[void 0,"T$"],TRL:[void 0,void 0,0],TRY:[void 0,"\u20BA"],TTD:[void 0,"$"],TWD:["NT$","$",2],TZS:[void 0,void 0,2],UAH:[void 0,"\u20B4"],UGX:[void 0,void 0,0],USD:["$"],UYI:[void 0,void 0,0],UYU:[void 0,"$"],UYW:[void 0,void 0,4],UZS:[void 0,void 0,2],VEF:[void 0,"Bs",2],VND:["\u20AB",void 0,0],VUV:[void 0,void 0,0],XAF:["FCFA",void 0,0],XCD:["EC$","$"],XOF:["F\u202FCFA",void 0,0],XPF:["CFPF",void 0,0],XXX:["\xA4"],YER:[void 0,void 0,0],ZAR:[void 0,"R"],ZMK:[void 0,void 0,0],ZMW:[void 0,"ZK"],ZWD:[void 0,void 0,0]},C0=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(C0||{});var ti={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function kc(n,e){let t=g0(n),r=t[Oc.NumberSymbols][e];if(typeof r>"u"){if(e===ti.CurrencyDecimal)return t[Oc.NumberSymbols][ti.Decimal];if(e===ti.CurrencyGroup)return t[Oc.NumberSymbols][ti.Group]}return r}function rC(n,e){return g0(n)[Oc.NumberFormats][e]}function WW(n){return g0(n)[Oc.Currencies]}function lN(n,e,t="en"){let r=WW(t)[n]||uN[n]||[],i=r[1];return e==="narrow"&&typeof i=="string"?i:r[0]||n}var GW=2;function dN(n){let e,t=uN[n];return t&&(e=t[2]),typeof e=="number"?e:GW}var qW=/^(\d+)?\.((\d+)(-(\d+))?)?$/,iN=22,x0=".",nh="0",KW=";",YW=",",QE="#",oN="\xA4";function fN(n,e,t,r,i,o,s=!1){let a="",c=!1;if(!isFinite(n))a=kc(t,ti.Infinity);else{let u=QW(n);s&&(u=XW(u));let l=e.minInt,d=e.minFrac,f=e.maxFrac;if(o){let w=o.match(qW);if(w===null)throw new Error(`${o} is not a valid digit info`);let b=w[1],T=w[3],P=w[5];b!=null&&(l=ZE(b)),T!=null&&(d=ZE(T)),P!=null?f=ZE(P):T!=null&&d>f&&(f=d)}ZW(u,d,f);let h=u.digits,g=u.integerLen,m=u.exponent,y=[];for(c=h.every(w=>!w);g<l;g++)h.unshift(0);for(;g<0;g++)h.unshift(0);g>0?y=h.splice(g,h.length):(y=h,h=[0]);let x=[];for(h.length>=e.lgSize&&x.unshift(h.splice(-e.lgSize,h.length).join(""));h.length>e.gSize;)x.unshift(h.splice(-e.gSize,h.length).join(""));h.length&&x.unshift(h.join("")),a=x.join(kc(t,r)),y.length&&(a+=kc(t,i)+y.join("")),m&&(a+=kc(t,ti.Exponential)+"+"+m)}return n<0&&!c?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function hN(n,e,t,r,i){let o=rC(e,C0.Currency),s=gN(o,kc(e,ti.MinusSign));return s.minFrac=dN(r),s.maxFrac=s.minFrac,fN(n,s,e,ti.CurrencyGroup,ti.CurrencyDecimal,i).replace(oN,t).replace(oN,"").trim()}function pN(n,e,t){let r=rC(e,C0.Decimal),i=gN(r,kc(e,ti.MinusSign));return fN(n,i,e,ti.Group,ti.Decimal,t)}function gN(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(KW),i=r[0],o=r[1],s=i.indexOf(x0)!==-1?i.split(x0):[i.substring(0,i.lastIndexOf(nh)+1),i.substring(i.lastIndexOf(nh)+1)],a=s[0],c=s[1]||"";t.posPre=a.substring(0,a.indexOf(QE));for(let l=0;l<c.length;l++){let d=c.charAt(l);d===nh?t.minFrac=t.maxFrac=l+1:d===QE?t.maxFrac=l+1:t.posSuf+=d}let u=a.split(YW);if(t.gSize=u[1]?u[1].length:0,t.lgSize=u[2]||u[1]?(u[2]||u[1]).length:0,o){let l=i.length-t.posPre.length-t.posSuf.length,d=o.indexOf(QE);t.negPre=o.substring(0,d).replace(/'/g,""),t.negSuf=o.slice(d+l).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function XW(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function QW(n){let e=Math.abs(n)+"",t=0,r,i,o,s,a;for((i=e.indexOf(x0))>-1&&(e=e.replace(x0,"")),(o=e.search(/e/i))>0?(i<0&&(i=o),i+=+e.slice(o+1),e=e.substring(0,o)):i<0&&(i=e.length),o=0;e.charAt(o)===nh;o++);if(o===(a=e.length))r=[0],i=1;else{for(a--;e.charAt(a)===nh;)a--;for(i-=o,r=[],s=0;o<=a;o++,s++)r[s]=Number(e.charAt(o))}return i>iN&&(r=r.splice(0,iN-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}function ZW(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen,o=Math.min(Math.max(e,i),t),s=o+n.integerLen,a=r[s];if(s>0){r.splice(Math.max(n.integerLen,s));for(let d=s;d<r.length;d++)r[d]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,s=o+1),r[0]=0;for(let d=1;d<s;d++)r[d]=0}if(a>=5)if(s-1<0){for(let d=0;d>s;d--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[s-1]++;for(;i<Math.max(0,o);i++)r.push(0);let c=o!==0,u=e+n.integerLen,l=r.reduceRight(function(d,f,h,g){return f=f+d,g[h]=f<10?f:f-10,c&&(g[h]===0&&h>=u?g.pop():c=!1),f>=10?1:0},0);l&&(r.unshift(l),n.integerLen++)}function ZE(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}var JE=/\s+/,sN=[],Vi=(()=>{class n{_ngEl;_renderer;initialClasses=sN;rawClass;stateMap=new Map;constructor(t,r){this._ngEl=t,this._renderer=r}set klass(t){this.initialClasses=t!=null?t.trim().split(JE):sN}set ngClass(t){this.rawClass=typeof t=="string"?t.trim().split(JE):t}ngDoCheck(){for(let r of this.initialClasses)this._updateState(r,!0);let t=this.rawClass;if(Array.isArray(t)||t instanceof Set)for(let r of t)this._updateState(r,!0);else if(t!=null)for(let r of Object.keys(t))this._updateState(r,!!t[r]);this._applyStateDiff()}_updateState(t,r){let i=this.stateMap.get(t);i!==void 0?(i.enabled!==r&&(i.changed=!0,i.enabled=r),i.touched=!0):this.stateMap.set(t,{enabled:r,changed:!0,touched:!0})}_applyStateDiff(){for(let t of this.stateMap){let r=t[0],i=t[1];i.changed?(this._toggleClass(r,i.enabled),i.changed=!1):i.touched||(i.enabled&&this._toggleClass(r,!1),this.stateMap.delete(r)),i.touched=!1}}_toggleClass(t,r){t=t.trim(),t.length>0&&t.split(JE).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}static \u0275fac=function(r){return new(r||n)(z(ir),z(fo))};static \u0275dir=Ze({type:n,selectors:[["","ngClass",""]],inputs:{klass:[0,"class","klass"],ngClass:"ngClass"}})}return n})();var w0=class{$implicit;ngForOf;index;count;constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},hi=(()=>{class n{_viewContainer;_template;_differs;set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new w0(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),aN(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);aN(o,i)})}static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(z(Xs),z(Cc),z(KE))};static \u0275dir=Ze({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return n})();function aN(n,e){n.context.$implicit=e.item}var vn=(()=>{class n{_viewContainer;_context=new E0;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(t,r){this._viewContainer=t,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){cN(t,!1),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){cN(t,!1),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(t,r){return!0}static \u0275fac=function(r){return new(r||n)(z(Xs),z(Cc))};static \u0275dir=Ze({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return n})(),E0=class{$implicit=null;ngIf=null};function cN(n,e){if(n&&!n.createEmbeddedView)throw new se(2020,!1)}function iC(n,e){return new se(2100,!1)}var eC=class{createSubscription(e,t){return ei(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){ei(()=>e.unsubscribe())}},tC=class{createSubscription(e,t){return e.then(r=>t?.(r),r=>{throw r}),{unsubscribe:()=>{t=null}}}dispose(e){e.unsubscribe()}},JW=new tC,eG=new eC,oC=(()=>{class n{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;constructor(t){this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if(Qs(t))return JW;if($E(t))return eG;throw iC(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||n)(z(Vr,16))};static \u0275pipe=h0({name:"async",type:n,pure:!1})}return n})();var sC=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,r,i){if(!mN(t))return null;i||=this._locale;try{let o=vN(t);return pN(o,i,r)}catch(o){throw iC(n,o.message)}}static \u0275fac=function(r){return new(r||n)(z(Jf,16))};static \u0275pipe=h0({name:"number",type:n,pure:!0})}return n})();var aC=(()=>{class n{_locale;_defaultCurrencyCode;constructor(t,r="USD"){this._locale=t,this._defaultCurrencyCode=r}transform(t,r=this._defaultCurrencyCode,i="symbol",o,s){if(!mN(t))return null;s||=this._locale,typeof i=="boolean"&&(i=i?"symbol":"code");let a=r||this._defaultCurrencyCode;i!=="code"&&(i==="symbol"||i==="symbol-narrow"?a=lN(a,i==="symbol"?"wide":"narrow",s):a=i);try{let c=vN(t);return hN(c,s,a,r,o)}catch(c){throw iC(n,c.message)}}static \u0275fac=function(r){return new(r||n)(z(Jf,16),z(QR,16))};static \u0275pipe=h0({name:"currency",type:n,pure:!0})}return n})();function mN(n){return!(n==null||n===""||n!==n)}function vN(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var Nt=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Lr({type:n});static \u0275inj=kr({})}return n})();function cC(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var uC="browser",yN="server";function b0(n){return n===yN}var rh=class{};var _N=(()=>{class n{static \u0275prov=ne({token:n,providedIn:"root",factory:()=>new lC(G(Fn),window)})}return n})(),lC=class{document;window;offset=()=>[0,0];constructor(e,t){this.document=e,this.window=t}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=tG(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function tG(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var A0=new ae(""),pC=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,r){this._zone=r,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i,o){return this._findPluginFor(r).addEventListener(t,r,i,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new se(5101,!1);return this._eventNameToPlugin.set(t,r),r}static \u0275fac=function(r){return new(r||n)(ce(A0),ce(He))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),ih=class{_doc;constructor(e){this._doc=e}manager},I0="ng-app-id";function xN(n){for(let e of n)e.remove()}function wN(n,e){let t=e.createElement("style");return t.textContent=n,t}function nG(n,e,t,r){let i=n.head?.querySelectorAll(`style[${I0}="${e}"],link[${I0}="${e}"]`);if(i)for(let o of i)o.removeAttribute(I0),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&t.set(o.textContent,{usage:0,elements:[o]})}function fC(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var gC=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.isServer=b0(o),nG(t,r,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,r){for(let i of t)this.addUsage(i,this.inline,wN);r?.forEach(i=>this.addUsage(i,this.external,fC))}removeStyles(t,r){for(let i of t)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,r,i){let o=r.get(t);o?o.usage++:r.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,r){let i=r.get(t);i&&(i.usage--,i.usage<=0&&(xN(i.elements),r.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])xN(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(t,wN(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(t,fC(r,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,r){return this.nonce&&r.setAttribute("nonce",this.nonce),this.isServer&&r.setAttribute(I0,this.appId),t.appendChild(r)}static \u0275fac=function(r){return new(r||n)(ce(Fn),ce(c0),ce(CE,8),ce(Ys))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),dC={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},mC=/%COMP%/g;var CN="%COMP%",rG=`_nghost-${CN}`,iG=`_ngcontent-${CN}`,oG=!0,sG=new ae("",{providedIn:"root",factory:()=>oG});function aG(n){return iG.replace(mC,n)}function cG(n){return rG.replace(mC,n)}function bN(n,e){return e.map(t=>t.replace(mC,n))}var vC=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,r,i,o,s,a,c,u=null,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=u,this.tracingService=l,this.platformIsServer=b0(a),this.defaultRenderer=new oh(t,s,c,this.platformIsServer,this.tracingService)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===uo.ShadowDom&&(r=xe(Q({},r),{encapsulation:uo.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof S0?i.applyToHost(t):i instanceof sh&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.platformIsServer,f=this.tracingService;switch(r.encapsulation){case uo.Emulated:o=new S0(c,u,r,this.appId,l,s,a,d,f);break;case uo.ShadowDom:return new hC(c,u,t,r,s,a,this.nonce,d,f);default:o=new sh(c,u,r,l,s,a,d,f);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(r){return new(r||n)(ce(pC),ce(gC),ce(c0),ce(sG),ce(Fn),ce(Ys),ce(He),ce(CE),ce(dl,8))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),oh=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,r,i,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(dC[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(EN(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(EN(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new se(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=dC[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=dC[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Zo.DashCase|Zo.Important)?e.style.setProperty(t,r,i&Zo.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Zo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r,i){if(typeof e=="string"&&(e=fi().getGlobalEventTarget(this.doc,e),!e))throw new se(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,t,o)),this.eventManager.addEventListener(e,t,o,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function EN(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var hC=class extends oh{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,c,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=i.styles;l=bN(i.id,l);for(let f of l){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=f,this.shadowRoot.appendChild(h)}let d=i.getExternalStyles?.();if(d)for(let f of d){let h=fC(f,o);a&&h.setAttribute("nonce",a),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},sh=class extends oh{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,r,i,o,s,a,c,u){super(e,o,s,a,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let l=r.styles;this.styles=u?bN(u,l):l,this.styleUrls=r.getExternalStyles?.(u)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},S0=class extends sh{contentAttr;hostAttr;constructor(e,t,r,i,o,s,a,c,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,c,u,l),this.contentAttr=aG(l),this.hostAttr=cG(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}};var D0=class n extends eh{supportsDOMEvents=!0;static makeCurrent(){YE(new n)}onAndCancel(e,t,r,i){return e.addEventListener(t,r,i),()=>{e.removeEventListener(t,r,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=uG();return t==null?null:lG(t)}resetBaseElement(){ah=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return cC(document.cookie,e)}},ah=null;function uG(){return ah=ah||document.querySelector("base"),ah?ah.getAttribute("href"):null}function lG(n){return new URL(n,document.baseURI).pathname}var dG=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),SN=(()=>{class n extends ih{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i,o){return t.addEventListener(r,i,o),()=>this.removeEventListener(t,r,i,o)}removeEventListener(t,r,i,o){return t.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||n)(ce(Fn))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),IN=["alt","control","meta","shift"],fG={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},hG={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},AN=(()=>{class n extends ih{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i,o){let s=n.parseEventName(r),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>fi().onAndCancel(t,s.domEventName,a,o))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),IN.forEach(u=>{let l=r.indexOf(u);l>-1&&(r.splice(l,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let i=fG[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),IN.forEach(s=>{if(s!==i){let a=hG[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(r){return new(r||n)(ce(Fn))};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})();function yC(n,e){return ZR(Q({rootComponent:n},pG(e)))}function pG(n){return{appProviders:[..._G,...n?.providers??[]],platformProviders:yG}}function gG(){D0.makeCurrent()}function mG(){return new co}function vG(){return UP(document),document}var yG=[{provide:Ys,useValue:uC},{provide:EE,useValue:gG,multi:!0},{provide:Fn,useFactory:vG}];var _G=[{provide:n0,useValue:"root"},{provide:co,useFactory:mG},{provide:A0,useClass:SN,multi:!0,deps:[Fn]},{provide:A0,useClass:AN,multi:!0,deps:[Fn]},vC,gC,pC,{provide:nl,useExisting:vC},{provide:rh,useClass:dG},[]];var DN=(()=>{class n{_doc;constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static \u0275fac=function(r){return new(r||n)(ce(Fn))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var Pe="primary",xh=Symbol("RouteTitle"),CC=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Vc(n){return new CC(n)}function FN(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function wG(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!po(n[t],e[t]))return!1;return!0}function po(n,e){let t=n?bC(n):void 0,r=e?bC(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!LN(n[i],e[i]))return!1;return!0}function bC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function LN(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function VN(n){return n.length>0?n[n.length-1]:null}function ia(n){return Hx(n)?n:Qs(n)?Rt(Promise.resolve(n)):fe(n)}var EG={exact:UN,subset:jN},BN={exact:CG,subset:bG,ignored:()=>!0};function TN(n,e,t){return EG[t.paths](n.root,e.root,t.matrixParams)&&BN[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function CG(n,e){return po(n,e)}function UN(n,e,t){if(!Fc(n.segments,e.segments)||!O0(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!UN(n.children[r],e.children[r],t))return!1;return!0}function bG(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>LN(n[t],e[t]))}function jN(n,e,t){return HN(n,e,e.segments,t)}function HN(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Fc(i,t)||e.hasChildren()||!O0(i,t,r))}else if(n.segments.length===t.length){if(!Fc(n.segments,t)||!O0(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!jN(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Fc(n.segments,i)||!O0(n.segments,i,r)||!n.children[Pe]?!1:HN(n.children[Pe],e,o,r)}}function O0(n,e,t){return e.every((r,i)=>BN[t](n[i].parameters,r.parameters))}var mo=class{root;queryParams;fragment;_queryParamMap;constructor(e=new at([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Vc(this.queryParams),this._queryParamMap}toString(){return AG.serialize(this)}},at=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return P0(this)}},ea=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Vc(this.parameters),this._parameterMap}toString(){return $N(this)}};function IG(n,e){return Fc(n,e)&&n.every((t,r)=>po(t.parameters,e[r].parameters))}function Fc(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function SG(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===Pe&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==Pe&&(t=t.concat(e(i,r)))}),t}var Bc=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>new ta,providedIn:"root"})}return n})(),ta=class{parse(e){let t=new SC(e);return new mo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${ch(e.root,!0)}`,r=MG(e.queryParams),i=typeof e.fragment=="string"?`#${DG(e.fragment)}`:"";return`${t}${r}${i}`}},AG=new ta;function P0(n){return n.segments.map(e=>$N(e)).join("/")}function ch(n,e){if(!n.hasChildren())return P0(n);if(e){let t=n.children[Pe]?ch(n.children[Pe],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==Pe&&r.push(`${i}:${ch(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=SG(n,(r,i)=>i===Pe?[ch(n.children[Pe],!1)]:[`${i}:${ch(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Pe]!=null?`${P0(n)}/${t[0]}`:`${P0(n)}/(${t.join("//")})`}}function zN(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function T0(n){return zN(n).replace(/%3B/gi,";")}function DG(n){return encodeURI(n)}function IC(n){return zN(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function R0(n){return decodeURIComponent(n)}function MN(n){return R0(n.replace(/\+/g,"%20"))}function $N(n){return`${IC(n.path)}${TG(n.parameters)}`}function TG(n){return Object.entries(n).map(([e,t])=>`;${IC(e)}=${IC(t)}`).join("")}function MG(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${T0(t)}=${T0(i)}`).join("&"):`${T0(t)}=${T0(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var OG=/^[^\/()?;#]+/;function _C(n){let e=n.match(OG);return e?e[0]:""}var PG=/^[^\/()?;=#]+/;function RG(n){let e=n.match(PG);return e?e[0]:""}var NG=/^[^=?&#]+/;function kG(n){let e=n.match(NG);return e?e[0]:""}var FG=/^[^&#]+/;function LG(n){let e=n.match(FG);return e?e[0]:""}var SC=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new at([],{}):new at([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Pe]=new at(e,t)),r}parseSegment(){let e=_C(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new se(4009,!1);return this.capture(e),new ea(R0(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=RG(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=_C(this.remaining);i&&(r=i,this.capture(r))}e[R0(t)]=R0(r)}parseQueryParam(e){let t=kG(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=LG(this.remaining);s&&(r=s,this.capture(r))}let i=MN(t),o=MN(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=_C(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new se(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Pe);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[Pe]:new at([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new se(4011,!1)}};function WN(n){return n.segments.length>0?new at([],{[Pe]:n}):n}function GN(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=GN(i);if(r===Pe&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new at(n.segments,e);return VG(t)}function VG(n){if(n.numberOfChildren===1&&n.children[Pe]){let e=n.children[Pe];return new at(n.segments.concat(e.segments),e.children)}return n}function na(n){return n instanceof mo}function qN(n,e,t=null,r=null){let i=KN(n);return YN(i,e,t,r)}function KN(n){let e;function t(o){let s={};for(let c of o.children){let u=t(c);s[c.outlet]=u}let a=new at(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=WN(r);return e??i}function YN(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return xC(i,i,i,t,r);let o=BG(e);if(o.toRoot())return xC(i,i,new at([],{}),t,r);let s=UG(o,i,n),a=s.processChildren?lh(s.segmentGroup,s.index,o.commands):QN(s.segmentGroup,s.index,o.commands);return xC(i,s.segmentGroup,a,t,r)}function k0(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function fh(n){return typeof n=="object"&&n!=null&&n.outlets}function xC(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([c,u])=>{o[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let s;n===e?s=t:s=XN(n,e,t);let a=WN(GN(s));return new mo(a,o,i)}function XN(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=XN(o,e,t)}),new at(n.segments,r)}var F0=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&k0(r[0]))throw new se(4003,!1);let i=r.find(fh);if(i&&i!==VN(r))throw new se(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function BG(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new F0(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new F0(t,e,r)}var vl=class{segmentGroup;processChildren;index;constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function UG(n,e,t){if(n.isAbsolute)return new vl(e,!0,0);if(!t)return new vl(e,!1,NaN);if(t.parent===null)return new vl(t,!0,0);let r=k0(n.commands[0])?0:1,i=t.segments.length-1+r;return jG(t,i,n.numberOfDoubleDots)}function jG(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new se(4005,!1);i=r.segments.length}return new vl(r,!1,i-o)}function HG(n){return fh(n[0])?n[0].outlets:{[Pe]:n}}function QN(n,e,t){if(n??=new at([],{}),n.segments.length===0&&n.hasChildren())return lh(n,e,t);let r=zG(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new at(n.segments.slice(0,r.pathIndex),{});return o.children[Pe]=new at(n.segments.slice(r.pathIndex),n.children),lh(o,0,i)}else return r.match&&i.length===0?new at(n.segments,{}):r.match&&!n.hasChildren()?AC(n,e,t):r.match?lh(n,0,i):AC(n,e,t)}function lh(n,e,t){if(t.length===0)return new at(n.segments,{});{let r=HG(t),i={};if(Object.keys(r).some(o=>o!==Pe)&&n.children[Pe]&&n.numberOfChildren===1&&n.children[Pe].segments.length===0){let o=lh(n.children[Pe],e,t);return new at(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=QN(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new at(n.segments,i)}}function zG(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(fh(a))break;let c=`${a}`,u=r<t.length-1?t[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!PN(c,u,s))return o;r+=2}else{if(!PN(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function AC(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(fh(o)){let c=$G(o.outlets);return new at(r,c)}if(i===0&&k0(t[0])){let c=n.segments[e];r.push(new ea(c.path,ON(t[0]))),i++;continue}let s=fh(o)?o.outlets[Pe]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&k0(a)?(r.push(new ea(s,ON(a))),i+=2):(r.push(new ea(s,{})),i++)}return new at(r,{})}function $G(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=AC(new at([],{}),0,r))}),e}function ON(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function PN(n,e,t){return n==t.path&&po(e,t.parameters)}var N0="imperative",On=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(On||{}),ri=class{id;url;constructor(e,t){this.id=e,this.url=t}},ra=class extends ri{type=On.NavigationStart;navigationTrigger;restoredState;constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},gi=class extends ri{urlAfterRedirects;type=On.NavigationEnd;constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Br=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Br||{}),_l=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(_l||{}),go=class extends ri{reason;code;type=On.NavigationCancel;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},vo=class extends ri{reason;code;type=On.NavigationSkipped;constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i}},xl=class extends ri{error;target;type=On.NavigationError;constructor(e,t,r,i){super(e,t),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},hh=class extends ri{urlAfterRedirects;state;type=On.RoutesRecognized;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},L0=class extends ri{urlAfterRedirects;state;type=On.GuardsCheckStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},V0=class extends ri{urlAfterRedirects;state;shouldActivate;type=On.GuardsCheckEnd;constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},B0=class extends ri{urlAfterRedirects;state;type=On.ResolveStart;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},U0=class extends ri{urlAfterRedirects;state;type=On.ResolveEnd;constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},j0=class{route;type=On.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},H0=class{route;type=On.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},z0=class{snapshot;type=On.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$0=class{snapshot;type=On.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},W0=class{snapshot;type=On.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},G0=class{snapshot;type=On.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wl=class{routerEvent;position;anchor;type=On.Scroll;constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ph=class{},El=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function WG(n,e){return n.providers&&!n._injector&&(n._injector=Xf(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Bi(n){return n.outlet||Pe}function GG(n,e){let t=n.filter(r=>Bi(r)===e);return t.push(...n.filter(r=>Bi(r)!==e)),t}function wh(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var q0=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return wh(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Uc(this.rootInjector)}},Uc=(()=>{class n{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new q0(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(r){return new(r||n)(ce(er))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),K0=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=DC(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=DC(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=TC(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return TC(e,this._root).map(t=>t.value)}};function DC(n,e){if(n===e.value)return e;for(let t of e.children){let r=DC(n,t);if(r)return r}return null}function TC(n,e){if(n===e.value)return[e];for(let t of e.children){let r=TC(n,t);if(r.length)return r.unshift(e),r}return[]}var ni=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ml(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var gh=class extends K0{snapshot;constructor(e,t){super(e),this.snapshot=t,LC(this,e)}toString(){return this.snapshot.toString()}};function ZN(n){let e=qG(n),t=new gn([new ea("",{})]),r=new gn({}),i=new gn({}),o=new gn({}),s=new gn(""),a=new mi(t,r,o,s,i,Pe,n,e.root);return a.snapshot=e.root,new gh(new ni(a,[]),e)}function qG(n){let e={},t={},r={},i="",o=new Lc([],e,r,i,t,Pe,n,null,{});return new mh("",new ni(o,[]))}var mi=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,r,i,o,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Ae(u=>u[xh]))??fe(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Ae(e=>Vc(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Ae(e=>Vc(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Y0(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:Q(Q({},e.params),n.params),data:Q(Q({},e.data),n.data),resolve:Q(Q(Q(Q({},n.data),e.data),i?.data),n._resolvedData)}:r={params:Q({},n.params),data:Q({},n.data),resolve:Q(Q({},n.data),n._resolvedData??{})},i&&ek(i)&&(r.resolve[xh]=i.title),r}var Lc=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[xh]}constructor(e,t,r,i,o,s,a,c,u){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Vc(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Vc(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},mh=class extends K0{url;constructor(e,t){super(t),this.url=e,LC(this,t)}toString(){return JN(this._root)}};function LC(n,e){e.value._routerState=n,e.children.forEach(t=>LC(n,t))}function JN(n){let e=n.children.length>0?` { ${n.children.map(JN).join(", ")} } `:"";return`${n.value}${e}`}function wC(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,po(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),po(e.params,t.params)||n.paramsSubject.next(t.params),wG(e.url,t.url)||n.urlSubject.next(t.url),po(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function MC(n,e){let t=po(n.params,e.params)&&IG(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||MC(n.parent,e.parent))}function ek(n){return typeof n.title=="string"||n.title===null}var tk=new ae(""),Eh=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Pe;activateEvents=new $e;deactivateEvents=new $e;attachEvents=new $e;detachEvents=new $e;routerOutletData=PP(void 0);parentContexts=G(Uc);location=G(Xs);changeDetector=G(Vr);inputBinder=G(Ch,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new se(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new se(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new se(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new se(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new OC(t,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[di]})}return n})(),OC=class{route;childContexts;parent;outletData;constructor(e,t,r,i){this.route=e,this.childContexts=t,this.parent=r,this.outletData=i}get(e,t){return e===mi?this.route:e===Uc?this.childContexts:e===tk?this.outletData:this.parent.get(e,t)}},Ch=new ae(""),VC=(()=>{class n{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Of([r.queryParams,r.params,r.data]).pipe(Or(([o,s,a],c)=>(a=Q(Q(Q({},o),s),a),c===0?fe(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=JR(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})(),BC=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275cmp=it({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&dt(0,"router-outlet")},dependencies:[Eh],encapsulation:2})}return n})();function UC(n){let e=n.children&&n.children.map(UC),t=e?xe(Q({},n),{children:e}):Q({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Pe&&(t.component=BC),t}function KG(n,e,t){let r=vh(n,e._root,t?t._root:void 0);return new gh(r,e)}function vh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=YG(n,e,t);return new ni(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>vh(n,a)),s}}let r=XG(e.value),i=e.children.map(o=>vh(n,o));return new ni(r,i)}}function YG(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return vh(n,r,i);return vh(n,r)})}function XG(n){return new mi(new gn(n.url),new gn(n.params),new gn(n.queryParams),new gn(n.fragment),new gn(n.data),n.outlet,n.component,n)}var Cl=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},nk="ngNavigationCancelingError";function X0(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=na(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=rk(!1,Br.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function rk(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[nk]=!0,t.cancellationCode=e,t}function QG(n){return ik(n)&&na(n.url)}function ik(n){return!!n&&n[nk]}var ZG=(n,e,t,r)=>Ae(i=>(new PC(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),PC=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),wC(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=ml(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ml(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=ml(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=ml(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new G0(o.value.snapshot))}),e.children.length&&this.forwardEvent(new $0(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(wC(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),wC(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Q0=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},yl=class{component;route;constructor(e,t){this.component=e,this.route=t}};function JG(n,e,t){let r=n._root,i=e?e._root:null;return uh(r,i,t,[r.value])}function eq(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Il(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!SO(n)?n:e.get(n):r}function uh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=ml(e);return n.children.forEach(s=>{tq(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>dh(a,t.getContext(s),i)),i}function tq(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=nq(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Q0(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?uh(n,e,a?a.children:null,r,i):uh(n,e,t,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new yl(a.outlet.component,s))}else s&&dh(e,a,i),i.canActivateChecks.push(new Q0(r)),o.component?uh(n,null,a?a.children:null,r,i):uh(n,null,t,r,i);return i}function nq(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Fc(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Fc(n.url,e.url)||!po(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!MC(n,e)||!po(n.queryParams,e.queryParams);case"paramsChange":default:return!MC(n,e)}}function dh(n,e,t){let r=ml(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?dh(s,e.children.getContext(o),t):dh(s,null,t):dh(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new yl(e.outlet.component,i)):t.canDeactivateChecks.push(new yl(null,i)):t.canDeactivateChecks.push(new yl(null,i))}function bh(n){return typeof n=="function"}function rq(n){return typeof n=="boolean"}function iq(n){return n&&bh(n.canLoad)}function oq(n){return n&&bh(n.canActivate)}function sq(n){return n&&bh(n.canActivateChild)}function aq(n){return n&&bh(n.canDeactivate)}function cq(n){return n&&bh(n.canMatch)}function ok(n){return n instanceof Pi||n?.name==="EmptyError"}var M0=Symbol("INITIAL_VALUE");function bl(){return Or(n=>Of(n.map(e=>e.pipe(Ko(1),Gu(M0)))).pipe(Ae(e=>{for(let t of e)if(t!==!0){if(t===M0)return M0;if(t===!1||uq(t))return t}return!0}),Mr(e=>e!==M0),Ko(1)))}function uq(n){return na(n)||n instanceof Cl}function lq(n,e){return mn(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?fe(xe(Q({},t),{guardsResult:!0})):dq(s,r,i,n).pipe(mn(a=>a&&rq(a)?fq(r,o,n,e):fe(a)),Ae(a=>xe(Q({},t),{guardsResult:a})))})}function dq(n,e,t,r){return Rt(n).pipe(mn(i=>vq(i.component,i.route,t,e,r)),Yo(i=>i!==!0,!0))}function fq(n,e,t,r){return Rt(e).pipe($s(i=>$u(pq(i.route.parent,r),hq(i.route,r),mq(n,i.path,t),gq(n,i.route,t))),Yo(i=>i!==!0,!0))}function hq(n,e){return n!==null&&e&&e(new W0(n)),fe(!0)}function pq(n,e){return n!==null&&e&&e(new z0(n)),fe(!0)}function gq(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return fe(!0);let i=r.map(o=>mm(()=>{let s=wh(e)??t,a=Il(o,s),c=oq(a)?a.canActivate(e,n):nr(s,()=>a(e,n));return ia(c).pipe(Yo())}));return fe(i).pipe(bl())}function mq(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>eq(s)).filter(s=>s!==null).map(s=>mm(()=>{let a=s.guards.map(c=>{let u=wh(s.node)??t,l=Il(c,u),d=sq(l)?l.canActivateChild(r,n):nr(u,()=>l(r,n));return ia(d).pipe(Yo())});return fe(a).pipe(bl())}));return fe(o).pipe(bl())}function vq(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return fe(!0);let s=o.map(a=>{let c=wh(e)??i,u=Il(a,c),l=aq(u)?u.canDeactivate(n,e,t,r):nr(c,()=>u(n,e,t,r));return ia(l).pipe(Yo())});return fe(s).pipe(bl())}function yq(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return fe(!0);let o=i.map(s=>{let a=Il(s,n),c=iq(a)?a.canLoad(e,t):nr(n,()=>a(e,t));return ia(c)});return fe(o).pipe(bl(),sk(r))}function sk(n){return Xg($n(e=>{if(typeof e!="boolean")throw X0(n,e)}),Ae(e=>e===!0))}function _q(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return fe(!0);let o=i.map(s=>{let a=Il(s,n),c=cq(a)?a.canMatch(e,t):nr(n,()=>a(e,t));return ia(c)});return fe(o).pipe(bl(),sk(r))}var yh=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},_h=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function gl(n){return Hu(new yh(n))}function xq(n){return Hu(new se(4e3,!1))}function wq(n){return Hu(rk(!1,Br.GuardRejected))}var RC=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return fe(r);if(i.numberOfChildren>1||!i.children[Pe])return xq(`${e.redirectTo}`);i=i.children[Pe]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:c,fragment:u,routeConfig:l,url:d,outlet:f,params:h,data:g,title:m}=i,y=nr(o,()=>a({params:h,data:g,queryParams:c,fragment:u,routeConfig:l,url:d,outlet:f,title:m}));if(y instanceof mo)throw new _h(y);t=y}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new _h(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new mo(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,i)}),new at(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new se(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},NC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Eq(n,e,t,r,i){let o=ak(n,e,t);return o.matched?(r=WG(e,r),_q(r,e,t,i).pipe(Ae(s=>s===!0?o:Q({},NC)))):fe(o)}function ak(n,e,t){if(e.path==="**")return Cq(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?Q({},NC):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||FN)(t,n,e);if(!i)return Q({},NC);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?Q(Q({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Cq(n){return{matched:!0,parameters:n.length>0?VN(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function RN(n,e,t,r){return t.length>0&&Sq(n,t,r)?{segmentGroup:new at(e,Iq(r,new at(t,n.children))),slicedSegments:[]}:t.length===0&&Aq(n,t,r)?{segmentGroup:new at(n.segments,bq(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new at(n.segments,n.children),slicedSegments:t}}function bq(n,e,t,r){let i={};for(let o of t)if(J0(n,e,o)&&!r[Bi(o)]){let s=new at([],{});i[Bi(o)]=s}return Q(Q({},r),i)}function Iq(n,e){let t={};t[Pe]=e;for(let r of n)if(r.path===""&&Bi(r)!==Pe){let i=new at([],{});t[Bi(r)]=i}return t}function Sq(n,e,t){return t.some(r=>J0(n,e,r)&&Bi(r)!==Pe)}function Aq(n,e,t){return t.some(r=>J0(n,e,r))}function J0(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Dq(n,e,t){return e.length===0&&!n.children[t]}var kC=class{};function Tq(n,e,t,r,i,o,s="emptyOnly"){return new FC(n,e,t,r,i,s,o).recognize()}var Mq=31,FC=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new RC(this.urlSerializer,this.urlTree)}noMatchError(e){return new se(4002,`'${e.segmentGroup}'`)}recognize(){let e=RN(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Ae(({children:t,rootSnapshot:r})=>{let i=new ni(r,t),o=new mh("",i),s=qN(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Lc([],Object.freeze({}),Object.freeze(Q({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Pe,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Pe,t).pipe(Ae(r=>({children:r,rootSnapshot:t})),qo(r=>{if(r instanceof _h)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof yh?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Ae(s=>s instanceof ni?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Rt(o).pipe($s(s=>{let a=r.children[s],c=GG(t,s);return this.processSegmentGroup(e,c,a,s,i)}),_m((s,a)=>(s.push(...a),s)),Ws(null),Wx(),mn(s=>{if(s===null)return gl(r);let a=ck(s);return Oq(a),fe(a)}))}processSegment(e,t,r,i,o,s,a){return Rt(t).pipe($s(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,i,o,s,a).pipe(qo(u=>{if(u instanceof yh)return fe(null);throw u}))),Yo(c=>!!c),qo(c=>{if(ok(c))return Dq(r,i,o)?fe(new kC):gl(r);throw c}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,c){return Bi(r)!==s&&(s===Pe||!J0(i,o,r))?gl(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,c):gl(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:l,positionalParamSegments:d,remainingSegments:f}=ak(t,i,o);if(!c)return gl(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Mq&&(this.allowRedirects=!1));let h=new Lc(o,u,Object.freeze(Q({},this.urlTree.queryParams)),this.urlTree.fragment,NN(i),Bi(i),i.component??i._loadedComponent??null,i,kN(i)),g=Y0(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(g.params),h.data=Object.freeze(g.data);let m=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,d,h,e);return this.applyRedirects.lineralizeSegments(i,m).pipe(mn(y=>this.processSegment(e,r,t,y.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=Eq(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Or(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Or(({routes:u})=>{let l=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=c,g=new Lc(f,d,Object.freeze(Q({},this.urlTree.queryParams)),this.urlTree.fragment,NN(r),Bi(r),r.component??r._loadedComponent??null,r,kN(r)),m=Y0(g,s,this.paramsInheritanceStrategy);g.params=Object.freeze(m.params),g.data=Object.freeze(m.data);let{segmentGroup:y,slicedSegments:x}=RN(t,f,h,u);if(x.length===0&&y.hasChildren())return this.processChildren(l,u,y,g).pipe(Ae(b=>new ni(g,b)));if(u.length===0&&x.length===0)return fe(new ni(g,[]));let w=Bi(r)===o;return this.processSegment(l,u,y,x,w?Pe:o,!0,g).pipe(Ae(b=>new ni(g,b instanceof ni?[b]:[])))}))):gl(t)))}getChildConfig(e,t,r){return t.children?fe({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?fe({routes:t._loadedRoutes,injector:t._loadedInjector}):yq(e,t,r,this.urlSerializer).pipe(mn(i=>i?this.configLoader.loadChildren(e,t).pipe($n(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):wq(t))):fe({routes:[],injector:e})}};function Oq(n){n.sort((e,t)=>e.value.outlet===Pe?-1:t.value.outlet===Pe?1:e.value.outlet.localeCompare(t.value.outlet))}function Pq(n){let e=n.value.routeConfig;return e&&e.path===""}function ck(n){let e=[],t=new Set;for(let r of n){if(!Pq(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=ck(r.children);e.push(new ni(r.value,i))}return e.filter(r=>!t.has(r))}function NN(n){return n.data||{}}function kN(n){return n.resolve||{}}function Rq(n,e,t,r,i,o){return mn(s=>Tq(n,e,t,r,s.extractedUrl,i,o).pipe(Ae(({state:a,tree:c})=>xe(Q({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function Nq(n,e){return mn(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return fe(t);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of uk(c))s.add(u);let a=0;return Rt(s).pipe($s(c=>o.has(c)?kq(c,r,n,e):(c.data=Y0(c,c.parent,n).resolve,fe(void 0))),$n(()=>a++),Wu(1),mn(c=>a===s.size?fe(t):Dr))})}function uk(n){let e=n.children.map(t=>uk(t)).flat();return[n,...e]}function kq(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!ek(i)&&(o[xh]=i.title),Fq(o,n,e,r).pipe(Ae(s=>(n._resolvedData=s,n.data=Y0(n,n.parent,t).resolve,null)))}function Fq(n,e,t,r){let i=bC(n);if(i.length===0)return fe({});let o={};return Rt(i).pipe(mn(s=>Lq(n[s],e,t,r).pipe(Yo(),$n(a=>{if(a instanceof Cl)throw X0(new ta,a);o[s]=a}))),Wu(1),Ae(()=>o),qo(s=>ok(s)?Dr:Hu(s)))}function Lq(n,e,t,r){let i=wh(e)??r,o=Il(n,i),s=o.resolve?o.resolve(e,t):nr(i,()=>o(e,t));return ia(s)}function EC(n){return Or(e=>{let t=n(e);return t?Rt(t).pipe(Ae(()=>e)):fe(e)})}var jC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Pe);return r}getResolvedTitleForRoute(t){return t.data[xh]}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>G(lk),providedIn:"root"})}return n})(),lk=(()=>{class n extends jC{title;constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||n)(ce(DN))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),jc=new ae("",{providedIn:"root",factory:()=>({})}),Hc=new ae(""),ev=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=G(XR);loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return fe(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ia(t.loadComponent()).pipe(Ae(fk),$n(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Pf(()=>{this.componentLoaders.delete(t)})),i=new Vu(r,()=>new pn).pipe(Lu());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return fe({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=dk(r,this.compiler,t,this.onLoadEndListener).pipe(Pf(()=>{this.childrenLoaders.delete(r)})),s=new Vu(o,()=>new pn).pipe(Lu());return this.childrenLoaders.set(r,s),s}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function dk(n,e,t,r){return ia(n.loadChildren()).pipe(Ae(fk),mn(i=>i instanceof zE||Array.isArray(i)?fe(i):Rt(e.compileModuleAsync(i))),Ae(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Hc,[],{optional:!0,self:!0}).flat()),{routes:s.map(UC),injector:o}}))}function Vq(n){return n&&typeof n=="object"&&"default"in n}function fk(n){return Vq(n)?n.default:n}var tv=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>G(Bq),providedIn:"root"})}return n})(),Bq=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),HC=new ae(""),zC=new ae("");function hk(n,e,t){let r=n.get(zC),i=n.get(Fn);return n.get(He).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let o,s=new Promise(u=>{o=u}),a=i.startViewTransition(()=>(o(),Uq(n))),{onViewTransitionCreated:c}=r;return c&&nr(n,()=>c({transition:a,from:e,to:t})),s})}function Uq(n){return new Promise(e=>{IE({read:()=>setTimeout(e)},{injector:n})})}var $C=new ae(""),nv=(()=>{class n{currentNavigation=null;currentTransition=null;lastSuccessfulNavigation=null;events=new pn;transitionAbortSubject=new pn;configLoader=G(ev);environmentInjector=G(er);destroyRef=G(ul);urlSerializer=G(Bc);rootContexts=G(Uc);location=G(Js);inputBindingEnabled=G(Ch,{optional:!0})!==null;titleStrategy=G(jC);options=G(jc,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=G(tv);createViewTransition=G(HC,{optional:!0});navigationErrorHandler=G($C,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>fe(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=i=>this.events.next(new j0(i)),r=i=>this.events.next(new H0(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(xe(Q({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))}setupNavigations(t){return this.transitions=new gn(null),this.transitions.pipe(Mr(r=>r!==null),Or(r=>{let i=!1,o=!1;return fe(r).pipe(Or(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Br.SupersededByNewNavigation),Dr;this.currentTransition=r,this.currentNavigation={id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:this.lastSuccessfulNavigation?xe(Q({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&c!=="reload"){let u="";return this.events.next(new vo(s.id,this.urlSerializer.serialize(s.rawUrl),u,_l.IgnoredSameUrlNavigation)),s.resolve(!1),Dr}if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return fe(s).pipe(Or(u=>(this.events.next(new ra(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),u.id!==this.navigationId?Dr:Promise.resolve(u))),Rq(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),$n(u=>{r.targetSnapshot=u.targetSnapshot,r.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=xe(Q({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let l=new hh(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:u,extractedUrl:l,source:d,restoredState:f,extras:h}=s,g=new ra(u,this.urlSerializer.serialize(l),d,f);this.events.next(g);let m=ZN(this.rootComponentType).snapshot;return this.currentTransition=r=xe(Q({},s),{targetSnapshot:m,urlAfterRedirects:l,extras:xe(Q({},h),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=l,fe(r)}else{let u="";return this.events.next(new vo(s.id,this.urlSerializer.serialize(s.extractedUrl),u,_l.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Dr}}),$n(s=>{let a=new L0(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),Ae(s=>(this.currentTransition=r=xe(Q({},s),{guards:JG(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),lq(this.environmentInjector,s=>this.events.next(s)),$n(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw X0(this.urlSerializer,s.guardsResult);let a=new V0(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Mr(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Br.GuardRejected),!1)),EC(s=>{if(s.guards.canActivateChecks.length!==0)return fe(s).pipe($n(a=>{let c=new B0(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Or(a=>{let c=!1;return fe(a).pipe(Nq(this.paramsInheritanceStrategy,this.environmentInjector),$n({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Br.NoDataFromResolver)}}))}),$n(a=>{let c=new U0(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),EC(s=>{let a=c=>{let u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(c.routeConfig).pipe($n(l=>{c.component=l}),Ae(()=>{})));for(let l of c.children)u.push(...a(l));return u};return Of(a(s.targetSnapshot.root)).pipe(Ws(null),Ko(1))}),EC(()=>this.afterPreactivation()),Or(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?Rt(c).pipe(Ae(()=>r)):fe(r)}),Ae(s=>{let a=KG(t.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=xe(Q({},s),{targetRouterState:a}),this.currentNavigation.targetRouterState=a,r}),$n(()=>{this.events.next(new ph)}),ZG(this.rootContexts,t.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Ko(1),$n({next:s=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new gi(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Gx(this.transitionAbortSubject.pipe($n(s=>{throw s}))),Pf(()=>{!i&&!o&&this.cancelNavigationTransition(r,"",Br.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),qo(s=>{if(this.destroyed)return r.resolve(!1),Dr;if(o=!0,ik(s))this.events.next(new go(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),QG(s)?this.events.next(new El(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new xl(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=nr(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof Cl){let{message:u,cancellationCode:l}=X0(this.urlSerializer,c);this.events.next(new go(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new El(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Dr}))}))}cancelNavigationTransition(t,r,i){let o=new go(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function jq(n){return n!==N0}var pk=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>G(Hq),providedIn:"root"})}return n})(),Z0=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Hq=(()=>{class n extends Z0{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Jr(n)))(i||n)}})();static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),gk=(()=>{class n{urlSerializer=G(Bc);options=G(jc,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=G(Js);urlHandlingStrategy=G(tv);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new mo;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:r,targetBrowserUrl:i}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,r):r,s=i??o;return s instanceof mo?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:t,finalUrl:r,initialUrl:i}){r&&t?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=t):this.rawUrlTree=i}routerState=ZN(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:()=>G(zq),providedIn:"root"})}return n})(),zq=(()=>{class n extends gk{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{t(r.url,r.state,"popstate")})})}handleRouterEvent(t,r){t instanceof ra?this.updateStateMemento():t instanceof vo?this.commitTransition(r):t instanceof hh?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof ph?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):t instanceof go&&(t.code===Br.GuardRejected||t.code===Br.NoDataFromResolver)?this.restoreHistory(r):t instanceof xl?this.restoreHistory(r,!0):t instanceof gi&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(t)||o){let a=this.browserPageId,c=Q(Q({},s),this.generateNgRouterState(i,a));this.location.replaceState(t,"",c)}else{let a=Q(Q({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(t,"",a)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Jr(n)))(i||n)}})();static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rv(n,e){n.events.pipe(Mr(t=>t instanceof gi||t instanceof go||t instanceof xl||t instanceof vo),Ae(t=>t instanceof gi||t instanceof vo?0:(t instanceof go?t.code===Br.Redirect||t.code===Br.SupersededByNewNavigation:!1)?2:1),Mr(t=>t!==2),Ko(1)).subscribe(()=>{e()})}var $q={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Wq={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ze=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=G(FR);stateManager=G(gk);options=G(jc,{optional:!0})||{};pendingTasks=G(Dc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=G(nv);urlSerializer=G(Bc);location=G(Js);urlHandlingStrategy=G(tv);_events=new pn;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=G(pk);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=G(Hc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!G(Ch,{optional:!0});constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new nn;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof go&&r.code!==Br.Redirect&&r.code!==Br.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof gi)this.navigated=!0;else if(r instanceof El){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=Q({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||jq(i.source)},s);this.scheduleNavigation(a,N0,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}qq(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),N0,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r,i)=>{this.navigateToSyncWithBrowser(t,i,r)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=Q({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(UC),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,l=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":l=Q(Q({},this.currentUrlTree.queryParams),o);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=o||null}l!==null&&(l=this.removeEmptyProps(l));let d;try{let f=i?i.snapshot:this.routerState.snapshot.root;d=KN(f)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return YN(d,t,l,u??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=na(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,N0,null,r)}navigate(t,r={skipLocationChange:!1}){return Gq(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=Q({},$q):r===!1?i=Q({},Wq):i=r,na(t))return TN(this.currentUrlTree,t,i);let o=this.parseUrl(t);return TN(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((d,f)=>{a=d,c=f});let l=this.pendingTasks.add();return rv(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Gq(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new se(4008,!1)}function qq(n){return!(n instanceof ph)&&!(n instanceof El)}var vi=(()=>{class n{router;route;tabIndexAttribute;renderer;el;locationStrategy;href=null;target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new pn;constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof gi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(na(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:KP(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:na(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||n)(z(ze),z(mi),_E("tabindex"),z(fo),z(ir),z(Li))};static \u0275dir=Ze({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&re("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&Mc("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",rs],skipLocationChange:[2,"skipLocationChange","skipLocationChange",rs],replaceUrl:[2,"replaceUrl","replaceUrl",rs],routerLink:"routerLink"},features:[di]})}return n})();var Ih=class{};var mk=(()=>{class n{router;injector;preloadingStrategy;loader;subscription;constructor(t,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Mr(t=>t instanceof gi),$s(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Xf(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Rt(i).pipe(zu())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=fe(null);let o=i.pipe(mn(s=>s===null?fe(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Rt([o,s]).pipe(zu())}else return o})}static \u0275fac=function(r){return new(r||n)(ce(ze),ce(er),ce(Ih),ce(ev))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vk=new ae(""),Kq=(()=>{class n{urlSerializer;transitions;viewportScroller;zone;options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource="imperative";restoredId=0;store={};constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ra?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof gi?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof vo&&t.code===_l.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof wl&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new wl(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){CR()};static \u0275prov=ne({token:n,factory:n.\u0275fac})}return n})();function GC(n,...e){return Jo([{provide:Hc,multi:!0,useValue:n},[],{provide:mi,useFactory:yk,deps:[ze]},{provide:p0,multi:!0,useFactory:_k},e.map(t=>t.\u0275providers)])}function yk(n){return n.routerState.root}function Sh(n,e){return{\u0275kind:n,\u0275providers:e}}function _k(){let n=G(En);return e=>{let t=n.get(bc);if(e!==t.components[0])return;let r=n.get(ze),i=n.get(xk);n.get(qC)===1&&r.initialNavigation(),n.get(Ck,null,Ne.Optional)?.setUpPreloading(),n.get(vk,null,Ne.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var xk=new ae("",{factory:()=>new pn}),qC=new ae("",{providedIn:"root",factory:()=>1});function wk(){let n=[{provide:qC,useValue:0},WE(()=>{let e=G(En);return e.get(XE,Promise.resolve()).then(()=>new Promise(r=>{let i=e.get(ze),o=e.get(xk);rv(i,()=>{r(!0)}),e.get(nv).afterPreactivation=()=>(r(!0),o.closed?fe(void 0):o),i.initialNavigation()}))})];return Sh(2,n)}function Ek(){let n=[WE(()=>{G(ze).setUpLocationChangeListener()}),{provide:qC,useValue:2}];return Sh(3,n)}var Ck=new ae("");function bk(n){return Sh(0,[{provide:Ck,useExisting:mk},{provide:Ih,useExisting:n}])}function Ik(){return Sh(8,[VC,{provide:Ch,useExisting:VC}])}function Sk(n){Yf("NgRouterViewTransitions");let e=[{provide:HC,useValue:hk},{provide:zC,useValue:Q({skipNextTransition:!!n?.skipInitialTransition},n)}];return Sh(9,e)}var Ak=[Js,{provide:Bc,useClass:ta},ze,Uc,{provide:mi,useFactory:yk,deps:[ze]},ev,[]],Ui=(()=>{class n{constructor(){}static forRoot(t,r){return{ngModule:n,providers:[Ak,[],{provide:Hc,multi:!0,useValue:t},[],r?.errorHandler?{provide:$C,useValue:r.errorHandler}:[],{provide:jc,useValue:r||{}},r?.useHash?Xq():Qq(),Yq(),r?.preloadingStrategy?bk(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Zq(r):[],r?.bindToComponentInputs?Ik().\u0275providers:[],r?.enableViewTransitions?Sk().\u0275providers:[],Jq()]}}static forChild(t){return{ngModule:n,providers:[{provide:Hc,multi:!0,useValue:t}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Lr({type:n});static \u0275inj=kr({})}return n})();function Yq(){return{provide:vk,useFactory:()=>{let n=G(_N),e=G(He),t=G(jc),r=G(nv),i=G(Bc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Kq(i,r,n,e,t)}}}function Xq(){return{provide:Li,useClass:nC}}function Qq(){return{provide:Li,useClass:_0}}function Zq(n){return[n.initialNavigation==="disabled"?Ek().\u0275providers:[],n.initialNavigation==="enabledBlocking"?wk().\u0275providers:[]]}var WC=new ae("");function Jq(){return[{provide:WC,useFactory:_k},{provide:p0,multi:!0,useExisting:WC}]}var Lk=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,r){this._renderer=t,this._elementRef=r}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(r){return new(r||n)(z(fo),z(ir))};static \u0275dir=Ze({type:n})}return n})(),gv=(()=>{class n extends Lk{static \u0275fac=(()=>{let t;return function(i){return(t||(t=Jr(n)))(i||n)}})();static \u0275dir=Ze({type:n,features:[Cn]})}return n})(),Ml=new ae("");var eK={provide:Ml,useExisting:Wn(()=>Wt),multi:!0};function tK(){let n=fi()?fi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var nK=new ae(""),Wt=(()=>{class n extends Lk{_compositionMode;_composing=!1;constructor(t,r,i){super(t,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!tK())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(r){return new(r||n)(z(fo),z(ir),z(nK,8))};static \u0275dir=Ze({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&re("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[yr([eK]),Cn]})}return n})();function QC(n){return n==null||ZC(n)===0}function ZC(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var yo=new ae(""),Ol=new ae(""),rK=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,yi=class{static min(e){return Vk(e)}static max(e){return iK(e)}static required(e){return Bk(e)}static requiredTrue(e){return oK(e)}static email(e){return Uk(e)}static minLength(e){return jk(e)}static maxLength(e){return sK(e)}static pattern(e){return aK(e)}static nullValidator(e){return ov()}static compose(e){return qk(e)}static composeAsync(e){return Kk(e)}};function Vk(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function iK(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function Bk(n){return QC(n.value)?{required:!0}:null}function oK(n){return n.value===!0?null:{required:!0}}function Uk(n){return QC(n.value)||rK.test(n.value)?null:{email:!0}}function jk(n){return e=>{let t=e.value?.length??ZC(e.value);return t===null||t===0?null:t<n?{minlength:{requiredLength:n,actualLength:t}}:null}}function sK(n){return e=>{let t=e.value?.length??ZC(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function aK(n){if(!n)return ov;let e,t;return typeof n=="string"?(t="",n.charAt(0)!=="^"&&(t+="^"),t+=n,n.charAt(n.length-1)!=="$"&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(QC(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}function ov(n){return null}function Hk(n){return n!=null}function zk(n){return Qs(n)?Rt(n):n}function $k(n){let e={};return n.forEach(t=>{e=t!=null?Q(Q({},e),t):e}),Object.keys(e).length===0?null:e}function Wk(n,e){return e.map(t=>t(n))}function cK(n){return!n.validate}function Gk(n){return n.map(e=>cK(e)?e:t=>e.validate(t))}function qk(n){if(!n)return null;let e=n.filter(Hk);return e.length==0?null:function(t){return $k(Wk(t,e))}}function JC(n){return n!=null?qk(Gk(n)):null}function Kk(n){if(!n)return null;let e=n.filter(Hk);return e.length==0?null:function(t){let r=Wk(t,e).map(zk);return zx(r).pipe(Ae($k))}}function eb(n){return n!=null?Kk(Gk(n)):null}function Dk(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Yk(n){return n._rawValidators}function Xk(n){return n._rawAsyncValidators}function KC(n){return n?Array.isArray(n)?n:[n]:[]}function sv(n,e){return Array.isArray(n)?n.includes(e):n===e}function Tk(n,e){let t=KC(e);return KC(n).forEach(i=>{sv(t,i)||t.push(i)}),t}function Mk(n,e){return KC(e).filter(t=>!sv(n,t))}var av=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=JC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=eb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},_r=class extends av{name;get formDirective(){return null}get path(){return null}},zc=class extends av{_parent=null;name=null;valueAccessor=null},cv=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},uK={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},UCe=xe(Q({},uK),{"[class.ng-submitted]":"isSubmitted"}),on=(()=>{class n extends cv{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(z(zc,2))};static \u0275dir=Ze({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&fl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Cn]})}return n})(),or=(()=>{class n extends cv{constructor(t){super(t)}static \u0275fac=function(r){return new(r||n)(z(_r,10))};static \u0275dir=Ze({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&fl("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[Cn]})}return n})();var Ah="VALID",iv="INVALID",Sl="PENDING",Dh="DISABLED",oa=class{},uv=class extends oa{value;source;constructor(e,t){super(),this.value=e,this.source=t}},Mh=class extends oa{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},Oh=class extends oa{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Al=class extends oa{status;source;constructor(e,t){super(),this.status=e,this.source=t}},lv=class extends oa{source;constructor(e){super(),this.source=e}},dv=class extends oa{source;constructor(e){super(),this.source=e}};function tb(n){return(mv(n)?n.validators:n)||null}function lK(n){return Array.isArray(n)?JC(n):n||null}function nb(n,e){return(mv(e)?e.asyncValidators:n)||null}function dK(n){return Array.isArray(n)?eb(n):n||null}function mv(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Qk(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new se(1e3,"");if(!r[t])throw new se(1001,"")}function Zk(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new se(1002,"")})}var Dl=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ei(this.statusReactive)}set status(e){ei(()=>this.statusReactive.set(e))}_status=Nc(()=>this.statusReactive());statusReactive=Tc(void 0);get valid(){return this.status===Ah}get invalid(){return this.status===iv}get pending(){return this.status==Sl}get disabled(){return this.status===Dh}get enabled(){return this.status!==Dh}errors;get pristine(){return ei(this.pristineReactive)}set pristine(e){ei(()=>this.pristineReactive.set(e))}_pristine=Nc(()=>this.pristineReactive());pristineReactive=Tc(!0);get dirty(){return!this.pristine}get touched(){return ei(this.touchedReactive)}set touched(e){ei(()=>this.touchedReactive.set(e))}_touched=Nc(()=>this.touchedReactive());touchedReactive=Tc(!1);get untouched(){return!this.touched}_events=new pn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Tk(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Tk(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Mk(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Mk(e,this._rawAsyncValidators))}hasValidator(e){return sv(this._rawValidators,e)}hasAsyncValidator(e){return sv(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(xe(Q({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Oh(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Oh(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(xe(Q({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Mh(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Mh(!0,r))}markAsPending(e={}){this.status=Sl;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Al(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(xe(Q({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Dh,this.errors=null,this._forEachChild(i=>{i.disable(xe(Q({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new uv(this.value,r)),this._events.next(new Al(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(xe(Q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ah,this._forEachChild(r=>{r.enable(xe(Q({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(xe(Q({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ah||this.status===Sl)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new uv(this.value,t)),this._events.next(new Al(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(xe(Q({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Dh:Ah}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Sl,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=zk(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Al(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new $e,this.statusChanges=new $e}_calculateStatus(){return this._allControlsDisabled()?Dh:this.errors?iv:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Sl)?Sl:this._anyControlsHaveStatus(iv)?iv:Ah}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Mh(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Oh(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){mv(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=lK(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=dK(this._rawAsyncValidators)}},Tl=class extends Dl{constructor(e,t,r){super(tb(t),nb(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Zk(this,!0,e),Object.keys(e).forEach(r=>{Qk(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var YC=class extends Tl{};var Rh=new ae("",{providedIn:"root",factory:()=>vv}),vv="always";function yv(n,e){return[...e.path,n]}function fv(n,e,t=vv){rb(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),hK(n,e),gK(n,e),pK(n,e),fK(n,e)}function Ok(n,e,t=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),pv(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function hv(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function fK(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function rb(n,e){let t=Yk(n);e.validator!==null?n.setValidators(Dk(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Xk(n);e.asyncValidator!==null?n.setAsyncValidators(Dk(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();hv(e._rawValidators,i),hv(e._rawAsyncValidators,i)}function pv(n,e){let t=!1;if(n!==null){if(e.validator!==null){let i=Yk(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.validator);o.length!==i.length&&(t=!0,n.setValidators(o))}}if(e.asyncValidator!==null){let i=Xk(n);if(Array.isArray(i)&&i.length>0){let o=i.filter(s=>s!==e.asyncValidator);o.length!==i.length&&(t=!0,n.setAsyncValidators(o))}}}let r=()=>{};return hv(e._rawValidators,r),hv(e._rawAsyncValidators,r),t}function hK(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Jk(n,e)})}function pK(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Jk(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Jk(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function gK(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function e3(n,e){n==null,rb(n,e)}function mK(n,e){return pv(n,e)}function t3(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function vK(n){return Object.getPrototypeOf(n.constructor)===gv}function n3(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function r3(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Wt?t=o:vK(o)?r=o:i=o}),i||r||t||null}function yK(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}var _K={provide:_r,useExisting:Wn(()=>ji)},Th=Promise.resolve(),ji=(()=>{class n extends _r{callSetDisabledState;get submitted(){return ei(this.submittedReactive)}_submitted=Nc(()=>this.submittedReactive());submittedReactive=Tc(!1);_directives=new Set;form;ngSubmit=new $e;options;constructor(t,r,i){super(),this.callSetDisabledState=i,this.form=new Tl({},JC(t),eb(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Th.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),fv(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Th.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Th.then(()=>{let r=this._findContainer(t.path),i=new Tl({});e3(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Th.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Th.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),n3(this.form,this._directives),this.ngSubmit.emit(t),this.form._events.next(new lv(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1),this.form._events.next(new dv(this.form))}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static \u0275fac=function(r){return new(r||n)(z(yo,10),z(Ol,10),z(Rh,8))};static \u0275dir=Ze({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&re("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[yr([_K]),Cn]})}return n})();function Pk(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Rk(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Ph=class extends Dl{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,r){super(tb(t),nb(r,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),mv(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Rk(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Pk(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Pk(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Rk(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var xK=n=>n instanceof Ph,wK=(()=>{class n extends _r{_parent;ngOnInit(){this._checkParentType(),this.formDirective.addFormGroup(this)}ngOnDestroy(){this.formDirective&&this.formDirective.removeFormGroup(this)}get control(){return this.formDirective.getFormGroup(this)}get path(){return yv(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Jr(n)))(i||n)}})();static \u0275dir=Ze({type:n,standalone:!1,features:[Cn]})}return n})();var EK={provide:zc,useExisting:Wn(()=>Gn)},Nk=Promise.resolve(),Gn=(()=>{class n extends zc{_changeDetectorRef;callSetDisabledState;control=new Ph;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new $e;constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=r3(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),t3(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){fv(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Nk.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&rs(r);Nk.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?yv(t,this._parent):[t]}static \u0275fac=function(r){return new(r||n)(z(_r,9),z(yo,10),z(Ol,10),z(Ml,10),z(Vr,8),z(Rh,8))};static \u0275dir=Ze({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[yr([EK]),Cn,di]})}return n})();var sr=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return n})(),CK={provide:Ml,useExisting:Wn(()=>is),multi:!0},is=(()=>{class n extends gv{writeValue(t){let r=t??"";this.setProperty("value",r)}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Jr(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&re("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[yr([CK]),Cn]})}return n})();var i3=new ae("");var bK={provide:_r,useExisting:Wn(()=>sa)},sa=(()=>{class n extends _r{callSetDisabledState;get submitted(){return ei(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}_submitted=Nc(()=>this._submittedReactive());_submittedReactive=Tc(!1);_oldForm;_onCollectionChange=()=>this._updateDomValue();directives=[];form=null;ngSubmit=new $e;constructor(t,r,i){super(),this.callSetDisabledState=i,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(pv(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return fv(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Ok(t.control||null,t,!1),yK(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),n3(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new lv(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new dv(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,i=this.form.get(t.path);r!==i&&(Ok(r||null,t),xK(i)&&(fv(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);e3(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&mK(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){rb(this.form,this),this._oldForm&&pv(this._oldForm,this)}static \u0275fac=function(r){return new(r||n)(z(yo,10),z(Ol,10),z(Rh,8))};static \u0275dir=Ze({type:n,selectors:[["","formGroup",""]],hostBindings:function(r,i){r&1&&re("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[yr([bK]),Cn,di]})}return n})(),IK={provide:_r,useExisting:Wn(()=>_v)},_v=(()=>{class n extends wK{name=null;constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}_checkParentType(){o3(this._parent)}static \u0275fac=function(r){return new(r||n)(z(_r,13),z(yo,10),z(Ol,10))};static \u0275dir=Ze({type:n,selectors:[["","formGroupName",""]],inputs:{name:[0,"formGroupName","name"]},standalone:!1,features:[yr([IK]),Cn]})}return n})(),SK={provide:_r,useExisting:Wn(()=>xv)},xv=(()=>{class n extends _r{_parent;name=null;constructor(t,r,i){super(),this._parent=t,this._setValidators(r),this._setAsyncValidators(i)}ngOnInit(){o3(this._parent),this.formDirective.addFormArray(this)}ngOnDestroy(){this.formDirective?.removeFormArray(this)}get control(){return this.formDirective.getFormArray(this)}get formDirective(){return this._parent?this._parent.formDirective:null}get path(){return yv(this.name==null?this.name:this.name.toString(),this._parent)}static \u0275fac=function(r){return new(r||n)(z(_r,13),z(yo,10),z(Ol,10))};static \u0275dir=Ze({type:n,selectors:[["","formArrayName",""]],inputs:{name:[0,"formArrayName","name"]},standalone:!1,features:[yr([SK]),Cn]})}return n})();function o3(n){return!(n instanceof _v)&&!(n instanceof sa)&&!(n instanceof xv)}var AK={provide:zc,useExisting:Wn(()=>$c)},$c=(()=>{class n extends zc{_ngModelWarningConfig;_added=!1;viewModel;control;name=null;set isDisabled(t){}model;update=new $e;static _ngModelWarningSentOnce=!1;_ngModelWarningSent=!1;constructor(t,r,i,o,s){super(),this._ngModelWarningConfig=s,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=r3(this,o)}ngOnChanges(t){this._added||this._setUpControl(),t3(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return yv(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_setUpControl(){this.control=this.formDirective.addControl(this),this._added=!0}static \u0275fac=function(r){return new(r||n)(z(_r,13),z(yo,10),z(Ol,10),z(Ml,10),z(i3,8))};static \u0275dir=Ze({type:n,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},standalone:!1,features:[yr([AK]),Cn,di]})}return n})();var DK={provide:Ml,useExisting:Wn(()=>aa),multi:!0};function s3(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function TK(n){return n.split(":")[0]}var aa=(()=>{class n extends gv{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r=this._getOptionId(t),i=s3(r,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=TK(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Jr(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&re("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[yr([DK]),Cn]})}return n})(),Pl=(()=>{class n{_element;_renderer;_select;id;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(s3(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(z(ir),z(fo),z(aa,9))};static \u0275dir=Ze({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),MK={provide:Ml,useExisting:Wn(()=>a3),multi:!0};function kk(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function OK(n){return n.split(":")[0]}var a3=(()=>{class n extends gv{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let r;if(Array.isArray(t)){let i=t.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],u=this._getOptionValue(c.value);i.push(u)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let u=this._getOptionValue(c.value);i.push(u)}}}this.value=i,t(i)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=OK(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Jr(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&re("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[yr([MK]),Cn]})}return n})(),Rl=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,r,i){this._element=t,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(kk(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(kk(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||n)(z(ir),z(fo),z(a3,9))};static \u0275dir=Ze({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function PK(n){return typeof n=="number"?n:parseInt(n,10)}function RK(n){return typeof n=="number"?n:parseFloat(n)}var wv=(()=>{class n{_validator=ov;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):ov,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(r){return new(r||n)};static \u0275dir=Ze({type:n,features:[di]})}return n})();var NK={provide:yo,useExisting:Wn(()=>Wc),multi:!0},Wc=(()=>{class n extends wv{min;inputName="min";normalizeInput=t=>RK(t);createValidator=t=>Vk(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Jr(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Mc("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[yr([NK]),Cn]})}return n})(),kK={provide:yo,useExisting:Wn(()=>Hi),multi:!0};var Hi=(()=>{class n extends wv{required;inputName="required";normalizeInput=rs;createValidator=t=>Bk;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Jr(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Mc("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[yr([kK]),Cn]})}return n})();var FK={provide:yo,useExisting:Wn(()=>ib),multi:!0},ib=(()=>{class n extends wv{email;inputName="email";normalizeInput=rs;createValidator=t=>Uk;enabled(t){return t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=Jr(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},standalone:!1,features:[yr([FK]),Cn]})}return n})(),LK={provide:yo,useExisting:Wn(()=>Nh),multi:!0},Nh=(()=>{class n extends wv{minlength;inputName="minlength";normalizeInput=t=>PK(t);createValidator=t=>jk(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=Jr(n)))(i||n)}})();static \u0275dir=Ze({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&Mc("minlength",i._enabled?i.minlength:null)},inputs:{minlength:"minlength"},standalone:!1,features:[yr([LK]),Cn]})}return n})();var c3=(()=>{class n{static \u0275fac=function(r){return new(r||n)};static \u0275mod=Lr({type:n});static \u0275inj=kr({})}return n})(),XC=class extends Dl{constructor(e,t,r){super(tb(t),nb(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){Zk(this,!1,e),e.forEach((r,i)=>{Qk(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>r._syncPendingControls()?!0:t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function Fk(n){return!!n&&(n.asyncValidators!==void 0||n.validators!==void 0||n.updateOn!==void 0)}var Nl=(()=>{class n{useNonNullable=!1;get nonNullable(){let t=new n;return t.useNonNullable=!0,t}group(t,r=null){let i=this._reduceControls(t),o={};return Fk(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new Tl(i,o)}record(t,r=null){let i=this._reduceControls(t);return new YC(i,r)}control(t,r,i){let o={};return this.useNonNullable?(Fk(r)?o=r:(o.validators=r,o.asyncValidators=i),new Ph(t,xe(Q({},o),{nonNullable:!0}))):new Ph(t,r,i)}array(t,r,i){let o=t.map(s=>this._createControl(s));return new XC(o,r,i)}_reduceControls(t){let r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){if(t instanceof Ph)return t;if(t instanceof Dl)return t;if(Array.isArray(t)){let r=t[0],i=t.length>1?t[1]:null,o=t.length>2?t[2]:null;return this.control(r,i,o)}else return this.control(t)}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var sn=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Rh,useValue:t.callSetDisabledState??vv}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Lr({type:n});static \u0275inj=kr({imports:[c3]})}return n})(),ca=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:i3,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Rh,useValue:t.callSetDisabledState??vv}]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Lr({type:n});static \u0275inj=kr({imports:[c3]})}return n})();var u3=()=>{};var f3=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},VK=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],s=n[t++],a=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},Ev={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],s=i+1<n.length,a=s?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,l=o>>2,d=(o&3)<<4|a>>4,f=(a&15)<<2|u>>6,h=u&63;c||(h=64,s||(f=64)),r.push(t[l],t[d],t[f],t[h])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(f3(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):VK(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],a=i<n.length?t[n.charAt(i)]:0;++i;let u=i<n.length?t[n.charAt(i)]:64;++i;let d=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||a==null||u==null||d==null)throw new sb;let f=o<<2|a>>4;if(r.push(f),u!==64){let h=a<<4&240|u>>2;if(r.push(h),d!==64){let g=u<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},sb=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},BK=function(n){let e=f3(n);return Ev.encodeByteArray(e,!0)},Fh=function(n){return BK(n).replace(/\./g,"")},Cv=function(n){try{return Ev.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function cb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var UK=()=>cb().__FIREBASE_DEFAULTS__,jK=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},HK=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Cv(n[1]);return e&&JSON.parse(e)},bv=()=>{try{return u3()||UK()||jK()||HK()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ub=n=>{var e,t;return(t=(e=bv())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},h3=n=>{let e=ub(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},lb=()=>{var n;return(n=bv())===null||n===void 0?void 0:n.config},db=n=>{var e;return(e=bv())===null||e===void 0?void 0:e[`_${n}`]};var Gc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function qc(n){return n.endsWith(".cloudworkstations.dev")}function Iv(n){return A(this,null,function*(){return(yield fetch(n,{credentials:"include"})).ok})}function p3(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Fh(JSON.stringify(t)),Fh(JSON.stringify(s)),""].join(".")}var kh={};function zK(){let n={prod:[],emulator:[]};for(let e of Object.keys(kh))kh[e]?n.emulator.push(e):n.prod.push(e);return n}function $K(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}var l3=!1;function kl(n,e){if(typeof window>"u"||typeof document>"u"||!qc(window.location.host)||kh[n]===e||kh[n]||l3)return;kh[n]=e;function t(f){return`__firebase__banner__${f}`}let r="__firebase__banner",o=zK().prod.length>0;function s(){let f=document.getElementById(r);f&&f.remove()}function a(f){f.style.display="flex",f.style.background="#7faaf0",f.style.position="fixed",f.style.bottom="5px",f.style.left="5px",f.style.padding=".5em",f.style.borderRadius="5px",f.style.alignItems="center"}function c(f,h){f.setAttribute("width","24"),f.setAttribute("id",h),f.setAttribute("height","24"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("fill","none"),f.style.marginLeft="-6px"}function u(){let f=document.createElement("span");return f.style.cursor="pointer",f.style.marginLeft="16px",f.style.fontSize="24px",f.innerHTML=" &times;",f.onclick=()=>{l3=!0,s()},f}function l(f,h){f.setAttribute("id",h),f.innerText="Learn more",f.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",f.setAttribute("target","__blank"),f.style.paddingLeft="5px",f.style.textDecoration="underline"}function d(){let f=$K(r),h=t("text"),g=document.getElementById(h)||document.createElement("span"),m=t("learnmore"),y=document.getElementById(m)||document.createElement("a"),x=t("preprendIcon"),w=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(f.created){let b=f.element;a(b),l(y,m);let T=u();c(w,x),b.append(w,g,y,T),document.body.appendChild(b)}o?(g.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",h)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",d):d()}function Ln(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function g3(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ln())}function WK(){var n;let e=(n=bv())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function m3(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function v3(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function y3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _3(){let n=Ln();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function x3(){return!WK()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lh(){try{return typeof indexedDB=="object"}catch{return!1}}function w3(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var GK="FirebaseError",ii=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=GK,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$i.prototype.create)}},$i=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?qK(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new ii(i,a,r)}};function qK(n,e){return n.replace(KK,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var KK=/\{\$([^}]+)}/g;function E3(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function _o(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],s=e[i];if(d3(o)&&d3(s)){if(!_o(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function d3(n){return n!==null&&typeof n=="object"}function Vh(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Fl(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Ll(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function C3(n,e){let t=new ab(n,e);return t.subscribe.bind(t)}var ab=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");YK(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=ob),i.error===void 0&&(i.error=ob),i.complete===void 0&&(i.complete=ob);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function YK(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ob(){}var WCe=4*60*60*1e3;function Gt(n){return n&&n._delegate?n._delegate:n}var xr=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Kc="[DEFAULT]";var fb=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Gc;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(QK(e))try{this.getOrInitializeService({instanceIdentifier:Kc})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Kc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return A(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Kc){return this.instances.has(e)}getOptions(e=Kc){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XK(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Kc){return this.component?this.component.multipleInstances?e:Kc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function XK(n){return n===Kc?void 0:n}function QK(n){return n.instantiationMode==="EAGER"}var Sv=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new fb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var ZK=[],We=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(We||{}),JK={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},eY=We.INFO,tY={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},nY=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=tY[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},xo=class{constructor(e){this.name=e,this._logLevel=eY,this._logHandler=nY,this._userLogHandler=null,ZK.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JK[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}};var rY=(n,e)=>e.some(t=>n instanceof t),b3,I3;function iY(){return b3||(b3=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oY(){return I3||(I3=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var S3=new WeakMap,pb=new WeakMap,A3=new WeakMap,hb=new WeakMap,mb=new WeakMap;function sY(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(wo(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&S3.set(t,n)}).catch(()=>{}),mb.set(e,n),e}function aY(n){if(pb.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});pb.set(n,e)}var gb={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return pb.get(n);if(e==="objectStoreNames")return n.objectStoreNames||A3.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return wo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function D3(n){gb=n(gb)}function cY(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Av(this),e,...t);return A3.set(r,e.sort?e.sort():[e]),wo(r)}:oY().includes(n)?function(...e){return n.apply(Av(this),e),wo(S3.get(this))}:function(...e){return wo(n.apply(Av(this),e))}}function uY(n){return typeof n=="function"?cY(n):(n instanceof IDBTransaction&&aY(n),rY(n,iY())?new Proxy(n,gb):n)}function wo(n){if(n instanceof IDBRequest)return sY(n);if(hb.has(n))return hb.get(n);let e=uY(n);return e!==n&&(hb.set(n,e),mb.set(e,n)),e}var Av=n=>mb.get(n);function M3(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(n,e),a=wo(s);return r&&s.addEventListener("upgradeneeded",c=>{r(wo(s.result),c.oldVersion,c.newVersion,wo(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var lY=["get","getKey","getAll","getAllKeys","count"],dY=["put","add","delete","clear"],vb=new Map;function T3(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(vb.get(e))return vb.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=dY.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||lY.includes(t)))return;let o=function(s,...a){return A(this,null,function*(){let c=this.transaction(s,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),i&&c.done]))[0]})};return vb.set(e,o),o}D3(n=>xe(Q({},n),{get:(e,t,r)=>T3(e,t)||n.get(e,t,r),has:(e,t)=>!!T3(e,t)||n.has(e,t)}));var _b=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(fY(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function fY(n){let e=n.getComponent();return e?.type==="VERSION"}var xb="@firebase/app",O3="0.12.3";var os=new xo("@firebase/app"),hY="@firebase/app-compat",pY="@firebase/analytics-compat",gY="@firebase/analytics",mY="@firebase/app-check-compat",vY="@firebase/app-check",yY="@firebase/auth",_Y="@firebase/auth-compat",xY="@firebase/database",wY="@firebase/data-connect",EY="@firebase/database-compat",CY="@firebase/functions",bY="@firebase/functions-compat",IY="@firebase/installations",SY="@firebase/installations-compat",AY="@firebase/messaging",DY="@firebase/messaging-compat",TY="@firebase/performance",MY="@firebase/performance-compat",OY="@firebase/remote-config",PY="@firebase/remote-config-compat",RY="@firebase/storage",NY="@firebase/storage-compat",kY="@firebase/firestore",FY="@firebase/vertexai",LY="@firebase/firestore-compat",VY="firebase",BY="11.7.3";var wb="[DEFAULT]",UY={[xb]:"fire-core",[hY]:"fire-core-compat",[gY]:"fire-analytics",[pY]:"fire-analytics-compat",[vY]:"fire-app-check",[mY]:"fire-app-check-compat",[yY]:"fire-auth",[_Y]:"fire-auth-compat",[xY]:"fire-rtdb",[wY]:"fire-data-connect",[EY]:"fire-rtdb-compat",[CY]:"fire-fn",[bY]:"fire-fn-compat",[IY]:"fire-iid",[SY]:"fire-iid-compat",[AY]:"fire-fcm",[DY]:"fire-fcm-compat",[TY]:"fire-perf",[MY]:"fire-perf-compat",[OY]:"fire-rc",[PY]:"fire-rc-compat",[RY]:"fire-gcs",[NY]:"fire-gcs-compat",[kY]:"fire-fst",[LY]:"fire-fst-compat",[FY]:"fire-vertex","fire-js":"fire-js",[VY]:"fire-js-all"};var Bh=new Map,jY=new Map,Eb=new Map;function P3(n,e){try{n.container.addComponent(e)}catch(t){os.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Wi(n){let e=n.name;if(Eb.has(e))return os.debug(`There were multiple attempts to register component ${e}.`),!1;Eb.set(e,n);for(let t of Bh.values())P3(t,n);for(let t of jY.values())P3(t,n);return!0}function Vl(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function wr(n){return n==null?!1:n.settings!==void 0}var HY={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ua=new $i("app","Firebase",HY);var Cb=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ua.create("app-deleted",{appName:this._name})}};var la=BY;function Sb(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:wb,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ua.create("bad-app-name",{appName:String(i)});if(t||(t=lb()),!t)throw ua.create("no-options");let o=Bh.get(i);if(o){if(_o(t,o.options)&&_o(r,o.config))return o;throw ua.create("duplicate-app",{appName:i})}let s=new Sv(i);for(let c of Eb.values())s.addComponent(c);let a=new Cb(t,r,s);return Bh.set(i,a),a}function Yc(n=wb){let e=Bh.get(n);if(!e&&n===wb&&lb())return Sb();if(!e)throw ua.create("no-app",{appName:n});return e}function Dv(){return Array.from(Bh.values())}function an(n,e,t){var r;let i=(r=UY[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){let a=[`Unable to register library "${i}" with version "${e}":`];o&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&a.push("and"),s&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),os.warn(a.join(" "));return}Wi(new xr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var zY="firebase-heartbeat-database",$Y=1,Uh="firebase-heartbeat-store",yb=null;function F3(){return yb||(yb=M3(zY,$Y,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Uh)}catch(t){console.warn(t)}}}}).catch(n=>{throw ua.create("idb-open",{originalErrorMessage:n.message})})),yb}function WY(n){return A(this,null,function*(){try{let t=(yield F3()).transaction(Uh),r=yield t.objectStore(Uh).get(L3(n));return yield t.done,r}catch(e){if(e instanceof ii)os.warn(e.message);else{let t=ua.create("idb-get",{originalErrorMessage:e?.message});os.warn(t.message)}}})}function R3(n,e){return A(this,null,function*(){try{let r=(yield F3()).transaction(Uh,"readwrite");yield r.objectStore(Uh).put(e,L3(n)),yield r.done}catch(t){if(t instanceof ii)os.warn(t.message);else{let r=ua.create("idb-set",{originalErrorMessage:t?.message});os.warn(r.message)}}})}function L3(n){return`${n.name}!${n.options.appId}`}var GY=1024,qY=30,bb=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Ib(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return A(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=N3();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats.length>qY){let s=YY(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){os.warn(r)}})}getHeartbeatsHeader(){return A(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=N3(),{heartbeatsToSend:r,unsentEntries:i}=KY(this._heartbeatsCache.heartbeats),o=Fh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return os.warn(t),""}})}};function N3(){return new Date().toISOString().substring(0,10)}function KY(n,e=GY){let t=[],r=n.slice();for(let i of n){let o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),k3(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),k3(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var Ib=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return A(this,null,function*(){return Lh()?w3().then(()=>!0).catch(()=>!1):!1})}read(){return A(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield WY(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return A(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return R3(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return A(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return R3(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function k3(n){return Fh(JSON.stringify({version:2,heartbeats:n})).length}function YY(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}function XY(n){Wi(new xr("platform-logger",e=>new _b(e),"PRIVATE")),Wi(new xr("heartbeat",e=>new bb(e),"PRIVATE")),an(xb,O3,n),an(xb,O3,"esm2017"),an("fire-js","")}XY("");var QY="firebase",ZY="11.7.3";an(QY,ZY,"app");function Ab(n){n===void 0&&(sE(Ab),n=G(En));let e=n.get(a0);return t=>new Re(r=>{let i=e.add(),o=!1;function s(){o||(i(),o=!0)}let a=t.subscribe({next:c=>{r.next(c),s()},complete:()=>{r.complete(),s()},error:c=>{r.error(c),s()}});return a.add(()=>{r.unsubscribe(),s()}),a})}var da=new Sc("ANGULARFIRE2_VERSION");function jh(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(s=>s.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ul=(n,e)=>{let t=e?[e]:Dv(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},Bl=function(n){return n[n.SILENT=0]="SILENT",n[n.WARN=1]="WARN",n[n.VERBOSE=2]="VERBOSE",n}(Bl||{}),V3=qE()&&typeof Zone<"u"?Bl.WARN:Bl.SILENT;var Tv=class{zone;delegate;constructor(e,t=Ux){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i?i.runGuarded(()=>{e.apply(this,[s])}):e.apply(this,[s])};return this.delegate.schedule(o,t,r)}},fa=(()=>{class n{outsideAngular;insideAngular;constructor(){let t=G(He);this.outsideAngular=t.runOutsideAngular(()=>new Tv(typeof Zone>"u"?void 0:Zone.current)),this.insideAngular=t.run(()=>new Tv(typeof Zone>"u"?void 0:Zone.current,Mf))}static \u0275fac=function(r){return new(r||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),B3=!1;function JY(n,e){!B3&&(V3>Bl.SILENT||qE())&&(B3=!0,console.warn("Calling Firebase APIs outside of an Injection context may destabilize your application leading to subtle change-detection and hydration bugs. Find more at https://github.com/angular/angularfire/blob/main/docs/zones.md")),V3>=e&&console.warn(`Firebase API called outside injection context: ${n.name}`)}function eX(n){let e=G(He,{optional:!0});return e?e.runOutsideAngular(()=>n()):n()}function Xc(n){let e=G(He,{optional:!0});return e?e.run(()=>n()):n()}var tX=(n,e,t)=>(...r)=>(e&&setTimeout(e,0),nr(t,()=>Xc(()=>n.apply(void 0,r)))),qt=(n,e,t)=>(t||=e?Bl.WARN:Bl.VERBOSE,function(){let r,i=arguments,o,s,a;try{o=G(fa),s=G(a0),a=G(er)}catch{return JY(n,t),n.apply(this,i)}for(let u=0;u<arguments.length;u++)typeof i[u]=="function"&&(e&&(r||=Xc(()=>s.add())),i[u]=tX(i[u],r,a));let c=eX(()=>n.apply(this,i));return e?c instanceof Re?c.pipe(zs(o.outsideAngular),Hs(o.insideAngular),Ab(a)):c instanceof Promise?Xc(()=>new Promise((u,l)=>{s.run(()=>c).then(d=>nr(a,()=>Xc(()=>u(d))),d=>nr(a,()=>Xc(()=>l(d))))})):typeof c=="function"&&r?function(){return setTimeout(r,0),c.apply(this,arguments)}:Xc(()=>c):c instanceof Re?c.pipe(zs(o.outsideAngular),Hs(o.insideAngular)):Xc(()=>c)});var ss=class{constructor(e){return e}},Qc=class{constructor(){return Dv()}};function nX(n){return n&&n.length===1?n[0]:new ss(Yc())}var Db=new ae("angularfire2._apps"),rX={provide:ss,useFactory:nX,deps:[[new Zr,Db]]},iX={provide:Qc,deps:[[new Zr,Db]]};function oX(n){return(e,t)=>{let r=t.get(Ys);an("angularfire",da.full,"core"),an("angularfire",da.full,"app"),an("angular",YR.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new ss(i)}}function U3(n,...e){return Jo([rX,iX,{provide:Db,useFactory:oX(n),multi:!0,deps:[He,En,fa,...e]}])}var j3=qt(Sb,!0);var sX=new Map,aX={activated:!1,tokenObservers:[]},cX={initialized:!1,enabled:!1};function Gi(n){return sX.get(n)||Object.assign({},aX)}function W3(){return cX}var uX="https://content-firebaseappcheck.googleapis.com/v1";var lX="exchangeDebugToken",H3={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},Qbe=24*60*60*1e3;var Ob=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return A(this,null,function*(){this.stop();try{this.pending=new Gc,this.pending.promise.catch(t=>{}),yield dX(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Gc,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function dX(n){return new Promise(e=>{setTimeout(e,n)})}var fX={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.","initial-throttle":"{$httpStatus} error. Attempts allowed again after {$time}",throttled:"Requests throttled due to previous {$httpStatus} error. Attempts allowed again after {$time}"},ha=new $i("appCheck","AppCheck",fX);function G3(n){if(!Gi(n).activated)throw ha.create("use-before-activation",{appName:n.name})}function q3(r,i){return A(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let h=yield s.getHeartbeatsHeader();h&&(o["X-Firebase-Client"]=h)}let a={method:"POST",body:JSON.stringify(e),headers:o},c;try{c=yield fetch(n,a)}catch(h){throw ha.create("fetch-network-error",{originalErrorMessage:h?.message})}if(c.status!==200)throw ha.create("fetch-status-error",{httpStatus:c.status});let u;try{u=yield c.json()}catch(h){throw ha.create("fetch-parse-error",{originalErrorMessage:h?.message})}let l=u.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw ha.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${u.ttl}`});let d=Number(l[1])*1e3,f=Date.now();return{token:u.token,expireTimeMillis:f+d,issuedAtTimeMillis:f}})}function K3(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${uX}/projects/${t}/apps/${r}:${lX}?key=${i}`,body:{debug_token:e}}}var hX="firebase-app-check-database",pX=1,Pb="firebase-app-check-store";var Mv=null;function gX(){return Mv||(Mv=new Promise((n,e)=>{try{let t=indexedDB.open(hX,pX);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(ha.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(Pb,{keyPath:"compositeKey"})}}}catch(t){e(ha.create("storage-open",{originalErrorMessage:t?.message}))}}),Mv)}function mX(n,e){return vX(yX(n),e)}function vX(n,e){return A(this,null,function*(){let r=(yield gX()).transaction(Pb,"readwrite"),o=r.objectStore(Pb).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=c=>{s()},r.onerror=c=>{var u;a(ha.create("storage-set",{originalErrorMessage:(u=c.target.error)===null||u===void 0?void 0:u.message}))}})})}function yX(n){return`${n.options.appId}-${n.name}`}var Hh=new xo("@firebase/app-check");function Tb(n,e){return Lh()?mX(n,e).catch(t=>{Hh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Y3(){return W3().enabled}function X3(){return A(this,null,function*(){let n=W3();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var _X={error:"UNKNOWN_ERROR"};function xX(n){return Ev.encodeString(JSON.stringify(n),!1)}function Rb(n,e=!1,t=!1){return A(this,null,function*(){let r=n.app;G3(r);let i=Gi(r),o=i.token,s;if(o&&!zh(o)&&(i.token=void 0,o=void 0),!o){let u=yield i.cachedTokenPromise;u&&(zh(u)?o=u:yield Tb(r,void 0))}if(!e&&o&&zh(o))return{token:o.token};let a=!1;if(Y3())try{i.exchangeTokenPromise||(i.exchangeTokenPromise=q3(K3(r,yield X3()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),a=!0);let u=yield i.exchangeTokenPromise;return yield Tb(r,u),i.token=u,{token:u.token}}catch(u){return u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Hh.warn(u.message):t&&Hh.error(u),Mb(u)}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),a=!0),o=yield Gi(r).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"||u.code==="appCheck/initial-throttle"?Hh.warn(u.message):t&&Hh.error(u),s=u}let c;return o?s?zh(o)?c={token:o.token,internalError:s}:c=Mb(s):(c={token:o.token},i.token=o,yield Tb(r,o)):c=Mb(s),a&&bX(r,c),c})}function wX(n){return A(this,null,function*(){let e=n.app;G3(e);let{provider:t}=Gi(e);if(Y3()){let r=yield X3(),{token:i}=yield q3(K3(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function EX(n,e,t,r){let{app:i}=n,o=Gi(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&zh(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),z3(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>z3(n))}function Q3(n,e){let t=Gi(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function z3(n){let{app:e}=n,t=Gi(e),r=t.tokenRefresher;r||(r=CX(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function CX(n){let{app:e}=n;return new Ob(()=>A(null,null,function*(){let t=Gi(e),r;if(t.token?r=yield Rb(n,!0):r=yield Rb(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Gi(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},H3.RETRIAL_MIN_WAIT,H3.RETRIAL_MAX_WAIT)}function bX(n,e){let t=Gi(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function zh(n){return n.expireTimeMillis-Date.now()>0}function Mb(n){return{token:xX(_X),error:n}}var Nb=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Gi(this.app);for(let t of e)Q3(this.app,t.next);return Promise.resolve()}};function IX(n,e){return new Nb(n,e)}function SX(n){return{getToken:e=>Rb(n,e),getLimitedUseToken:()=>wX(n),addTokenListener:e=>EX(n,"INTERNAL",e),removeTokenListener:e=>Q3(n.app,e)}}var AX="@firebase/app-check",DX="0.9.3";var TX="app-check",$3="app-check-internal";function MX(){Wi(new xr(TX,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return IX(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider($3).initialize()})),Wi(new xr($3,n=>{let e=n.getProvider("app-check").getImmediate();return SX(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),an(AX,DX)}MX();var OX="app-check";var jl=class{constructor(){return Ul(OX)}};var PX=["localhost","0.0.0.0","127.0.0.1"],lIe=typeof window<"u"&&PX.includes(window.location.hostname);function hF(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var pF=hF,gF=new $i("auth","Firebase",hF());var Fv=new xo("@firebase/auth");function RX(n,...e){Fv.logLevel<=We.WARN&&Fv.warn(`Auth (${la}): ${n}`,...e)}function Pv(n,...e){Fv.logLevel<=We.ERROR&&Fv.error(`Auth (${la}): ${n}`,...e)}function bo(n,...e){throw iI(n,...e)}function Zc(n,...e){return iI(n,...e)}function mF(n,e,t){let r=Object.assign(Object.assign({},pF()),{[e]:t});return new $i("auth","Firebase",r).create(e,{appName:n.name})}function Eo(n){return mF(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function iI(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return gF.create(n,...e)}function de(n,e,...t){if(!n)throw iI(e,...t)}function as(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Pv(e),new Error(e)}function ma(n,e){n||as(e)}function Vb(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function NX(){return Z3()==="http:"||Z3()==="https:"}function Z3(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function kX(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NX()||v3()||"connection"in navigator)?navigator.onLine:!0}function FX(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Jc=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ma(t>e,"Short delay should be less than long delay!"),this.isMobile=g3()||y3()}get(){return kX()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function oI(n,e){ma(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Lv=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;as("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;as("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;as("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var LX={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var VX=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],BX=new Jc(3e4,6e4);function us(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Io(o,s,a,c){return A(this,arguments,function*(n,e,t,r,i={}){return vF(n,i,()=>A(null,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let d=Vh(Object.assign({key:n.config.apiKey},l)).slice(1),f=yield n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);let h=Object.assign({method:e,headers:f},u);return m3()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&qc(n.emulatorConfig.host)&&(h.credentials="include"),Lv.fetch()(yield yF(n,n.config.apiHost,t,d),h)}))})}function vF(n,e,t){return A(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},LX),e);try{let i=new Bb(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let s=yield o.json();if("needConfirmation"in s)throw Ov(n,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{let a=o.ok?s.errorMessage:s.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ov(n,"credential-already-in-use",s);if(c==="EMAIL_EXISTS")throw Ov(n,"email-already-in-use",s);if(c==="USER_DISABLED")throw Ov(n,"user-disabled",s);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw mF(n,l,u);bo(n,l)}}catch(i){if(i instanceof ii)throw i;bo(n,"network-request-failed",{message:String(i)})}})}function Qh(o,s,a,c){return A(this,arguments,function*(n,e,t,r,i={}){let u=yield Io(n,e,t,r,i);return"mfaPendingCredential"in u&&bo(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function yF(n,e,t,r){return A(this,null,function*(){let i=`${e}${t}?${r}`,o=n,s=o.config.emulator?oI(n.config,i):`${n.config.apiScheme}://${i}`;return VX.includes(t)&&(yield o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(s).toString():s})}function UX(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var Bb=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Zc(this.auth,"network-request-failed")),BX.get())})}};function Ov(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Zc(n,e,r);return i.customData._tokenResponse=t,i}function J3(n){return n!==void 0&&n.enterprise!==void 0}var Ub=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return UX(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}};function jX(n,e){return A(this,null,function*(){return Io(n,"GET","/v2/recaptchaConfig",us(n,e))})}function HX(n,e){return A(this,null,function*(){return Io(n,"POST","/v1/accounts:delete",e)})}function Vv(n,e){return A(this,null,function*(){return Io(n,"POST","/v1/accounts:lookup",e)})}function Wh(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function sI(n,e=!1){return A(this,null,function*(){let t=Gt(n),r=yield t.getIdToken(e),i=aI(r);de(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,s=o?.sign_in_provider;return{claims:i,token:r,authTime:Wh(kb(i.auth_time)),issuedAtTime:Wh(kb(i.iat)),expirationTime:Wh(kb(i.exp)),signInProvider:s||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function kb(n){return Number(n)*1e3}function aI(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Pv("JWT malformed, contained fewer than 3 sections"),null;try{let i=Cv(t);return i?JSON.parse(i):(Pv("Failed to decode base64 JWT payload"),null)}catch(i){return Pv("Caught error parsing JWT payload as JSON",i?.toString()),null}}function eF(n){let e=aI(n);return de(e,"internal-error"),de(typeof e.exp<"u","internal-error"),de(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Hl(n,e,t=!1){return A(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof ii&&zX(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function zX({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var jb=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>A(this,null,function*(){yield this.iteration()}),t)}iteration(){return A(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var qh=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wh(this.lastLoginAt),this.creationTime=Wh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Bv(n){return A(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Hl(n,Vv(t,{idToken:r}));de(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?_F(o.providerUserInfo):[],a=$X(n.providerData,s),c=n.isAnonymous,u=!(n.email&&o.passwordHash)&&!a?.length,l=c?u:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new qh(o.createdAt,o.lastLoginAt),isAnonymous:l};Object.assign(n,d)})}function cI(n){return A(this,null,function*(){let e=Gt(n);yield Bv(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function $X(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function _F(n){return n.map(e=>{var{providerId:t}=e,r=jx(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function WX(n,e){return A(this,null,function*(){let t=yield vF(n,{},()=>A(null,null,function*(){let r=Vh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,s=yield yF(n,i,"/v1/token",`key=${o}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Lv.fetch()(s,{method:"POST",headers:a,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function GX(n,e){return A(this,null,function*(){return Io(n,"POST","/v2/accounts:revokeToken",us(n,e))})}var Gh=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){de(e.idToken,"internal-error"),de(typeof e.idToken<"u","internal-error"),de(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):eF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){de(e.length!==0,"internal-error");let t=eF(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return A(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(de(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return A(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield WX(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,s=new n;return r&&(de(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(de(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(de(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return as("not implemented")}};function pa(n,e){de(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ga=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=jx(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new qh(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return A(this,null,function*(){let t=yield Hl(this,this.stsTokenManager.getToken(this.auth,e));return de(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return sI(this,e)}reload(){return cI(this)}_assign(e){this!==e&&(de(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){de(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return A(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Bv(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return A(this,null,function*(){if(wr(this.auth.app))return Promise.reject(Eo(this.auth));let e=yield this.getIdToken();return yield Hl(this,HX(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,s,a,c,u,l;let d=(r=t.displayName)!==null&&r!==void 0?r:void 0,f=(i=t.email)!==null&&i!==void 0?i:void 0,h=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,g=(s=t.photoURL)!==null&&s!==void 0?s:void 0,m=(a=t.tenantId)!==null&&a!==void 0?a:void 0,y=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,x=(u=t.createdAt)!==null&&u!==void 0?u:void 0,w=(l=t.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:b,emailVerified:T,isAnonymous:P,providerData:k,stsTokenManager:C}=t;de(b&&C,e,"internal-error");let E=Gh.fromJSON(this.name,C);de(typeof b=="string",e,"internal-error"),pa(d,e.name),pa(f,e.name),de(typeof T=="boolean",e,"internal-error"),de(typeof P=="boolean",e,"internal-error"),pa(h,e.name),pa(g,e.name),pa(m,e.name),pa(y,e.name),pa(x,e.name),pa(w,e.name);let S=new n({uid:b,auth:e,email:f,emailVerified:T,displayName:d,isAnonymous:P,photoURL:g,phoneNumber:h,tenantId:m,stsTokenManager:E,createdAt:x,lastLoginAt:w});return k&&Array.isArray(k)&&(S.providerData=k.map(M=>Object.assign({},M))),y&&(S._redirectEventId=y),S}static _fromIdTokenResponse(e,t,r=!1){return A(this,null,function*(){let i=new Gh;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Bv(o),o})}static _fromGetAccountInfoResponse(e,t,r){return A(this,null,function*(){let i=t.users[0];de(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?_F(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!o?.length,a=new Gh;a.updateFromIdToken(r);let c=new n({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:s}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new qh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(c,u),c})}};var tF=new Map;function cs(n){ma(n instanceof Function,"Expected a class definition");let e=tF.get(n);return e?(ma(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,tF.set(n,e),e)}var qX=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return A(this,null,function*(){return!0})}_set(t,r){return A(this,null,function*(){this.storage[t]=r})}_get(t){return A(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return A(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Hb=qX;function Rv(n,e,t){return`firebase:${n}:${e}:${t}`}var Uv=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Rv(this.userKey,i.apiKey,o),this.fullPersistenceKey=Rv("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return A(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){let t=yield Vv(this.auth,{idToken:e}).catch(()=>{});return t?ga._fromGetAccountInfoResponse(this.auth,t,e):null}return ga._fromJSON(this.auth,e)})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return A(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return A(this,null,function*(){if(!t.length)return new n(cs(Hb),e,r);let i=(yield Promise.all(t.map(u=>A(null,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),o=i[0]||cs(Hb),s=Rv(r,e.config.apiKey,e.name),a=null;for(let u of t)try{let l=yield u._get(s);if(l){let d;if(typeof l=="string"){let f=yield Vv(e,{idToken:l}).catch(()=>{});if(!f)break;d=yield ga._fromGetAccountInfoResponse(e,f,l)}else d=ga._fromJSON(e,l);u!==o&&(a=d),o=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new n(o,e,r):(o=c[0],a&&(yield o._set(s,a.toJSON())),yield Promise.all(t.map(u=>A(null,null,function*(){if(u!==o)try{yield u._remove(s)}catch{}}))),new n(o,e,r))})}};function nF(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CF(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(xF(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(IF(e))return"Blackberry";if(SF(e))return"Webos";if(wF(e))return"Safari";if((e.includes("chrome/")||EF(e))&&!e.includes("edge/"))return"Chrome";if(bF(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function xF(n=Ln()){return/firefox\//i.test(n)}function wF(n=Ln()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function EF(n=Ln()){return/crios\//i.test(n)}function CF(n=Ln()){return/iemobile/i.test(n)}function bF(n=Ln()){return/android/i.test(n)}function IF(n=Ln()){return/blackberry/i.test(n)}function SF(n=Ln()){return/webos/i.test(n)}function uI(n=Ln()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function KX(n=Ln()){var e;return uI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function YX(){return _3()&&document.documentMode===10}function AF(n=Ln()){return uI(n)||bF(n)||SF(n)||IF(n)||/windows phone/i.test(n)||CF(n)}function DF(n,e=[]){let t;switch(n){case"Browser":t=nF(Ln());break;case"Worker":t=`${nF(Ln())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${la}/${r}`}var zb=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((s,a)=>{try{let c=e(o);s(c)}catch(c){a(c)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return A(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function XX(t){return A(this,arguments,function*(n,e={}){return Io(n,"GET","/v2/passwordPolicy",us(n,e))})}var QX=6,$b=class{constructor(e){var t,r,i,o;let s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=s.minPasswordLength)!==null&&t!==void 0?t:QX,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,s,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(s=c.containsNumericCharacter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Wb=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new jv(this),this.idTokenSubscription=new jv(this),this.beforeStateQueue=new zb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gF,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=cs(t)),this._initializationPromise=this.queue(()=>A(this,null,function*(){var r,i,o;if(!this._deleted&&(this.persistenceManager=yield Uv.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return A(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return A(this,null,function*(){try{let t=yield Vv(this,{idToken:e}),r=yield ga._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return A(this,null,function*(){var t;if(wr(this.app)){let s=this.app.settings.authIdToken;return s?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(s).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let s=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!s||s===a)&&c?.user&&(i=c.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return de(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return A(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return A(this,null,function*(){try{yield Bv(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=FX()}_delete(){return A(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return A(this,null,function*(){if(wr(this.app))return Promise.reject(Eo(this));let t=e?Gt(e):null;return t&&de(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return A(this,null,function*(){if(!this._deleted)return e&&de(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>A(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return A(this,null,function*(){return wr(this.app)?Promise.reject(Eo(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return wr(this.app)?Promise.reject(Eo(this)):this.queue(()=>A(this,null,function*(){yield this.assertedPersistence.setPersistence(cs(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return A(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return A(this,null,function*(){let e=yield XX(this),t=new $b(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new $i("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return A(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield GX(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return A(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return A(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&cs(e)||this._popupRedirectResolver;de(t,this,"argument-error"),this.redirectPersistenceManager=yield Uv.create(this,[cs(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return A(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>A(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return A(this,null,function*(){if(e===this.currentUser)return this.queue(()=>A(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),s=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(de(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,r,i);return()=>{s=!0,c()}}else{let c=e.addObserver(t);return()=>{s=!0,c()}}}directlySetCurrentUser(e){return A(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return de(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DF(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return A(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return A(this,null,function*(){var e;if(wr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&RX(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function va(n){return Gt(n)}var jv=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=C3(t=>this.observer=t)}get next(){return de(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Yv={loadJS(){return A(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZX(n){Yv=n}function TF(n){return Yv.loadJS(n)}function JX(){return Yv.recaptchaEnterpriseScript}function eQ(){return Yv.gapiScript}function MF(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var Gb=class{constructor(){this.enterprise=new qb}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}},qb=class{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}};var tQ="recaptcha-enterprise",OF="NO_RECAPTCHA",Kb=class{constructor(e){this.type=tQ,this.auth=va(e)}verify(e="verify",t=!1){return A(this,null,function*(){function r(o){return A(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((s,a)=>A(null,null,function*(){jX(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let u=new Ub(c);return o.tenantId==null?o._agentRecaptchaConfig=u:o._tenantRecaptchaConfigs[o.tenantId]=u,s(u.siteKey)}}).catch(c=>{a(c)})}))})}function i(o,s,a){let c=window.grecaptcha;J3(c)?c.enterprise.ready(()=>{c.enterprise.execute(o,{action:e}).then(u=>{s(u)}).catch(()=>{s(OF)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Gb().execute("siteKey",{action:"verify"}):new Promise((o,s)=>{r(this.auth).then(a=>{if(!t&&J3(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let c=JX();c.length!==0&&(c+=a),TF(c).then(()=>{i(a,o,s)}).catch(u=>{s(u)})}}).catch(a=>{s(a)})})})}};function $h(n,e,t,r=!1,i=!1){return A(this,null,function*(){let o=new Kb(n),s;if(i)s=OF;else try{s=yield o.verify(t)}catch{s=yield o.verify(t,!0)}let a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){let c=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:u,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){let c=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:s,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Hv(n,e,t,r,i){return A(this,null,function*(){var o,s;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((o=n._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let a=yield $h(n,e,t,t==="getOobCode");return r(n,a)}else return r(n,e).catch(a=>A(null,null,function*(){if(a.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield $h(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(a)}));else if(i==="PHONE_PROVIDER")if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("PHONE_PROVIDER")){let a=yield $h(n,e,t);return r(n,a).catch(c=>A(null,null,function*(){var u;if(((u=n._getRecaptchaConfig())===null||u===void 0?void 0:u.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(c.code==="auth/missing-recaptcha-token"||c.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${t} flow.`);let l=yield $h(n,e,t,!1,!0);return r(n,l)}return Promise.reject(c)}))}else{let a=yield $h(n,e,t,!1,!0);return r(n,a)}else return Promise.reject(i+" provider is not supported.")})}function lI(n,e){let t=Vl(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(_o(o,e??{}))return i;bo(i,"already-initialized")}return t.initialize({options:e})}function nQ(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(cs);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function dI(n,e,t){let r=va(n);de(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=PF(e),{host:s,port:a}=rQ(e),c=a===null?"":`:${a}`,u={url:`${o}//${s}${c}/`},l=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){de(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),de(_o(u,r.config.emulator)&&_o(l,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=l,r.settings.appVerificationDisabledForTesting=!0,qc(s)?(kl("Auth",!0),Iv(`${o}//${s}${c}`)):i||iQ()}function PF(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function rQ(n){let e=PF(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:rF(r.substr(o.length+1))}}else{let[o,s]=r.split(":");return{host:o,port:rF(s)}}}function rF(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function iQ(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Kh=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return as("not implemented")}_getIdTokenResponse(e){return as("not implemented")}_linkToIdToken(e,t){return as("not implemented")}_getReauthenticationResolver(e){return as("not implemented")}};function oQ(n,e){return A(this,null,function*(){return Io(n,"POST","/v1/accounts:update",e)})}function sQ(n,e){return A(this,null,function*(){return Io(n,"POST","/v1/accounts:signUp",e)})}function aQ(n,e){return A(this,null,function*(){return Qh(n,"POST","/v1/accounts:signInWithPassword",us(n,e))})}function RF(n,e){return A(this,null,function*(){return Io(n,"POST","/v1/accounts:sendOobCode",us(n,e))})}function cQ(n,e){return A(this,null,function*(){return RF(n,e)})}function uQ(n,e){return A(this,null,function*(){return RF(n,e)})}function lQ(n,e){return A(this,null,function*(){return Qh(n,"POST","/v1/accounts:signInWithEmailLink",us(n,e))})}function dQ(n,e){return A(this,null,function*(){return Qh(n,"POST","/v1/accounts:signInWithEmailLink",us(n,e))})}var Yh=class n extends Kh{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return A(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hv(e,t,"signInWithPassword",aQ,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return lQ(e,{email:this._email,oobCode:this._password});default:bo(e,"internal-error")}})}_linkToIdToken(e,t){return A(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Hv(e,r,"signUpPassword",sQ,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return dQ(e,{idToken:t,email:this._email,oobCode:this._password});default:bo(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Fb(n,e){return A(this,null,function*(){return Qh(n,"POST","/v1/accounts:signInWithIdp",us(n,e))})}function fQ(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hQ(n){let e=Fl(Ll(n)).link,t=e?Fl(Ll(e)).deep_link_id:null,r=Fl(Ll(n)).deep_link_id;return(r?Fl(Ll(r)).link:null)||r||t||e||n}var zv=class n{constructor(e){var t,r,i,o,s,a;let c=Fl(Ll(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,l=(r=c.oobCode)!==null&&r!==void 0?r:null,d=fQ((i=c.mode)!==null&&i!==void 0?i:null);de(u&&l&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=l,this.continueUrl=(o=c.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=c.lang)!==null&&s!==void 0?s:null,this.tenantId=(a=c.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let t=hQ(e);try{return new n(t)}catch{return null}}};var Xv=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Yh._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=zv.parseLink(r);return de(i,"argument-error"),Yh._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),$v=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Yb=class extends $v{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function pQ(n,e){return A(this,null,function*(){return Qh(n,"POST","/v1/accounts:signUp",us(n,e))})}var zl=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return A(this,null,function*(){let o=yield ga._fromIdTokenResponse(e,r,i),s=iF(r);return new n({user:o,providerId:s,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return A(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=iF(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function iF(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Xb=class n extends ii{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function NF(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Xb._fromErrorAndOperation(n,o,e,r):o})}function gQ(n,e,t=!1){return A(this,null,function*(){let r=yield Hl(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return zl._forOperation(n,"link",r)})}function kF(n,e,t=!1){return A(this,null,function*(){let{auth:r}=n;if(wr(r.app))return Promise.reject(Eo(r));let i="reauthenticate";try{let o=yield Hl(n,NF(r,i,e,n),t);de(o.idToken,r,"internal-error");let s=aI(o.idToken);de(s,r,"internal-error");let{sub:a}=s;return de(n.uid===a,r,"user-mismatch"),zl._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&bo(r,"user-mismatch"),o}})}function FF(n,e,t=!1){return A(this,null,function*(){if(wr(n.app))return Promise.reject(Eo(n));let r="signIn",i=yield NF(n,r,e),o=yield zl._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function fI(n,e){return A(this,null,function*(){return FF(va(n),e)})}function Qv(n,e){return A(this,null,function*(){return kF(Gt(n),e)})}function LF(n,e,t){var r;de(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),de(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),de(typeof t.linkDomain>"u"||t.linkDomain.length>0,n,"invalid-hosting-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.linkDomain=t.linkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(de(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(de(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}function VF(n){return A(this,null,function*(){let e=va(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Zh(n,e,t){return A(this,null,function*(){let r=va(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&LF(r,i,t),yield Hv(r,i,"getOobCode",uQ,"EMAIL_PASSWORD_PROVIDER")})}function hI(n,e,t){return A(this,null,function*(){if(wr(n.app))return Promise.reject(Eo(n));let r=va(n),s=yield Hv(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pQ,"EMAIL_PASSWORD_PROVIDER").catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&VF(n),c}),a=yield zl._fromIdTokenResponse(r,"signIn",s);return yield r._updateCurrentUser(a.user),a})}function pI(n,e,t){return wr(n.app)?Promise.reject(Eo(n)):fI(Gt(n),Xv.credential(e,t)).catch(r=>A(null,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&VF(n),r}))}function Zv(n,e){return A(this,null,function*(){let t=Gt(n),i={requestType:"VERIFY_EMAIL",idToken:yield n.getIdToken()};e&&LF(t.auth,i,e);let{email:o}=yield cQ(t.auth,i);o!==n.email&&(yield n.reload())})}function Jv(n,e){let t=Gt(n);return wr(t.auth.app)?Promise.reject(Eo(t.auth)):mQ(t,e,null)}function mQ(n,e,t){return A(this,null,function*(){let{auth:r}=n,o={idToken:yield n.getIdToken(),returnSecureToken:!0};e&&(o.email=e),t&&(o.password=t);let s=yield Hl(n,oQ(r,o));yield n._updateTokensIfNecessary(s,!0)})}function Jh(n,e,t,r){return Gt(n).onIdTokenChanged(e,t,r)}function gI(n,e,t){return Gt(n).beforeAuthStateChanged(e,t)}function ep(n,e,t,r){return Gt(n).onAuthStateChanged(e,t,r)}function mI(n){return Gt(n).signOut()}var Wv="__sak";var Gv=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wv,"1"),this.storage.removeItem(Wv),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var vQ=1e3,yQ=10,_Q=(()=>{class n extends Gv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AF(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},s=this.storage.getItem(i);YX()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,yQ):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},vQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return A(this,null,function*(){yield Bs(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return A(this,null,function*(){let r=yield Bs(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return A(this,null,function*(){yield Bs(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),BF=_Q;var xQ=(()=>{class n extends Gv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),vI=xQ;function wQ(n){return Promise.all(n.map(e=>A(null,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var EQ=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return A(this,null,function*(){let r=t,{eventId:i,eventType:o,data:s}=r.data,a=this.handlersMap[o];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let c=Array.from(a).map(l=>A(this,null,function*(){return l(r.origin,s)})),u=yield wQ(c);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:u})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function UF(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Qb=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return A(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,c)=>{let u=UF("",20);i.port1.start();let l=setTimeout(()=>{c(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){let f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(l),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(f.data.response);break;default:clearTimeout(l),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})})}};function Co(){return window}function CQ(n){Co().location.href=n}function jF(){return typeof Co().WorkerGlobalScope<"u"&&typeof Co().importScripts=="function"}function bQ(){return A(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function IQ(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function SQ(){return jF()?self:null}var HF="firebaseLocalStorageDb",AQ=1,qv="firebaseLocalStorage",zF="fbase_key",eu=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function ey(n,e){return n.transaction([qv],e?"readwrite":"readonly").objectStore(qv)}function DQ(){let n=indexedDB.deleteDatabase(HF);return new eu(n).toPromise()}function Zb(){let n=indexedDB.open(HF,AQ);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(qv,{keyPath:zF})}catch(i){t(i)}}),n.addEventListener("success",()=>A(null,null,function*(){let r=n.result;r.objectStoreNames.contains(qv)?e(r):(r.close(),yield DQ(),e(yield Zb()))}))})}function oF(n,e,t){return A(this,null,function*(){let r=ey(n,!0).put({[zF]:e,value:t});return new eu(r).toPromise()})}function TQ(n,e){return A(this,null,function*(){let t=ey(n,!1).get(e),r=yield new eu(t).toPromise();return r===void 0?null:r.value})}function sF(n,e){let t=ey(n,!0).delete(e);return new eu(t).toPromise()}var MQ=800,OQ=3,PQ=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return A(this,null,function*(){return this.db?this.db:(this.db=yield Zb(),this.db)})}_withRetries(t){return A(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>OQ)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return A(this,null,function*(){return jF()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return A(this,null,function*(){this.receiver=EQ._getInstance(SQ()),this.receiver._subscribe("keyChanged",(t,r)=>A(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>A(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return A(this,null,function*(){var t,r;if(this.activeServiceWorker=yield bQ(),!this.activeServiceWorker)return;this.sender=new Qb(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return A(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||IQ()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return A(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Zb();return yield oF(t,Wv,"1"),yield sF(t,Wv),!0}catch{}return!1})}_withPendingWrite(t){return A(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return A(this,null,function*(){return this._withPendingWrite(()=>A(this,null,function*(){return yield this._withRetries(i=>oF(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return A(this,null,function*(){let r=yield this._withRetries(i=>TQ(i,t));return this.localCache[t]=r,r})}_remove(t){return A(this,null,function*(){return this._withPendingWrite(()=>A(this,null,function*(){return yield this._withRetries(r=>sF(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return A(this,null,function*(){let t=yield this._withRetries(o=>{let s=ey(o,!1).getAll();return new eu(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:s}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(s)&&(this.notifyListeners(o,s),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>A(this,null,function*(){return this._poll()}),MQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),$F=PQ;var yIe=MF("rcb"),_Ie=new Jc(3e4,6e4);function RQ(n,e){return e?cs(e):(de(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Xh=class extends Kh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fb(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Fb(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Fb(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function NQ(n){return FF(n.auth,new Xh(n),n.bypassAuthState)}function kQ(n){let{auth:e,user:t}=n;return de(t,e,"internal-error"),kF(t,new Xh(n),n.bypassAuthState)}function FQ(n){return A(this,null,function*(){let{auth:e,user:t}=n;return de(t,e,"internal-error"),gQ(t,new Xh(n),n.bypassAuthState)})}var Jb=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>A(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return A(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}let c={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return NQ;case"linkViaPopup":case"linkViaRedirect":return FQ;case"reauthViaPopup":case"reauthViaRedirect":return kQ;default:bo(this.auth,"internal-error")}}resolve(e){ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ma(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var xIe=new Jc(2e3,1e4);var LQ="pendingRedirect",Nv=new Map,eI=class n extends Jb{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return A(this,null,function*(){let e=Nv.get(this.auth._key());if(!e){try{let r=(yield VQ(this.resolver,this.auth))?yield Bs(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Nv.set(this.auth._key(),e)}return this.bypassAuthState||Nv.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return A(this,null,function*(){if(e.type==="signInViaRedirect")return Bs(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Bs(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return A(this,null,function*(){})}cleanUp(){}};function VQ(n,e){return A(this,null,function*(){let t=jQ(e),r=UQ(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function BQ(n,e){Nv.set(n._key(),e)}function UQ(n){return cs(n._redirectPersistence)}function jQ(n){return Rv(LQ,n.config.apiKey,n.name)}function HQ(n,e,t=!1){return A(this,null,function*(){if(wr(n.app))return Promise.reject(Eo(n));let r=va(n),i=RQ(r,e),s=yield new eI(r,i,t).execute();return s&&!t&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,e)),s})}var zQ=10*60*1e3,tI=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!$Q(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!WF(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Zc(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zQ&&this.cachedEventUids.clear(),this.cachedEventUids.has(aF(e))}saveEventToCache(e){this.cachedEventUids.add(aF(e)),this.lastProcessedEventTime=Date.now()}};function aF(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function WF({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function $Q(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WF(n);default:return!1}}function WQ(t){return A(this,arguments,function*(n,e={}){return Io(n,"GET","/v1/projects",e)})}var GQ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qQ=/^https?/;function KQ(n){return A(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield WQ(n);for(let t of e)try{if(YQ(t))return}catch{}bo(n,"unauthorized-domain")})}function YQ(n){let e=Vb(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let s=new URL(n);return s.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&s.hostname===r}if(!qQ.test(t))return!1;if(GQ.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var XQ=new Jc(3e4,6e4);function cF(){let n=Co().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function QQ(n){return new Promise((e,t)=>{var r,i,o;function s(){cF(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{cF(),t(Zc(n,"network-request-failed"))},timeout:XQ.get()})}if(!((i=(r=Co().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Co().gapi)===null||o===void 0)&&o.load)s();else{let a=MF("iframefcb");return Co()[a]=()=>{gapi.load?s():t(Zc(n,"network-request-failed"))},TF(`${eQ()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw kv=null,e})}var kv=null;function ZQ(n){return kv=kv||QQ(n),kv}var JQ=new Jc(5e3,15e3),eZ="__/auth/iframe",tZ="emulator/auth/iframe",nZ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rZ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function iZ(n){let e=n.config;de(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?oI(e,tZ):`https://${n.config.authDomain}/${eZ}`,r={apiKey:e.apiKey,appName:n.name,v:la},i=rZ.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Vh(r).slice(1)}`}function oZ(n){return A(this,null,function*(){let e=yield ZQ(n),t=Co().gapi;return de(t,n,"internal-error"),e.open({where:document.body,url:iZ(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nZ,dontclear:!0},r=>new Promise((i,o)=>A(null,null,function*(){yield r.restyle({setHideOnLeave:!1});let s=Zc(n,"network-request-failed"),a=Co().setTimeout(()=>{o(s)},JQ.get());function c(){Co().clearTimeout(a),i(r)}r.ping(c).then(c,()=>{o(s)})})))})}var sZ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aZ=500,cZ=600,uZ="_blank",lZ="http://localhost",Kv=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function dZ(n,e,t,r=aZ,i=cZ){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",c=Object.assign(Object.assign({},sZ),{width:r.toString(),height:i.toString(),top:o,left:s}),u=Ln().toLowerCase();t&&(a=EF(u)?uZ:t),xF(u)&&(e=e||lZ,c.scrollbars="yes");let l=Object.entries(c).reduce((f,[h,g])=>`${f}${h}=${g},`,"");if(KX(u)&&a!=="_self")return fZ(e||"",a),new Kv(null);let d=window.open(e||"",a,l);de(d,n,"popup-blocked");try{d.focus()}catch{}return new Kv(d)}function fZ(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var hZ="__/auth/handler",pZ="emulator/auth/handler",gZ=encodeURIComponent("fac");function uF(n,e,t,r,i,o){return A(this,null,function*(){de(n.config.authDomain,n,"auth-domain-config-required"),de(n.config.apiKey,n,"invalid-api-key");let s={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:la,eventId:i};if(e instanceof $v){e.setDefaultLanguage(n.languageCode),s.providerId=e.providerId||"",E3(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(let[l,d]of Object.entries(o||{}))s[l]=d}if(e instanceof Yb){let l=e.getScopes().filter(d=>d!=="");l.length>0&&(s.scopes=l.join(","))}n.tenantId&&(s.tid=n.tenantId);let a=s;for(let l of Object.keys(a))a[l]===void 0&&delete a[l];let c=yield n._getAppCheckToken(),u=c?`#${gZ}=${encodeURIComponent(c)}`:"";return`${mZ(n)}?${Vh(a).slice(1)}${u}`})}function mZ({config:n}){return n.emulator?oI(n,pZ):`https://${n.authDomain}/${hZ}`}var Lb="webStorageSupport",nI=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=vI,this._completeRedirectFn=HQ,this._overrideRedirectResult=BQ}_openPopup(e,t,r,i){return A(this,null,function*(){var o;ma((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let s=yield uF(e,t,r,Vb(),i);return dZ(e,s,UF())})}_openRedirect(e,t,r,i){return A(this,null,function*(){yield this._originValidation(e);let o=yield uF(e,t,r,Vb(),i);return CQ(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(ma(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return A(this,null,function*(){let t=yield oZ(e),r=new tI(e);return t.register("authEvent",i=>(de(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Lb,{type:Lb},i=>{var o;let s=(o=i?.[0])===null||o===void 0?void 0:o[Lb];s!==void 0&&t(!!s),bo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=KQ(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return AF()||wF()||uI()}},GF=nI;var lF="@firebase/auth",dF="1.10.4";var rI=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return A(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){de(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function vZ(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yZ(n){Wi(new xr("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;de(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:s,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DF(n)},u=new Wb(r,i,o,c);return nQ(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Wi(new xr("auth-internal",e=>{let t=va(e.getProvider("auth").getImmediate());return(r=>new rI(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),an(lF,dF,vZ(n)),an(lF,dF,"esm2017")}var _Z=5*60,xZ=db("authIdTokenMaxAge")||_Z,fF=null,wZ=n=>e=>A(null,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>xZ)return;let i=t?.token;fF!==i&&(fF=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function yI(n=Yc()){let e=Vl(n,"auth");if(e.isInitialized())return e.getImmediate();let t=lI(n,{popupRedirectResolver:GF,persistence:[$F,BF,vI]}),r=db("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let s=wZ(o.toString());gI(t,s,()=>s(t.currentUser)),Jh(t,a=>s(a))}}let i=ub("auth");return i?dI(t,`http://${i}`):kl("Auth",!1),t}function EZ(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}ZX({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Zc("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",EZ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yZ("Browser");function KF(n){return new Re(function(e){var t=ep(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}function YF(n){return new Re(function(e){var t=Jh(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var XF="auth",_t=class{constructor(e){return e}},tp=class{constructor(){return Ul(XF)}};var _I=new ae("angularfire2.auth-instances");function oJ(n,e){let t=jh(XF,n,e);return t&&new _t(t)}function sJ(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new _t(r)}}var aJ={provide:tp,deps:[[new Zr,_I]]},cJ={provide:_t,useFactory:oJ,deps:[[new Zr,_I],ss]};function QF(n,...e){return an("angularfire",da.full,"auth"),Jo([cJ,aJ,{provide:_I,useFactory:sJ(n),multi:!0,deps:[He,En,fa,Qc,[new Zr,jl],...e]}])}var $l=qt(KF,!0);var ZF=qt(YF,!0);var JF=qt(hI,!0,2);var np=qt(yI,!0);var ty=qt(ep,!0);var e4=qt(Zh,!0,2);var t4=qt(pI,!0,2);var n4=qt(mI,!0,2);var r4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},i4={};var ls,xI;(function(){var n;function e(C,E){function S(){}S.prototype=E.prototype,C.D=E.prototype,C.prototype=new S,C.prototype.constructor=C,C.C=function(M,R,N){for(var O=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)O[qe-2]=arguments[qe];return E.prototype[R].apply(M,O)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,E,S){S||(S=0);var M=Array(16);if(typeof E=="string")for(var R=0;16>R;++R)M[R]=E.charCodeAt(S++)|E.charCodeAt(S++)<<8|E.charCodeAt(S++)<<16|E.charCodeAt(S++)<<24;else for(R=0;16>R;++R)M[R]=E[S++]|E[S++]<<8|E[S++]<<16|E[S++]<<24;E=C.g[0],S=C.g[1],R=C.g[2];var N=C.g[3],O=E+(N^S&(R^N))+M[0]+3614090360&4294967295;E=S+(O<<7&4294967295|O>>>25),O=N+(R^E&(S^R))+M[1]+3905402710&4294967295,N=E+(O<<12&4294967295|O>>>20),O=R+(S^N&(E^S))+M[2]+606105819&4294967295,R=N+(O<<17&4294967295|O>>>15),O=S+(E^R&(N^E))+M[3]+3250441966&4294967295,S=R+(O<<22&4294967295|O>>>10),O=E+(N^S&(R^N))+M[4]+4118548399&4294967295,E=S+(O<<7&4294967295|O>>>25),O=N+(R^E&(S^R))+M[5]+1200080426&4294967295,N=E+(O<<12&4294967295|O>>>20),O=R+(S^N&(E^S))+M[6]+2821735955&4294967295,R=N+(O<<17&4294967295|O>>>15),O=S+(E^R&(N^E))+M[7]+4249261313&4294967295,S=R+(O<<22&4294967295|O>>>10),O=E+(N^S&(R^N))+M[8]+1770035416&4294967295,E=S+(O<<7&4294967295|O>>>25),O=N+(R^E&(S^R))+M[9]+2336552879&4294967295,N=E+(O<<12&4294967295|O>>>20),O=R+(S^N&(E^S))+M[10]+4294925233&4294967295,R=N+(O<<17&4294967295|O>>>15),O=S+(E^R&(N^E))+M[11]+2304563134&4294967295,S=R+(O<<22&4294967295|O>>>10),O=E+(N^S&(R^N))+M[12]+1804603682&4294967295,E=S+(O<<7&4294967295|O>>>25),O=N+(R^E&(S^R))+M[13]+4254626195&4294967295,N=E+(O<<12&4294967295|O>>>20),O=R+(S^N&(E^S))+M[14]+2792965006&4294967295,R=N+(O<<17&4294967295|O>>>15),O=S+(E^R&(N^E))+M[15]+1236535329&4294967295,S=R+(O<<22&4294967295|O>>>10),O=E+(R^N&(S^R))+M[1]+4129170786&4294967295,E=S+(O<<5&4294967295|O>>>27),O=N+(S^R&(E^S))+M[6]+3225465664&4294967295,N=E+(O<<9&4294967295|O>>>23),O=R+(E^S&(N^E))+M[11]+643717713&4294967295,R=N+(O<<14&4294967295|O>>>18),O=S+(N^E&(R^N))+M[0]+3921069994&4294967295,S=R+(O<<20&4294967295|O>>>12),O=E+(R^N&(S^R))+M[5]+3593408605&4294967295,E=S+(O<<5&4294967295|O>>>27),O=N+(S^R&(E^S))+M[10]+38016083&4294967295,N=E+(O<<9&4294967295|O>>>23),O=R+(E^S&(N^E))+M[15]+3634488961&4294967295,R=N+(O<<14&4294967295|O>>>18),O=S+(N^E&(R^N))+M[4]+3889429448&4294967295,S=R+(O<<20&4294967295|O>>>12),O=E+(R^N&(S^R))+M[9]+568446438&4294967295,E=S+(O<<5&4294967295|O>>>27),O=N+(S^R&(E^S))+M[14]+3275163606&4294967295,N=E+(O<<9&4294967295|O>>>23),O=R+(E^S&(N^E))+M[3]+4107603335&4294967295,R=N+(O<<14&4294967295|O>>>18),O=S+(N^E&(R^N))+M[8]+1163531501&4294967295,S=R+(O<<20&4294967295|O>>>12),O=E+(R^N&(S^R))+M[13]+2850285829&4294967295,E=S+(O<<5&4294967295|O>>>27),O=N+(S^R&(E^S))+M[2]+4243563512&4294967295,N=E+(O<<9&4294967295|O>>>23),O=R+(E^S&(N^E))+M[7]+1735328473&4294967295,R=N+(O<<14&4294967295|O>>>18),O=S+(N^E&(R^N))+M[12]+2368359562&4294967295,S=R+(O<<20&4294967295|O>>>12),O=E+(S^R^N)+M[5]+4294588738&4294967295,E=S+(O<<4&4294967295|O>>>28),O=N+(E^S^R)+M[8]+2272392833&4294967295,N=E+(O<<11&4294967295|O>>>21),O=R+(N^E^S)+M[11]+1839030562&4294967295,R=N+(O<<16&4294967295|O>>>16),O=S+(R^N^E)+M[14]+4259657740&4294967295,S=R+(O<<23&4294967295|O>>>9),O=E+(S^R^N)+M[1]+2763975236&4294967295,E=S+(O<<4&4294967295|O>>>28),O=N+(E^S^R)+M[4]+1272893353&4294967295,N=E+(O<<11&4294967295|O>>>21),O=R+(N^E^S)+M[7]+4139469664&4294967295,R=N+(O<<16&4294967295|O>>>16),O=S+(R^N^E)+M[10]+3200236656&4294967295,S=R+(O<<23&4294967295|O>>>9),O=E+(S^R^N)+M[13]+681279174&4294967295,E=S+(O<<4&4294967295|O>>>28),O=N+(E^S^R)+M[0]+3936430074&4294967295,N=E+(O<<11&4294967295|O>>>21),O=R+(N^E^S)+M[3]+3572445317&4294967295,R=N+(O<<16&4294967295|O>>>16),O=S+(R^N^E)+M[6]+76029189&4294967295,S=R+(O<<23&4294967295|O>>>9),O=E+(S^R^N)+M[9]+3654602809&4294967295,E=S+(O<<4&4294967295|O>>>28),O=N+(E^S^R)+M[12]+3873151461&4294967295,N=E+(O<<11&4294967295|O>>>21),O=R+(N^E^S)+M[15]+530742520&4294967295,R=N+(O<<16&4294967295|O>>>16),O=S+(R^N^E)+M[2]+3299628645&4294967295,S=R+(O<<23&4294967295|O>>>9),O=E+(R^(S|~N))+M[0]+4096336452&4294967295,E=S+(O<<6&4294967295|O>>>26),O=N+(S^(E|~R))+M[7]+1126891415&4294967295,N=E+(O<<10&4294967295|O>>>22),O=R+(E^(N|~S))+M[14]+2878612391&4294967295,R=N+(O<<15&4294967295|O>>>17),O=S+(N^(R|~E))+M[5]+4237533241&4294967295,S=R+(O<<21&4294967295|O>>>11),O=E+(R^(S|~N))+M[12]+1700485571&4294967295,E=S+(O<<6&4294967295|O>>>26),O=N+(S^(E|~R))+M[3]+2399980690&4294967295,N=E+(O<<10&4294967295|O>>>22),O=R+(E^(N|~S))+M[10]+4293915773&4294967295,R=N+(O<<15&4294967295|O>>>17),O=S+(N^(R|~E))+M[1]+2240044497&4294967295,S=R+(O<<21&4294967295|O>>>11),O=E+(R^(S|~N))+M[8]+1873313359&4294967295,E=S+(O<<6&4294967295|O>>>26),O=N+(S^(E|~R))+M[15]+4264355552&4294967295,N=E+(O<<10&4294967295|O>>>22),O=R+(E^(N|~S))+M[6]+2734768916&4294967295,R=N+(O<<15&4294967295|O>>>17),O=S+(N^(R|~E))+M[13]+1309151649&4294967295,S=R+(O<<21&4294967295|O>>>11),O=E+(R^(S|~N))+M[4]+4149444226&4294967295,E=S+(O<<6&4294967295|O>>>26),O=N+(S^(E|~R))+M[11]+3174756917&4294967295,N=E+(O<<10&4294967295|O>>>22),O=R+(E^(N|~S))+M[2]+718787259&4294967295,R=N+(O<<15&4294967295|O>>>17),O=S+(N^(R|~E))+M[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(R+(O<<21&4294967295|O>>>11))&4294967295,C.g[2]=C.g[2]+R&4294967295,C.g[3]=C.g[3]+N&4294967295}r.prototype.u=function(C,E){E===void 0&&(E=C.length);for(var S=E-this.blockSize,M=this.B,R=this.h,N=0;N<E;){if(R==0)for(;N<=S;)i(this,C,N),N+=this.blockSize;if(typeof C=="string"){for(;N<E;)if(M[R++]=C.charCodeAt(N++),R==this.blockSize){i(this,M),R=0;break}}else for(;N<E;)if(M[R++]=C[N++],R==this.blockSize){i(this,M),R=0;break}}this.h=R,this.o+=E},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;var S=8*this.o;for(E=C.length-8;E<C.length;++E)C[E]=S&255,S/=256;for(this.u(C),C=Array(16),E=S=0;4>E;++E)for(var M=0;32>M;M+=8)C[S++]=this.g[E]>>>M&255;return C};function o(C,E){var S=a;return Object.prototype.hasOwnProperty.call(S,C)?S[C]:S[C]=E(C)}function s(C,E){this.h=E;for(var S=[],M=!0,R=C.length-1;0<=R;R--){var N=C[R]|0;M&&N==E||(S[R]=N,M=!1)}this.g=S}var a={};function c(C){return-128<=C&&128>C?o(C,function(E){return new s([E|0],0>E?-1:0)}):new s([C|0],0>C?-1:0)}function u(C){if(isNaN(C)||!isFinite(C))return d;if(0>C)return y(u(-C));for(var E=[],S=1,M=0;C>=S;M++)E[M]=C/S|0,S*=4294967296;return new s(E,0)}function l(C,E){if(C.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C.charAt(0)=="-")return y(l(C.substring(1),E));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=u(Math.pow(E,8)),M=d,R=0;R<C.length;R+=8){var N=Math.min(8,C.length-R),O=parseInt(C.substring(R,R+N),E);8>N?(N=u(Math.pow(E,N)),M=M.j(N).add(u(O))):(M=M.j(S),M=M.add(u(O)))}return M}var d=c(0),f=c(1),h=c(16777216);n=s.prototype,n.m=function(){if(m(this))return-y(this).m();for(var C=0,E=1,S=0;S<this.g.length;S++){var M=this.i(S);C+=(0<=M?M:4294967296+M)*E,E*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(g(this))return"0";if(m(this))return"-"+y(this).toString(C);for(var E=u(Math.pow(C,6)),S=this,M="";;){var R=T(S,E).g;S=x(S,R.j(E));var N=((0<S.g.length?S.g[0]:S.h)>>>0).toString(C);if(S=R,g(S))return N+M;for(;6>N.length;)N="0"+N;M=N+M}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function g(C){if(C.h!=0)return!1;for(var E=0;E<C.g.length;E++)if(C.g[E]!=0)return!1;return!0}function m(C){return C.h==-1}n.l=function(C){return C=x(this,C),m(C)?-1:g(C)?0:1};function y(C){for(var E=C.g.length,S=[],M=0;M<E;M++)S[M]=~C.g[M];return new s(S,~C.h).add(f)}n.abs=function(){return m(this)?y(this):this},n.add=function(C){for(var E=Math.max(this.g.length,C.g.length),S=[],M=0,R=0;R<=E;R++){var N=M+(this.i(R)&65535)+(C.i(R)&65535),O=(N>>>16)+(this.i(R)>>>16)+(C.i(R)>>>16);M=O>>>16,N&=65535,O&=65535,S[R]=O<<16|N}return new s(S,S[S.length-1]&-2147483648?-1:0)};function x(C,E){return C.add(y(E))}n.j=function(C){if(g(this)||g(C))return d;if(m(this))return m(C)?y(this).j(y(C)):y(y(this).j(C));if(m(C))return y(this.j(y(C)));if(0>this.l(h)&&0>C.l(h))return u(this.m()*C.m());for(var E=this.g.length+C.g.length,S=[],M=0;M<2*E;M++)S[M]=0;for(M=0;M<this.g.length;M++)for(var R=0;R<C.g.length;R++){var N=this.i(M)>>>16,O=this.i(M)&65535,qe=C.i(R)>>>16,Ie=C.i(R)&65535;S[2*M+2*R]+=O*Ie,w(S,2*M+2*R),S[2*M+2*R+1]+=N*Ie,w(S,2*M+2*R+1),S[2*M+2*R+1]+=O*qe,w(S,2*M+2*R+1),S[2*M+2*R+2]+=N*qe,w(S,2*M+2*R+2)}for(M=0;M<E;M++)S[M]=S[2*M+1]<<16|S[2*M];for(M=E;M<2*E;M++)S[M]=0;return new s(S,0)};function w(C,E){for(;(C[E]&65535)!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function b(C,E){this.g=C,this.h=E}function T(C,E){if(g(E))throw Error("division by zero");if(g(C))return new b(d,d);if(m(C))return E=T(y(C),E),new b(y(E.g),y(E.h));if(m(E))return E=T(C,y(E)),new b(y(E.g),E.h);if(30<C.g.length){if(m(C)||m(E))throw Error("slowDivide_ only works with positive integers.");for(var S=f,M=E;0>=M.l(C);)S=P(S),M=P(M);var R=k(S,1),N=k(M,1);for(M=k(M,2),S=k(S,2);!g(M);){var O=N.add(M);0>=O.l(C)&&(R=R.add(S),N=O),M=k(M,1),S=k(S,1)}return E=x(C,R.j(E)),new b(R,E)}for(R=d;0<=C.l(E);){for(S=Math.max(1,Math.floor(C.m()/E.m())),M=Math.ceil(Math.log(S)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),N=u(S),O=N.j(E);m(O)||0<O.l(C);)S-=M,N=u(S),O=N.j(E);g(N)&&(N=f),R=R.add(N),C=x(C,O)}return new b(R,C)}n.A=function(C){return T(this,C).h},n.and=function(C){for(var E=Math.max(this.g.length,C.g.length),S=[],M=0;M<E;M++)S[M]=this.i(M)&C.i(M);return new s(S,this.h&C.h)},n.or=function(C){for(var E=Math.max(this.g.length,C.g.length),S=[],M=0;M<E;M++)S[M]=this.i(M)|C.i(M);return new s(S,this.h|C.h)},n.xor=function(C){for(var E=Math.max(this.g.length,C.g.length),S=[],M=0;M<E;M++)S[M]=this.i(M)^C.i(M);return new s(S,this.h^C.h)};function P(C){for(var E=C.g.length+1,S=[],M=0;M<E;M++)S[M]=C.i(M)<<1|C.i(M-1)>>>31;return new s(S,C.h)}function k(C,E){var S=E>>5;E%=32;for(var M=C.g.length-S,R=[],N=0;N<M;N++)R[N]=0<E?C.i(N+S)>>>E|C.i(N+S+1)<<32-E:C.i(N+S);return new s(R,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,xI=i4.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=u,s.fromString=l,ls=i4.Integer=s}).apply(typeof r4<"u"?r4:typeof self<"u"?self:typeof window<"u"?window:{});var ny=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ds={};var wI,uJ,Wl,EI,rp,ry,CI,bI,II;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(p,v,_){return p==Array.prototype||p==Object.prototype||(p[v]=_.value),p};function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof ny=="object"&&ny];for(var v=0;v<p.length;++v){var _=p[v];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=t(this);function i(p,v){if(v)e:{var _=r;p=p.split(".");for(var I=0;I<p.length-1;I++){var B=p[I];if(!(B in _))break e;_=_[B]}p=p[p.length-1],I=_[p],v=v(I),v!=I&&v!=null&&e(_,p,{configurable:!0,writable:!0,value:v})}}function o(p,v){p instanceof String&&(p+="");var _=0,I=!1,B={next:function(){if(!I&&_<p.length){var H=_++;return{value:v(H,p[H]),done:!1}}return I=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}i("Array.prototype.values",function(p){return p||function(){return o(this,function(v,_){return _})}});var s=s||{},a=this||self;function c(p){var v=typeof p;return v=v!="object"?v:p?Array.isArray(p)?"array":v:"null",v=="array"||v=="object"&&typeof p.length=="number"}function u(p){var v=typeof p;return v=="object"&&p!=null||v=="function"}function l(p,v,_){return p.call.apply(p.bind,arguments)}function d(p,v,_){if(!p)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,I),p.apply(v,B)}}return function(){return p.apply(v,arguments)}}function f(p,v,_){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?l:d,f.apply(null,arguments)}function h(p,v){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),p.apply(this,I)}}function g(p,v){function _(){}_.prototype=v.prototype,p.aa=v.prototype,p.prototype=new _,p.prototype.constructor=p,p.Qb=function(I,B,H){for(var J=Array(arguments.length-2),St=2;St<arguments.length;St++)J[St-2]=arguments[St];return v.prototype[B].apply(I,J)}}function m(p){let v=p.length;if(0<v){let _=Array(v);for(let I=0;I<v;I++)_[I]=p[I];return _}return[]}function y(p,v){for(let _=1;_<arguments.length;_++){let I=arguments[_];if(c(I)){let B=p.length||0,H=I.length||0;p.length=B+H;for(let J=0;J<H;J++)p[B+J]=I[J]}else p.push(I)}}class x{constructor(v,_){this.i=v,this.j=_,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function w(p){return/^[\s\xa0]*$/.test(p)}function b(){var p=a.navigator;return p&&(p=p.userAgent)?p:""}function T(p){return T[" "](p),p}T[" "]=function(){};var P=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function k(p,v,_){for(let I in p)v.call(_,p[I],I,p)}function C(p,v){for(let _ in p)v.call(void 0,p[_],_,p)}function E(p){let v={};for(let _ in p)v[_]=p[_];return v}let S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(p,v){let _,I;for(let B=1;B<arguments.length;B++){I=arguments[B];for(_ in I)p[_]=I[_];for(let H=0;H<S.length;H++)_=S[H],Object.prototype.hasOwnProperty.call(I,_)&&(p[_]=I[_])}}function R(p){var v=1;p=p.split(":");let _=[];for(;0<v&&p.length;)_.push(p.shift()),v--;return p.length&&_.push(p.join(":")),_}function N(p){a.setTimeout(()=>{throw p},0)}function O(){var p=xn;let v=null;return p.g&&(v=p.g,p.g=p.g.next,p.g||(p.h=null),v.next=null),v}class qe{constructor(){this.h=this.g=null}add(v,_){let I=Ie.get();I.set(v,_),this.h?this.h.next=I:this.g=I,this.h=I}}var Ie=new x(()=>new lt,p=>p.reset());class lt{constructor(){this.next=this.g=this.h=null}set(v,_){this.h=v,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let st,hn=!1,xn=new qe,zo=()=>{let p=a.Promise.resolve(void 0);st=()=>{p.then(Du)}};var Du=()=>{for(var p;p=O();){try{p.h.call(p.g)}catch(_){N(_)}var v=Ie;v.j(p),100>v.h&&(v.h++,p.next=v.g,v.g=p)}hn=!1};function hr(){this.s=this.s,this.C=this.C}hr.prototype.s=!1,hr.prototype.ma=function(){this.s||(this.s=!0,this.N())},hr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function en(p,v){this.type=p,this.g=this.target=v,this.defaultPrevented=!1}en.prototype.h=function(){this.defaultPrevented=!0};var Ja=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var p=!1,v=Object.defineProperty({},"passive",{get:function(){p=!0}});try{let _=()=>{};a.addEventListener("test",_,v),a.removeEventListener("test",_,v)}catch{}return p}();function Ti(p,v){if(en.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p){var _=this.type=p.type,I=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;if(this.target=p.target||p.srcElement,this.g=v,v=p.relatedTarget){if(P){e:{try{T(v.nodeName);var B=!0;break e}catch{}B=!1}B||(v=null)}}else _=="mouseover"?v=p.fromElement:_=="mouseout"&&(v=p.toElement);this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=typeof p.pointerType=="string"?p.pointerType:ec[p.pointerType]||"",this.state=p.state,this.i=p,p.defaultPrevented&&Ti.aa.h.call(this)}}g(Ti,en);var ec={2:"touch",3:"pen",4:"mouse"};Ti.prototype.h=function(){Ti.aa.h.call(this);var p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var cf="closure_listenable_"+(1e6*Math.random()|0),i7=0;function o7(p,v,_,I,B){this.listener=p,this.proxy=null,this.src=v,this.type=_,this.capture=!!I,this.ha=B,this.key=++i7,this.da=this.fa=!1}function wg(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Eg(p){this.src=p,this.g={},this.h=0}Eg.prototype.add=function(p,v,_,I,B){var H=p.toString();p=this.g[H],p||(p=this.g[H]=[],this.h++);var J=$_(p,v,I,B);return-1<J?(v=p[J],_||(v.fa=!1)):(v=new o7(v,this.src,H,!!I,B),v.fa=_,p.push(v)),v};function z_(p,v){var _=v.type;if(_ in p.g){var I=p.g[_],B=Array.prototype.indexOf.call(I,v,void 0),H;(H=0<=B)&&Array.prototype.splice.call(I,B,1),H&&(wg(v),p.g[_].length==0&&(delete p.g[_],p.h--))}}function $_(p,v,_,I){for(var B=0;B<p.length;++B){var H=p[B];if(!H.da&&H.listener==v&&H.capture==!!_&&H.ha==I)return B}return-1}var W_="closure_lm_"+(1e6*Math.random()|0),G_={};function QT(p,v,_,I,B){if(I&&I.once)return JT(p,v,_,I,B);if(Array.isArray(v)){for(var H=0;H<v.length;H++)QT(p,v[H],_,I,B);return null}return _=X_(_),p&&p[cf]?p.K(v,_,u(I)?!!I.capture:!!I,B):ZT(p,v,_,!1,I,B)}function ZT(p,v,_,I,B,H){if(!v)throw Error("Invalid event type");var J=u(B)?!!B.capture:!!B,St=K_(p);if(St||(p[W_]=St=new Eg(p)),_=St.add(v,_,I,J,H),_.proxy)return _;if(I=s7(),_.proxy=I,I.src=p,I.listener=_,p.addEventListener)Ja||(B=J),B===void 0&&(B=!1),p.addEventListener(v.toString(),I,B);else if(p.attachEvent)p.attachEvent(t2(v.toString()),I);else if(p.addListener&&p.removeListener)p.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function s7(){function p(_){return v.call(p.src,p.listener,_)}let v=a7;return p}function JT(p,v,_,I,B){if(Array.isArray(v)){for(var H=0;H<v.length;H++)JT(p,v[H],_,I,B);return null}return _=X_(_),p&&p[cf]?p.L(v,_,u(I)?!!I.capture:!!I,B):ZT(p,v,_,!0,I,B)}function e2(p,v,_,I,B){if(Array.isArray(v))for(var H=0;H<v.length;H++)e2(p,v[H],_,I,B);else I=u(I)?!!I.capture:!!I,_=X_(_),p&&p[cf]?(p=p.i,v=String(v).toString(),v in p.g&&(H=p.g[v],_=$_(H,_,I,B),-1<_&&(wg(H[_]),Array.prototype.splice.call(H,_,1),H.length==0&&(delete p.g[v],p.h--)))):p&&(p=K_(p))&&(v=p.g[v.toString()],p=-1,v&&(p=$_(v,_,I,B)),(_=-1<p?v[p]:null)&&q_(_))}function q_(p){if(typeof p!="number"&&p&&!p.da){var v=p.src;if(v&&v[cf])z_(v.i,p);else{var _=p.type,I=p.proxy;v.removeEventListener?v.removeEventListener(_,I,p.capture):v.detachEvent?v.detachEvent(t2(_),I):v.addListener&&v.removeListener&&v.removeListener(I),(_=K_(v))?(z_(_,p),_.h==0&&(_.src=null,v[W_]=null)):wg(p)}}}function t2(p){return p in G_?G_[p]:G_[p]="on"+p}function a7(p,v){if(p.da)p=!0;else{v=new Ti(v,this);var _=p.listener,I=p.ha||p.src;p.fa&&q_(p),p=_.call(I,v)}return p}function K_(p){return p=p[W_],p instanceof Eg?p:null}var Y_="__closure_events_fn_"+(1e9*Math.random()>>>0);function X_(p){return typeof p=="function"?p:(p[Y_]||(p[Y_]=function(v){return p.handleEvent(v)}),p[Y_])}function Qn(){hr.call(this),this.i=new Eg(this),this.M=this,this.F=null}g(Qn,hr),Qn.prototype[cf]=!0,Qn.prototype.removeEventListener=function(p,v,_,I){e2(this,p,v,_,I)};function pr(p,v){var _,I=p.F;if(I)for(_=[];I;I=I.F)_.push(I);if(p=p.M,I=v.type||v,typeof v=="string")v=new en(v,p);else if(v instanceof en)v.target=v.target||p;else{var B=v;v=new en(I,p),M(v,B)}if(B=!0,_)for(var H=_.length-1;0<=H;H--){var J=v.g=_[H];B=Cg(J,I,!0,v)&&B}if(J=v.g=p,B=Cg(J,I,!0,v)&&B,B=Cg(J,I,!1,v)&&B,_)for(H=0;H<_.length;H++)J=v.g=_[H],B=Cg(J,I,!1,v)&&B}Qn.prototype.N=function(){if(Qn.aa.N.call(this),this.i){var p=this.i,v;for(v in p.g){for(var _=p.g[v],I=0;I<_.length;I++)wg(_[I]);delete p.g[v],p.h--}}this.F=null},Qn.prototype.K=function(p,v,_,I){return this.i.add(String(p),v,!1,_,I)},Qn.prototype.L=function(p,v,_,I){return this.i.add(String(p),v,!0,_,I)};function Cg(p,v,_,I){if(v=p.i.g[String(v)],!v)return!0;v=v.concat();for(var B=!0,H=0;H<v.length;++H){var J=v[H];if(J&&!J.da&&J.capture==_){var St=J.listener,zn=J.ha||J.src;J.fa&&z_(p.i,J),B=St.call(zn,I)!==!1&&B}}return B&&!I.defaultPrevented}function n2(p,v,_){if(typeof p=="function")_&&(p=f(p,_));else if(p&&typeof p.handleEvent=="function")p=f(p.handleEvent,p);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:a.setTimeout(p,v||0)}function r2(p){p.g=n2(()=>{p.g=null,p.i&&(p.i=!1,r2(p))},p.l);let v=p.h;p.h=null,p.m.apply(null,v)}class c7 extends hr{constructor(v,_){super(),this.m=v,this.l=_,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:r2(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function uf(p){hr.call(this),this.h=p,this.g={}}g(uf,hr);var i2=[];function o2(p){k(p.g,function(v,_){this.g.hasOwnProperty(_)&&q_(v)},p),p.g={}}uf.prototype.N=function(){uf.aa.N.call(this),o2(this)},uf.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Q_=a.JSON.stringify,u7=a.JSON.parse,l7=class{stringify(p){return a.JSON.stringify(p,void 0)}parse(p){return a.JSON.parse(p,void 0)}};function Z_(){}Z_.prototype.h=null;function s2(p){return p.h||(p.h=p.i())}function a2(){}var lf={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function J_(){en.call(this,"d")}g(J_,en);function ex(){en.call(this,"c")}g(ex,en);var tc={},c2=null;function bg(){return c2=c2||new Qn}tc.La="serverreachability";function u2(p){en.call(this,tc.La,p)}g(u2,en);function df(p){let v=bg();pr(v,new u2(v))}tc.STAT_EVENT="statevent";function l2(p,v){en.call(this,tc.STAT_EVENT,p),this.stat=v}g(l2,en);function gr(p){let v=bg();pr(v,new l2(v,p))}tc.Ma="timingevent";function d2(p,v){en.call(this,tc.Ma,p),this.size=v}g(d2,en);function ff(p,v){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){p()},v)}function hf(){this.g=!0}hf.prototype.xa=function(){this.g=!1};function d7(p,v,_,I,B,H){p.info(function(){if(p.g)if(H)for(var J="",St=H.split("&"),zn=0;zn<St.length;zn++){var rt=St[zn].split("=");if(1<rt.length){var Zn=rt[0];rt=rt[1];var Jn=Zn.split("_");J=2<=Jn.length&&Jn[1]=="type"?J+(Zn+"="+rt+"&"):J+(Zn+"=redacted&")}}else J=null;else J=H;return"XMLHTTP REQ ("+I+") [attempt "+B+"]: "+v+`
`+_+`
`+J})}function f7(p,v,_,I,B,H,J){p.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+B+"]: "+v+`
`+_+`
`+H+" "+J})}function Tu(p,v,_,I){p.info(function(){return"XMLHTTP TEXT ("+v+"): "+p7(p,_)+(I?" "+I:"")})}function h7(p,v){p.info(function(){return"TIMEOUT: "+v})}hf.prototype.info=function(){};function p7(p,v){if(!p.g)return v;if(!v)return null;try{var _=JSON.parse(v);if(_){for(p=0;p<_.length;p++)if(Array.isArray(_[p])){var I=_[p];if(!(2>I.length)){var B=I[1];if(Array.isArray(B)&&!(1>B.length)){var H=B[0];if(H!="noop"&&H!="stop"&&H!="close")for(var J=1;J<B.length;J++)B[J]=""}}}}return Q_(_)}catch{return v}}var Ig={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},f2={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tx;function Sg(){}g(Sg,Z_),Sg.prototype.g=function(){return new XMLHttpRequest},Sg.prototype.i=function(){return{}},tx=new Sg;function Fs(p,v,_,I){this.j=p,this.i=v,this.l=_,this.R=I||1,this.U=new uf(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new h2}function h2(){this.i=null,this.g="",this.h=!1}var p2={},nx={};function rx(p,v,_){p.L=1,p.v=Mg($o(v)),p.m=_,p.P=!0,g2(p,null)}function g2(p,v){p.F=Date.now(),Ag(p),p.A=$o(p.v);var _=p.A,I=p.R;Array.isArray(I)||(I=[String(I)]),T2(_.i,"t",I),p.C=0,_=p.j.J,p.h=new h2,p.g=q2(p.j,_?v:null,!p.m),0<p.O&&(p.M=new c7(f(p.Y,p,p.g),p.O)),v=p.U,_=p.g,I=p.ca;var B="readystatechange";Array.isArray(B)||(B&&(i2[0]=B.toString()),B=i2);for(var H=0;H<B.length;H++){var J=QT(_,B[H],I||v.handleEvent,!1,v.h||v);if(!J)break;v.g[J.key]=J}v=p.H?E(p.H):{},p.m?(p.u||(p.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.A,p.u,p.m,v)):(p.u="GET",p.g.ea(p.A,p.u,null,v)),df(),d7(p.i,p.u,p.A,p.l,p.R,p.m)}Fs.prototype.ca=function(p){p=p.target;let v=this.M;v&&Wo(p)==3?v.j():this.Y(p)},Fs.prototype.Y=function(p){try{if(p==this.g)e:{let Jn=Wo(this.g);var v=this.g.Ba();let Pu=this.g.Z();if(!(3>Jn)&&(Jn!=3||this.g&&(this.h.h||this.g.oa()||F2(this.g)))){this.J||Jn!=4||v==7||(v==8||0>=Pu?df(3):df(2)),ix(this);var _=this.g.Z();this.X=_;t:if(m2(this)){var I=F2(this.g);p="";var B=I.length,H=Wo(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){nc(this),pf(this);var J="";break t}this.h.i=new a.TextDecoder}for(v=0;v<B;v++)this.h.h=!0,p+=this.h.i.decode(I[v],{stream:!(H&&v==B-1)});I.length=0,this.h.g+=p,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=_==200,f7(this.i,this.u,this.A,this.l,this.R,Jn,_),this.o){if(this.T&&!this.K){t:{if(this.g){var St,zn=this.g;if((St=zn.g?zn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(St)){var rt=St;break t}}rt=null}if(_=rt)Tu(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ox(this,_);else{this.o=!1,this.s=3,gr(12),nc(this),pf(this);break e}}if(this.P){_=!0;let Mi;for(;!this.J&&this.C<J.length;)if(Mi=g7(this,J),Mi==nx){Jn==4&&(this.s=4,gr(14),_=!1),Tu(this.i,this.l,null,"[Incomplete Response]");break}else if(Mi==p2){this.s=4,gr(15),Tu(this.i,this.l,J,"[Invalid Chunk]"),_=!1;break}else Tu(this.i,this.l,Mi,null),ox(this,Mi);if(m2(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Jn!=4||J.length!=0||this.h.h||(this.s=1,gr(16),_=!1),this.o=this.o&&_,!_)Tu(this.i,this.l,J,"[Invalid Chunked Response]"),nc(this),pf(this);else if(0<J.length&&!this.W){this.W=!0;var Zn=this.j;Zn.g==this&&Zn.ba&&!Zn.M&&(Zn.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),dx(Zn),Zn.M=!0,gr(11))}}else Tu(this.i,this.l,J,null),ox(this,J);Jn==4&&nc(this),this.o&&!this.J&&(Jn==4?z2(this.j,this):(this.o=!1,Ag(this)))}else P7(this.g),_==400&&0<J.indexOf("Unknown SID")?(this.s=3,gr(12)):(this.s=0,gr(13)),nc(this),pf(this)}}}catch{}finally{}};function m2(p){return p.g?p.u=="GET"&&p.L!=2&&p.j.Ca:!1}function g7(p,v){var _=p.C,I=v.indexOf(`
`,_);return I==-1?nx:(_=Number(v.substring(_,I)),isNaN(_)?p2:(I+=1,I+_>v.length?nx:(v=v.slice(I,I+_),p.C=I+_,v)))}Fs.prototype.cancel=function(){this.J=!0,nc(this)};function Ag(p){p.S=Date.now()+p.I,v2(p,p.I)}function v2(p,v){if(p.B!=null)throw Error("WatchDog timer not null");p.B=ff(f(p.ba,p),v)}function ix(p){p.B&&(a.clearTimeout(p.B),p.B=null)}Fs.prototype.ba=function(){this.B=null;let p=Date.now();0<=p-this.S?(h7(this.i,this.A),this.L!=2&&(df(),gr(17)),nc(this),this.s=2,pf(this)):v2(this,this.S-p)};function pf(p){p.j.G==0||p.J||z2(p.j,p)}function nc(p){ix(p);var v=p.M;v&&typeof v.ma=="function"&&v.ma(),p.M=null,o2(p.U),p.g&&(v=p.g,p.g=null,v.abort(),v.ma())}function ox(p,v){try{var _=p.j;if(_.G!=0&&(_.g==p||sx(_.h,p))){if(!p.K&&sx(_.h,p)&&_.G==3){try{var I=_.Da.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var B=I;if(B[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<p.F)kg(_),Rg(_);else break e;lx(_),gr(18)}}else _.za=B[1],0<_.za-_.T&&37500>B[2]&&_.F&&_.v==0&&!_.C&&(_.C=ff(f(_.Za,_),6e3));if(1>=x2(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else ic(_,11)}else if((p.K||_.g==p)&&kg(_),!w(v))for(B=_.Da.g.parse(v),v=0;v<B.length;v++){let rt=B[v];if(_.T=rt[0],rt=rt[1],_.G==2)if(rt[0]=="c"){_.K=rt[1],_.ia=rt[2];let Zn=rt[3];Zn!=null&&(_.la=Zn,_.j.info("VER="+_.la));let Jn=rt[4];Jn!=null&&(_.Aa=Jn,_.j.info("SVER="+_.Aa));let Pu=rt[5];Pu!=null&&typeof Pu=="number"&&0<Pu&&(I=1.5*Pu,_.L=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;let Mi=p.g;if(Mi){let Lg=Mi.g?Mi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lg){var H=I.h;H.g||Lg.indexOf("spdy")==-1&&Lg.indexOf("quic")==-1&&Lg.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(ax(H,H.h),H.h=null))}if(I.D){let fx=Mi.g?Mi.g.getResponseHeader("X-HTTP-Session-Id"):null;fx&&(I.ya=fx,Ut(I.I,I.D,fx))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-p.F,_.j.info("Handshake RTT: "+_.R+"ms")),I=_;var J=p;if(I.qa=G2(I,I.J?I.ia:null,I.W),J.K){w2(I.h,J);var St=J,zn=I.L;zn&&(St.I=zn),St.B&&(ix(St),Ag(St)),I.g=J}else j2(I);0<_.i.length&&Ng(_)}else rt[0]!="stop"&&rt[0]!="close"||ic(_,7);else _.G==3&&(rt[0]=="stop"||rt[0]=="close"?rt[0]=="stop"?ic(_,7):ux(_):rt[0]!="noop"&&_.l&&_.l.ta(rt),_.v=0)}}df(4)}catch{}}var m7=class{constructor(p,v){this.g=p,this.map=v}};function y2(p){this.l=p||10,a.PerformanceNavigationTiming?(p=a.performance.getEntriesByType("navigation"),p=0<p.length&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function _2(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function x2(p){return p.h?1:p.g?p.g.size:0}function sx(p,v){return p.h?p.h==v:p.g?p.g.has(v):!1}function ax(p,v){p.g?p.g.add(v):p.h=v}function w2(p,v){p.h&&p.h==v?p.h=null:p.g&&p.g.has(v)&&p.g.delete(v)}y2.prototype.cancel=function(){if(this.i=E2(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let p of this.g.values())p.cancel();this.g.clear()}};function E2(p){if(p.h!=null)return p.i.concat(p.h.D);if(p.g!=null&&p.g.size!==0){let v=p.i;for(let _ of p.g.values())v=v.concat(_.D);return v}return m(p.i)}function v7(p){if(p.V&&typeof p.V=="function")return p.V();if(typeof Map<"u"&&p instanceof Map||typeof Set<"u"&&p instanceof Set)return Array.from(p.values());if(typeof p=="string")return p.split("");if(c(p)){for(var v=[],_=p.length,I=0;I<_;I++)v.push(p[I]);return v}v=[],_=0;for(I in p)v[_++]=p[I];return v}function y7(p){if(p.na&&typeof p.na=="function")return p.na();if(!p.V||typeof p.V!="function"){if(typeof Map<"u"&&p instanceof Map)return Array.from(p.keys());if(!(typeof Set<"u"&&p instanceof Set)){if(c(p)||typeof p=="string"){var v=[];p=p.length;for(var _=0;_<p;_++)v.push(_);return v}v=[],_=0;for(let I in p)v[_++]=I;return v}}}function C2(p,v){if(p.forEach&&typeof p.forEach=="function")p.forEach(v,void 0);else if(c(p)||typeof p=="string")Array.prototype.forEach.call(p,v,void 0);else for(var _=y7(p),I=v7(p),B=I.length,H=0;H<B;H++)v.call(void 0,I[H],_&&_[H],p)}var b2=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _7(p,v){if(p){p=p.split("&");for(var _=0;_<p.length;_++){var I=p[_].indexOf("="),B=null;if(0<=I){var H=p[_].substring(0,I);B=p[_].substring(I+1)}else H=p[_];v(H,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function rc(p){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,p instanceof rc){this.h=p.h,Dg(this,p.j),this.o=p.o,this.g=p.g,Tg(this,p.s),this.l=p.l;var v=p.i,_=new vf;_.i=v.i,v.g&&(_.g=new Map(v.g),_.h=v.h),I2(this,_),this.m=p.m}else p&&(v=String(p).match(b2))?(this.h=!1,Dg(this,v[1]||"",!0),this.o=gf(v[2]||""),this.g=gf(v[3]||"",!0),Tg(this,v[4]),this.l=gf(v[5]||"",!0),I2(this,v[6]||"",!0),this.m=gf(v[7]||"")):(this.h=!1,this.i=new vf(null,this.h))}rc.prototype.toString=function(){var p=[],v=this.j;v&&p.push(mf(v,S2,!0),":");var _=this.g;return(_||v=="file")&&(p.push("//"),(v=this.o)&&p.push(mf(v,S2,!0),"@"),p.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&p.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&p.push("/"),p.push(mf(_,_.charAt(0)=="/"?E7:w7,!0))),(_=this.i.toString())&&p.push("?",_),(_=this.m)&&p.push("#",mf(_,b7)),p.join("")};function $o(p){return new rc(p)}function Dg(p,v,_){p.j=_?gf(v,!0):v,p.j&&(p.j=p.j.replace(/:$/,""))}function Tg(p,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);p.s=v}else p.s=null}function I2(p,v,_){v instanceof vf?(p.i=v,I7(p.i,p.h)):(_||(v=mf(v,C7)),p.i=new vf(v,p.h))}function Ut(p,v,_){p.i.set(v,_)}function Mg(p){return Ut(p,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),p}function gf(p,v){return p?v?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function mf(p,v,_){return typeof p=="string"?(p=encodeURI(p).replace(v,x7),_&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function x7(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var S2=/[#\/\?@]/g,w7=/[#\?:]/g,E7=/[#\?]/g,C7=/[#\?@]/g,b7=/#/g;function vf(p,v){this.h=this.g=null,this.i=p||null,this.j=!!v}function Ls(p){p.g||(p.g=new Map,p.h=0,p.i&&_7(p.i,function(v,_){p.add(decodeURIComponent(v.replace(/\+/g," ")),_)}))}n=vf.prototype,n.add=function(p,v){Ls(this),this.i=null,p=Mu(this,p);var _=this.g.get(p);return _||this.g.set(p,_=[]),_.push(v),this.h+=1,this};function A2(p,v){Ls(p),v=Mu(p,v),p.g.has(v)&&(p.i=null,p.h-=p.g.get(v).length,p.g.delete(v))}function D2(p,v){return Ls(p),v=Mu(p,v),p.g.has(v)}n.forEach=function(p,v){Ls(this),this.g.forEach(function(_,I){_.forEach(function(B){p.call(v,B,I,this)},this)},this)},n.na=function(){Ls(this);let p=Array.from(this.g.values()),v=Array.from(this.g.keys()),_=[];for(let I=0;I<v.length;I++){let B=p[I];for(let H=0;H<B.length;H++)_.push(v[I])}return _},n.V=function(p){Ls(this);let v=[];if(typeof p=="string")D2(this,p)&&(v=v.concat(this.g.get(Mu(this,p))));else{p=Array.from(this.g.values());for(let _=0;_<p.length;_++)v=v.concat(p[_])}return v},n.set=function(p,v){return Ls(this),this.i=null,p=Mu(this,p),D2(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[v]),this.h+=1,this},n.get=function(p,v){return p?(p=this.V(p),0<p.length?String(p[0]):v):v};function T2(p,v,_){A2(p,v),0<_.length&&(p.i=null,p.g.set(Mu(p,v),m(_)),p.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let p=[],v=Array.from(this.g.keys());for(var _=0;_<v.length;_++){var I=v[_];let H=encodeURIComponent(String(I)),J=this.V(I);for(I=0;I<J.length;I++){var B=H;J[I]!==""&&(B+="="+encodeURIComponent(String(J[I]))),p.push(B)}}return this.i=p.join("&")};function Mu(p,v){return v=String(v),p.j&&(v=v.toLowerCase()),v}function I7(p,v){v&&!p.j&&(Ls(p),p.i=null,p.g.forEach(function(_,I){var B=I.toLowerCase();I!=B&&(A2(this,I),T2(this,B,_))},p)),p.j=v}function S7(p,v){let _=new hf;if(a.Image){let I=new Image;I.onload=h(Vs,_,"TestLoadImage: loaded",!0,v,I),I.onerror=h(Vs,_,"TestLoadImage: error",!1,v,I),I.onabort=h(Vs,_,"TestLoadImage: abort",!1,v,I),I.ontimeout=h(Vs,_,"TestLoadImage: timeout",!1,v,I),a.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=p}else v(!1)}function A7(p,v){let _=new hf,I=new AbortController,B=setTimeout(()=>{I.abort(),Vs(_,"TestPingServer: timeout",!1,v)},1e4);fetch(p,{signal:I.signal}).then(H=>{clearTimeout(B),H.ok?Vs(_,"TestPingServer: ok",!0,v):Vs(_,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(B),Vs(_,"TestPingServer: error",!1,v)})}function Vs(p,v,_,I,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),I(_)}catch{}}function D7(){this.g=new l7}function T7(p,v,_){let I=_||"";try{C2(p,function(B,H){let J=B;u(B)&&(J=Q_(B)),v.push(I+H+"="+encodeURIComponent(J))})}catch(B){throw v.push(I+"type="+encodeURIComponent("_badmap")),B}}function yf(p){this.l=p.Ub||null,this.j=p.eb||!1}g(yf,Z_),yf.prototype.g=function(){return new Og(this.l,this.j)},yf.prototype.i=function(p){return function(){return p}}({});function Og(p,v){Qn.call(this),this.D=p,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}g(Og,Qn),n=Og.prototype,n.open=function(p,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=p,this.A=v,this.readyState=1,xf(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};p&&(v.body=p),(this.D||a).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_f(this)),this.readyState=0},n.Sa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,xf(this)),this.g&&(this.readyState=3,xf(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;M2(this)}else p.text().then(this.Ra.bind(this),this.ga.bind(this))};function M2(p){p.j.read().then(p.Pa.bind(p)).catch(p.ga.bind(p))}n.Pa=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var v=p.value?p.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!p.done}))&&(this.response=this.responseText+=v)}p.done?_f(this):xf(this),this.readyState==3&&M2(this)}},n.Ra=function(p){this.g&&(this.response=this.responseText=p,_f(this))},n.Qa=function(p){this.g&&(this.response=p,_f(this))},n.ga=function(){this.g&&_f(this)};function _f(p){p.readyState=4,p.l=null,p.j=null,p.v=null,xf(p)}n.setRequestHeader=function(p,v){this.u.append(p,v)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let p=[],v=this.h.entries();for(var _=v.next();!_.done;)_=_.value,p.push(_[0]+": "+_[1]),_=v.next();return p.join(`\r
`)};function xf(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(Og.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function O2(p){let v="";return k(p,function(_,I){v+=I,v+=":",v+=_,v+=`\r
`}),v}function cx(p,v,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=O2(_),typeof p=="string"?_!=null&&encodeURIComponent(String(_)):Ut(p,v,_))}function tn(p){Qn.call(this),this.headers=new Map,this.o=p||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}g(tn,Qn);var M7=/^https?$/i,O7=["POST","PUT"];n=tn.prototype,n.Ha=function(p){this.J=p},n.ea=function(p,v,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);v=v?v.toUpperCase():"GET",this.D=p,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tx.g(),this.v=this.o?s2(this.o):s2(tx),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(v,String(p),!0),this.B=!1}catch(H){P2(this,H);return}if(p=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var B in I)_.set(B,I[B]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(let H of I.keys())_.set(H,I.get(H));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(H=>H.toLowerCase()=="content-type"),B=a.FormData&&p instanceof a.FormData,!(0<=Array.prototype.indexOf.call(O7,v,void 0))||I||B||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[H,J]of _)this.g.setRequestHeader(H,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{k2(this),this.u=!0,this.g.send(p),this.u=!1}catch(H){P2(this,H)}};function P2(p,v){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=v,p.m=5,R2(p),Pg(p)}function R2(p){p.A||(p.A=!0,pr(p,"complete"),pr(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=p||7,pr(this,"complete"),pr(this,"abort"),Pg(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pg(this,!0)),tn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?N2(this):this.bb())},n.bb=function(){N2(this)};function N2(p){if(p.h&&typeof s<"u"&&(!p.v[1]||Wo(p)!=4||p.Z()!=2)){if(p.u&&Wo(p)==4)n2(p.Ea,0,p);else if(pr(p,"readystatechange"),Wo(p)==4){p.h=!1;try{let J=p.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var _;if(!(_=v)){var I;if(I=J===0){var B=String(p.D).match(b2)[1]||null;!B&&a.self&&a.self.location&&(B=a.self.location.protocol.slice(0,-1)),I=!M7.test(B?B.toLowerCase():"")}_=I}if(_)pr(p,"complete"),pr(p,"success");else{p.m=6;try{var H=2<Wo(p)?p.g.statusText:""}catch{H=""}p.l=H+" ["+p.Z()+"]",R2(p)}}finally{Pg(p)}}}}function Pg(p,v){if(p.g){k2(p);let _=p.g,I=p.v[0]?()=>{}:null;p.g=null,p.v=null,v||pr(p,"ready");try{_.onreadystatechange=I}catch{}}}function k2(p){p.I&&(a.clearTimeout(p.I),p.I=null)}n.isActive=function(){return!!this.g};function Wo(p){return p.g?p.g.readyState:0}n.Z=function(){try{return 2<Wo(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(p){if(this.g){var v=this.g.responseText;return p&&v.indexOf(p)==0&&(v=v.substring(p.length)),u7(v)}};function F2(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.H){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function P7(p){let v={};p=(p.g&&2<=Wo(p)&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<p.length;I++){if(w(p[I]))continue;var _=R(p[I]);let B=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();let H=v[B]||[];v[B]=H,H.push(_)}C(v,function(I){return I.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wf(p,v,_){return _&&_.internalChannelParams&&_.internalChannelParams[p]||v}function L2(p){this.Aa=0,this.i=[],this.j=new hf,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wf("failFast",!1,p),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wf("baseRetryDelayMs",5e3,p),this.cb=wf("retryDelaySeedMs",1e4,p),this.Wa=wf("forwardChannelMaxRetries",2,p),this.wa=wf("forwardChannelRequestTimeoutMs",2e4,p),this.pa=p&&p.xmlHttpFactory||void 0,this.Xa=p&&p.Tb||void 0,this.Ca=p&&p.useFetchStreams||!1,this.L=void 0,this.J=p&&p.supportsCrossDomainXhr||!1,this.K="",this.h=new y2(p&&p.concurrentRequestLimit),this.Da=new D7,this.P=p&&p.fastHandshake||!1,this.O=p&&p.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=p&&p.Rb||!1,p&&p.xa&&this.j.xa(),p&&p.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&p&&p.detectBufferingProxy||!1,this.ja=void 0,p&&p.longPollingTimeout&&0<p.longPollingTimeout&&(this.ja=p.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=L2.prototype,n.la=8,n.G=1,n.connect=function(p,v,_,I){gr(0),this.W=p,this.H=v||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.I=G2(this,null,this.W),Ng(this)};function ux(p){if(V2(p),p.G==3){var v=p.U++,_=$o(p.I);if(Ut(_,"SID",p.K),Ut(_,"RID",v),Ut(_,"TYPE","terminate"),Ef(p,_),v=new Fs(p,p.j,v),v.L=2,v.v=Mg($o(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(v.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=v.v,_=!0),_||(v.g=q2(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Ag(v)}W2(p)}function Rg(p){p.g&&(dx(p),p.g.cancel(),p.g=null)}function V2(p){Rg(p),p.u&&(a.clearTimeout(p.u),p.u=null),kg(p),p.h.cancel(),p.s&&(typeof p.s=="number"&&a.clearTimeout(p.s),p.s=null)}function Ng(p){if(!_2(p.h)&&!p.s){p.s=!0;var v=p.Ga;st||zo(),hn||(st(),hn=!0),xn.add(v,p),p.B=0}}function R7(p,v){return x2(p.h)>=p.h.j-(p.s?1:0)?!1:p.s?(p.i=v.D.concat(p.i),!0):p.G==1||p.G==2||p.B>=(p.Va?0:p.Wa)?!1:(p.s=ff(f(p.Ga,p,v),$2(p,p.B)),p.B++,!0)}n.Ga=function(p){if(this.s)if(this.s=null,this.G==1){if(!p){this.U=Math.floor(1e5*Math.random()),p=this.U++;let B=new Fs(this,this.j,p),H=this.o;if(this.S&&(H?(H=E(H),M(H,this.S)):H=this.S),this.m!==null||this.O||(B.H=H,H=null),this.P)e:{for(var v=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(v+=I,4096<v){v=_;break e}if(v===4096||_===this.i.length-1){v=_+1;break e}}v=1e3}else v=1e3;v=U2(this,B,v),_=$o(this.I),Ut(_,"RID",p),Ut(_,"CVER",22),this.D&&Ut(_,"X-HTTP-Session-Id",this.D),Ef(this,_),H&&(this.O?v="headers="+encodeURIComponent(String(O2(H)))+"&"+v:this.m&&cx(_,this.m,H)),ax(this.h,B),this.Ua&&Ut(_,"TYPE","init"),this.P?(Ut(_,"$req",v),Ut(_,"SID","null"),B.T=!0,rx(B,_,null)):rx(B,_,v),this.G=2}}else this.G==3&&(p?B2(this,p):this.i.length==0||_2(this.h)||B2(this))};function B2(p,v){var _;v?_=v.l:_=p.U++;let I=$o(p.I);Ut(I,"SID",p.K),Ut(I,"RID",_),Ut(I,"AID",p.T),Ef(p,I),p.m&&p.o&&cx(I,p.m,p.o),_=new Fs(p,p.j,_,p.B+1),p.m===null&&(_.H=p.o),v&&(p.i=v.D.concat(p.i)),v=U2(p,_,1e3),_.I=Math.round(.5*p.wa)+Math.round(.5*p.wa*Math.random()),ax(p.h,_),rx(_,I,v)}function Ef(p,v){p.H&&k(p.H,function(_,I){Ut(v,I,_)}),p.l&&C2({},function(_,I){Ut(v,I,_)})}function U2(p,v,_){_=Math.min(p.i.length,_);var I=p.l?f(p.l.Na,p.l,p):null;e:{var B=p.i;let H=-1;for(;;){let J=["count="+_];H==-1?0<_?(H=B[0].g,J.push("ofs="+H)):H=0:J.push("ofs="+H);let St=!0;for(let zn=0;zn<_;zn++){let rt=B[zn].g,Zn=B[zn].map;if(rt-=H,0>rt)H=Math.max(0,B[zn].g-100),St=!1;else try{T7(Zn,J,"req"+rt+"_")}catch{I&&I(Zn)}}if(St){I=J.join("&");break e}}}return p=p.i.splice(0,_),v.D=p,I}function j2(p){if(!p.g&&!p.u){p.Y=1;var v=p.Fa;st||zo(),hn||(st(),hn=!0),xn.add(v,p),p.v=0}}function lx(p){return p.g||p.u||3<=p.v?!1:(p.Y++,p.u=ff(f(p.Fa,p),$2(p,p.v)),p.v++,!0)}n.Fa=function(){if(this.u=null,H2(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var p=2*this.R;this.j.info("BP detection timer enabled: "+p),this.A=ff(f(this.ab,this),p)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gr(10),Rg(this),H2(this))};function dx(p){p.A!=null&&(a.clearTimeout(p.A),p.A=null)}function H2(p){p.g=new Fs(p,p.j,"rpc",p.Y),p.m===null&&(p.g.H=p.o),p.g.O=0;var v=$o(p.qa);Ut(v,"RID","rpc"),Ut(v,"SID",p.K),Ut(v,"AID",p.T),Ut(v,"CI",p.F?"0":"1"),!p.F&&p.ja&&Ut(v,"TO",p.ja),Ut(v,"TYPE","xmlhttp"),Ef(p,v),p.m&&p.o&&cx(v,p.m,p.o),p.L&&(p.g.I=p.L);var _=p.g;p=p.ia,_.L=1,_.v=Mg($o(v)),_.m=null,_.P=!0,g2(_,p)}n.Za=function(){this.C!=null&&(this.C=null,Rg(this),lx(this),gr(19))};function kg(p){p.C!=null&&(a.clearTimeout(p.C),p.C=null)}function z2(p,v){var _=null;if(p.g==v){kg(p),dx(p),p.g=null;var I=2}else if(sx(p.h,v))_=v.D,w2(p.h,v),I=1;else return;if(p.G!=0){if(v.o)if(I==1){_=v.m?v.m.length:0,v=Date.now()-v.F;var B=p.B;I=bg(),pr(I,new d2(I,_)),Ng(p)}else j2(p);else if(B=v.s,B==3||B==0&&0<v.X||!(I==1&&R7(p,v)||I==2&&lx(p)))switch(_&&0<_.length&&(v=p.h,v.i=v.i.concat(_)),B){case 1:ic(p,5);break;case 4:ic(p,10);break;case 3:ic(p,6);break;default:ic(p,2)}}}function $2(p,v){let _=p.Ta+Math.floor(Math.random()*p.cb);return p.isActive()||(_*=2),_*v}function ic(p,v){if(p.j.info("Error code "+v),v==2){var _=f(p.fb,p),I=p.Xa;let B=!I;I=new rc(I||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Dg(I,"https"),Mg(I),B?S7(I.toString(),_):A7(I.toString(),_)}else gr(2);p.G=0,p.l&&p.l.sa(v),W2(p),V2(p)}n.fb=function(p){p?(this.j.info("Successfully pinged google.com"),gr(2)):(this.j.info("Failed to ping google.com"),gr(1))};function W2(p){if(p.G=0,p.ka=[],p.l){let v=E2(p.h);(v.length!=0||p.i.length!=0)&&(y(p.ka,v),y(p.ka,p.i),p.h.i.length=0,m(p.i),p.i.length=0),p.l.ra()}}function G2(p,v,_){var I=_ instanceof rc?$o(_):new rc(_);if(I.g!="")v&&(I.g=v+"."+I.g),Tg(I,I.s);else{var B=a.location;I=B.protocol,v=v?v+"."+B.hostname:B.hostname,B=+B.port;var H=new rc(null);I&&Dg(H,I),v&&(H.g=v),B&&Tg(H,B),_&&(H.l=_),I=H}return _=p.D,v=p.ya,_&&v&&Ut(I,_,v),Ut(I,"VER",p.la),Ef(p,I),I}function q2(p,v,_){if(v&&!p.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=p.Ca&&!p.pa?new tn(new yf({eb:_})):new tn(p.pa),v.Ha(p.J),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function K2(){}n=K2.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Fg(){}Fg.prototype.g=function(p,v){return new Yr(p,v)};function Yr(p,v){Qn.call(this),this.g=new L2(v),this.l=p,this.h=v&&v.messageUrlParams||null,p=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(p?p["X-WebChannel-Content-Type"]=v.messageContentType:p={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(p?p["X-WebChannel-Client-Profile"]=v.va:p={"X-WebChannel-Client-Profile":v.va}),this.g.S=p,(p=v&&v.Sb)&&!w(p)&&(this.g.m=p),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!w(v)&&(this.g.D=v,p=this.h,p!==null&&v in p&&(p=this.h,v in p&&delete p[v])),this.j=new Ou(this)}g(Yr,Qn),Yr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Yr.prototype.close=function(){ux(this.g)},Yr.prototype.o=function(p){var v=this.g;if(typeof p=="string"){var _={};_.__data__=p,p=_}else this.u&&(_={},_.__data__=Q_(p),p=_);v.i.push(new m7(v.Ya++,p)),v.G==3&&Ng(v)},Yr.prototype.N=function(){this.g.l=null,delete this.j,ux(this.g),delete this.g,Yr.aa.N.call(this)};function Y2(p){J_.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var v=p.__sm__;if(v){e:{for(let _ in v){p=_;break e}p=void 0}(this.i=p)&&(p=this.i,v=v!==null&&p in v?v[p]:void 0),this.data=v}else this.data=p}g(Y2,J_);function X2(){ex.call(this),this.status=1}g(X2,ex);function Ou(p){this.g=p}g(Ou,K2),Ou.prototype.ua=function(){pr(this.g,"a")},Ou.prototype.ta=function(p){pr(this.g,new Y2(p))},Ou.prototype.sa=function(p){pr(this.g,new X2)},Ou.prototype.ra=function(){pr(this.g,"b")},Fg.prototype.createWebChannel=Fg.prototype.g,Yr.prototype.send=Yr.prototype.o,Yr.prototype.open=Yr.prototype.m,Yr.prototype.close=Yr.prototype.close,II=ds.createWebChannelTransport=function(){return new Fg},bI=ds.getStatEventTarget=function(){return bg()},CI=ds.Event=tc,ry=ds.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ig.NO_ERROR=0,Ig.TIMEOUT=8,Ig.HTTP_ERROR=6,rp=ds.ErrorCode=Ig,f2.COMPLETE="complete",EI=ds.EventType=f2,a2.EventType=lf,lf.OPEN="a",lf.CLOSE="b",lf.ERROR="c",lf.MESSAGE="d",Qn.prototype.listen=Qn.prototype.K,Wl=ds.WebChannel=a2,uJ=ds.FetchXmlHttpFactory=yf,tn.prototype.listenOnce=tn.prototype.L,tn.prototype.getLastError=tn.prototype.Ka,tn.prototype.getLastErrorCode=tn.prototype.Ba,tn.prototype.getStatus=tn.prototype.Z,tn.prototype.getResponseJson=tn.prototype.Oa,tn.prototype.getResponseText=tn.prototype.oa,tn.prototype.send=tn.prototype.ea,tn.prototype.setWithCredentials=tn.prototype.Ha,wI=ds.XhrIo=tn}).apply(typeof ny<"u"?ny:typeof self<"u"?self:typeof window<"u"?window:{});var o4="@firebase/firestore",s4="4.7.14";var Vn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Vn.UNAUTHENTICATED=new Vn(null),Vn.GOOGLE_CREDENTIALS=new Vn("google-credentials-uid"),Vn.FIRST_PARTY=new Vn("first-party-uid"),Vn.MOCK_USER=new Vn("mock-user");var pd="11.7.3";var iu=new xo("@firebase/firestore");function Gl(){return iu.logLevel}function ie(n,...e){if(iu.logLevel<=We.DEBUG){let t=e.map(lA);iu.debug(`Firestore (${pd}): ${n}`,...t)}}function fs(n,...e){if(iu.logLevel<=We.ERROR){let t=e.map(lA);iu.error(`Firestore (${pd}): ${n}`,...t)}}function Jl(n,...e){if(iu.logLevel<=We.WARN){let t=e.map(lA);iu.warn(`Firestore (${pd}): ${n}`,...t)}}function lA(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function he(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,Y4(n,r,t)}function Y4(n,e,t){let r=`FIRESTORE (${pd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw fs(r),new Error(r)}function ft(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||Y4(e,i,r)}function be(n,e){return n}var q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ue=class extends ii{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ki=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var ly=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},MI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Vn.UNAUTHENTICATED))}shutdown(){}},OI=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},PI=class{constructor(e){this.t=e,this.currentUser=Vn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ft(this.o===void 0,42304);let r=this.i,i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve(),o=new Ki;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ki,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let c=o;e.enqueueRetryable(()=>A(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ki)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ft(typeof r.accessToken=="string",31837,{l:r}),new ly(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ft(e===null||typeof e=="string",2055,{h:e}),new Vn(e)}},RI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Vn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},NI=class{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new RI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Vn.FIRST_PARTY))}shutdown(){}invalidateToken(){}},dy=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},kI=class{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,wr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ft(this.o===void 0,3512);let r=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new dy(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ft(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new dy(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function lJ(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}function X4(){return new TextEncoder}var fy=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=lJ(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%62))}return r}};function Ue(n,e){return n<e?-1:n>e?1:0}function FI(n,e){let t=0;for(;t<n.length&&t<e.length;){let r=n.codePointAt(t),i=e.codePointAt(t);if(r!==i){if(r<128&&i<128)return Ue(r,i);{let o=X4(),s=dJ(o.encode(a4(n,t)),o.encode(a4(e,t)));return s!==0?s:Ue(r,i)}}t+=r>65535?2:1}return Ue(n.length,e.length)}function a4(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function dJ(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Ue(n[t],e[t]);return Ue(n.length,e.length)}function ed(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var c4=-62135596800,u4=1e6,qn=class n{static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*u4);return new n(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<c4)throw new ue(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/u4}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds-c4;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var De=class n{static fromTimestamp(e){return new n(e)}static min(){return new n(new qn(0,0))}static max(){return new n(new qn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var l4="__name__",hy=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&he(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&he(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=n.compareSegments(e.get(i),t.get(i));if(o!==0)return o}return Ue(e.length,t.length)}static compareSegments(e,t){let r=n.isNumericId(e),i=n.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?n.extractNumericId(e).compare(n.extractNumericId(t)):FI(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ls.fromString(e.substring(4,e.length-2))}},cn=class n extends hy{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new ue(q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},fJ=/^[_a-zA-Z][_a-zA-Z0-9]*$/,si=class n extends hy{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return fJ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===l4}static keyField(){return new n([l4])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new ue(q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new ue(q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new ue(q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ue(q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var pe=class n{constructor(e){this.path=e}static fromPath(e){return new n(cn.fromString(e))}static fromName(e){return new n(cn.fromString(e).popFirst(5))}static empty(){return new n(cn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&cn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return cn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new cn(e.slice()))}};var up=-1,LI=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};LI.UNKNOWN_ID=-1;function hJ(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=De.fromTimestamp(r===1e9?new qn(t+1,0):new qn(t,r));return new ou(i,pe.empty(),e)}function pJ(n){return new ou(n.readTime,n.key,up)}var ou=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(De.min(),pe.empty(),up)}static max(){return new n(De.max(),pe.empty(),up)}};function gJ(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}var mJ="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",VI=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function gd(n){return A(this,null,function*(){if(n.code!==q.FAILED_PRECONDITION||n.message!==mJ)throw n;ie("LocalStore","Unexpectedly lost primary lease")})}var K=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&he(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let c=0;c<o;c++){let u=c;t(e[u]).next(l=>{s[u]=l,++a,a===o&&r(s)},l=>i(l))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function vJ(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function md(n){return n.name==="IndexedDbTransactionError"}var dA=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ue(i),this.ce=i=>r.writeSequenceNumber(i))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.ce&&this.ce(t),t}}n.le=-1;return n})(),fA=-1;function Wy(n){return n==null}function lp(n){return n===0&&1/n==-1/0}function yJ(n){return typeof n=="number"&&Number.isInteger(n)&&!lp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Q4="";function _J(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=d4(e)),e=xJ(n.get(t),e);return d4(e)}function xJ(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case Q4:t+="";break;default:t+=o}}return t}function d4(n){return n+Q4+""}var wJ="remoteDocuments",Z4="owner";var J4="mutationQueues";var eL="mutations";var tL="documentMutations",EJ="remoteDocumentsV14";var nL="remoteDocumentGlobal";var rL="targets";var iL="targetDocuments";var oL="targetGlobal",sL="collectionParents";var aL="clientMetadata";var cL="bundles";var uL="namedQueries";var CJ="indexConfiguration";var bJ="indexState";var IJ="indexEntries";var lL="documentOverlays";var SJ="globals";var AJ=[J4,eL,tL,wJ,rL,Z4,oL,iL,aL,nL,sL,cL,uL],CSe=[...AJ,lL],DJ=[J4,eL,tL,EJ,rL,Z4,oL,iL,aL,nL,sL,cL,uL,lL],TJ=DJ,MJ=[...TJ,CJ,bJ,IJ];var bSe=[...MJ,SJ];function f4(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ea(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function dL(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var un=class n{constructor(e,t){this.comparator=e,this.root=t||So.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,So.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,So.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xl(this.root,e,this.comparator,!0)}},Xl=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},So=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw he(43730,{key:this.key,value:this.value});if(this.right.isRed())throw he(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw he(27949);return e+(this.isRed()?0:1)}};So.EMPTY=null,So.RED=!0,So.BLACK=!1;So.EMPTY=new class{constructor(){this.size=0}get key(){throw he(57766)}get value(){throw he(16141)}get color(){throw he(16727)}get left(){throw he(29726)}get right(){throw he(36894)}copy(e,t,r,i,o){return this}insert(e,t,r){return new So(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Bn=class n{constructor(e){this.comparator=e,this.data=new un(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new py(this.data.getIterator())}getIteratorFrom(e){return new py(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},py=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var xi=class n{constructor(e){this.fields=e,e.sort(si.comparator)}static empty(){return new n([])}unionWith(e){let t=new Bn(si.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ed(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var gy=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var cr=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new gy("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};cr.EMPTY_BYTE_STRING=new cr("");var OJ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hs(n){if(ft(!!n,39018),typeof n=="string"){let e=0,t=OJ.exec(n);if(ft(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Kt(n.seconds),nanos:Kt(n.nanos)}}function Kt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ps(n){return typeof n=="string"?cr.fromBase64String(n):cr.fromUint8Array(n)}var fL="server_timestamp",hL="__type__",pL="__previous_value__",gL="__local_write_time__";function hA(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[hL])===null||t===void 0?void 0:t.stringValue)===fL}function Gy(n){let e=n.mapValue.fields[pL];return hA(e)?Gy(e):e}function dp(n){let e=hs(n.mapValue.fields[gL].timestampValue);return new qn(e.seconds,e.nanos)}var BI=class{constructor(e,t,r,i,o,s,a,c,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=l}},my="(default)",vy=class n{constructor(e,t){this.projectId=e,this.database=t||my}static empty(){return new n("","")}get isDefaultDatabase(){return this.database===my}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var pA="__type__",mL="__max__",iy={mapValue:{fields:{__type__:{stringValue:mL}}}},gA="__vector__",td="value";function _a(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?hA(n)?4:yL(n)?9007199254740991:vL(n)?10:11:he(28295,{value:n})}function Mo(n,e){if(n===e)return!0;let t=_a(n);if(t!==_a(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return dp(n).isEqual(dp(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=hs(i.timestampValue),a=hs(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return ps(i.bytesValue).isEqual(ps(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Kt(i.geoPointValue.latitude)===Kt(o.geoPointValue.latitude)&&Kt(i.geoPointValue.longitude)===Kt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Kt(i.integerValue)===Kt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Kt(i.doubleValue),a=Kt(o.doubleValue);return s===a?lp(s)===lp(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ed(n.arrayValue.values||[],e.arrayValue.values||[],Mo);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(f4(s)!==f4(a))return!1;for(let c in s)if(s.hasOwnProperty(c)&&(a[c]===void 0||!Mo(s[c],a[c])))return!1;return!0}(n,e);default:return he(52216,{left:n})}}function fp(n,e){return(n.values||[]).find(t=>Mo(t,e))!==void 0}function nd(n,e){if(n===e)return 0;let t=_a(n),r=_a(e);if(t!==r)return Ue(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=Kt(o.integerValue||o.doubleValue),c=Kt(s.integerValue||s.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return h4(n.timestampValue,e.timestampValue);case 4:return h4(dp(n),dp(e));case 5:return FI(n.stringValue,e.stringValue);case 6:return function(o,s){let a=ps(o),c=ps(s);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),c=s.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=Ue(a[u],c[u]);if(l!==0)return l}return Ue(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=Ue(Kt(o.latitude),Kt(s.latitude));return a!==0?a:Ue(Kt(o.longitude),Kt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return p4(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,c,u,l;let d=o.fields||{},f=s.fields||{},h=(a=d[td])===null||a===void 0?void 0:a.arrayValue,g=(c=f[td])===null||c===void 0?void 0:c.arrayValue,m=Ue(((u=h?.values)===null||u===void 0?void 0:u.length)||0,((l=g?.values)===null||l===void 0?void 0:l.length)||0);return m!==0?m:p4(h,g)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===iy.mapValue&&s===iy.mapValue)return 0;if(o===iy.mapValue)return 1;if(s===iy.mapValue)return-1;let a=o.fields||{},c=Object.keys(a),u=s.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let f=FI(c[d],l[d]);if(f!==0)return f;let h=nd(a[c[d]],u[l[d]]);if(h!==0)return h}return Ue(c.length,l.length)}(n.mapValue,e.mapValue);default:throw he(23264,{Pe:t})}}function h4(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);let t=hs(n),r=hs(e),i=Ue(t.seconds,r.seconds);return i!==0?i:Ue(t.nanos,r.nanos)}function p4(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=nd(t[i],r[i]);if(o)return o}return Ue(t.length,r.length)}function rd(n){return UI(n)}function UI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=hs(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ps(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return pe.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=UI(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${UI(t.fields[s])}`;return i+"}"}(n.mapValue):he(61005,{value:n})}function ay(n){switch(_a(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Gy(n);return e?16+ay(e):16;case 5:return 2*n.stringValue.length;case 6:return ps(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+ay(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Ea(r.fields,(o,s)=>{i+=o.length+ay(s)}),i}(n.mapValue);default:throw he(13486,{value:n})}}function jI(n){return!!n&&"integerValue"in n}function mA(n){return!!n&&"arrayValue"in n}function g4(n){return!!n&&"nullValue"in n}function m4(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function cy(n){return!!n&&"mapValue"in n}function vL(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[pA])===null||t===void 0?void 0:t.stringValue)===gA}function op(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ea(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=op(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=op(n.arrayValue.values[t]);return e}return Object.assign({},n)}function yL(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===mL}var SSe={mapValue:{fields:{[pA]:{stringValue:gA},[td]:{arrayValue:{}}}}};var oi=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!cy(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=op(t)}setAll(e){let t=si.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=op(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());cy(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Mo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];cy(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ea(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(op(this.value))}};function _L(n){let e=[];return Ea(n.fields,(t,r)=>{let i=new si([t]);if(cy(r)){let o=_L(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new xi(e)}var Yi=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,De.min(),De.min(),De.min(),oi.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,De.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,De.min(),De.min(),oi.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,De.min(),De.min(),oi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var id=class{constructor(e,t){this.position=e,this.inclusive=t}};function v4(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=pe.comparator(pe.fromName(s.referenceValue),t.key):r=nd(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function y4(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Mo(n.position[t],e.position[t]))return!1;return!0}var od=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function PJ(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var yy=class{},Pn=class n extends yy{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new zI(e,t,r):t==="array-contains"?new GI(e,r):t==="in"?new qI(e,r):t==="not-in"?new KI(e,r):t==="array-contains-any"?new YI(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new $I(e,r):new WI(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(nd(t,this.value)):t!==null&&_a(this.value)===_a(t)&&this.matchesComparison(nd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return he(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Oo=class n extends yy{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new n(e,t)}matches(e){return xL(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}};function xL(n){return n.op==="and"}function wL(n){return RJ(n)&&xL(n)}function RJ(n){for(let e of n.filters)if(e instanceof Oo)return!1;return!0}function HI(n){if(n instanceof Pn)return n.field.canonicalString()+n.op.toString()+rd(n.value);if(wL(n))return n.filters.map(e=>HI(e)).join(",");{let e=n.filters.map(t=>HI(t)).join(",");return`${n.op}(${e})`}}function EL(n,e){return n instanceof Pn?function(r,i){return i instanceof Pn&&r.op===i.op&&r.field.isEqual(i.field)&&Mo(r.value,i.value)}(n,e):n instanceof Oo?function(r,i){return i instanceof Oo&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&EL(s,i.filters[a]),!0):!1}(n,e):void he(19439)}function CL(n){return n instanceof Pn?function(t){return`${t.field.canonicalString()} ${t.op} ${rd(t.value)}`}(n):n instanceof Oo?function(t){return t.op.toString()+" {"+t.getFilters().map(CL).join(" ,")+"}"}(n):"Filter"}var zI=class extends Pn{constructor(e,t,r){super(e,t,r),this.key=pe.fromName(r.referenceValue)}matches(e){let t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}},$I=class extends Pn{constructor(e,t){super(e,"in",t),this.keys=bL("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},WI=class extends Pn{constructor(e,t){super(e,"not-in",t),this.keys=bL("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function bL(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>pe.fromName(r.referenceValue))}var GI=class extends Pn{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return mA(t)&&fp(t.arrayValue,this.value)}},qI=class extends Pn{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&fp(this.value.arrayValue,t)}},KI=class extends Pn{constructor(e,t){super(e,"not-in",t)}matches(e){if(fp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!fp(this.value.arrayValue,t)}},YI=class extends Pn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!mA(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>fp(this.value.arrayValue,r))}};var XI=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Ie=null}};function _4(n,e=null,t=[],r=[],i=null,o=null,s=null){return new XI(n,e,t,r,i,o,s)}function vA(n){let e=be(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>HI(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Wy(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>rd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>rd(r)).join(",")),e.Ie=t}return e.Ie}function yA(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!PJ(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!EL(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!y4(n.startAt,e.startAt)&&y4(n.endAt,e.endAt)}function QI(n){return pe.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var sd=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}};function NJ(n,e,t,r,i,o,s,a){return new sd(n,e,t,r,i,o,s,a)}function qy(n){return new sd(n)}function x4(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function kJ(n){return n.collectionGroup!==null}function sp(n){let e=be(n);if(e.Ee===null){e.Ee=[];let t=new Set;for(let o of e.explicitOrderBy)e.Ee.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Bn(si.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.Ee.push(new od(o,r))}),t.has(si.keyField().canonicalString())||e.Ee.push(new od(si.keyField(),r))}return e.Ee}function Ao(n){let e=be(n);return e.de||(e.de=FJ(e,sp(n))),e.de}function FJ(n,e){if(n.limitType==="F")return _4(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new od(i.field,o)});let t=n.endAt?new id(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new id(n.startAt.position,n.startAt.inclusive):null;return _4(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function ZI(n,e,t){return new sd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Ky(n,e){return yA(Ao(n),Ao(e))&&n.limitType===e.limitType}function IL(n){return`${vA(Ao(n))}|lt:${n.limitType}`}function ql(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>CL(i)).join(", ")}]`),Wy(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>rd(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>rd(i)).join(",")),`Target(${r})`}(Ao(n))}; limitType=${n.limitType})`}function Yy(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):pe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of sp(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,c){let u=v4(s,a,c);return s.inclusive?u<=0:u<0}(r.startAt,sp(r),i)||r.endAt&&!function(s,a,c){let u=v4(s,a,c);return s.inclusive?u>=0:u>0}(r.endAt,sp(r),i))}(n,e)}function LJ(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function SL(n){return(e,t)=>{let r=!1;for(let i of sp(n)){let o=VJ(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function VJ(n,e,t){let r=n.field.isKeyField()?pe.comparator(e.key,t.key):function(o,s,a){let c=s.data.field(o),u=a.data.field(o);return c!==null&&u!==null?nd(c,u):he(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return he(19790,{direction:n.dir})}}var gs=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ea(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return dL(this.inner)}size(){return this.innerSize}};var BJ=new un(pe.comparator);function ms(){return BJ}var AL=new un(pe.comparator);function ip(...n){let e=AL;for(let t of n)e=e.insert(t.key,t);return e}function DL(n){let e=AL;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function tu(){return ap()}function TL(){return ap()}function ap(){return new gs(n=>n.toString(),(n,e)=>n.isEqual(e))}var UJ=new un(pe.comparator),jJ=new Bn(pe.comparator);function Ye(...n){let e=jJ;for(let t of n)e=e.add(t);return e}var HJ=new Bn(Ue);function zJ(){return HJ}function _A(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:lp(e)?"-0":e}}function ML(n){return{integerValue:""+n}}function $J(n,e){return yJ(e)?ML(e):_A(n,e)}var ad=class{constructor(){this._=void 0}};function WJ(n,e,t){return n instanceof cd?function(i,o){let s={fields:{[hL]:{stringValue:fL},[gL]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&hA(o)&&(o=Gy(o)),o&&(s.fields[pL]=o),{mapValue:s}}(t,e):n instanceof su?PL(n,e):n instanceof au?RL(n,e):function(i,o){let s=OL(i,o),a=w4(s)+w4(i.Re);return jI(s)&&jI(i.Re)?ML(a):_A(i.serializer,a)}(n,e)}function GJ(n,e,t){return n instanceof su?PL(n,e):n instanceof au?RL(n,e):t}function OL(n,e){return n instanceof ud?function(r){return jI(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var cd=class extends ad{},su=class extends ad{constructor(e){super(),this.elements=e}};function PL(n,e){let t=NL(e);for(let r of n.elements)t.some(i=>Mo(i,r))||t.push(r);return{arrayValue:{values:t}}}var au=class extends ad{constructor(e){super(),this.elements=e}};function RL(n,e){let t=NL(e);for(let r of n.elements)t=t.filter(i=>!Mo(i,r));return{arrayValue:{values:t}}}var ud=class extends ad{constructor(e,t){super(),this.serializer=e,this.Re=t}};function w4(n){return Kt(n.integerValue||n.doubleValue)}function NL(n){return mA(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function qJ(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof su&&i instanceof su||r instanceof au&&i instanceof au?ed(r.elements,i.elements,Mo):r instanceof ud&&i instanceof ud?Mo(r.Re,i.Re):r instanceof cd&&i instanceof cd}(n.transform,e.transform)}var JI=class{constructor(e,t){this.version=e,this.transformResults=t}},Do=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function uy(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var ld=class{};function kL(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new hp(n.key,Do.none()):new cu(n.key,n.data,Do.none());{let t=n.data,r=oi.empty(),i=new Bn(si.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Po(n.key,r,new xi(i.toArray()),Do.none())}}function KJ(n,e,t){n instanceof cu?function(i,o,s){let a=i.value.clone(),c=C4(i.fieldTransforms,o,s.transformResults);a.setAll(c),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Po?function(i,o,s){if(!uy(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=C4(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(FL(i)),c.setAll(a),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function cp(n,e,t,r){return n instanceof cu?function(o,s,a,c){if(!uy(o.precondition,s))return a;let u=o.value.clone(),l=b4(o.fieldTransforms,c,s);return u.setAll(l),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof Po?function(o,s,a,c){if(!uy(o.precondition,s))return a;let u=b4(o.fieldTransforms,c,s),l=s.data;return l.setAll(FL(o)),l.setAll(u),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(o,s,a){return uy(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function YJ(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=OL(r.transform,i||null);o!=null&&(t===null&&(t=oi.empty()),t.set(r.field,o))}return t||null}function E4(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ed(r,i,(o,s)=>qJ(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var cu=class extends ld{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Po=class extends ld{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function FL(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function C4(n,e,t){let r=new Map;ft(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,GJ(s,a,t[i]))}return r}function b4(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,WJ(o,s,e))}return r}var hp=class extends ld{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},eS=class extends ld{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var tS=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&KJ(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=cp(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=cp(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=TL();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let c=kL(s,a);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(De.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ye())}isEqual(e){return this.batchId===e.batchId&&ed(this.mutations,e.mutations,(t,r)=>E4(t,r))&&ed(this.baseMutations,e.baseMutations,(t,r)=>E4(t,r))}},nS=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ft(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let i=function(){return UJ}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var rS=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var iS=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var In,Je;function XJ(n){switch(n){case q.OK:return he(64938);case q.CANCELLED:case q.UNKNOWN:case q.DEADLINE_EXCEEDED:case q.RESOURCE_EXHAUSTED:case q.INTERNAL:case q.UNAVAILABLE:case q.UNAUTHENTICATED:return!1;case q.INVALID_ARGUMENT:case q.NOT_FOUND:case q.ALREADY_EXISTS:case q.PERMISSION_DENIED:case q.FAILED_PRECONDITION:case q.ABORTED:case q.OUT_OF_RANGE:case q.UNIMPLEMENTED:case q.DATA_LOSS:return!0;default:return he(15467,{code:n})}}function LL(n){if(n===void 0)return fs("GRPC error has no .code"),q.UNKNOWN;switch(n){case In.OK:return q.OK;case In.CANCELLED:return q.CANCELLED;case In.UNKNOWN:return q.UNKNOWN;case In.DEADLINE_EXCEEDED:return q.DEADLINE_EXCEEDED;case In.RESOURCE_EXHAUSTED:return q.RESOURCE_EXHAUSTED;case In.INTERNAL:return q.INTERNAL;case In.UNAVAILABLE:return q.UNAVAILABLE;case In.UNAUTHENTICATED:return q.UNAUTHENTICATED;case In.INVALID_ARGUMENT:return q.INVALID_ARGUMENT;case In.NOT_FOUND:return q.NOT_FOUND;case In.ALREADY_EXISTS:return q.ALREADY_EXISTS;case In.PERMISSION_DENIED:return q.PERMISSION_DENIED;case In.FAILED_PRECONDITION:return q.FAILED_PRECONDITION;case In.ABORTED:return q.ABORTED;case In.OUT_OF_RANGE:return q.OUT_OF_RANGE;case In.UNIMPLEMENTED:return q.UNIMPLEMENTED;case In.DATA_LOSS:return q.DATA_LOSS;default:return he(39323,{code:n})}}(Je=In||(In={}))[Je.OK=0]="OK",Je[Je.CANCELLED=1]="CANCELLED",Je[Je.UNKNOWN=2]="UNKNOWN",Je[Je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Je[Je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Je[Je.NOT_FOUND=5]="NOT_FOUND",Je[Je.ALREADY_EXISTS=6]="ALREADY_EXISTS",Je[Je.PERMISSION_DENIED=7]="PERMISSION_DENIED",Je[Je.UNAUTHENTICATED=16]="UNAUTHENTICATED",Je[Je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Je[Je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Je[Je.ABORTED=10]="ABORTED",Je[Je.OUT_OF_RANGE=11]="OUT_OF_RANGE",Je[Je.UNIMPLEMENTED=12]="UNIMPLEMENTED",Je[Je.INTERNAL=13]="INTERNAL",Je[Je.UNAVAILABLE=14]="UNAVAILABLE",Je[Je.DATA_LOSS=15]="DATA_LOSS";var I4=null;var QJ=new ls([4294967295,4294967295],0);function S4(n){let e=X4().encode(n),t=new xI;return t.update(e),new Uint8Array(t.digest())}function A4(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ls([t,r],0),new ls([i,o],0)]}var oS=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new nu(`Invalid padding: ${t}`);if(r<0)throw new nu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new nu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new nu(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=ls.fromNumber(this.pe)}we(e,t,r){let i=e.add(t.multiply(ls.fromNumber(r)));return i.compare(QJ)===1&&(i=new ls([i.getBits(0),i.getBits(1)],0)),i.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;let t=S4(e),[r,i]=A4(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);if(!this.be(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.pe===0)return;let t=S4(e),[r,i]=A4(t);for(let o=0;o<this.hashCount;o++){let s=this.we(r,i,o);this.Se(s)}}Se(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},nu=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var _y=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,pp.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(De.min(),i,new un(Ue),ms(),Ye())}},pp=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,Ye(),Ye(),Ye())}};var Ql=class{constructor(e,t,r,i){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=i}},xy=class{constructor(e,t){this.targetId=e,this.Ce=t}},wy=class{constructor(e,t,r=cr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},Ey=class{constructor(){this.Fe=0,this.Me=D4(),this.xe=cr.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ye(),t=Ye(),r=Ye();return this.Me.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:he(38017,{changeType:o})}}),new pp(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=D4()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,ft(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}},sS=class{constructor(e){this.ze=e,this.je=new Map,this.He=ms(),this.Je=oy(),this.Ye=oy(),this.Ze=new un(Ue)}Xe(e){for(let t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(let t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{let r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:he(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,i)=>{this.it(i)&&t(i)})}ot(e){let t=e.targetId,r=e.Ce.count,i=this._t(t);if(i){let o=i.target;if(QI(o))if(r===0){let s=new pe(o.path);this.tt(t,s,Yi.newNoDocument(s,De.min()))}else ft(r===1,20013,{expectedCount:r});else{let s=this.ut(t);if(s!==r){let a=this.ct(e),c=a?this.lt(a,e,s):1;if(c!==0){this.st(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,u)}I4?.ht(function(l,d,f,h,g){var m,y,x,w,b,T;let P={localCacheCount:l,existenceFilterCount:d.count,databaseId:f.database,projectId:f.projectId},k=d.unchangedNames;return k&&(P.bloomFilter={applied:g===0,hashCount:(m=k?.hashCount)!==null&&m!==void 0?m:0,bitmapLength:(w=(x=(y=k?.bits)===null||y===void 0?void 0:y.bitmap)===null||x===void 0?void 0:x.length)!==null&&w!==void 0?w:0,padding:(T=(b=k?.bits)===null||b===void 0?void 0:b.padding)!==null&&T!==void 0?T:0,mightContain:C=>{var E;return(E=h?.mightContain(C))!==null&&E!==void 0&&E}}),P}(s,e.Ce,this.ze.Pt(),a,c))}}}}ct(e){let t=e.Ce.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=ps(r).toUint8Array()}catch(c){if(c instanceof gy)return Jl("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new oS(s,i,o)}catch(c){return Jl(c instanceof nu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.pe===0?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){let r=this.ze.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.ze.Pt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,o,null),i++)}),i}It(e){let t=new Map;this.je.forEach((o,s)=>{let a=this._t(s);if(a){if(o.current&&QI(a.target)){let c=new pe(a.target.path);this.Et(c).has(s)||this.dt(s,c)||this.tt(s,c,Yi.newNoDocument(c,e))}o.Le&&(t.set(s,o.qe()),o.Qe())}});let r=Ye();this.Ye.forEach((o,s)=>{let a=!0;s.forEachWhile(c=>{let u=this._t(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.He.forEach((o,s)=>s.setReadTime(e));let i=new _y(e,t,this.Ze,this.He,r);return this.He=ms(),this.Je=oy(),this.Ye=oy(),this.Ze=new un(Ue),i}et(e,t){if(!this.it(e))return;let r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;let i=this.rt(e);this.dt(e,t)?i.$e(t,1):i.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){let t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Ey,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Bn(Ue),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Bn(Ue),this.Je=this.Je.insert(e,t)),t}it(e){let t=this._t(e)!==null;return t||ie("WatchChangeAggregator","Detected inactive target",e),t}_t(e){let t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Ey),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}};function oy(){return new un(pe.comparator)}function D4(){return new un(pe.comparator)}var ZJ={asc:"ASCENDING",desc:"DESCENDING"},JJ={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},eee={and:"AND",or:"OR"},aS=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function cS(n,e){return n.useProto3Json||Wy(e)?e:{value:e}}function Cy(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function VL(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function tee(n,e){return Cy(n,e.toTimestamp())}function To(n){return ft(!!n,49232),De.fromTimestamp(function(t){let r=hs(t);return new qn(r.seconds,r.nanos)}(n))}function xA(n,e){return uS(n,e).canonicalString()}function uS(n,e){let t=function(i){return new cn(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function BL(n){let e=cn.fromString(n);return ft($L(e),10190,{key:e.toString()}),e}function lS(n,e){return xA(n.databaseId,e.path)}function SI(n,e){let t=BL(e);if(t.get(1)!==n.databaseId.projectId)throw new ue(q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ue(q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new pe(jL(t))}function UL(n,e){return xA(n.databaseId,e)}function nee(n){let e=BL(n);return e.length===4?cn.emptyPath():jL(e)}function dS(n){return new cn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jL(n){return ft(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function T4(n,e,t){return{name:lS(n,e),fields:t.value.mapValue.fields}}function ree(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:he(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(u,l){return u.useProto3Json?(ft(l===void 0||typeof l=="string",58123),cr.fromBase64String(l||"")):(ft(l===void 0||l instanceof Buffer||l instanceof Uint8Array,16193),cr.fromUint8Array(l||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(u){let l=u.code===void 0?q.UNKNOWN:LL(u.code);return new ue(l,u.message||"")}(s);t=new wy(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=SI(n,r.document.name),o=To(r.document.updateTime),s=r.document.createTime?To(r.document.createTime):De.min(),a=new oi({mapValue:{fields:r.document.fields}}),c=Yi.newFoundDocument(i,o,s,a),u=r.targetIds||[],l=r.removedTargetIds||[];t=new Ql(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=SI(n,r.document),o=r.readTime?To(r.readTime):De.min(),s=Yi.newNoDocument(i,o),a=r.removedTargetIds||[];t=new Ql([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=SI(n,r.document),o=r.removedTargetIds||[];t=new Ql([],o,i,null)}else{if(!("filter"in e))return he(11601,{Vt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new iS(i,o),a=r.targetId;t=new xy(a,s)}}return t}function iee(n,e){let t;if(e instanceof cu)t={update:T4(n,e.key,e.value)};else if(e instanceof hp)t={delete:lS(n,e.key)};else if(e instanceof Po)t={update:T4(n,e.key,e.data),updateMask:hee(e.fieldMask)};else{if(!(e instanceof eS))return he(16599,{ft:e.type});t={verify:lS(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof cd)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof su)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof au)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ud)return{fieldPath:s.field.canonicalString(),increment:a.Re};throw he(20930,{transform:s.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:tee(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:he(27497)}(n,e.precondition)),t}function oee(n,e){return n&&n.length>0?(ft(e!==void 0,14353),n.map(t=>function(i,o){let s=i.updateTime?To(i.updateTime):To(o);return s.isEqual(De.min())&&(s=To(o)),new JI(s,i.transformResults||[])}(t,e))):[]}function see(n,e){return{documents:[UL(n,e.path)]}}function aee(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=UL(n,i);let o=function(u){if(u.length!==0)return zL(Oo.create(u,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(u){if(u.length!==0)return u.map(l=>function(f){return{field:Kl(f.field),direction:lee(f.dir)}}(l))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=cS(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:t,parent:i}}function cee(n){let e=nee(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ft(r===1,65062);let l=t.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let o=[];t.where&&(o=function(d){let f=HL(d);return f instanceof Oo&&wL(f)?f.getFilters():[f]}(t.where));let s=[];t.orderBy&&(s=function(d){return d.map(f=>function(g){return new od(Yl(g.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(f))}(t.orderBy));let a=null;t.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Wy(f)?null:f}(t.limit));let c=null;t.startAt&&(c=function(d){let f=!!d.before,h=d.values||[];return new id(h,f)}(t.startAt));let u=null;return t.endAt&&(u=function(d){let f=!d.before,h=d.values||[];return new id(h,f)}(t.endAt)),NJ(e,i,s,o,a,"F",c,u)}function uee(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return he(28987,{purpose:i})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function HL(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Yl(t.unaryFilter.field);return Pn.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Yl(t.unaryFilter.field);return Pn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Yl(t.unaryFilter.field);return Pn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Yl(t.unaryFilter.field);return Pn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return he(61313);default:return he(60726)}}(n):n.fieldFilter!==void 0?function(t){return Pn.create(Yl(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return he(58110);default:return he(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Oo.create(t.compositeFilter.filters.map(r=>HL(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return he(1026)}}(t.compositeFilter.op))}(n):he(30097,{filter:n})}function lee(n){return ZJ[n]}function dee(n){return JJ[n]}function fee(n){return eee[n]}function Kl(n){return{fieldPath:n.canonicalString()}}function Yl(n){return si.fromServerFormat(n.fieldPath)}function zL(n){return n instanceof Pn?function(t){if(t.op==="=="){if(m4(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NAN"}};if(g4(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(m4(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NOT_NAN"}};if(g4(t.value))return{unaryFilter:{field:Kl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kl(t.field),op:dee(t.op),value:t.value}}}(n):n instanceof Oo?function(t){let r=t.getFilters().map(i=>zL(i));return r.length===1?r[0]:{compositeFilter:{op:fee(t.op),filters:r}}}(n):he(54877,{filter:n})}function hee(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function $L(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var gp=class n{constructor(e,t,r,i,o=De.min(),s=De.min(),a=cr.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var fS=class{constructor(e){this.wt=e}};function pee(n){let e=cee({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?ZI(e,e.limit,"L"):e}var by=class{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(Kt(e.integerValue));else if("doubleValue"in e){let r=Kt(e.doubleValue);isNaN(r)?this.Mt(t,13):(this.Mt(t,15),lp(r)?t.xt(0):t.xt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Mt(t,20),typeof r=="string"&&(r=hs(r)),t.Ot(`${r.seconds||""}`),t.xt(r.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(ps(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Mt(t,45),t.xt(r.latitude||0),t.xt(r.longitude||0)}else"mapValue"in e?yL(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):vL(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):he(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){let r=e.fields||{};this.Mt(t,55);for(let i of Object.keys(r))this.Nt(i,t),this.Ct(r[i],t)}qt(e,t){var r,i;let o=e.fields||{};this.Mt(t,53);let s=td,a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Mt(t,15),t.xt(Kt(a)),this.Nt(s,t),this.Ct(o[s],t)}$t(e,t){let r=e.values||[];this.Mt(t,50);for(let i of r)this.Ct(i,t)}kt(e,t){this.Mt(t,37),pe.fromName(e).path.forEach(r=>{this.Mt(t,60),this.Kt(r,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}};by.Wt=new by;var hS=class{constructor(){this.yn=new pS}addToCollectionParentIndex(e,t){return this.yn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(ou.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(ou.min())}updateCollectionGroup(e,t,r){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}},pS=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Bn(cn.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Bn(cn.comparator)).toArray()}};var ASe=new Uint8Array(0);var M4={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},WL=41943040,_i=class n{static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}};_i.DEFAULT_COLLECTION_PERCENTILE=10,_i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_i.DEFAULT=new _i(WL,_i.DEFAULT_COLLECTION_PERCENTILE,_i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_i.DISABLED=new _i(-1,0,0);var mp=class n{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new n(0)}static ir(){return new n(-1)}};var O4="LruGarbageCollector",gee=1048576;function P4([n,e],[t,r]){let i=Ue(n,t);return i===0?Ue(e,r):i}var gS=class{constructor(e){this.cr=e,this.buffer=new Bn(P4),this.lr=0}hr(){return++this.lr}Pr(e){let t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();P4(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},mS=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){ie(O4,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>A(this,null,function*(){this.Tr=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){md(t)?ie(O4,"Ignoring IndexedDB error during garbage collection: ",t):yield gd(t)}yield this.Ir(3e5)}))}},vS=class{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return K.resolve(dA.le);let r=new gS(t);return this.Er.forEachTarget(e,i=>r.Pr(i.sequenceNumber)).next(()=>this.Er.Ar(e,i=>r.Pr(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ie("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(M4)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),M4):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,i,o,s,a,c,u,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,t))).next(d=>(o=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),Gl()<=We.DEBUG&&ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-l}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(c-a)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-l}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})))}};function mee(n,e){return new vS(n,e)}var yS=class{constructor(){this.changes=new gs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Yi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?K.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var _S=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var xS=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&cp(r.mutation,i,xi.empty(),qn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ye()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ye()){let i=tu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=ip();return o.forEach((a,c)=>{s=s.insert(a,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=tu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ye()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=ms(),s=ap(),a=function(){return ap()}();return t.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof Po)?o=o.insert(u.key,u):l!==void 0?(s.set(u.key,l.mutation.getFieldMask()),cp(l.mutation,u,l.mutation.getFieldMask(),qn.now())):s.set(u.key,xi.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,l)=>s.set(u,l)),t.forEach((u,l)=>{var d;return a.set(u,new _S(l,(d=s.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){let r=ap(),i=new un((s,a)=>s-a),o=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let l=r.get(c)||xi.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||Ye()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=TL();l.forEach(f=>{if(!o.has(f)){let h=kL(t.get(f),r.get(f));h!==null&&d.set(f,h),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,u,d))}return K.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return pe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kJ(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):K.resolve(tu()),a=up,c=o;return s.next(u=>K.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(l)?K.resolve():this.remoteDocumentCache.getEntry(e,l).next(f=>{c=c.insert(l,f)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,Ye())).next(l=>({batchId:a,changes:DL(l)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next(r=>{let i=ip();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=ip();return this.indexManager.getCollectionParents(e,o).next(a=>K.forEach(a,c=>{let u=function(d,f){return new sd(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,f)=>{s=s.insert(d,f)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,u)=>{let l=u.getKey();s.get(l)===null&&(s=s.insert(l,Yi.newInvalidDocument(l)))});let a=ip();return s.forEach((c,u)=>{let l=o.get(c);l!==void 0&&cp(l.mutation,u,xi.empty(),qn.now()),Yy(t,u)&&(a=a.insert(c,u))}),a})}};var wS=class{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return K.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:To(i.createTime)}}(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(i){return{name:i.name,query:pee(i.bundledQuery),readTime:To(i.readTime)}}(t)),K.resolve()}};var ES=class{constructor(){this.overlays=new un(pe.comparator),this.Or=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){let r=tu();return K.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.St(e,t,o)}),K.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Or.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Or.delete(r)),K.resolve()}getOverlaysForCollection(e,t,r){let i=tu(),o=t.length+1,s=new pe(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return K.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new un((u,l)=>u-l),s=this.overlays.getIterator();for(;s.hasNext();){let u=s.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let l=o.get(u.largestBatchId);l===null&&(l=tu(),o=o.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=tu(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return K.resolve(a)}St(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Or.get(i.largestBatchId).delete(r.key);this.Or.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new rS(t,r));let o=this.Or.get(t);o===void 0&&(o=Ye(),this.Or.set(t,o)),this.Or.set(t,o.add(r.key))}};var CS=class{constructor(){this.sessionToken=cr.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}};var vp=class{constructor(){this.Nr=new Bn(Sn.Br),this.Lr=new Bn(Sn.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){let r=new Sn(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new Sn(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){let t=new pe(new cn([])),r=new Sn(t,e),i=new Sn(t,e+1),o=[];return this.Lr.forEachInRange([r,i],s=>{this.Qr(s),o.push(s.key)}),o}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){let t=new pe(new cn([])),r=new Sn(t,e),i=new Sn(t,e+1),o=Ye();return this.Lr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new Sn(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},Sn=class{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return pe.comparator(e.key,t.key)||Ue(e.Gr,t.Gr)}static kr(e,t){return Ue(e.Gr,t.Gr)||pe.comparator(e.key,t.key)}};var bS=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Bn(Sn.Br)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new tS(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.zr=this.zr.add(new Sn(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return K.resolve(s)}lookupMutationBatch(e,t){return K.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.Hr(r),o=i<0?0:i;return K.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?fA:this.Jn-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new Sn(t,0),i=new Sn(t,Number.POSITIVE_INFINITY),o=[];return this.zr.forEachInRange([r,i],s=>{let a=this.jr(s.Gr);o.push(a)}),K.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bn(Ue);return t.forEach(i=>{let o=new Sn(i,0),s=new Sn(i,Number.POSITIVE_INFINITY);this.zr.forEachInRange([o,s],a=>{r=r.add(a.Gr)})}),K.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;pe.isDocumentKey(o)||(o=o.child(""));let s=new Sn(new pe(o),0),a=new Bn(Ue);return this.zr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.Gr)),!0)},s),K.resolve(this.Jr(a))}Jr(e){let t=[];return e.forEach(r=>{let i=this.jr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ft(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return K.forEach(t.mutations,i=>{let o=new Sn(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){let r=new Sn(t,0),i=this.zr.firstAfterOrEqual(r);return K.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){let t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var IS=class{constructor(e){this.Zr=e,this.docs=function(){return new un(pe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return K.resolve(r?r.document.mutableCopy():Yi.newInvalidDocument(t))}getEntries(e,t){let r=ms();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Yi.newInvalidDocument(i))}),K.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ms(),s=t.path,a=new pe(s.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!s.isPrefixOf(u.path))break;u.path.length>s.length+1||gJ(pJ(l),r)<=0||(i.has(l.key)||Yy(t,l))&&(o=o.insert(l.key,l.mutableCopy()))}return K.resolve(o)}getAllFromCollectionGroup(e,t,r,i){he(9500)}Xr(e,t){return K.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new SS(this)}getSize(e){return K.resolve(this.size)}},SS=class extends yS{constructor(e){super(),this.vr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.vr.addEntry(e,i)):this.vr.removeEntry(r)}),K.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}};var AS=class{constructor(e){this.persistence=e,this.ei=new gs(t=>vA(t),yA),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.ti=0,this.ni=new vp,this.targetCount=0,this.ri=mp.rr()}forEachTarget(e,t){return this.ei.forEach((r,i)=>t(i)),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),K.resolve()}ar(e){this.ei.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.ri=new mp(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.ar(t),K.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.ei.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ei.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),K.waitFor(o).next(()=>i)}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){let r=this.ei.get(t)||null;return K.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),K.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),K.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),K.resolve()}getMatchingKeysForTargetId(e,t){let r=this.ni.Wr(t);return K.resolve(r)}containsKey(e,t){return K.resolve(this.ni.containsKey(t))}};var Iy=class{constructor(e,t){this.ii={},this.overlays={},this.si=new dA(0),this.oi=!1,this.oi=!0,this._i=new CS,this.referenceDelegate=e(this),this.ai=new AS(this),this.indexManager=new hS,this.remoteDocumentCache=function(i){return new IS(i)}(r=>this.referenceDelegate.ui(r)),this.serializer=new fS(t),this.ci=new wS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ES,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new bS(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){ie("MemoryPersistence","Starting transaction:",e);let i=new DS(this.si.next());return this.referenceDelegate.li(),r(i).next(o=>this.referenceDelegate.hi(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Pi(e,t){return K.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}},DS=class extends VI{constructor(e){super(),this.currentSequenceNumber=e}},TS=class n{constructor(e){this.persistence=e,this.Ti=new vp,this.Ii=null}static Ei(e){return new n(e)}get di(){if(this.Ii)return this.Ii;throw he(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),K.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(i=>this.di.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.di.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.di,r=>{let i=pe.fromPath(r);return this.Ai(e,i).next(o=>{o||t.removeEntry(i,De.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return K.or([()=>K.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}},Sy=class n{constructor(e,t){this.persistence=e,this.Ri=new gs(r=>_J(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=mee(this,t)}static Ei(e,t){return new n(e,t)}li(){}hi(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return K.forEach(this.Ri,(r,i)=>this.gr(e,r,i).next(o=>o?K.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Xr(e,s=>this.gr(e,s,t).next(a=>{a||(r++,o.removeEntry(s,De.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),K.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),K.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=ay(e.data.value)),t}gr(e,t,r){return K.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let i=this.Ri.get(t);return K.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var MS=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=i}static Ps(e,t){let r=Ye(),i=Ye();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var OS=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var PS=class{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return x3()?8:vJ(Ln())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Rs(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Vs(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new OS;return this.fs(e,t,s).next(a=>{if(o.result=a,this.Is)return this.gs(e,t,s,a.size)})}).next(()=>o.result)}gs(e,t,r,i){return r.documentReadCount<this.Es?(Gl()<=We.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",ql(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),K.resolve()):(Gl()<=We.DEBUG&&ie("QueryEngine","Query:",ql(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Gl()<=We.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",ql(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ao(t))):K.resolve())}Rs(e,t){if(x4(t))return K.resolve(null);let r=Ao(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=ZI(t,null,"F"),r=Ao(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=Ye(...o);return this.As.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.ps(t,a);return this.ys(t,u,s,c.readTime)?this.Rs(e,ZI(t,null,"F")):this.ws(e,u,t,c)}))})))}Vs(e,t,r,i){return x4(t)||i.isEqual(De.min())?K.resolve(null):this.As.getDocuments(e,r).next(o=>{let s=this.ps(t,o);return this.ys(t,s,r,i)?K.resolve(null):(Gl()<=We.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ql(t)),this.ws(e,s,t,hJ(i,up)).next(a=>a))})}ps(e,t){let r=new Bn(SL(e));return t.forEach((i,o)=>{Yy(e,o)&&(r=r.add(o))}),r}ys(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}fs(e,t,r){return Gl()<=We.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",ql(t)),this.As.getDocumentsMatchingQuery(e,t,ou.min(),r)}ws(e,t,r,i){return this.As.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var wA="LocalStore",vee=3e8,RS=class{constructor(e,t,r,i){this.persistence=e,this.bs=t,this.serializer=i,this.Ss=new un(Ue),this.Ds=new gs(o=>vA(o),yA),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xS(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}};function yee(n,e,t,r){return new RS(n,e,t,r)}function GL(n,e){return A(this,null,function*(){let t=be(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],c=Ye();for(let u of i){s.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of o){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return t.localDocuments.getDocuments(r,c).next(u=>({Ms:u,removedBatchIds:s,addedBatchIds:a}))})})})}function _ee(n,e){let t=be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.Cs.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let d=u.batch,f=d.keys(),h=K.resolve();return f.forEach(g=>{h=h.next(()=>l.getEntry(c,g)).next(m=>{let y=u.docVersions.get(g);ft(y!==null,48541),m.version.compareTo(y)<0&&(d.applyToRemoteDocument(m,u),m.isValidDocument()&&(m.setReadTime(u.commitVersion),l.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=Ye();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function qL(n){let e=be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function xee(n,e){let t=be(n),r=e.snapshotVersion,i=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.Cs.newChangeBuffer({trackRemovals:!0});i=t.Ss;let a=[];e.targetChanges.forEach((l,d)=>{let f=i.get(d);if(!f)return;a.push(t.ai.removeMatchingKeys(o,l.removedDocuments,d).next(()=>t.ai.addMatchingKeys(o,l.addedDocuments,d)));let h=f.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?h=h.withResumeToken(cr.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):l.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(l.resumeToken,r)),i=i.insert(d,h),function(m,y,x){return m.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=vee?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(f,h,l)&&a.push(t.ai.updateTargetData(o,h))});let c=ms(),u=Ye();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,l))}),a.push(wee(o,s,e.documentUpdates).next(l=>{c=l.xs,u=l.Os})),!r.isEqual(De.min())){let l=t.ai.getLastRemoteSnapshotVersion(o).next(d=>t.ai.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(l)}return K.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(t.Ss=i,o))}function wee(n,e,t){let r=Ye(),i=Ye();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=ms();return t.forEach((a,c)=>{let u=o.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(De.min())?(e.removeEntry(a,c.readTime),s=s.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),s=s.insert(a,c)):ie(wA,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{xs:s,Os:i}})}function Eee(n,e){let t=be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=fA),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Cee(n,e){let t=be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.ai.getTargetData(r,e).next(o=>o?(i=o,K.resolve(i)):t.ai.allocateTargetId(r).next(s=>(i=new gp(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.Ss.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}function NS(n,e,t){return A(this,null,function*(){let r=be(n),i=r.Ss.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!md(s))throw s;ie(wA,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(i.target)})}function R4(n,e,t){let r=be(n),i=De.min(),o=Ye();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,u,l){let d=be(c),f=d.Ds.get(l);return f!==void 0?K.resolve(d.Ss.get(f)):d.ai.getTargetData(u,l)}(r,s,Ao(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(s,a.targetId).next(c=>{o=c})}).next(()=>r.bs.getDocumentsMatchingQuery(s,e,t?i:De.min(),t?o:Ye())).next(a=>(bee(r,LJ(e),a),{documents:a,Ns:o})))}function bee(n,e,t){let r=n.vs.get(e)||De.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.vs.set(e,r)}var Ay=class{constructor(){this.activeTargetIds=zJ()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var kS=class{constructor(){this.So=new Ay,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new Ay,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var FS=class{vo(e){}shutdown(){}};var N4="ConnectivityMonitor",Dy=class{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){ie(N4,"Network connectivity changed: AVAILABLE");for(let e of this.Oo)e(0)}xo(){ie(N4,"Network connectivity changed: UNAVAILABLE");for(let e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var sy=null;function LS(){return sy===null?sy=function(){return 268435456+Math.round(2147483648*Math.random())}():sy++,"0x"+sy.toString(16)}var AI="RestConnection",Iee={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},VS=class{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${i}`,this.qo=this.databaseId.database===my?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Qo(e,t,r,i,o){let s=LS(),a=this.$o(e,t.toUriEncodedString());ie(AI,`Sending RPC '${e}' ${s}:`,a,r);let c={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(c,i,o);let{host:u}=new URL(a),l=qc(u);return this.Ko(e,a,c,r,l).then(d=>(ie(AI,`Received RPC '${e}' ${s}: `,d),d),d=>{throw Jl(AI,`RPC '${e}' ${s} failed with error: `,d,"url: ",a,"request:",r),d})}Wo(e,t,r,i,o,s){return this.Qo(e,t,r,i,o)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+pd}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}$o(e,t){let r=Iee[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}};var BS=class{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}};var ar="WebChannelConnection",US=class extends VS{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,i,o){let s=LS();return new Promise((a,c)=>{let u=new wI;u.setWithCredentials(!0),u.listenOnce(EI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case rp.NO_ERROR:let d=u.getResponseJson();ie(ar,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(d)),a(d);break;case rp.TIMEOUT:ie(ar,`RPC '${e}' ${s} timed out`),c(new ue(q.DEADLINE_EXCEEDED,"Request time out"));break;case rp.HTTP_ERROR:let f=u.getStatus();if(ie(ar,`RPC '${e}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);let g=h?.error;if(g&&g.status&&g.message){let m=function(x){let w=x.toLowerCase().replace(/_/g,"-");return Object.values(q).indexOf(w)>=0?w:q.UNKNOWN}(g.status);c(new ue(m,g.message))}else c(new ue(q.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new ue(q.UNAVAILABLE,"Connection failed."));break;default:he(9055,{s_:e,streamId:s,o_:u.getLastErrorCode(),__:u.getLastError()})}}finally{ie(ar,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);ie(ar,`RPC '${e}' ${s} sending request:`,i),u.send(t,"POST",l,r,15)})}a_(e,t,r){let i=LS(),o=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=II(),a=bI(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Uo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;let l=o.join("");ie(ar,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=s.createWebChannel(l,c),f=!1,h=!1,g=new BS({Go:y=>{h?ie(ar,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(f||(ie(ar,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),ie(ar,`RPC '${e}' stream ${i} sending:`,y),d.send(y))},zo:()=>d.close()}),m=(y,x,w)=>{y.listen(x,b=>{try{w(b)}catch(T){setTimeout(()=>{throw T},0)}})};return m(d,Wl.EventType.OPEN,()=>{h||(ie(ar,`RPC '${e}' stream ${i} transport opened.`),g.t_())}),m(d,Wl.EventType.CLOSE,()=>{h||(h=!0,ie(ar,`RPC '${e}' stream ${i} transport closed`),g.r_())}),m(d,Wl.EventType.ERROR,y=>{h||(h=!0,Jl(ar,`RPC '${e}' stream ${i} transport errored. Name:`,y.name,"Message:",y.message),g.r_(new ue(q.UNAVAILABLE,"The operation could not be completed")))}),m(d,Wl.EventType.MESSAGE,y=>{var x;if(!h){let w=y.data[0];ft(!!w,16349);let b=w,T=b?.error||((x=b[0])===null||x===void 0?void 0:x.error);if(T){ie(ar,`RPC '${e}' stream ${i} received error:`,T);let P=T.status,k=function(S){let M=In[S];if(M!==void 0)return LL(M)}(P),C=T.message;k===void 0&&(k=q.INTERNAL,C="Unknown error status: "+P+" with message "+T.message),h=!0,g.r_(new ue(k,C)),d.close()}else ie(ar,`RPC '${e}' stream ${i} received:`,w),g.i_(w)}}),m(a,CI.STAT_EVENT,y=>{y.stat===ry.PROXY?ie(ar,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===ry.NOPROXY&&ie(ar,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.n_()},0),g}};function DI(){return typeof document<"u"?document:null}function Xy(n){return new aS(n,!0)}var Ty=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=i,this.l_=o,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();let t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),i=Math.max(0,t-r);i>0&&ie("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,i,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}};var k4="PersistentStream",My=class{constructor(e,t,r,i,o,s,a,c){this.bi=e,this.R_=r,this.V_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new Ty(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}stop(){return A(this,null,function*(){this.w_()&&(yield this.close(0))})}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}C_(){return A(this,null,function*(){if(this.b_())return this.close(0)})}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}close(e,t){return A(this,null,function*(){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===q.RESOURCE_EXHAUSTED?(fs(t.toString()),fs("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Zo(t)})}O_(){}auth(){this.state=1;let e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.m_===t&&this.B_(r,i)},r=>{e(()=>{let i=new ue(q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(i)})})}B_(e,t){let r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(i=>{r(()=>this.L_(i))}),this.stream.onMessage(i=>{r(()=>++this.p_==1?this.q_(i):this.onNext(i))})}S_(){this.state=5,this.y_.E_(()=>A(this,null,function*(){this.state=0,this.start()}))}L_(e){return ie(k4,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(ie(k4,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},jS=class extends My{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();let t=ree(this.serializer,e),r=function(o){if(!("targetChange"in o))return De.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?De.min():s.readTime?To(s.readTime):De.min()}(e);return this.listener.Q_(t,r)}U_(e){let t={};t.database=dS(this.serializer),t.addTarget=function(o,s){let a,c=s.target;if(a=QI(c)?{documents:see(o,c)}:{query:aee(o,c).gt},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=VL(o,s.resumeToken);let u=cS(o,s.expectedCount);u!==null&&(a.expectedCount=u)}else if(s.snapshotVersion.compareTo(De.min())>0){a.readTime=Cy(o,s.snapshotVersion.toTimestamp());let u=cS(o,s.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=uee(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){let t={};t.database=dS(this.serializer),t.removeTarget=e,this.F_(t)}},HS=class extends My{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return ft(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ft(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){ft(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();let t=oee(e.writeResults,e.commitTime),r=To(e.commitTime);return this.listener.j_(r,t)}H_(){let e={};e.database=dS(this.serializer),this.F_(e)}G_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>iee(this.serializer,r))};this.F_(t)}};var zS=class{},$S=class extends zS{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.J_=!1}Y_(){if(this.J_)throw new ue(q.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Qo(e,uS(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(q.UNKNOWN,o.toString())})}Wo(e,t,r,i,o){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Wo(e,uS(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ue(q.UNKNOWN,s.toString())})}terminate(){this.J_=!0,this.connection.terminate()}},WS=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(fs(t),this.ea=!1):ie("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}};var uu="RemoteStore",GS=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=o,this.ca.vo(s=>{r.enqueueAndForget(()=>A(this,null,function*(){lu(this)&&(ie(uu,"Restarting streams for network reachability change."),yield function(c){return A(this,null,function*(){let u=be(c);u.aa.add(4),yield Sp(u),u.la.set("Unknown"),u.aa.delete(4),yield Qy(u)})}(this))}))}),this.la=new WS(r,i)}};function Qy(n){return A(this,null,function*(){if(lu(n))for(let e of n.ua)yield e(!0)})}function Sp(n){return A(this,null,function*(){for(let e of n.ua)yield e(!1)})}function KL(n,e){let t=be(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),IA(t)?bA(t):vd(t).b_()&&CA(t,e))}function EA(n,e){let t=be(n),r=vd(t);t._a.delete(e),r.b_()&&YL(t,e),t._a.size===0&&(r.b_()?r.v_():lu(t)&&t.la.set("Unknown"))}function CA(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}vd(n).U_(e)}function YL(n,e){n.ha.Ke(e),vd(n).K_(e)}function bA(n){n.ha=new sS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),vd(n).start(),n.la.ta()}function IA(n){return lu(n)&&!vd(n).w_()&&n._a.size>0}function lu(n){return be(n).aa.size===0}function XL(n){n.ha=void 0}function See(n){return A(this,null,function*(){n.la.set("Online")})}function Aee(n){return A(this,null,function*(){n._a.forEach((e,t)=>{CA(n,e)})})}function Dee(n,e){return A(this,null,function*(){XL(n),IA(n)?(n.la.ia(e),bA(n)):n.la.set("Unknown")})}function Tee(n,e,t){return A(this,null,function*(){if(n.la.set("Online"),e instanceof wy&&e.state===2&&e.cause)try{yield function(i,o){return A(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i._a.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i._a.delete(a),i.ha.removeTarget(a))})}(n,e)}catch(r){ie(uu,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Oy(n,r)}else if(e instanceof Ql?n.ha.Xe(e):e instanceof xy?n.ha.ot(e):n.ha.nt(e),!t.isEqual(De.min()))try{let r=yield qL(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.ha.It(s);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=o._a.get(u);l&&o._a.set(u,l.withResumeToken(c.resumeToken,s))}}),a.targetMismatches.forEach((c,u)=>{let l=o._a.get(c);if(!l)return;o._a.set(c,l.withResumeToken(cr.EMPTY_BYTE_STRING,l.snapshotVersion)),YL(o,c);let d=new gp(l.target,c,u,l.sequenceNumber);CA(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ie(uu,"Failed to raise snapshot:",r),yield Oy(n,r)}})}function Oy(n,e,t){return A(this,null,function*(){if(!md(e))throw e;n.aa.add(1),yield Sp(n),n.la.set("Offline"),t||(t=()=>qL(n.localStore)),n.asyncQueue.enqueueRetryable(()=>A(null,null,function*(){ie(uu,"Retrying IndexedDB access"),yield t(),n.aa.delete(1),yield Qy(n)}))})}function QL(n,e){return e().catch(t=>Oy(n,t,e))}function Zy(n){return A(this,null,function*(){let e=be(n),t=xa(e),r=e.oa.length>0?e.oa[e.oa.length-1].batchId:fA;for(;Mee(e);)try{let i=yield Eee(e.localStore,r);if(i===null){e.oa.length===0&&t.v_();break}r=i.batchId,Oee(e,i)}catch(i){yield Oy(e,i)}ZL(e)&&JL(e)})}function Mee(n){return lu(n)&&n.oa.length<10}function Oee(n,e){n.oa.push(e);let t=xa(n);t.b_()&&t.W_&&t.G_(e.mutations)}function ZL(n){return lu(n)&&!xa(n).w_()&&n.oa.length>0}function JL(n){xa(n).start()}function Pee(n){return A(this,null,function*(){xa(n).H_()})}function Ree(n){return A(this,null,function*(){let e=xa(n);for(let t of n.oa)e.G_(t.mutations)})}function Nee(n,e,t){return A(this,null,function*(){let r=n.oa.shift(),i=nS.from(r,e,t);yield QL(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Zy(n)})}function kee(n,e){return A(this,null,function*(){e&&xa(n).W_&&(yield function(r,i){return A(this,null,function*(){if(function(s){return XJ(s)&&s!==q.ABORTED}(i.code)){let o=r.oa.shift();xa(r).D_(),yield QL(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Zy(r)}})}(n,e)),ZL(n)&&JL(n)})}function F4(n,e){return A(this,null,function*(){let t=be(n);t.asyncQueue.verifyOperationInProgress(),ie(uu,"RemoteStore received new credentials");let r=lu(t);t.aa.add(3),yield Sp(t),r&&t.la.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),yield Qy(t)})}function Fee(n,e){return A(this,null,function*(){let t=be(n);e?(t.aa.delete(2),yield Qy(t)):e||(t.aa.add(2),yield Sp(t),t.la.set("Unknown"))})}function vd(n){return n.Pa||(n.Pa=function(t,r,i){let o=be(t);return o.Y_(),new jS(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{jo:See.bind(null,n),Jo:Aee.bind(null,n),Zo:Dee.bind(null,n),Q_:Tee.bind(null,n)}),n.ua.push(e=>A(null,null,function*(){e?(n.Pa.D_(),IA(n)?bA(n):n.la.set("Unknown")):(yield n.Pa.stop(),XL(n))}))),n.Pa}function xa(n){return n.Ta||(n.Ta=function(t,r,i){let o=be(t);return o.Y_(),new HS(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:Pee.bind(null,n),Zo:kee.bind(null,n),z_:Ree.bind(null,n),j_:Nee.bind(null,n)}),n.ua.push(e=>A(null,null,function*(){e?(n.Ta.D_(),yield Zy(n)):(yield n.Ta.stop(),n.oa.length>0&&(ie(uu,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))}))),n.Ta}var qS=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function SA(n,e){if(fs("AsyncQueue",`${e}: ${n}`),md(n))return new ue(q.UNAVAILABLE,`${e}: ${n}`);throw n}var Py=class n{static emptySet(e){return new n(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||pe.comparator(t.key,r.key):(t,r)=>pe.comparator(t.key,r.key),this.keyedMap=ip(),this.sortedSet=new un(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Ry=class{constructor(){this.Ia=new un(pe.comparator)}track(e){let t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):he(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){let e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}},dd=class n{constructor(e,t,r,i,o,s,a,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Py.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ky(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var KS=class{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}},YS=class{constructor(){this.queries=L4(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){let i=be(t),o=i.queries;i.queries=L4(),o.forEach((s,a)=>{for(let c of a.Ra)c.onError(r)})})(this,new ue(q.ABORTED,"Firestore shutting down"))}};function L4(){return new gs(n=>IL(n),Ky)}function AA(n,e){return A(this,null,function*(){let t=be(n),r=3,i=e.query,o=t.queries.get(i);o?!o.Va()&&e.ma()&&(r=2):(o=new KS,r=e.ma()?0:1);try{switch(r){case 0:o.Aa=yield t.onListen(i,!0);break;case 1:o.Aa=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=SA(s,`Initialization of query '${ql(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.Ra.push(e),e.ga(t.onlineState),o.Aa&&e.pa(o.Aa)&&TA(t)})}function DA(n,e){return A(this,null,function*(){let t=be(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.Ra.indexOf(e);s>=0&&(o.Ra.splice(s,1),o.Ra.length===0?i=e.ma()?0:1:!o.Va()&&e.ma()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Lee(n,e){let t=be(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.Ra)a.pa(i)&&(r=!0);s.Aa=i}}r&&TA(t)}function Vee(n,e,t){let r=be(n),i=r.queries.get(e);if(i)for(let o of i.Ra)o.onError(t);r.queries.delete(e)}function TA(n){n.fa.forEach(e=>{e.next()})}var XS,V4;(V4=XS||(XS={})).ya="default",V4.Cache="cache";var yp=class{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new dd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;let r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;let t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=dd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==XS.Cache}};var Ny=class{constructor(e){this.key=e}},ky=class{constructor(e){this.key=e}},QS=class{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Ye(),this.mutatedKeys=Ye(),this.Ua=SL(e),this.Ka=new Py(this.Ua)}get Wa(){return this.qa}Ga(e,t){let r=t?t.za:new Ry,i=t?t.Ka:this.Ka,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let f=i.get(l),h=Yy(this.query,d)?d:null,g=!!f&&this.mutatedKeys.has(f.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations),y=!1;f&&h?f.data.isEqual(h.data)?g!==m&&(r.track({type:3,doc:h}),y=!0):this.ja(f,h)||(r.track({type:2,doc:h}),y=!0,(c&&this.Ua(h,c)>0||u&&this.Ua(h,u)<0)&&(a=!0)):!f&&h?(r.track({type:0,doc:h}),y=!0):f&&!h&&(r.track({type:1,doc:f}),y=!0,(c||u)&&(a=!0)),y&&(h?(s=s.add(h),o=m?o.add(l):o.delete(l)):(s=s.delete(l),o=o.delete(l)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let l=this.query.limitType==="F"?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Ka:s,za:r,ys:a,mutatedKeys:o}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;let s=e.za.da();s.sort((l,d)=>function(h,g){let m=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return he(20277,{Vt:y})}};return m(h)-m(g)}(l.type,d.type)||this.Ua(l.doc,d.doc)),this.Ha(r),i=i!=null&&i;let a=t&&!i?this.Ja():[],c=this.$a.size===0&&this.current&&!i?1:0,u=c!==this.Qa;return this.Qa=c,s.length!==0||u?{snapshot:new dd(this.query,e.Ka,o,s,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:a}:{Ya:a}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new Ry,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];let e=this.$a;this.$a=Ye(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});let t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new ky(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new Ny(r))}),t}Xa(e){this.qa=e.Ns,this.$a=Ye();let t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return dd.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}},MA="SyncEngine",ZS=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},JS=class{constructor(e){this.key=e,this.tu=!1}},eA=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.nu={},this.ru=new gs(a=>IL(a),Ky),this.iu=new Map,this.su=new Set,this.ou=new un(pe.comparator),this._u=new Map,this.au=new vp,this.uu={},this.cu=new Map,this.lu=mp.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}};function Bee(n,e,t=!0){return A(this,null,function*(){let r=o8(n),i,o=r.ru.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.eu()):i=yield e8(r,e,t,!0),i})}function Uee(n,e){return A(this,null,function*(){let t=o8(n);yield e8(t,e,!0,!1)})}function e8(n,e,t,r){return A(this,null,function*(){let i=yield Cee(n.localStore,Ao(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield jee(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&KL(n.remoteStore,i),a})}function jee(n,e,t,r,i){return A(this,null,function*(){n.Pu=(d,f,h)=>function(m,y,x,w){return A(this,null,function*(){let b=y.view.Ga(x);b.ys&&(b=yield R4(m.localStore,y.query,!1).then(({documents:C})=>y.view.Ga(C,b)));let T=w&&w.targetChanges.get(y.targetId),P=w&&w.targetMismatches.get(y.targetId)!=null,k=y.view.applyChanges(b,m.isPrimaryClient,T,P);return U4(m,y.targetId,k.Ya),k.snapshot})}(n,d,f,h);let o=yield R4(n.localStore,e,!0),s=new QS(e,o.Ns),a=s.Ga(o.documents),c=pp.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=s.applyChanges(a,n.isPrimaryClient,c);U4(n,t,u.Ya);let l=new ZS(e,t,s);return n.ru.set(e,l),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),u.snapshot})}function Hee(n,e,t){return A(this,null,function*(){let r=be(n),i=r.ru.get(e),o=r.iu.get(i.targetId);if(o.length>1)return r.iu.set(i.targetId,o.filter(s=>!Ky(s,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield NS(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&EA(r.remoteStore,i.targetId),tA(r,i.targetId)}).catch(gd))):(tA(r,i.targetId),yield NS(r.localStore,i.targetId,!0))})}function zee(n,e){return A(this,null,function*(){let t=be(n),r=t.ru.get(e),i=t.iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),EA(t.remoteStore,r.targetId))})}function $ee(n,e,t){return A(this,null,function*(){let r=Qee(n);try{let i=yield function(s,a){let c=be(s),u=qn.now(),l=a.reduce((h,g)=>h.add(g.key),Ye()),d,f;return c.persistence.runTransaction("Locally write mutations","readwrite",h=>{let g=ms(),m=Ye();return c.Cs.getEntries(h,l).next(y=>{g=y,g.forEach((x,w)=>{w.isValidDocument()||(m=m.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(h,g)).next(y=>{d=y;let x=[];for(let w of a){let b=YJ(w,d.get(w.key).overlayedDocument);b!=null&&x.push(new Po(w.key,b,_L(b.value.mapValue),Do.exists(!0)))}return c.mutationQueue.addMutationBatch(h,u,x,a)}).next(y=>{f=y;let x=y.applyToLocalDocumentSet(d,m);return c.documentOverlayCache.saveOverlays(h,y.batchId,x)})}).then(()=>({batchId:f.batchId,changes:DL(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,c){let u=s.uu[s.currentUser.toKey()];u||(u=new un(Ue)),u=u.insert(a,c),s.uu[s.currentUser.toKey()]=u}(r,i.batchId,t),yield Ap(r,i.changes),yield Zy(r.remoteStore)}catch(i){let o=SA(i,"Failed to persist write");t.reject(o)}})}function t8(n,e){return A(this,null,function*(){let t=be(n);try{let r=yield xee(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t._u.get(o);s&&(ft(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.tu=!0:i.modifiedDocuments.size>0?ft(s.tu,14607):i.removedDocuments.size>0&&(ft(s.tu,42227),s.tu=!1))}),yield Ap(t,r,e)}catch(r){yield gd(r)}})}function B4(n,e,t){let r=be(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.ru.forEach((o,s)=>{let a=s.view.ga(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let c=be(s);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let f of d.Ra)f.ga(a)&&(u=!0)}),u&&TA(c)}(r.eventManager,e),i.length&&r.nu.Q_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Wee(n,e,t){return A(this,null,function*(){let r=be(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r._u.get(e),o=i&&i.key;if(o){let s=new un(pe.comparator);s=s.insert(o,Yi.newNoDocument(o,De.min()));let a=Ye().add(o),c=new _y(De.min(),new Map,new un(Ue),s,a);yield t8(r,c),r.ou=r.ou.remove(o),r._u.delete(e),OA(r)}else yield NS(r.localStore,e,!1).then(()=>tA(r,e,t)).catch(gd)})}function Gee(n,e){return A(this,null,function*(){let t=be(n),r=e.batch.batchId;try{let i=yield _ee(t.localStore,e);r8(t,r,null),n8(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ap(t,i)}catch(i){yield gd(i)}})}function qee(n,e,t){return A(this,null,function*(){let r=be(n);try{let i=yield function(s,a){let c=be(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(d=>(ft(d!==null,37113),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);r8(r,e,t),n8(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ap(r,i)}catch(i){yield gd(i)}})}function n8(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function r8(n,e,t){let r=be(n),i=r.uu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.uu[r.currentUser.toKey()]=i}}function tA(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||i8(n,r)})}function i8(n,e){n.su.delete(e.path.canonicalString());let t=n.ou.get(e);t!==null&&(EA(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),OA(n))}function U4(n,e,t){for(let r of t)r instanceof Ny?(n.au.addReference(r.key,e),Kee(n,r)):r instanceof ky?(ie(MA,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||i8(n,r.key)):he(19791,{Iu:r})}function Kee(n,e){let t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||(ie(MA,"New document in limbo: "+t),n.su.add(r),OA(n))}function OA(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){let e=n.su.values().next().value;n.su.delete(e);let t=new pe(cn.fromString(e)),r=n.lu.next();n._u.set(r,new JS(t)),n.ou=n.ou.insert(t,r),KL(n.remoteStore,new gp(Ao(qy(t.path)),r,"TargetPurposeLimboResolution",dA.le))}}function Ap(n,e,t){return A(this,null,function*(){let r=be(n),i=[],o=[],s=[];r.ru.isEmpty()||(r.ru.forEach((a,c)=>{s.push(r.Pu(c,e,t).then(u=>{var l;if((u||t)&&r.isPrimaryClient){let d=u?!u.fromCache:(l=t?.targetChanges.get(c.targetId))===null||l===void 0?void 0:l.current;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(u){i.push(u);let d=MS.Ps(c.targetId,u);o.push(d)}}))}),yield Promise.all(s),r.nu.Q_(i),yield function(c,u){return A(this,null,function*(){let l=be(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>K.forEach(u,f=>K.forEach(f.ls,h=>l.persistence.referenceDelegate.addReference(d,f.targetId,h)).next(()=>K.forEach(f.hs,h=>l.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))}catch(d){if(!md(d))throw d;ie(wA,"Failed to update sequence numbers: "+d)}for(let d of u){let f=d.targetId;if(!d.fromCache){let h=l.Ss.get(f),g=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(g);l.Ss=l.Ss.insert(f,m)}}})}(r.localStore,o))})}function Yee(n,e){return A(this,null,function*(){let t=be(n);if(!t.currentUser.isEqual(e)){ie(MA,"User change. New user:",e.toKey());let r=yield GL(t.localStore,e);t.currentUser=e,function(o,s){o.cu.forEach(a=>{a.forEach(c=>{c.reject(new ue(q.CANCELLED,s))})}),o.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ap(t,r.Ms)}})}function Xee(n,e){let t=be(n),r=t._u.get(e);if(r&&r.tu)return Ye().add(r.key);{let i=Ye(),o=t.iu.get(e);if(!o)return i;for(let s of o){let a=t.ru.get(s);i=i.unionWith(a.view.Wa)}return i}}function o8(n){let e=be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=t8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Wee.bind(null,e),e.nu.Q_=Lee.bind(null,e.eventManager),e.nu.Tu=Vee.bind(null,e.eventManager),e}function Qee(n){let e=be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Gee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qee.bind(null,e),e}var s8=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return A(this,null,function*(){this.serializer=Xy(t.databaseInfo.databaseId),this.sharedClientState=this.Au(t),this.persistence=this.Ru(t),yield this.persistence.start(),this.localStore=this.Vu(t),this.gcScheduler=this.mu(t,this.localStore),this.indexBackfillerScheduler=this.fu(t,this.localStore)})}mu(t,r){return null}fu(t,r){return null}Vu(t){return yee(this.persistence,new PS,t.initialUser,this.serializer)}Ru(t){return new Iy(TS.Ei,this.serializer)}Au(t){return new kS}terminate(){return A(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})(),nA=class extends s8{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){ft(this.persistence.referenceDelegate instanceof Sy,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new mS(r,e.asyncQueue,t)}Ru(e){let t=this.cacheSizeBytes!==void 0?_i.withCacheSize(this.cacheSizeBytes):_i.DEFAULT;return new Iy(r=>Sy.Ei(r,t),this.serializer)}};var Zee=(()=>{class n{initialize(t,r){return A(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>B4(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Yee.bind(null,this.syncEngine),yield Fee(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new YS}()}createDatastore(t){let r=Xy(t.databaseInfo.databaseId),i=function(s){return new US(s)}(t.databaseInfo);return function(s,a,c,u){return new $S(s,a,c,u)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,c){return new GS(i,o,s,a,c)}(this.localStore,this.datastore,t.asyncQueue,r=>B4(this.syncEngine,r,0),function(){return Dy.C()?new Dy:new FS}())}createSyncEngine(t,r){return function(o,s,a,c,u,l,d){let f=new eA(o,s,a,c,u,l);return d&&(f.hu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return A(this,null,function*(){var t,r;yield function(o){return A(this,null,function*(){let s=be(o);ie(uu,"RemoteStore shutting down."),s.aa.add(5),yield Sp(s),s.ca.shutdown(),s.la.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var _p=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):fs("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var wa="FirestoreClient",rA=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Vn.UNAUTHENTICATED,this.clientId=fy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>A(this,null,function*(){ie(wa,"Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(ie(wa,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>A(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=SA(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function TI(n,e){return A(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),ie(wa,"Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>A(null,null,function*(){r.isEqual(i)||(yield GL(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function j4(n,e){return A(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Jee(n);ie(wa,"Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>F4(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>F4(e.remoteStore,i)),n._onlineComponents=e})}function Jee(n){return A(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ie(wa,"Using user provided OfflineComponentProvider");try{yield TI(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===q.FAILED_PRECONDITION||i.code===q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Jl("Error using user provided cache. Falling back to memory cache: "+t),yield TI(n,new s8)}}else ie(wa,"Using default OfflineComponentProvider"),yield TI(n,new nA(void 0));return n._offlineComponents})}function a8(n){return A(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(ie(wa,"Using user provided OnlineComponentProvider"),yield j4(n,n._uninitializedComponentsProvider._online)):(ie(wa,"Using default OnlineComponentProvider"),yield j4(n,new Zee))),n._onlineComponents})}function ete(n){return a8(n).then(e=>e.syncEngine)}function Fy(n){return A(this,null,function*(){let e=yield a8(n),t=e.eventManager;return t.onListen=Bee.bind(null,e.syncEngine),t.onUnlisten=Hee.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Uee.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=zee.bind(null,e.syncEngine),t})}function tte(n,e,t={}){let r=new Ki;return n.asyncQueue.enqueueAndForget(()=>A(null,null,function*(){return function(o,s,a,c,u){let l=new _p({next:f=>{l.yu(),s.enqueueAndForget(()=>DA(o,d));let h=f.docs.has(a);!h&&f.fromCache?u.reject(new ue(q.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&c&&c.source==="server"?u.reject(new ue(q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new yp(qy(a.path),l,{includeMetadataChanges:!0,Fa:!0});return AA(o,d)}(yield Fy(n),n.asyncQueue,e,t,r)})),r.promise}function nte(n,e,t={}){let r=new Ki;return n.asyncQueue.enqueueAndForget(()=>A(null,null,function*(){return function(o,s,a,c,u){let l=new _p({next:f=>{l.yu(),s.enqueueAndForget(()=>DA(o,d)),f.fromCache&&c.source==="server"?u.reject(new ue(q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new yp(a,l,{includeMetadataChanges:!0,Fa:!0});return AA(o,d)}(yield Fy(n),n.asyncQueue,e,t,r)})),r.promise}function c8(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var H4=new Map;function u8(n,e,t){if(!t)throw new ue(q.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function rte(n,e,t,r){if(e===!0&&r===!0)throw new ue(q.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function z4(n){if(!pe.isDocumentKey(n))throw new ue(q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $4(n){if(pe.isDocumentKey(n))throw new ue(q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function PA(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":he(12329,{type:typeof n})}function jr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ue(q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=PA(n);throw new ue(q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var l8="firestore.googleapis.com",W4=!0,Ly=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ue(q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=l8,this.ssl=W4}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:W4;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=WL;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<gee)throw new ue(q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rte("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=c8((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ue(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ue(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ue(q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},fd=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ly({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ly(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new MI;switch(r.type){case"firstParty":return new NI(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ue(q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,kl("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return A(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=H4.get(t);r&&(ie("ComponentProvider","Removing Datastore"),H4.delete(t),r.terminate())}(this),Promise.resolve()}};function d8(n,e,t,r={}){var i;n=jr(n,fd);let o=qc(e),s=n._getSettings(),a=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;s.host!==l8&&s.host!==c&&Jl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=Object.assign(Object.assign({},s),{host:c,ssl:o,emulatorOptions:r});if(!_o(u,a)&&(n._setSettings(u),o&&(Iv(`https://${c}`),kl("Firestore",!0)),r.mockUserToken)){let l,d;if(typeof r.mockUserToken=="string")l=r.mockUserToken,d=Vn.MOCK_USER;else{l=p3(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new ue(q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Vn(f)}n._authCredentials=new OI(new ly(l,d))}}var xp=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Er=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ya(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},ya=class n extends xp{constructor(e,t,r){super(e,t,qy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Er(this.firestore,null,new pe(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function f8(n,e,...t){if(n=Gt(n),u8("collection","path",e),n instanceof fd){let r=cn.fromString(e,...t);return $4(r),new ya(n,null,r)}{if(!(n instanceof Er||n instanceof ya))throw new ue(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(cn.fromString(e,...t));return $4(r),new ya(n.firestore,null,r)}}function RA(n,e,...t){if(n=Gt(n),arguments.length===1&&(e=fy.newId()),u8("doc","path",e),n instanceof fd){let r=cn.fromString(e,...t);return z4(r),new Er(n,null,new pe(r))}{if(!(n instanceof Er||n instanceof ya))throw new ue(q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(cn.fromString(e,...t));return z4(r),new Er(n.firestore,n instanceof ya?n.converter:null,new pe(r))}}var G4="AsyncQueue",Vy=class{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new Ty(this,"async_queue_retry"),this.ju=()=>{let r=DI();r&&ie(G4,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;let t=DI();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;let t=DI();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});let t=new Ki;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}Zu(){return A(this,null,function*(){if(this.Qu.length!==0){try{yield this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!md(e))throw e;ie(G4,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}})}Yu(e){let t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,fs("INTERNAL UNHANDLED ERROR: ",q4(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);let i=qS.createAndSchedule(this,e,t,r,o=>this.Xu(o));return this.Uu.push(i),i}Ju(){this.Ku&&he(47125,{ec:q4(this.Ku)})}verifyOperationInProgress(){}tc(){return A(this,null,function*(){let e;do e=this.Hu,yield e;while(e!==this.Hu)})}nc(e){for(let t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){let t=this.Uu.indexOf(e);this.Uu.splice(t,1)}};function q4(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}function K4(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var Xi=class extends fd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Vy,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return A(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Vy(e),this._firestoreClient=void 0,yield e}})}};function h8(n,e){let t=typeof n=="object"?n:Yc(),r=typeof n=="string"?n:e||my,i=Vl(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=h3("firestore");o&&d8(i,...o)}return i}function Jy(n){if(n._terminated)throw new ue(q.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||ite(n),n._firestoreClient}function ite(n){var e,t,r;let i=n._freezeSettings(),o=function(a,c,u,l){return new BI(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,c8(l.experimentalLongPollingOptions),l.useFetchStreams,l.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new rA(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}}(n._componentsProvider))}var wp=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(cr.fromBase64String(e))}catch(t){throw new ue(q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(cr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var hd=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ue(q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new si(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Ep=class{constructor(e){this._methodName=e}};var Cp=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}};var bp=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var ote=/^__.*__$/,iA=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Po(e,this.data,this.fieldMask,t,this.fieldTransforms):new cu(e,this.data,t,this.fieldTransforms)}},By=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Po(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function p8(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw he(40011,{oc:n})}}var oA=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this._c(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i.lc(e),i}hc(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.ac({path:r,cc:!1});return i._c(),i}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return jy(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(p8(this.oc)&&ote.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}},sA=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Xy(e)}dc(e,t,r,i=!1){return new oA({oc:e,methodName:t,Ec:r,path:si.emptyPath(),cc:!1,Ic:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function NA(n){let e=n._freezeSettings(),t=Xy(n._databaseId);return new sA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function g8(n,e,t,r,i,o={}){let s=n.dc(o.merge||o.mergeFields?2:0,e,t,i);kA("Data must be an object, but it was:",s,r);let a=m8(r,s),c,u;if(o.merge)c=new xi(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){let l=[];for(let d of o.mergeFields){let f=aA(e,d,t);if(!s.contains(f))throw new ue(q.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);y8(l,f)||l.push(f)}c=new xi(l),u=s.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=s.fieldTransforms;return new iA(new oi(a),c,u)}var Uy=class n extends Ep{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function ste(n,e,t,r){let i=n.dc(1,e,t);kA("Data must be an object, but it was:",i,r);let o=[],s=oi.empty();Ea(r,(c,u)=>{let l=FA(e,c,t);u=Gt(u);let d=i.hc(l);if(u instanceof Uy)o.push(l);else{let f=e1(u,d);f!=null&&(o.push(l),s.set(l,f))}});let a=new xi(o);return new By(s,a,i.fieldTransforms)}function ate(n,e,t,r,i,o){let s=n.dc(1,e,t),a=[aA(e,r,t)],c=[i];if(o.length%2!=0)throw new ue(q.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<o.length;f+=2)a.push(aA(e,o[f])),c.push(o[f+1]);let u=[],l=oi.empty();for(let f=a.length-1;f>=0;--f)if(!y8(u,a[f])){let h=a[f],g=c[f];g=Gt(g);let m=s.hc(h);if(g instanceof Uy)u.push(h);else{let y=e1(g,m);y!=null&&(u.push(h),l.set(h,y))}}let d=new xi(u);return new By(l,d,s.fieldTransforms)}function e1(n,e){if(v8(n=Gt(n)))return kA("Unsupported field value:",e,n),m8(n,e);if(n instanceof Ep)return function(r,i){if(!p8(i.oc))throw i.Tc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Tc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let c=e1(a,i.Pc(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Gt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $J(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=qn.fromDate(r);return{timestampValue:Cy(i.serializer,o)}}if(r instanceof qn){let o=new qn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Cy(i.serializer,o)}}if(r instanceof Cp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wp)return{bytesValue:VL(i.serializer,r._byteString)};if(r instanceof Er){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Tc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:xA(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bp)return function(s,a){return{mapValue:{fields:{[pA]:{stringValue:gA},[td]:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Tc("VectorValues must only contain numeric values.");return _A(a.serializer,u)})}}}}}}(r,i);throw i.Tc(`Unsupported field value: ${PA(r)}`)}(n,e)}function m8(n,e){let t={};return dL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ea(n,(r,i)=>{let o=e1(i,e.uc(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function v8(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof qn||n instanceof Cp||n instanceof wp||n instanceof Er||n instanceof Ep||n instanceof bp)}function kA(n,e,t){if(!v8(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=PA(t);throw r==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+r)}}function aA(n,e,t){if((e=Gt(e))instanceof hd)return e._internalPath;if(typeof e=="string")return FA(n,e);throw jy("Field path arguments must be of type string or ",n,!1,void 0,t)}var cte=new RegExp("[~\\*/\\[\\]]");function FA(n,e,t){if(e.search(cte)>=0)throw jy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hd(...e.split("."))._internalPath}catch{throw jy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function jy(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new ue(q.INVALID_ARGUMENT,a+n+c)}function y8(n,e){return n.some(t=>t.isEqual(e))}var Hy=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Er(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new cA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(_8("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},cA=class extends Hy{data(){return super.data()}};function _8(n,e){return typeof e=="string"?FA(n,e):e instanceof hd?e._internalPath:e._delegate._internalPath}function x8(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ue(q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var uA=class{convertValue(e,t="none"){switch(_a(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Kt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw he(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return Ea(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t[td].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Kt(s.doubleValue));return new bp(o)}convertGeoPoint(e){return new Cp(Kt(e.latitude),Kt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Gy(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(dp(e));default:return null}}convertTimestamp(e){let t=hs(e);return new qn(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=cn.fromString(e);ft($L(r),9688,{name:e});let i=new vy(r.get(1),r.get(3)),o=new pe(r.popFirst(5));return i.isEqual(t)||fs(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function w8(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var ru=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},zy=class extends Hy{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Zl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(_8("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Zl=class extends zy{data(e={}){return super.data(e)}},$y=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ru(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Zl(this._firestore,this._userDataWriter,r.key,r,new ru(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let c=new Zl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ru(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let c=new Zl(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ru(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),l=s.indexOf(a.doc.key)),{type:ute(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function ute(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return he(61501,{type:n})}}function E8(n){n=jr(n,Er);let e=jr(n.firestore,Xi);return tte(Jy(e),n._key).then(t=>D8(e,n,t))}var Ip=class extends uA{constructor(e){super(),this.firestore=e}convertBytes(e){return new wp(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Er(this.firestore,null,t)}};function C8(n){n=jr(n,xp);let e=jr(n.firestore,Xi),t=Jy(e),r=new Ip(e);return x8(n._query),nte(t,n._query).then(i=>new $y(e,r,n,i))}function b8(n,e,t){n=jr(n,Er);let r=jr(n.firestore,Xi),i=w8(n.converter,e,t);return t1(r,[g8(NA(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Do.none())])}function I8(n,e,t,...r){n=jr(n,Er);let i=jr(n.firestore,Xi),o=NA(i),s;return s=typeof(e=Gt(e))=="string"||e instanceof hd?ate(o,"updateDoc",n._key,e,t,r):ste(o,"updateDoc",n._key,e),t1(i,[s.toMutation(n._key,Do.exists(!0))])}function S8(n){return t1(jr(n.firestore,Xi),[new hp(n._key,Do.none())])}function A8(n,e){let t=jr(n.firestore,Xi),r=RA(n),i=w8(n.converter,e);return t1(t,[g8(NA(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Do.exists(!1))]).then(()=>r)}function LA(n,...e){var t,r,i;n=Gt(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||K4(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(K4(e[s])){let d=e[s];e[s]=(t=d.next)===null||t===void 0?void 0:t.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,l;if(n instanceof Er)u=jr(n.firestore,Xi),l=qy(n._key.path),c={next:d=>{e[s]&&e[s](D8(u,n,d))},error:e[s+1],complete:e[s+2]};else{let d=jr(n,xp);u=jr(d.firestore,Xi),l=d._query;let f=new Ip(u);c={next:h=>{e[s]&&e[s](new $y(u,f,d,h))},error:e[s+1],complete:e[s+2]},x8(n._query)}return function(f,h,g,m){let y=new _p(m),x=new yp(h,y,g);return f.asyncQueue.enqueueAndForget(()=>A(null,null,function*(){return AA(yield Fy(f),x)})),()=>{y.yu(),f.asyncQueue.enqueueAndForget(()=>A(null,null,function*(){return DA(yield Fy(f),x)}))}}(Jy(u),l,a,c)}function t1(n,e){return function(r,i){let o=new Ki;return r.asyncQueue.enqueueAndForget(()=>A(null,null,function*(){return $ee(yield ete(r),i,o)})),o.promise}(Jy(n),e)}function D8(n,e,t){let r=t.docs.get(e._key),i=new Ip(n);return new zy(n,i,e._key,r,new ru(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){pd=i})(la),Wi(new xr("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Xi(new PI(r.getProvider("auth-internal")),new kI(s,r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ue(q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vy(u.options.projectId,l)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),an(o4,s4,e),an(o4,s4,"esm2017")})();var n1=function(){return n1=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},n1.apply(this,arguments)};var fte={includeMetadataChanges:!1};function VA(n,e){return e===void 0&&(e=fte),new Re(function(t){var r=LA(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)});return{unsubscribe:r}})}function T8(n){return VA(n,{includeMetadataChanges:!0})}function M8(n,e){return e===void 0&&(e={}),T8(n).pipe(Ae(function(t){return BA(t,e)}))}function BA(n,e){var t;e===void 0&&(e={});var r=n.data(e);return!n.exists()||typeof r!="object"||r===null||!e.idField?r:n1(n1({},r),(t={},t[e.idField]=n.id,t))}function O8(n){return VA(n,{includeMetadataChanges:!0}).pipe(Ae(function(e){return e.docs}))}function P8(n,e){return e===void 0&&(e={}),O8(n).pipe(Ae(function(t){return t.map(function(r){return BA(r,e)})}))}var jt=class{constructor(e){return e}},R8="firestore",UA=class{constructor(){return Ul(R8)}};var jA=new ae("angularfire2.firestore-instances");function hte(n,e){let t=jh(R8,n,e);return t&&new jt(t)}function pte(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new jt(r)}}var gte={provide:UA,deps:[[new Zr,jA]]},mte={provide:jt,useFactory:hte,deps:[[new Zr,jA],ss]};function N8(n,...e){return an("angularfire",da.full,"fst"),Jo([mte,gte,{provide:jA,useFactory:pte(n),multi:!0,deps:[He,En,fa,Qc,[new Zr,tp],[new Zr,jl],...e]}])}var r1=qt(P8,!0);var k8=qt(M8,!0);var i1=qt(A8,!0,2);var vs=qt(f8,!0,2);var F8=qt(S8,!0,2);var kt=qt(RA,!0,2);var Hr=qt(E8,!0);var L8=qt(C8,!0);var V8=qt(h8,!0);var ys=qt(b8,!0,2);var o1=qt(I8,!0,2);var s1=class n{constructor(e,t,r){this.auth=e;this.firestore=t;this.router=r;this.user$=$l(this.auth)}title="crud-pi";user$;userData;ngOnInit(){this.user$=$l(this.auth),this.user$.subscribe(e=>A(this,null,function*(){if(!e){console.log("Usu\xE1rio n\xE3o autenticado"),this.router.navigate(["/login"]);return}console.log("Usu\xE1rio atual:",this.auth.currentUser);try{let t=kt(this.firestore,"usuarios",e.uid),r=yield Hr(t);r.exists()?(this.userData=r.data(),console.log("Dados do usu\xE1rio:",this.userData)):console.log("Documento do usu\xE1rio n\xE3o encontrado")}catch(t){console.error("Erro ao buscar documento:",t)}}))}static \u0275fac=function(t){return new(t||n)(z(_t),z(jt),z(ze))};static \u0275cmp=it({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){t&1&&dt(0,"router-outlet")},dependencies:[Eh,sn,ca],styles:["body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;height:100%;background-color:#f9f9f9;font-family:Arial,sans-serif}app-root[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh}"]})};var Ca=class n{constructor(e,t,r){this.auth=e;this.router=t;this.firestore=r}login(e,t){return t4(this.auth,e,t)}register(e,t){return A(this,null,function*(){console.log("Registrando com:",e,t);let r=yield JF(this.auth,e,t),i=r.user.uid;return yield ys(kt(this.firestore,`usuarios/${i}`),{email:e,createdAt:new Date}),r})}logout(){return n4(this.auth).then(()=>{this.router.navigate(["/login"])})}getCurrentUser(){return this.auth.currentUser}static \u0275fac=function(t){return new(t||n)(ce(_t),ce(ze),ce(jt))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var yd=class n{constructor(e,t){this.authService=e;this.router=t}logout(){this.authService.logout().then(()=>{this.router.navigate(["/login"])})}static \u0275fac=function(t){return new(t||n)(z(Ca),z(ze))};static \u0275cmp=it({type:n,selectors:[["app-navbar"]],decls:3,vars:0,consts:[[1,"navbar"],[1,"logout-button",3,"click"]],template:function(t,r){t&1&&(F(0,"div",0)(1,"button",1),re("click",function(){return r.logout()}),U(2,"Sair"),L()())},styles:[".navbar[_ngcontent-%COMP%]{width:100%;padding:12px 20px;display:flex;margin-top:-30px;justify-content:flex-end;background-color:f9fafb;border-bottom:1px solid #ddd}.logout-button[_ngcontent-%COMP%]{background-color:#e74c3c;border:none;padding:8px 14px;border-radius:6px;color:#fff;cursor:pointer;font-weight:700}.logout-button[_ngcontent-%COMP%]:hover{background-color:#c0392b}"]})};function Mp(n){return n+.5|0}var ba=(n,e,t)=>Math.max(Math.min(n,t),e);function Dp(n){return ba(Mp(n*2.55),0,255)}function Ia(n){return ba(Mp(n*255),0,255)}function _s(n){return ba(Mp(n/2.55)/100,0,1)}function B8(n){return ba(Mp(n*100),0,100)}var wi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$A=[..."0123456789ABCDEF"],vte=n=>$A[n&15],yte=n=>$A[(n&240)>>4]+$A[n&15],a1=n=>(n&240)>>4===(n&15),_te=n=>a1(n.r)&&a1(n.g)&&a1(n.b)&&a1(n.a);function xte(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&wi[n[1]]*17,g:255&wi[n[2]]*17,b:255&wi[n[3]]*17,a:e===5?wi[n[4]]*17:255}:(e===7||e===9)&&(t={r:wi[n[1]]<<4|wi[n[2]],g:wi[n[3]]<<4|wi[n[4]],b:wi[n[5]]<<4|wi[n[6]],a:e===9?wi[n[7]]<<4|wi[n[8]]:255})),t}var wte=(n,e)=>n<255?e(n):"";function Ete(n){var e=_te(n)?vte:yte;return n?"#"+e(n.r)+e(n.g)+e(n.b)+wte(n.a,e):void 0}var Cte=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function z8(n,e,t){let r=e*Math.min(t,1-t),i=(o,s=(o+n/30)%12)=>t-r*Math.max(Math.min(s-3,9-s,1),-1);return[i(0),i(8),i(4)]}function bte(n,e,t){let r=(i,o=(i+n/60)%6)=>t-t*e*Math.max(Math.min(o,4-o,1),0);return[r(5),r(3),r(1)]}function Ite(n,e,t){let r=z8(n,1,.5),i;for(e+t>1&&(i=1/(e+t),e*=i,t*=i),i=0;i<3;i++)r[i]*=1-e-t,r[i]+=e;return r}function Ste(n,e,t,r,i){return n===i?(e-t)/r+(e<t?6:0):e===i?(t-n)/r+2:(n-e)/r+4}function WA(n){let t=n.r/255,r=n.g/255,i=n.b/255,o=Math.max(t,r,i),s=Math.min(t,r,i),a=(o+s)/2,c,u,l;return o!==s&&(l=o-s,u=a>.5?l/(2-o-s):l/(o+s),c=Ste(t,r,i,l,o),c=c*60+.5),[c|0,u||0,a]}function GA(n,e,t,r){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,r)).map(Ia)}function qA(n,e,t){return GA(z8,n,e,t)}function Ate(n,e,t){return GA(Ite,n,e,t)}function Dte(n,e,t){return GA(bte,n,e,t)}function $8(n){return(n%360+360)%360}function Tte(n){let e=Cte.exec(n),t=255,r;if(!e)return;e[5]!==r&&(t=e[6]?Dp(+e[5]):Ia(+e[5]));let i=$8(+e[2]),o=+e[3]/100,s=+e[4]/100;return e[1]==="hwb"?r=Ate(i,o,s):e[1]==="hsv"?r=Dte(i,o,s):r=qA(i,o,s),{r:r[0],g:r[1],b:r[2],a:t}}function Mte(n,e){var t=WA(n);t[0]=$8(t[0]+e),t=qA(t),n.r=t[0],n.g=t[1],n.b=t[2]}function Ote(n){if(!n)return;let e=WA(n),t=e[0],r=B8(e[1]),i=B8(e[2]);return n.a<255?`hsla(${t}, ${r}%, ${i}%, ${_s(n.a)})`:`hsl(${t}, ${r}%, ${i}%)`}var U8={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},j8={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Pte(){let n={},e=Object.keys(j8),t=Object.keys(U8),r,i,o,s,a;for(r=0;r<e.length;r++){for(s=a=e[r],i=0;i<t.length;i++)o=t[i],a=a.replace(o,U8[o]);o=parseInt(j8[s],16),n[a]=[o>>16&255,o>>8&255,o&255]}return n}var c1;function Rte(n){c1||(c1=Pte(),c1.transparent=[0,0,0,0]);let e=c1[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var Nte=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function kte(n){let e=Nte.exec(n),t=255,r,i,o;if(e){if(e[7]!==r){let s=+e[7];t=e[8]?Dp(s):ba(s*255,0,255)}return r=+e[1],i=+e[3],o=+e[5],r=255&(e[2]?Dp(r):ba(r,0,255)),i=255&(e[4]?Dp(i):ba(i,0,255)),o=255&(e[6]?Dp(o):ba(o,0,255)),{r,g:i,b:o,a:t}}}function Fte(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${_s(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var zA=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,_d=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function Lte(n,e,t){let r=_d(_s(n.r)),i=_d(_s(n.g)),o=_d(_s(n.b));return{r:Ia(zA(r+t*(_d(_s(e.r))-r))),g:Ia(zA(i+t*(_d(_s(e.g))-i))),b:Ia(zA(o+t*(_d(_s(e.b))-o))),a:n.a+t*(e.a-n.a)}}function u1(n,e,t){if(n){let r=WA(n);r[e]=Math.max(0,Math.min(r[e]+r[e]*t,e===0?360:1)),r=qA(r),n.r=r[0],n.g=r[1],n.b=r[2]}}function W8(n,e){return n&&Object.assign(e||{},n)}function H8(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Ia(n[3]))):(e=W8(n,{r:0,g:0,b:0,a:1}),e.a=Ia(e.a)),e}function Vte(n){return n.charAt(0)==="r"?kte(n):Tte(n)}var Tp=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,r;t==="object"?r=H8(e):t==="string"&&(r=xte(e)||Rte(e)||Vte(e)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var e=W8(this._rgb);return e&&(e.a=_s(e.a)),e}set rgb(e){this._rgb=H8(e)}rgbString(){return this._valid?Fte(this._rgb):void 0}hexString(){return this._valid?Ete(this._rgb):void 0}hslString(){return this._valid?Ote(this._rgb):void 0}mix(e,t){if(e){let r=this.rgb,i=e.rgb,o,s=t===o?.5:t,a=2*s-1,c=r.a-i.a,u=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;o=1-u,r.r=255&u*r.r+o*i.r+.5,r.g=255&u*r.g+o*i.g+.5,r.b=255&u*r.b+o*i.b+.5,r.a=s*r.a+(1-s)*i.a,this.rgb=r}return this}interpolate(e,t){return e&&(this._rgb=Lte(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=Ia(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=Mp(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return u1(this._rgb,2,e),this}darken(e){return u1(this._rgb,2,-e),this}saturate(e){return u1(this._rgb,1,e),this}desaturate(e){return u1(this._rgb,1,-e),this}rotate(e){return Mte(this._rgb,e),this}};function Fo(){}var n6=(()=>{let n=0;return()=>n++})();function et(n){return n===null||typeof n>"u"}function Ft(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Ge(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Xt(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function $r(n,e){return Xt(n)?n:e}function Te(n,e){return typeof n>"u"?e:n}var r6=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,QA=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Dt(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function ht(n,e,t,r){let i,o,s;if(Ft(n))if(o=n.length,r)for(i=o-1;i>=0;i--)e.call(t,n[i],i);else for(i=0;i<o;i++)e.call(t,n[i],i);else if(Ge(n))for(s=Object.keys(n),o=s.length,i=0;i<o;i++)e.call(t,n[s[i]],s[i])}function Rp(n,e){let t,r,i,o;if(!n||!e||n.length!==e.length)return!1;for(t=0,r=n.length;t<r;++t)if(i=n[t],o=e[t],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function h1(n){if(Ft(n))return n.map(h1);if(Ge(n)){let e=Object.create(null),t=Object.keys(n),r=t.length,i=0;for(;i<r;++i)e[t[i]]=h1(n[t[i]]);return e}return n}function i6(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function Bte(n,e,t,r){if(!i6(n))return;let i=e[n],o=t[n];Ge(i)&&Ge(o)?wd(i,o,r):e[n]=h1(o)}function wd(n,e,t){let r=Ft(e)?e:[e],i=r.length;if(!Ge(n))return n;t=t||{};let o=t.merger||Bte,s;for(let a=0;a<i;++a){if(s=r[a],!Ge(s))continue;let c=Object.keys(s);for(let u=0,l=c.length;u<l;++u)o(c[u],n,s,t)}return n}function Cd(n,e){return wd(n,e,{merger:Ute})}function Ute(n,e,t){if(!i6(n))return;let r=e[n],i=t[n];Ge(r)&&Ge(i)?Cd(r,i):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=h1(i))}var G8={"":n=>n,x:n=>n.x,y:n=>n.y};function jte(n){let e=n.split("."),t=[],r="";for(let i of e)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(t.push(r),r="");return t}function Hte(n){let e=jte(n);return t=>{for(let r of e){if(r==="")break;t=t&&t[r]}return t}}function Es(n,e){return(G8[e]||(G8[e]=Hte(e)))(n)}function v1(n){return n.charAt(0).toUpperCase()+n.slice(1)}var bd=n=>typeof n<"u",xs=n=>typeof n=="function",ZA=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function o6(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var Lt=Math.PI,Vt=2*Lt,zte=Vt+Lt,p1=Number.POSITIVE_INFINITY,$te=Lt/180,ln=Lt/2,du=Lt/4,q8=Lt*2/3,ws=Math.log10,Qi=Math.sign;function Id(n,e,t){return Math.abs(n-e)<t}function JA(n){let e=Math.round(n);n=Id(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(ws(n))),r=n/t;return(r<=1?1:r<=2?2:r<=5?5:10)*t}function s6(n){let e=[],t=Math.sqrt(n),r;for(r=1;r<t;r++)n%r===0&&(e.push(r),e.push(n/r));return t===(t|0)&&e.push(t),e.sort((i,o)=>i-o).pop(),e}function pu(n){return!isNaN(parseFloat(n))&&isFinite(n)}function a6(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function eD(n,e,t){let r,i,o;for(r=0,i=n.length;r<i;r++)o=n[r][t],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Ei(n){return n*(Lt/180)}function y1(n){return n*(180/Lt)}function tD(n){if(!Xt(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function nD(n,e){let t=e.x-n.x,r=e.y-n.y,i=Math.sqrt(t*t+r*r),o=Math.atan2(r,t);return o<-.5*Lt&&(o+=Vt),{angle:o,distance:i}}function g1(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function Wte(n,e){return(n-e+zte)%Vt-Lt}function zr(n){return(n%Vt+Vt)%Vt}function Sd(n,e,t,r){let i=zr(n),o=zr(e),s=zr(t),a=zr(o-i),c=zr(s-i),u=zr(i-o),l=zr(i-s);return i===o||i===s||r&&o===s||a>c&&u<l}function Rn(n,e,t){return Math.max(e,Math.min(t,n))}function c6(n){return Rn(n,-32768,32767)}function Lo(n,e,t,r=1e-6){return n>=Math.min(e,t)-r&&n<=Math.max(e,t)+r}function _1(n,e,t){t=t||(s=>n[s]<e);let r=n.length-1,i=0,o;for(;r-i>1;)o=i+r>>1,t(o)?i=o:r=o;return{lo:i,hi:r}}var No=(n,e,t,r)=>_1(n,t,r?i=>{let o=n[i][e];return o<t||o===t&&n[i+1][e]===t}:i=>n[i][e]<t),u6=(n,e,t)=>_1(n,t,r=>n[r][e]>=t);function l6(n,e,t){let r=0,i=n.length;for(;r<i&&n[r]<e;)r++;for(;i>r&&n[i-1]>t;)i--;return r>0||i<n.length?n.slice(r,i):n}var d6=["push","pop","shift","splice","unshift"];function f6(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),d6.forEach(t=>{let r="_onData"+v1(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...o){let s=i.apply(this,o);return n._chartjs.listeners.forEach(a=>{typeof a[r]=="function"&&a[r](...o)}),s}})})}function rD(n,e){let t=n._chartjs;if(!t)return;let r=t.listeners,i=r.indexOf(e);i!==-1&&r.splice(i,1),!(r.length>0)&&(d6.forEach(o=>{delete n[o]}),delete n._chartjs)}function iD(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var oD=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function sD(n,e){let t=[],r=!1;return function(...i){t=i,r||(r=!0,oD.call(window,()=>{r=!1,n.apply(e,t)}))}}function h6(n,e){let t;return function(...r){return e?(clearTimeout(t),t=setTimeout(n,e,r)):n.apply(this,r),e}}var x1=n=>n==="start"?"left":n==="end"?"right":"center",Kn=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,p6=(n,e,t,r)=>n===(r?"left":"right")?t:n==="center"?(e+t)/2:e;function aD(n,e,t){let r=e.length,i=0,o=r;if(n._sorted){let{iScale:s,_parsed:a}=n,c=s.axis,{min:u,max:l,minDefined:d,maxDefined:f}=s.getUserBounds();d&&(i=Rn(Math.min(No(a,c,u).lo,t?r:No(e,c,s.getPixelForValue(u)).lo),0,r-1)),f?o=Rn(Math.max(No(a,s.axis,l,!0).hi+1,t?0:No(e,c,s.getPixelForValue(l),!0).hi+1),i,r)-i:o=r-i}return{start:i,count:o}}function cD(n){let{xScale:e,yScale:t,_scaleRanges:r}=n,i={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!r)return n._scaleRanges=i,!0;let o=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==t.min||r.ymax!==t.max;return Object.assign(r,i),o}var l1=n=>n===0||n===1,K8=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Vt/t)),Y8=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Vt/t)+1,xd={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*ln)+1,easeOutSine:n=>Math.sin(n*ln),easeInOutSine:n=>-.5*(Math.cos(Lt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>l1(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>l1(n)?n:K8(n,.075,.3),easeOutElastic:n=>l1(n)?n:Y8(n,.075,.3),easeInOutElastic(n){return l1(n)?n:n<.5?.5*K8(n*2,.1125,.45):.5+.5*Y8(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-xd.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?xd.easeInBounce(n*2)*.5:xd.easeOutBounce(n*2-1)*.5+.5};function uD(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function lD(n){return uD(n)?n:new Tp(n)}function KA(n){return uD(n)?n:new Tp(n).saturate(.5).darken(.1).hexString()}var Gte=["x","y","borderWidth","radius","tension"],qte=["color","borderColor","backgroundColor"];function Kte(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:qte},numbers:{type:"number",properties:Gte}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function Yte(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var X8=new Map;function Xte(n,e){e=e||{};let t=n+JSON.stringify(e),r=X8.get(t);return r||(r=new Intl.NumberFormat(n,e),X8.set(t,r)),r}function Ad(n,e,t){return Xte(e,t).format(n)}var g6={values(n){return Ft(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let r=this.chart.options.locale,i,o=n;if(t.length>1){let u=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(u<1e-4||u>1e15)&&(i="scientific"),o=Qte(n,t)}let s=ws(Math.abs(o)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),c={notation:i,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),Ad(n,r,c)},logarithmic(n,e,t){if(n===0)return"0";let r=t[e].significand||n/Math.pow(10,Math.floor(ws(n)));return[1,2,3,5,10,15].includes(r)||e>.8*t.length?g6.numeric.call(this,n,e,t):""}};function Qte(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var Np={formatters:g6};function Zte(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Np.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var Aa=Object.create(null),w1=Object.create(null);function Op(n,e){if(!e)return n;let t=e.split(".");for(let r=0,i=t.length;r<i;++r){let o=t[r];n=n[o]||(n[o]=Object.create(null))}return n}function YA(n,e,t){return typeof e=="string"?wd(Op(n,e),t):wd(Op(n,""),e)}var XA=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>KA(i.backgroundColor),this.hoverBorderColor=(r,i)=>KA(i.borderColor),this.hoverColor=(r,i)=>KA(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return YA(this,e,t)}get(e){return Op(this,e)}describe(e,t){return YA(w1,e,t)}override(e,t){return YA(Aa,e,t)}route(e,t,r,i){let o=Op(this,e),s=Op(this,r),a="_"+t;Object.defineProperties(o,{[a]:{value:o[t],writable:!0},[t]:{enumerable:!0,get(){let c=this[a],u=s[i];return Ge(c)?Object.assign({},u,c):Te(c,u)},set(c){this[a]=c}}})}apply(e){e.forEach(t=>t(this))}},Ht=new XA({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Kte,Yte,Zte]);function Jte(n){return!n||et(n.size)||et(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Pp(n,e,t,r,i){let o=e[i];return o||(o=e[i]=n.measureText(i).width,t.push(i)),o>r&&(r=o),r}function m6(n,e,t,r){r=r||{};let i=r.data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},o=r.garbageCollect=[],r.font=e),n.save(),n.font=e;let s=0,a=t.length,c,u,l,d,f;for(c=0;c<a;c++)if(d=t[c],d!=null&&!Ft(d))s=Pp(n,i,o,s,d);else if(Ft(d))for(u=0,l=d.length;u<l;u++)f=d[u],f!=null&&!Ft(f)&&(s=Pp(n,i,o,s,f));n.restore();let h=o.length/2;if(h>t.length){for(c=0;c<h;c++)delete i[o[c]];o.splice(0,h)}return s}function Da(n,e,t){let r=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((e-i)*r)/r+i}function dD(n,e){e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore()}function E1(n,e,t,r){fD(n,e,t,r,null)}function fD(n,e,t,r,i){let o,s,a,c,u,l,d,f,h=e.pointStyle,g=e.rotation,m=e.radius,y=(g||0)*$te;if(h&&typeof h=="object"&&(o=h.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){n.save(),n.translate(t,r),n.rotate(y),n.drawImage(h,-h.width/2,-h.height/2,h.width,h.height),n.restore();return}if(!(isNaN(m)||m<=0)){switch(n.beginPath(),h){default:i?n.ellipse(t,r,i/2,m,0,0,Vt):n.arc(t,r,m,0,Vt),n.closePath();break;case"triangle":l=i?i/2:m,n.moveTo(t+Math.sin(y)*l,r-Math.cos(y)*m),y+=q8,n.lineTo(t+Math.sin(y)*l,r-Math.cos(y)*m),y+=q8,n.lineTo(t+Math.sin(y)*l,r-Math.cos(y)*m),n.closePath();break;case"rectRounded":u=m*.516,c=m-u,s=Math.cos(y+du)*c,d=Math.cos(y+du)*(i?i/2-u:c),a=Math.sin(y+du)*c,f=Math.sin(y+du)*(i?i/2-u:c),n.arc(t-d,r-a,u,y-Lt,y-ln),n.arc(t+f,r-s,u,y-ln,y),n.arc(t+d,r+a,u,y,y+ln),n.arc(t-f,r+s,u,y+ln,y+Lt),n.closePath();break;case"rect":if(!g){c=Math.SQRT1_2*m,l=i?i/2:c,n.rect(t-l,r-c,2*l,2*c);break}y+=du;case"rectRot":d=Math.cos(y)*(i?i/2:m),s=Math.cos(y)*m,a=Math.sin(y)*m,f=Math.sin(y)*(i?i/2:m),n.moveTo(t-d,r-a),n.lineTo(t+f,r-s),n.lineTo(t+d,r+a),n.lineTo(t-f,r+s),n.closePath();break;case"crossRot":y+=du;case"cross":d=Math.cos(y)*(i?i/2:m),s=Math.cos(y)*m,a=Math.sin(y)*m,f=Math.sin(y)*(i?i/2:m),n.moveTo(t-d,r-a),n.lineTo(t+d,r+a),n.moveTo(t+f,r-s),n.lineTo(t-f,r+s);break;case"star":d=Math.cos(y)*(i?i/2:m),s=Math.cos(y)*m,a=Math.sin(y)*m,f=Math.sin(y)*(i?i/2:m),n.moveTo(t-d,r-a),n.lineTo(t+d,r+a),n.moveTo(t+f,r-s),n.lineTo(t-f,r+s),y+=du,d=Math.cos(y)*(i?i/2:m),s=Math.cos(y)*m,a=Math.sin(y)*m,f=Math.sin(y)*(i?i/2:m),n.moveTo(t-d,r-a),n.lineTo(t+d,r+a),n.moveTo(t+f,r-s),n.lineTo(t-f,r+s);break;case"line":s=i?i/2:Math.cos(y)*m,a=Math.sin(y)*m,n.moveTo(t-s,r-a),n.lineTo(t+s,r+a);break;case"dash":n.moveTo(t,r),n.lineTo(t+Math.cos(y)*(i?i/2:m),r+Math.sin(y)*m);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function ko(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function kp(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Fp(n){n.restore()}function v6(n,e,t,r,i){if(!e)return n.lineTo(t.x,t.y);if(i==="middle"){let o=(e.x+t.x)/2;n.lineTo(o,e.y),n.lineTo(o,t.y)}else i==="after"!=!!r?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function y6(n,e,t,r){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?t.cp2x:t.cp1x,r?t.cp2y:t.cp1y,t.x,t.y)}function ene(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),et(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function tne(n,e,t,r,i){if(i.strikethrough||i.underline){let o=n.measureText(r),s=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,c=t-o.actualBoundingBoxAscent,u=t+o.actualBoundingBoxDescent,l=i.strikethrough?(c+u)/2:u;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(s,l),n.lineTo(a,l),n.stroke()}}function nne(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function Ta(n,e,t,r,i,o={}){let s=Ft(e)?e:[e],a=o.strokeWidth>0&&o.strokeColor!=="",c,u;for(n.save(),n.font=i.string,ene(n,o),c=0;c<s.length;++c)u=s[c],o.backdrop&&nne(n,o.backdrop),a&&(o.strokeColor&&(n.strokeStyle=o.strokeColor),et(o.strokeWidth)||(n.lineWidth=o.strokeWidth),n.strokeText(u,t,r,o.maxWidth)),n.fillText(u,t,r,o.maxWidth),tne(n,t,r,u,o),r+=Number(i.lineHeight);n.restore()}function Dd(n,e){let{x:t,y:r,w:i,h:o,radius:s}=e;n.arc(t+s.topLeft,r+s.topLeft,s.topLeft,1.5*Lt,Lt,!0),n.lineTo(t,r+o-s.bottomLeft),n.arc(t+s.bottomLeft,r+o-s.bottomLeft,s.bottomLeft,Lt,ln,!0),n.lineTo(t+i-s.bottomRight,r+o),n.arc(t+i-s.bottomRight,r+o-s.bottomRight,s.bottomRight,ln,0,!0),n.lineTo(t+i,r+s.topRight),n.arc(t+i-s.topRight,r+s.topRight,s.topRight,0,-ln,!0),n.lineTo(t+s.topLeft,r)}var rne=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ine=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function one(n,e){let t=(""+n).match(rne);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var sne=n=>+n||0;function C1(n,e){let t={},r=Ge(e),i=r?Object.keys(e):e,o=Ge(n)?r?s=>Te(n[s],n[e[s]]):s=>n[s]:()=>n;for(let s of i)t[s]=sne(o(s));return t}function hD(n){return C1(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Ma(n){return C1(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Yn(n){let e=hD(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function An(n,e){n=n||{},e=e||Ht.font;let t=Te(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let r=Te(n.style,e.style);r&&!(""+r).match(ine)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);let i={family:Te(n.family,e.family),lineHeight:one(Te(n.lineHeight,e.lineHeight),t),size:t,style:r,weight:Te(n.weight,e.weight),string:""};return i.string=Jte(i),i}function Td(n,e,t,r){let i=!0,o,s,a;for(o=0,s=n.length;o<s;++o)if(a=n[o],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),i=!1),t!==void 0&&Ft(a)&&(a=a[t%a.length],i=!1),a!==void 0))return r&&!i&&(r.cacheable=!1),a}function _6(n,e,t){let{min:r,max:i}=n,o=QA(e,(i-r)/2),s=(a,c)=>t&&a===0?0:a+c;return{min:s(r,-Math.abs(o)),max:s(i,o)}}function Cs(n,e){return Object.assign(Object.create(n),e)}function b1(n,e=[""],t,r,i=()=>n[0]){let o=t||n;typeof r>"u"&&(r=E6("_fallback",n));let s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:o,_fallback:r,_getTarget:i,override:a=>b1([a,...n],e,o,r)};return new Proxy(s,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return x6(a,c,()=>pne(c,e,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return Z8(a).includes(c)},ownKeys(a){return Z8(a)},set(a,c,u){let l=a._storage||(a._storage=i());return a[c]=l[c]=u,delete a._keys,!0}})}function hu(n,e,t,r){let i={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:pD(n,r),setContext:o=>hu(n,o,t,r),override:o=>hu(n.override(o),e,t,r)};return new Proxy(i,{deleteProperty(o,s){return delete o[s],delete n[s],!0},get(o,s,a){return x6(o,s,()=>cne(o,s,a))},getOwnPropertyDescriptor(o,s){return o._descriptors.allKeys?Reflect.has(n,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,s)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(o,s){return Reflect.has(n,s)},ownKeys(){return Reflect.ownKeys(n)},set(o,s,a){return n[s]=a,delete o[s],!0}})}function pD(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=n;return{allKeys:i,scriptable:t,indexable:r,isScriptable:xs(t)?t:()=>t,isIndexable:xs(r)?r:()=>r}}var ane=(n,e)=>n?n+v1(e):e,gD=(n,e)=>Ge(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function x6(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e))return n[e];let r=t();return n[e]=r,r}function cne(n,e,t){let{_proxy:r,_context:i,_subProxy:o,_descriptors:s}=n,a=r[e];return xs(a)&&s.isScriptable(e)&&(a=une(e,a,n,t)),Ft(a)&&a.length&&(a=lne(e,a,n,s.isIndexable)),gD(e,a)&&(a=hu(a,i,o&&o[e],s)),a}function une(n,e,t,r){let{_proxy:i,_context:o,_subProxy:s,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=e(o,s||r);return a.delete(n),gD(n,c)&&(c=mD(i._scopes,i,n,c)),c}function lne(n,e,t,r){let{_proxy:i,_context:o,_subProxy:s,_descriptors:a}=t;if(typeof o.index<"u"&&r(n))return e[o.index%e.length];if(Ge(e[0])){let c=e,u=i._scopes.filter(l=>l!==c);e=[];for(let l of c){let d=mD(u,i,n,l);e.push(hu(d,o,s&&s[n],a))}}return e}function w6(n,e,t){return xs(n)?n(e,t):n}var dne=(n,e)=>n===!0?e:typeof n=="string"?Es(e,n):void 0;function fne(n,e,t,r,i){for(let o of e){let s=dne(t,o);if(s){n.add(s);let a=w6(s._fallback,t,i);if(typeof a<"u"&&a!==t&&a!==r)return a}else if(s===!1&&typeof r<"u"&&t!==r)return null}return!1}function mD(n,e,t,r){let i=e._rootScopes,o=w6(e._fallback,t,r),s=[...n,...i],a=new Set;a.add(r);let c=Q8(a,s,t,o||t,r);return c===null||typeof o<"u"&&o!==t&&(c=Q8(a,s,o,c,r),c===null)?!1:b1(Array.from(a),[""],i,o,()=>hne(e,t,r))}function Q8(n,e,t,r,i){for(;t;)t=fne(n,e,t,r,i);return t}function hne(n,e,t){let r=n._getTarget();e in r||(r[e]={});let i=r[e];return Ft(i)&&Ge(t)?t:i||{}}function pne(n,e,t,r){let i;for(let o of e)if(i=E6(ane(o,n),t),typeof i<"u")return gD(n,i)?mD(t,r,n,i):i}function E6(n,e){for(let t of e){if(!t)continue;let r=t[n];if(typeof r<"u")return r}}function Z8(n){let e=n._keys;return e||(e=n._keys=gne(n._scopes)),e}function gne(n){let e=new Set;for(let t of n)for(let r of Object.keys(t).filter(i=>!i.startsWith("_")))e.add(r);return Array.from(e)}function vD(n,e,t,r){let{iScale:i}=n,{key:o="r"}=this._parsing,s=new Array(r),a,c,u,l;for(a=0,c=r;a<c;++a)u=a+t,l=e[u],s[a]={r:i.parse(Es(l,o),u)};return s}var mne=Number.EPSILON||1e-14,Ed=(n,e)=>e<n.length&&!n[e].skip&&n[e],C6=n=>n==="x"?"y":"x";function vne(n,e,t,r){let i=n.skip?e:n,o=e,s=t.skip?e:t,a=g1(o,i),c=g1(s,o),u=a/(a+c),l=c/(a+c);u=isNaN(u)?0:u,l=isNaN(l)?0:l;let d=r*u,f=r*l;return{previous:{x:o.x-d*(s.x-i.x),y:o.y-d*(s.y-i.y)},next:{x:o.x+f*(s.x-i.x),y:o.y+f*(s.y-i.y)}}}function yne(n,e,t){let r=n.length,i,o,s,a,c,u=Ed(n,0);for(let l=0;l<r-1;++l)if(c=u,u=Ed(n,l+1),!(!c||!u)){if(Id(e[l],0,mne)){t[l]=t[l+1]=0;continue}i=t[l]/e[l],o=t[l+1]/e[l],a=Math.pow(i,2)+Math.pow(o,2),!(a<=9)&&(s=3/Math.sqrt(a),t[l]=i*s*e[l],t[l+1]=o*s*e[l])}}function _ne(n,e,t="x"){let r=C6(t),i=n.length,o,s,a,c=Ed(n,0);for(let u=0;u<i;++u){if(s=a,a=c,c=Ed(n,u+1),!a)continue;let l=a[t],d=a[r];s&&(o=(l-s[t])/3,a[`cp1${t}`]=l-o,a[`cp1${r}`]=d-o*e[u]),c&&(o=(c[t]-l)/3,a[`cp2${t}`]=l+o,a[`cp2${r}`]=d+o*e[u])}}function xne(n,e="x"){let t=C6(e),r=n.length,i=Array(r).fill(0),o=Array(r),s,a,c,u=Ed(n,0);for(s=0;s<r;++s)if(a=c,c=u,u=Ed(n,s+1),!!c){if(u){let l=u[e]-c[e];i[s]=l!==0?(u[t]-c[t])/l:0}o[s]=a?u?Qi(i[s-1])!==Qi(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}yne(n,i,o),_ne(n,o,e)}function d1(n,e,t){return Math.max(Math.min(n,t),e)}function wne(n,e){let t,r,i,o,s,a=ko(n[0],e);for(t=0,r=n.length;t<r;++t)s=o,o=a,a=t<r-1&&ko(n[t+1],e),o&&(i=n[t],s&&(i.cp1x=d1(i.cp1x,e.left,e.right),i.cp1y=d1(i.cp1y,e.top,e.bottom)),a&&(i.cp2x=d1(i.cp2x,e.left,e.right),i.cp2y=d1(i.cp2y,e.top,e.bottom)))}function b6(n,e,t,r,i){let o,s,a,c;if(e.spanGaps&&(n=n.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")xne(n,i);else{let u=r?n[n.length-1]:n[0];for(o=0,s=n.length;o<s;++o)a=n[o],c=vne(u,a,n[Math.min(o+1,s-(r?0:1))%s],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,u=a}e.capBezierPoints&&wne(n,t)}function yD(){return typeof window<"u"&&typeof document<"u"}function I1(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function m1(n,e,t){let r;return typeof n=="string"?(r=parseInt(n,10),n.indexOf("%")!==-1&&(r=r/100*e.parentNode[t])):r=n,r}var S1=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Ene(n,e){return S1(n).getPropertyValue(e)}var Cne=["top","right","bottom","left"];function fu(n,e,t){let r={};t=t?"-"+t:"";for(let i=0;i<4;i++){let o=Cne[i];r[o]=parseFloat(n[e+"-"+o+t])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}var bne=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function Ine(n,e){let t=n.touches,r=t&&t.length?t[0]:n,{offsetX:i,offsetY:o}=r,s=!1,a,c;if(bne(i,o,n.target))a=i,c=o;else{let u=e.getBoundingClientRect();a=r.clientX-u.left,c=r.clientY-u.top,s=!0}return{x:a,y:c,box:s}}function Oa(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:r}=e,i=S1(t),o=i.boxSizing==="border-box",s=fu(i,"padding"),a=fu(i,"border","width"),{x:c,y:u,box:l}=Ine(n,t),d=s.left+(l&&a.left),f=s.top+(l&&a.top),{width:h,height:g}=e;return o&&(h-=s.width+a.width,g-=s.height+a.height),{x:Math.round((c-d)/h*t.width/r),y:Math.round((u-f)/g*t.height/r)}}function Sne(n,e,t){let r,i;if(e===void 0||t===void 0){let o=I1(n);if(!o)e=n.clientWidth,t=n.clientHeight;else{let s=o.getBoundingClientRect(),a=S1(o),c=fu(a,"border","width"),u=fu(a,"padding");e=s.width-u.width-c.width,t=s.height-u.height-c.height,r=m1(a.maxWidth,o,"clientWidth"),i=m1(a.maxHeight,o,"clientHeight")}}return{width:e,height:t,maxWidth:r||p1,maxHeight:i||p1}}var f1=n=>Math.round(n*10)/10;function I6(n,e,t,r){let i=S1(n),o=fu(i,"margin"),s=m1(i.maxWidth,n,"clientWidth")||p1,a=m1(i.maxHeight,n,"clientHeight")||p1,c=Sne(n,e,t),{width:u,height:l}=c;if(i.boxSizing==="content-box"){let f=fu(i,"border","width"),h=fu(i,"padding");u-=h.width+f.width,l-=h.height+f.height}return u=Math.max(0,u-o.width),l=Math.max(0,r?u/r:l-o.height),u=f1(Math.min(u,s,c.maxWidth)),l=f1(Math.min(l,a,c.maxHeight)),u&&!l&&(l=f1(u/2)),(e!==void 0||t!==void 0)&&r&&c.height&&l>c.height&&(l=c.height,u=f1(Math.floor(l*r))),{width:u,height:l}}function _D(n,e,t){let r=e||1,i=Math.floor(n.height*r),o=Math.floor(n.width*r);n.height=Math.floor(n.height),n.width=Math.floor(n.width);let s=n.canvas;return s.style&&(t||!s.style.height&&!s.style.width)&&(s.style.height=`${n.height}px`,s.style.width=`${n.width}px`),n.currentDevicePixelRatio!==r||s.height!==i||s.width!==o?(n.currentDevicePixelRatio=r,s.height=i,s.width=o,n.ctx.setTransform(r,0,0,r,0,0),!0):!1}var S6=function(){let n=!1;try{let e={get passive(){return n=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return n}();function xD(n,e){let t=Ene(n,e),r=t&&t.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Sa(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function A6(n,e,t,r){return{x:n.x+t*(e.x-n.x),y:r==="middle"?t<.5?n.y:e.y:r==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function D6(n,e,t,r){let i={x:n.cp2x,y:n.cp2y},o={x:e.cp1x,y:e.cp1y},s=Sa(n,i,t),a=Sa(i,o,t),c=Sa(o,e,t),u=Sa(s,a,t),l=Sa(a,c,t);return Sa(u,l,t)}var Ane=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,r){return t-r},leftForLtr(t,r){return t-r}}},Dne=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function gu(n,e,t){return n?Ane(e,t):Dne()}function wD(n,e){let t,r;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,r=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=r)}function ED(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function T6(n){return n==="angle"?{between:Sd,compare:Wte,normalize:zr}:{between:Lo,compare:(e,t)=>e-t,normalize:e=>e}}function J8({start:n,end:e,count:t,loop:r,style:i}){return{start:n%t,end:e%t,loop:r&&(e-n+1)%t===0,style:i}}function Tne(n,e,t){let{property:r,start:i,end:o}=t,{between:s,normalize:a}=T6(r),c=e.length,{start:u,end:l,loop:d}=n,f,h;if(d){for(u+=c,l+=c,f=0,h=c;f<h&&s(a(e[u%c][r]),i,o);++f)u--,l--;u%=c,l%=c}return l<u&&(l+=c),{start:u,end:l,loop:d,style:n.style}}function CD(n,e,t){if(!t)return[n];let{property:r,start:i,end:o}=t,s=e.length,{compare:a,between:c,normalize:u}=T6(r),{start:l,end:d,loop:f,style:h}=Tne(n,e,t),g=[],m=!1,y=null,x,w,b,T=()=>c(i,b,x)&&a(i,b)!==0,P=()=>a(o,x)===0||c(o,b,x),k=()=>m||T(),C=()=>!m||P();for(let E=l,S=l;E<=d;++E)w=e[E%s],!w.skip&&(x=u(w[r]),x!==b&&(m=c(x,i,o),y===null&&k()&&(y=a(x,i)===0?E:S),y!==null&&C()&&(g.push(J8({start:y,end:E,loop:f,count:s,style:h})),y=null),S=E,b=x));return y!==null&&g.push(J8({start:y,end:d,loop:f,count:s,style:h})),g}function bD(n,e){let t=[],r=n.segments;for(let i=0;i<r.length;i++){let o=CD(r[i],n.points,e);o.length&&t.push(...o)}return t}function Mne(n,e,t,r){let i=0,o=e-1;if(t&&!r)for(;i<e&&!n[i].skip;)i++;for(;i<e&&n[i].skip;)i++;for(i%=e,t&&(o+=i);o>i&&n[o%e].skip;)o--;return o%=e,{start:i,end:o}}function One(n,e,t,r){let i=n.length,o=[],s=e,a=n[e],c;for(c=e+1;c<=t;++c){let u=n[c%i];u.skip||u.stop?a.skip||(r=!1,o.push({start:e%i,end:(c-1)%i,loop:r}),e=s=u.stop?c:null):(s=c,a.skip&&(e=c)),a=u}return s!==null&&o.push({start:e%i,end:s%i,loop:r}),o}function M6(n,e){let t=n.points,r=n.options.spanGaps,i=t.length;if(!i)return[];let o=!!n._loop,{start:s,end:a}=Mne(t,i,o,r);if(r===!0)return e6(n,[{start:s,end:a,loop:o}],t,e);let c=a<s?a+i:a,u=!!n._fullLoop&&s===0&&a===i-1;return e6(n,One(t,s,c,u),t,e)}function e6(n,e,t,r){return!r||!r.setContext||!t?e:Pne(n,e,t,r)}function Pne(n,e,t,r){let i=n._chart.getContext(),o=t6(n.options),{_datasetIndex:s,options:{spanGaps:a}}=n,c=t.length,u=[],l=o,d=e[0].start,f=d;function h(g,m,y,x){let w=a?-1:1;if(g!==m){for(g+=c;t[g%c].skip;)g-=w;for(;t[m%c].skip;)m+=w;g%c!==m%c&&(u.push({start:g%c,end:m%c,loop:y,style:x}),l=x,d=m%c)}}for(let g of e){d=a?d:g.start;let m=t[d%c],y;for(f=d+1;f<=g.end;f++){let x=t[f%c];y=t6(r.setContext(Cs(i,{type:"segment",p0:m,p1:x,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:s}))),Rne(y,l)&&h(d,f-1,g.loop,l),m=x,l=y}d<f-1&&h(d,f-1,g.loop,l)}return u}function t6(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function Rne(n,e){if(!e)return!1;let t=[],r=function(i,o){return uD(o)?(t.includes(o)||t.push(o),t.indexOf(o)):o};return JSON.stringify(n,r)!==JSON.stringify(e,r)}var ND=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,r,i){let o=t.listeners[i],s=t.duration;o.forEach(a=>a({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(r-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=oD.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;let o=r.items,s=o.length-1,a=!1,c;for(;s>=0;--s)c=o[s],c._active?(c._total>r.duration&&(r.duration=c._total),c.tick(e),a=!0):(o[s]=o[o.length-1],o.pop());a&&(i.draw(),this._notify(i,r,e,"progress")),o.length||(r.running=!1,this._notify(i,r,e,"complete"),r.initial=!1),t+=o.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,r=t.get(e);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,r)),r}listen(e,t,r){this._getAnims(e).listeners[t].push(r)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let r=t.items,i=r.length-1;for(;i>=0;--i)r[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},bs=new ND,O6="transparent",Nne={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let r=lD(n||O6),i=r.valid&&lD(e||O6);return i&&i.valid?i.mix(r,t).hexString():e},number(n,e,t){return n+(e-n)*t}},kD=class{constructor(e,t,r,i){let o=t[r];i=Td([e.to,i,o,e.from]);let s=Td([e.from,o,i]);this._active=!0,this._fn=e.fn||Nne[e.type||typeof s],this._easing=xd[e.easing]||xd.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=r,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,r){if(this._active){this._notify(!1);let i=this._target[this._prop],o=r-this._start,s=this._duration-o;this._start=r,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=Td([e.to,t,i,e.from]),this._from=Td([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,r=this._duration,i=this._prop,o=this._from,s=this._loop,a=this._to,c;if(this._active=o!==a&&(s||t<r),!this._active){this._target[i]=a,this._notify(!0);return}if(t<0){this._target[i]=o;return}c=t/r%2,c=s&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[i]=this._fn(o,a,c)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,r)=>{e.push({res:t,rej:r})})}_notify(e){let t=e?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][t]()}},F1=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ge(e))return;let t=Object.keys(Ht.animation),r=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{let o=e[i];if(!Ge(o))return;let s={};for(let a of t)s[a]=o[a];(Ft(o.properties)&&o.properties||[i]).forEach(a=>{(a===i||!r.has(a))&&r.set(a,s)})})}_animateOptions(e,t){let r=t.options,i=Fne(e,r);if(!i)return[];let o=this._createAnimations(i,r);return r.$shared&&kne(e.options.$animations,r).then(()=>{e.options=r},()=>{}),o}_createAnimations(e,t){let r=this._properties,i=[],o=e.$animations||(e.$animations={}),s=Object.keys(t),a=Date.now(),c;for(c=s.length-1;c>=0;--c){let u=s[c];if(u.charAt(0)==="$")continue;if(u==="options"){i.push(...this._animateOptions(e,t));continue}let l=t[u],d=o[u],f=r.get(u);if(d)if(f&&d.active()){d.update(f,l,a);continue}else d.cancel();if(!f||!f.duration){e[u]=l;continue}o[u]=d=new kD(f,e,u,l),i.push(d)}return i}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let r=this._createAnimations(e,t);if(r.length)return bs.add(this._chart,r),!0}};function kne(n,e){let t=[],r=Object.keys(e);for(let i=0;i<r.length;i++){let o=n[r[i]];o&&o.active()&&t.push(o.wait())}return Promise.all(t)}function Fne(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function P6(n,e){let t=n&&n.options||{},r=t.reverse,i=t.min===void 0?e:0,o=t.max===void 0?e:0;return{start:r?o:i,end:r?i:o}}function Lne(n,e,t){if(t===!1)return!1;let r=P6(n,t),i=P6(e,t);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function Vne(n){let e,t,r,i;return Ge(n)?(e=n.top,t=n.right,r=n.bottom,i=n.left):e=t=r=i=n,{top:e,right:t,bottom:r,left:i,disabled:n===!1}}function PV(n,e){let t=[],r=n._getSortedDatasetMetas(e),i,o;for(i=0,o=r.length;i<o;++i)t.push(r[i].index);return t}function R6(n,e,t,r={}){let i=n.keys,o=r.mode==="single",s,a,c,u;if(e!==null){for(s=0,a=i.length;s<a;++s){if(c=+i[s],c===t){if(r.all)continue;break}u=n.values[c],Xt(u)&&(o||e===0||Qi(e)===Qi(u))&&(e+=u)}return e}}function Bne(n){let e=Object.keys(n),t=new Array(e.length),r,i,o;for(r=0,i=e.length;r<i;++r)o=e[r],t[r]={x:o,y:n[o]};return t}function N6(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function Une(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function jne(n){let{min:e,max:t,minDefined:r,maxDefined:i}=n.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function Hne(n,e,t){let r=n[e]||(n[e]={});return r[t]||(r[t]={})}function k6(n,e,t,r){for(let i of e.getMatchingVisibleMetas(r).reverse()){let o=n[i.index];if(t&&o>0||!t&&o<0)return i.index}return null}function F6(n,e){let{chart:t,_cachedMeta:r}=n,i=t._stacks||(t._stacks={}),{iScale:o,vScale:s,index:a}=r,c=o.axis,u=s.axis,l=Une(o,s,r),d=e.length,f;for(let h=0;h<d;++h){let g=e[h],{[c]:m,[u]:y}=g,x=g._stacks||(g._stacks={});f=x[u]=Hne(i,l,m),f[a]=y,f._top=k6(f,s,!0,r.type),f._bottom=k6(f,s,!1,r.type);let w=f._visualValues||(f._visualValues={});w[a]=y}}function ID(n,e){let t=n.scales;return Object.keys(t).filter(r=>t[r].axis===e).shift()}function zne(n,e){return Cs(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function $ne(n,e,t){return Cs(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function Lp(n,e){let t=n.controller.index,r=n.vScale&&n.vScale.axis;if(r){e=e||n._parsed;for(let i of e){let o=i._stacks;if(!o||o[r]===void 0||o[r][t]===void 0)return;delete o[r][t],o[r]._visualValues!==void 0&&o[r]._visualValues[t]!==void 0&&delete o[r]._visualValues[t]}}}var SD=n=>n==="reset"||n==="none",L6=(n,e)=>e?n:Object.assign({},n),Wne=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:PV(t,!0),values:null},Ra=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,r){this.chart=t,this._ctx=t.ctx,this.index=r,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=N6(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Lp(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,r=this._cachedMeta,i=this.getDataset(),o=(f,h,g,m)=>f==="x"?h:f==="r"?m:g,s=r.xAxisID=Te(i.xAxisID,ID(t,"x")),a=r.yAxisID=Te(i.yAxisID,ID(t,"y")),c=r.rAxisID=Te(i.rAxisID,ID(t,"r")),u=r.indexAxis,l=r.iAxisID=o(u,s,a,c),d=r.vAxisID=o(u,a,s,c);r.xScale=this.getScaleForId(s),r.yScale=this.getScaleForId(a),r.rScale=this.getScaleForId(c),r.iScale=this.getScaleForId(l),r.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let r=this._cachedMeta;return t===r.iScale?r.vScale:r.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&rD(this._data,this),t._stacked&&Lp(t)}_dataCheck(){let t=this.getDataset(),r=t.data||(t.data=[]),i=this._data;if(Ge(r))this._data=Bne(r);else if(i!==r){if(i){rD(i,this);let o=this._cachedMeta;Lp(o),o._parsed=[]}r&&Object.isExtensible(r)&&f6(r,this),this._syncList=[],this._data=r}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let r=this._cachedMeta,i=this.getDataset(),o=!1;this._dataCheck();let s=r._stacked;r._stacked=N6(r.vScale,r),r.stack!==i.stack&&(o=!0,Lp(r),r.stack=i.stack),this._resyncElements(t),(o||s!==r._stacked)&&F6(this,r._parsed)}configure(){let t=this.chart.config,r=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),r,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,r){let{_cachedMeta:i,_data:o}=this,{iScale:s,_stacked:a}=i,c=s.axis,u=t===0&&r===o.length?!0:i._sorted,l=t>0&&i._parsed[t-1],d,f,h;if(this._parsing===!1)i._parsed=o,i._sorted=!0,h=o;else{Ft(o[t])?h=this.parseArrayData(i,o,t,r):Ge(o[t])?h=this.parseObjectData(i,o,t,r):h=this.parsePrimitiveData(i,o,t,r);let g=()=>f[c]===null||l&&f[c]<l[c];for(d=0;d<r;++d)i._parsed[d+t]=f=h[d],u&&(g()&&(u=!1),l=f);i._sorted=u}a&&F6(this,h)}parsePrimitiveData(t,r,i,o){let{iScale:s,vScale:a}=t,c=s.axis,u=a.axis,l=s.getLabels(),d=s===a,f=new Array(o),h,g,m;for(h=0,g=o;h<g;++h)m=h+i,f[h]={[c]:d||s.parse(l[m],m),[u]:a.parse(r[m],m)};return f}parseArrayData(t,r,i,o){let{xScale:s,yScale:a}=t,c=new Array(o),u,l,d,f;for(u=0,l=o;u<l;++u)d=u+i,f=r[d],c[u]={x:s.parse(f[0],d),y:a.parse(f[1],d)};return c}parseObjectData(t,r,i,o){let{xScale:s,yScale:a}=t,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,l=new Array(o),d,f,h,g;for(d=0,f=o;d<f;++d)h=d+i,g=r[h],l[d]={x:s.parse(Es(g,c),h),y:a.parse(Es(g,u),h)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,r,i){let o=this.chart,s=this._cachedMeta,a=r[t.axis],c={keys:PV(o,!0),values:r._stacks[t.axis]._visualValues};return R6(c,a,s.index,{mode:i})}updateRangeFromParsed(t,r,i,o){let s=i[r.axis],a=s===null?NaN:s,c=o&&i._stacks[r.axis];o&&c&&(o.values=c,a=R6(o,s,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,r){let i=this._cachedMeta,o=i._parsed,s=i._sorted&&t===i.iScale,a=o.length,c=this._getOtherScale(t),u=Wne(r,i,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:f}=jne(c),h,g;function m(){g=o[h];let y=g[c.axis];return!Xt(g[t.axis])||d>y||f<y}for(h=0;h<a&&!(!m()&&(this.updateRangeFromParsed(l,t,g,u),s));++h);if(s){for(h=a-1;h>=0;--h)if(!m()){this.updateRangeFromParsed(l,t,g,u);break}}return l}getAllParsedValues(t){let r=this._cachedMeta._parsed,i=[],o,s,a;for(o=0,s=r.length;o<s;++o)a=r[o][t.axis],Xt(a)&&i.push(a);return i}getMaxOverflow(){return!1}getLabelAndValue(t){let r=this._cachedMeta,i=r.iScale,o=r.vScale,s=this.getParsed(t);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:o?""+o.getLabelForValue(s[o.axis]):""}}_update(t){let r=this._cachedMeta;this.update(t||"default"),r._clip=Vne(Te(this.options.clip,Lne(r.xScale,r.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,r=this.chart,i=this._cachedMeta,o=i.data||[],s=r.chartArea,a=[],c=this._drawStart||0,u=this._drawCount||o.length-c,l=this.options.drawActiveElementsOnTop,d;for(i.dataset&&i.dataset.draw(t,s,c,u),d=c;d<c+u;++d){let f=o[d];f.hidden||(f.active&&l?a.push(f):f.draw(t,s))}for(d=0;d<a.length;++d)a[d].draw(t,s)}getStyle(t,r){let i=r?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,r,i){let o=this.getDataset(),s;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];s=a.$context||(a.$context=$ne(this.getContext(),t,a)),s.parsed=this.getParsed(t),s.raw=o.data[t],s.index=s.dataIndex=t}else s=this.$context||(this.$context=zne(this.chart.getContext(),this.index)),s.dataset=o,s.index=s.datasetIndex=this.index;return s.active=!!r,s.mode=i,s}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,r){return this._resolveElementOptions(this.dataElementType.id,r,t)}_resolveElementOptions(t,r="default",i){let o=r==="active",s=this._cachedDataOpts,a=t+"-"+r,c=s[a],u=this.enableOptionSharing&&bd(i);if(c)return L6(c,u);let l=this.chart.config,d=l.datasetElementScopeKeys(this._type,t),f=o?[`${t}Hover`,"hover",t,""]:[t,""],h=l.getOptionScopes(this.getDataset(),d),g=Object.keys(Ht.elements[t]),m=()=>this.getContext(i,o,r),y=l.resolveNamedOptions(h,g,m,f);return y.$shared&&(y.$shared=u,s[a]=Object.freeze(L6(y,u))),y}_resolveAnimations(t,r,i){let o=this.chart,s=this._cachedDataOpts,a=`animation-${r}`,c=s[a];if(c)return c;let u;if(o.options.animation!==!1){let d=this.chart.config,f=d.datasetAnimationScopeKeys(this._type,r),h=d.getOptionScopes(this.getDataset(),f);u=d.createResolver(h,this.getContext(t,i,r))}let l=new F1(o,u&&u.animations);return u&&u._cacheable&&(s[a]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,r){return!r||SD(t)||this.chart._animationsDisabled}_getSharedOptions(t,r){let i=this.resolveDataElementOptions(t,r),o=this._sharedOptions,s=this.getSharedOptions(i),a=this.includeOptions(r,s)||s!==o;return this.updateSharedOptions(s,r,i),{sharedOptions:s,includeOptions:a}}updateElement(t,r,i,o){SD(o)?Object.assign(t,i):this._resolveAnimations(r,o).update(t,i)}updateSharedOptions(t,r,i){t&&!SD(r)&&this._resolveAnimations(void 0,r).update(t,i)}_setStyle(t,r,i,o){t.active=o;let s=this.getStyle(r,o);this._resolveAnimations(r,i,o).update(t,{options:!o&&this.getSharedOptions(s)||s})}removeHoverStyle(t,r,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,r,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let r=this._data,i=this._cachedMeta.data;for(let[c,u,l]of this._syncList)this[c](u,l);this._syncList=[];let o=i.length,s=r.length,a=Math.min(s,o);a&&this.parse(0,a),s>o?this._insertElements(o,s-o,t):s<o&&this._removeElements(s,o-s)}_insertElements(t,r,i=!0){let o=this._cachedMeta,s=o.data,a=t+r,c,u=l=>{for(l.length+=r,c=l.length-1;c>=a;c--)l[c]=l[c-r]};for(u(s),c=t;c<a;++c)s[c]=new this.dataElementType;this._parsing&&u(o._parsed),this.parse(t,r),i&&this.updateElements(s,t,r,"reset")}updateElements(t,r,i,o){}_removeElements(t,r){let i=this._cachedMeta;if(this._parsing){let o=i._parsed.splice(t,r);i._stacked&&Lp(i,o)}i.data.splice(t,r)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[r,i,o]=t;this[r](i,o)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,r){r&&this._sync(["_removeElements",t,r]);let i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function Gne(n,e){if(!n._cache.$bar){let t=n.getMatchingVisibleMetas(e),r=[];for(let i=0,o=t.length;i<o;i++)r=r.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=iD(r.sort((i,o)=>i-o))}return n._cache.$bar}function qne(n){let e=n.iScale,t=Gne(e,n.type),r=e._length,i,o,s,a,c=()=>{s===32767||s===-32768||(bd(a)&&(r=Math.min(r,Math.abs(s-a)||r)),a=s)};for(i=0,o=t.length;i<o;++i)s=e.getPixelForValue(t[i]),c();for(a=void 0,i=0,o=e.ticks.length;i<o;++i)s=e.getPixelForTick(i),c();return r}function Kne(n,e,t,r){let i=t.barThickness,o,s;return et(i)?(o=e.min*t.categoryPercentage,s=t.barPercentage):(o=i*r,s=1),{chunk:o/r,ratio:s,start:e.pixels[n]-o/2}}function Yne(n,e,t,r){let i=e.pixels,o=i[n],s=n>0?i[n-1]:null,a=n<i.length-1?i[n+1]:null,c=t.categoryPercentage;s===null&&(s=o-(a===null?e.end-e.start:a-o)),a===null&&(a=o+o-s);let u=o-(o-Math.min(s,a))/2*c;return{chunk:Math.abs(a-s)/2*c/r,ratio:t.barPercentage,start:u}}function Xne(n,e,t,r){let i=t.parse(n[0],r),o=t.parse(n[1],r),s=Math.min(i,o),a=Math.max(i,o),c=s,u=a;Math.abs(s)>Math.abs(a)&&(c=a,u=s),e[t.axis]=u,e._custom={barStart:c,barEnd:u,start:i,end:o,min:s,max:a}}function RV(n,e,t,r){return Ft(n)?Xne(n,e,t,r):e[t.axis]=t.parse(n,r),e}function V6(n,e,t,r){let i=n.iScale,o=n.vScale,s=i.getLabels(),a=i===o,c=[],u,l,d,f;for(u=t,l=t+r;u<l;++u)f=e[u],d={},d[i.axis]=a||i.parse(s[u],u),c.push(RV(f,d,o,u));return c}function AD(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function Qne(n,e,t){return n!==0?Qi(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function Zne(n){let e,t,r,i,o;return n.horizontal?(e=n.base>n.x,t="left",r="right"):(e=n.base<n.y,t="bottom",r="top"),e?(i="end",o="start"):(i="start",o="end"),{start:t,end:r,reverse:e,top:i,bottom:o}}function Jne(n,e,t,r){let i=e.borderSkipped,o={};if(!i){n.borderSkipped=o;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:s,end:a,reverse:c,top:u,bottom:l}=Zne(n);i==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===r?i=u:(t._bottom||0)===r?i=l:(o[B6(l,s,a,c)]=!0,i=u)),o[B6(i,s,a,c)]=!0,n.borderSkipped=o}function B6(n,e,t,r){return r?(n=ere(n,e,t),n=U6(n,t,e)):n=U6(n,e,t),n}function ere(n,e,t){return n===e?t:n===t?e:n}function U6(n,e,t){return n==="start"?e:n==="end"?t:n}function tre(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}var nre=(()=>{class n extends Ra{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,r,i,o){return V6(t,r,i,o)}parseArrayData(t,r,i,o){return V6(t,r,i,o)}parseObjectData(t,r,i,o){let{iScale:s,vScale:a}=t,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,l=s.axis==="x"?c:u,d=a.axis==="x"?c:u,f=[],h,g,m,y;for(h=i,g=i+o;h<g;++h)y=r[h],m={},m[s.axis]=s.parse(Es(y,l),h),f.push(RV(Es(y,d),m,a,h));return f}updateRangeFromParsed(t,r,i,o){super.updateRangeFromParsed(t,r,i,o);let s=i._custom;s&&r===this._cachedMeta.vScale&&(t.min=Math.min(t.min,s.min),t.max=Math.max(t.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let r=this._cachedMeta,{iScale:i,vScale:o}=r,s=this.getParsed(t),a=s._custom,c=AD(a)?"["+a.start+", "+a.end+"]":""+o.getLabelForValue(s[o.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let r=this._cachedMeta;this.updateElements(r.data,0,r.data.length,t)}updateElements(t,r,i,o){let s=o==="reset",{index:a,_cachedMeta:{vScale:c}}=this,u=c.getBasePixel(),l=c.isHorizontal(),d=this._getRuler(),{sharedOptions:f,includeOptions:h}=this._getSharedOptions(r,o);for(let g=r;g<r+i;g++){let m=this.getParsed(g),y=s||et(m[c.axis])?{base:u,head:u}:this._calculateBarValuePixels(g),x=this._calculateBarIndexPixels(g,d),w=(m._stacks||{})[c.axis],b={horizontal:l,base:y.base,enableBorderRadius:!w||AD(m._custom)||a===w._top||a===w._bottom,x:l?y.head:x.center,y:l?x.center:y.head,height:l?x.size:Math.abs(y.size),width:l?Math.abs(y.size):x.size};h&&(b.options=f||this.resolveDataElementOptions(g,t[g].active?"active":o));let T=b.options||t[g].options;Jne(b,T,w,a),tre(b,T,d.ratio),this.updateElement(t[g],g,b,o)}}_getStacks(t,r){let{iScale:i}=this._cachedMeta,o=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=i.options.stacked,a=[],c=u=>{let l=u.controller.getParsed(r),d=l&&l[u.vScale.axis];if(et(d)||isNaN(d))return!0};for(let u of o)if(!(r!==void 0&&c(u))&&((s===!1||a.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&a.push(u.stack),u.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,r,i){let o=this._getStacks(t,i),s=r!==void 0?o.indexOf(r):-1;return s===-1?o.length-1:s}_getRuler(){let t=this.options,r=this._cachedMeta,i=r.iScale,o=[],s,a;for(s=0,a=r.data.length;s<a;++s)o.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));let c=t.barThickness;return{min:c||qne(r),pixels:o,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:r,_stacked:i,index:o},options:{base:s,minBarLength:a}}=this,c=s||0,u=this.getParsed(t),l=u._custom,d=AD(l),f=u[r.axis],h=0,g=i?this.applyStack(r,u,i):f,m,y;g!==f&&(h=g-f,g=f),d&&(f=l.barStart,g=l.barEnd-l.barStart,f!==0&&Qi(f)!==Qi(l.barEnd)&&(h=0),h+=f);let x=!et(s)&&!d?s:h,w=r.getPixelForValue(x);if(this.chart.getDataVisibility(t)?m=r.getPixelForValue(h+g):m=w,y=m-w,Math.abs(y)<a){y=Qne(y,r,c)*a,f===c&&(w-=y/2);let b=r.getPixelForDecimal(0),T=r.getPixelForDecimal(1),P=Math.min(b,T),k=Math.max(b,T);w=Math.max(Math.min(w,k),P),m=w+y,i&&!d&&(u._stacks[r.axis]._visualValues[o]=r.getValueForPixel(m)-r.getValueForPixel(w))}if(w===r.getPixelForValue(c)){let b=Qi(y)*r.getLineWidthForValue(c)/2;w+=b,y-=b}return{size:y,base:w,head:m,center:m+y/2}}_calculateBarIndexPixels(t,r){let i=r.scale,o=this.options,s=o.skipNull,a=Te(o.maxBarThickness,1/0),c,u;if(r.grouped){let l=s?this._getStackCount(t):r.stackCount,d=o.barThickness==="flex"?Yne(t,r,o,l):Kne(t,r,o,l),f=this._getStackIndex(this.index,this._cachedMeta.stack,s?t:void 0);c=d.start+d.chunk*f+d.chunk/2,u=Math.min(a,d.chunk*d.ratio)}else c=i.getPixelForValue(this.getParsed(t)[i.axis],t),u=Math.min(a,r.min*r.ratio);return{base:c-u/2,head:c+u/2,center:c,size:u}}draw(){let t=this._cachedMeta,r=t.vScale,i=t.data,o=i.length,s=0;for(;s<o;++s)this.getParsed(s)[r.axis]!==null&&i[s].draw(this._ctx)}}return n})(),rre=(()=>{class n extends Ra{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,r,i,o){let s=super.parsePrimitiveData(t,r,i,o);for(let a=0;a<s.length;a++)s[a]._custom=this.resolveDataElementOptions(a+i).radius;return s}parseArrayData(t,r,i,o){let s=super.parseArrayData(t,r,i,o);for(let a=0;a<s.length;a++){let c=r[i+a];s[a]._custom=Te(c[2],this.resolveDataElementOptions(a+i).radius)}return s}parseObjectData(t,r,i,o){let s=super.parseObjectData(t,r,i,o);for(let a=0;a<s.length;a++){let c=r[i+a];s[a]._custom=Te(c&&c.r&&+c.r,this.resolveDataElementOptions(a+i).radius)}return s}getMaxOverflow(){let t=this._cachedMeta.data,r=0;for(let i=t.length-1;i>=0;--i)r=Math.max(r,t[i].size(this.resolveDataElementOptions(i))/2);return r>0&&r}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:s}=r,a=this.getParsed(t),c=o.getLabelForValue(a.x),u=s.getLabelForValue(a.y),l=a._custom;return{label:i[t]||"",value:"("+c+", "+u+(l?", "+l:"")+")"}}update(t){let r=this._cachedMeta.data;this.updateElements(r,0,r.length,t)}updateElements(t,r,i,o){let s=o==="reset",{iScale:a,vScale:c}=this._cachedMeta,{sharedOptions:u,includeOptions:l}=this._getSharedOptions(r,o),d=a.axis,f=c.axis;for(let h=r;h<r+i;h++){let g=t[h],m=!s&&this.getParsed(h),y={},x=y[d]=s?a.getPixelForDecimal(.5):a.getPixelForValue(m[d]),w=y[f]=s?c.getBasePixel():c.getPixelForValue(m[f]);y.skip=isNaN(x)||isNaN(w),l&&(y.options=u||this.resolveDataElementOptions(h,g.active?"active":o),s&&(y.options.radius=0)),this.updateElement(g,h,y,o)}}resolveDataElementOptions(t,r){let i=this.getParsed(t),o=super.resolveDataElementOptions(t,r);o.$shared&&(o=Object.assign({},o,{$shared:!1}));let s=o.radius;return r!=="active"&&(o.radius=0),o.radius+=Te(i&&i._custom,s),o}}return n})();function ire(n,e,t){let r=1,i=1,o=0,s=0;if(e<Vt){let a=n,c=a+e,u=Math.cos(a),l=Math.sin(a),d=Math.cos(c),f=Math.sin(c),h=(b,T,P)=>Sd(b,a,c,!0)?1:Math.max(T,T*t,P,P*t),g=(b,T,P)=>Sd(b,a,c,!0)?-1:Math.min(T,T*t,P,P*t),m=h(0,u,d),y=h(ln,l,f),x=g(Lt,u,d),w=g(Lt+ln,l,f);r=(m-x)/2,i=(y-w)/2,o=-(m+x)/2,s=-(y+w)/2}return{ratioX:r,ratioY:i,offsetX:o,offsetY:s}}var tT=(()=>{class n extends Ra{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let r=t.data;if(r.labels.length&&r.datasets.length){let{labels:{pointStyle:i,color:o}}=t.legend.options;return r.labels.map((s,a)=>{let u=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:u.backgroundColor,strokeStyle:u.borderColor,fontColor:o,lineWidth:u.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}}};constructor(t,r){super(t,r),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,r){let i=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=i;else{let s=u=>+i[u];if(Ge(i[t])){let{key:u="value"}=this._parsing;s=l=>+Es(i[l],u)}let a,c;for(a=t,c=t+r;a<c;++a)o._parsed[a]=s(a)}}_getRotation(){return Ei(this.options.rotation-90)}_getCircumference(){return Ei(this.options.circumference)}_getRotationExtents(){let t=Vt,r=-Vt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let o=this.chart.getDatasetMeta(i).controller,s=o._getRotation(),a=o._getCircumference();t=Math.min(t,s),r=Math.max(r,s+a)}return{rotation:t,circumference:r-t}}update(t){let r=this.chart,{chartArea:i}=r,o=this._cachedMeta,s=o.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,c=Math.max((Math.min(i.width,i.height)-a)/2,0),u=Math.min(r6(this.options.cutout,c),1),l=this._getRingWeight(this.index),{circumference:d,rotation:f}=this._getRotationExtents(),{ratioX:h,ratioY:g,offsetX:m,offsetY:y}=ire(f,d,u),x=(i.width-a)/h,w=(i.height-a)/g,b=Math.max(Math.min(x,w)/2,0),T=QA(this.options.radius,b),P=Math.max(T*u,0),k=(T-P)/this._getVisibleDatasetWeightTotal();this.offsetX=m*T,this.offsetY=y*T,o.total=this.calculateTotal(),this.outerRadius=T-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*l,0),this.updateElements(s,0,s.length,t)}_circumference(t,r){let i=this.options,o=this._cachedMeta,s=this._getCircumference();return r&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||o._parsed[t]===null||o.data[t].hidden?0:this.calculateCircumference(o._parsed[t]*s/Vt)}updateElements(t,r,i,o){let s=o==="reset",a=this.chart,c=a.chartArea,l=a.options.animation,d=(c.left+c.right)/2,f=(c.top+c.bottom)/2,h=s&&l.animateScale,g=h?0:this.innerRadius,m=h?0:this.outerRadius,{sharedOptions:y,includeOptions:x}=this._getSharedOptions(r,o),w=this._getRotation(),b;for(b=0;b<r;++b)w+=this._circumference(b,s);for(b=r;b<r+i;++b){let T=this._circumference(b,s),P=t[b],k={x:d+this.offsetX,y:f+this.offsetY,startAngle:w,endAngle:w+T,circumference:T,outerRadius:m,innerRadius:g};x&&(k.options=y||this.resolveDataElementOptions(b,P.active?"active":o)),w+=T,this.updateElement(P,b,k,o)}}calculateTotal(){let t=this._cachedMeta,r=t.data,i=0,o;for(o=0;o<r.length;o++){let s=t._parsed[o];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(o)&&!r[o].hidden&&(i+=Math.abs(s))}return i}calculateCircumference(t){let r=this._cachedMeta.total;return r>0&&!isNaN(t)?Vt*(Math.abs(t)/r):0}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart,o=i.data.labels||[],s=Ad(r._parsed[t],i.options.locale);return{label:o[t]||"",value:s}}getMaxBorderWidth(t){let r=0,i=this.chart,o,s,a,c,u;if(!t){for(o=0,s=i.data.datasets.length;o<s;++o)if(i.isDatasetVisible(o)){a=i.getDatasetMeta(o),t=a.data,c=a.controller;break}}if(!t)return 0;for(o=0,s=t.length;o<s;++o)u=c.resolveDataElementOptions(o),u.borderAlign!=="inner"&&(r=Math.max(r,u.borderWidth||0,u.hoverBorderWidth||0));return r}getMaxOffset(t){let r=0;for(let i=0,o=t.length;i<o;++i){let s=this.resolveDataElementOptions(i);r=Math.max(r,s.offset||0,s.hoverOffset||0)}return r}_getRingWeightOffset(t){let r=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(r+=this._getRingWeight(i));return r}_getRingWeight(t){return Math.max(Te(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})(),ore=(()=>{class n extends Ra{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let r=this._cachedMeta,{dataset:i,data:o=[],_dataset:s}=r,a=this.chart._animationsDisabled,{start:c,count:u}=aD(r,o,a);this._drawStart=c,this._drawCount=u,cD(r)&&(c=0,u=o.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=o;let l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(i,void 0,{animated:!a,options:l},t),this.updateElements(o,c,u,t)}updateElements(t,r,i,o){let s=o==="reset",{iScale:a,vScale:c,_stacked:u,_dataset:l}=this._cachedMeta,{sharedOptions:d,includeOptions:f}=this._getSharedOptions(r,o),h=a.axis,g=c.axis,{spanGaps:m,segment:y}=this.options,x=pu(m)?m:Number.POSITIVE_INFINITY,w=this.chart._animationsDisabled||s||o==="none",b=r+i,T=t.length,P=r>0&&this.getParsed(r-1);for(let k=0;k<T;++k){let C=t[k],E=w?C:{};if(k<r||k>=b){E.skip=!0;continue}let S=this.getParsed(k),M=et(S[g]),R=E[h]=a.getPixelForValue(S[h],k),N=E[g]=s||M?c.getBasePixel():c.getPixelForValue(u?this.applyStack(c,S,u):S[g],k);E.skip=isNaN(R)||isNaN(N)||M,E.stop=k>0&&Math.abs(S[h]-P[h])>x,y&&(E.parsed=S,E.raw=l.data[k]),f&&(E.options=d||this.resolveDataElementOptions(k,C.active?"active":o)),w||this.updateElement(C,k,E,o),P=S}}getMaxOverflow(){let t=this._cachedMeta,r=t.dataset,i=r.options&&r.options.borderWidth||0,o=t.data||[];if(!o.length)return i;let s=o[0].size(this.resolveDataElementOptions(0)),a=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(i,s,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n})(),NV=(()=>{class n extends Ra{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let r=t.data;if(r.labels.length&&r.datasets.length){let{labels:{pointStyle:i,color:o}}=t.legend.options;return r.labels.map((s,a)=>{let u=t.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:u.backgroundColor,strokeStyle:u.borderColor,fontColor:o,lineWidth:u.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,r,i){i.chart.toggleDataVisibility(r.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,r){super(t,r),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let r=this._cachedMeta,i=this.chart,o=i.data.labels||[],s=Ad(r._parsed[t].r,i.options.locale);return{label:o[t]||"",value:s}}parseObjectData(t,r,i,o){return vD.bind(this)(t,r,i,o)}update(t){let r=this._cachedMeta.data;this._updateRadius(),this.updateElements(r,0,r.length,t)}getMinMax(){let t=this._cachedMeta,r={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,o)=>{let s=this.getParsed(o).r;!isNaN(s)&&this.chart.getDataVisibility(o)&&(s<r.min&&(r.min=s),s>r.max&&(r.max=s))}),r}_updateRadius(){let t=this.chart,r=t.chartArea,i=t.options,o=Math.min(r.right-r.left,r.bottom-r.top),s=Math.max(o/2,0),a=Math.max(i.cutoutPercentage?s/100*i.cutoutPercentage:1,0),c=(s-a)/t.getVisibleDatasetCount();this.outerRadius=s-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(t,r,i,o){let s=o==="reset",a=this.chart,u=a.options.animation,l=this._cachedMeta.rScale,d=l.xCenter,f=l.yCenter,h=l.getIndexAngle(0)-.5*Lt,g=h,m,y=360/this.countVisibleElements();for(m=0;m<r;++m)g+=this._computeAngle(m,o,y);for(m=r;m<r+i;m++){let x=t[m],w=g,b=g+this._computeAngle(m,o,y),T=a.getDataVisibility(m)?l.getDistanceFromCenterForValue(this.getParsed(m).r):0;g=b,s&&(u.animateScale&&(T=0),u.animateRotate&&(w=b=h));let P={x:d,y:f,innerRadius:0,outerRadius:T,startAngle:w,endAngle:b,options:this.resolveDataElementOptions(m,x.active?"active":o)};this.updateElement(x,m,P,o)}}countVisibleElements(){let t=this._cachedMeta,r=0;return t.data.forEach((i,o)=>{!isNaN(this.getParsed(o).r)&&this.chart.getDataVisibility(o)&&r++}),r}_computeAngle(t,r,i){return this.chart.getDataVisibility(t)?Ei(this.resolveDataElementOptions(t,r).angle||i):0}}return n})(),sre=(()=>{class n extends tT{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})(),are=(()=>{class n extends Ra{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let r=this._cachedMeta.vScale,i=this.getParsed(t);return{label:r.getLabels()[t],value:""+r.getLabelForValue(i[r.axis])}}parseObjectData(t,r,i,o){return vD.bind(this)(t,r,i,o)}update(t){let r=this._cachedMeta,i=r.dataset,o=r.data||[],s=r.iScale.getLabels();if(i.points=o,t!=="resize"){let a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);let c={_loop:!0,_fullLoop:s.length===o.length,options:a};this.updateElement(i,void 0,c,t)}this.updateElements(o,0,o.length,t)}updateElements(t,r,i,o){let s=this._cachedMeta.rScale,a=o==="reset";for(let c=r;c<r+i;c++){let u=t[c],l=this.resolveDataElementOptions(c,u.active?"active":o),d=s.getPointPositionForValue(c,this.getParsed(c).r),f=a?s.xCenter:d.x,h=a?s.yCenter:d.y,g={x:f,y:h,angle:d.angle,skip:isNaN(f)||isNaN(h),options:l};this.updateElement(u,c,g,o)}}}return n})(),cre=(()=>{class n extends Ra{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let r=this._cachedMeta,i=this.chart.data.labels||[],{xScale:o,yScale:s}=r,a=this.getParsed(t),c=o.getLabelForValue(a.x),u=s.getLabelForValue(a.y);return{label:i[t]||"",value:"("+c+", "+u+")"}}update(t){let r=this._cachedMeta,{data:i=[]}=r,o=this.chart._animationsDisabled,{start:s,count:a}=aD(r,i,o);if(this._drawStart=s,this._drawCount=a,cD(r)&&(s=0,a=i.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:c,_dataset:u}=r;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!u._decimated,c.points=i;let l=this.resolveDatasetElementOptions(t);l.segment=this.options.segment,this.updateElement(c,void 0,{animated:!o,options:l},t)}else this.datasetElementType&&(delete r.dataset,this.datasetElementType=!1);this.updateElements(i,s,a,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,r,i,o){let s=o==="reset",{iScale:a,vScale:c,_stacked:u,_dataset:l}=this._cachedMeta,d=this.resolveDataElementOptions(r,o),f=this.getSharedOptions(d),h=this.includeOptions(o,f),g=a.axis,m=c.axis,{spanGaps:y,segment:x}=this.options,w=pu(y)?y:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||s||o==="none",T=r>0&&this.getParsed(r-1);for(let P=r;P<r+i;++P){let k=t[P],C=this.getParsed(P),E=b?k:{},S=et(C[m]),M=E[g]=a.getPixelForValue(C[g],P),R=E[m]=s||S?c.getBasePixel():c.getPixelForValue(u?this.applyStack(c,C,u):C[m],P);E.skip=isNaN(M)||isNaN(R)||S,E.stop=P>0&&Math.abs(C[g]-T[g])>w,x&&(E.parsed=C,E.raw=l.data[P]),h&&(E.options=f||this.resolveDataElementOptions(P,k.active?"active":o)),b||this.updateElement(k,P,E,o),T=C}this.updateSharedOptions(f,o,d)}getMaxOverflow(){let t=this._cachedMeta,r=t.data||[];if(!this.options.showLine){let c=0;for(let u=r.length-1;u>=0;--u)c=Math.max(c,r[u].size(this.resolveDataElementOptions(u))/2);return c>0&&c}let i=t.dataset,o=i.options&&i.options.borderWidth||0;if(!r.length)return o;let s=r[0].size(this.resolveDataElementOptions(0)),a=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(o,s,a)/2}}return n})(),ure=Object.freeze({__proto__:null,BarController:nre,BubbleController:rre,DoughnutController:tT,LineController:ore,PieController:sre,PolarAreaController:NV,RadarController:are,ScatterController:cre});function mu(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var FD=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return mu()}parse(){return mu()}format(){return mu()}add(){return mu()}diff(){return mu()}startOf(){return mu()}endOf(){return mu()}},lre={_date:FD};function dre(n,e,t,r){let{controller:i,data:o,_sorted:s}=n,a=i._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&s&&o.length){let c=a._reversePixels?u6:No;if(r){if(i._sharedOptions){let u=o[0],l=typeof u.getRange=="function"&&u.getRange(e);if(l){let d=c(o,e,t-l),f=c(o,e,t+l);return{lo:d.lo,hi:f.hi}}}}else return c(o,e,t)}return{lo:0,hi:o.length-1}}function qp(n,e,t,r,i){let o=n.getSortedVisibleDatasetMetas(),s=t[e];for(let a=0,c=o.length;a<c;++a){let{index:u,data:l}=o[a],{lo:d,hi:f}=dre(o[a],e,s,i);for(let h=d;h<=f;++h){let g=l[h];g.skip||r(g,u,h)}}}function fre(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(r,i){let o=e?Math.abs(r.x-i.x):0,s=t?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}}function DD(n,e,t,r,i){let o=[];return!i&&!n.isPointInArea(e)||qp(n,t,e,function(a,c,u){!i&&!ko(a,n.chartArea,0)||a.inRange(e.x,e.y,r)&&o.push({element:a,datasetIndex:c,index:u})},!0),o}function hre(n,e,t,r){let i=[];function o(s,a,c){let{startAngle:u,endAngle:l}=s.getProps(["startAngle","endAngle"],r),{angle:d}=nD(s,{x:e.x,y:e.y});Sd(d,u,l)&&i.push({element:s,datasetIndex:a,index:c})}return qp(n,t,e,o),i}function pre(n,e,t,r,i,o){let s=[],a=fre(t),c=Number.POSITIVE_INFINITY;function u(l,d,f){let h=l.inRange(e.x,e.y,i);if(r&&!h)return;let g=l.getCenterPoint(i);if(!(!!o||n.isPointInArea(g))&&!h)return;let y=a(e,g);y<c?(s=[{element:l,datasetIndex:d,index:f}],c=y):y===c&&s.push({element:l,datasetIndex:d,index:f})}return qp(n,t,e,u),s}function TD(n,e,t,r,i,o){return!o&&!n.isPointInArea(e)?[]:t==="r"&&!r?hre(n,e,t,i):pre(n,e,t,r,i,o)}function j6(n,e,t,r,i){let o=[],s=t==="x"?"inXRange":"inYRange",a=!1;return qp(n,t,e,(c,u,l)=>{c[s](e[t],i)&&(o.push({element:c,datasetIndex:u,index:l}),a=a||c.inRange(e.x,e.y,i))}),r&&!a?[]:o}var gre={evaluateInteractionItems:qp,modes:{index(n,e,t,r){let i=Oa(e,n),o=t.axis||"x",s=t.includeInvisible||!1,a=t.intersect?DD(n,i,o,r,s):TD(n,i,o,!1,r,s),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(u=>{let l=a[0].index,d=u.data[l];d&&!d.skip&&c.push({element:d,datasetIndex:u.index,index:l})}),c):[]},dataset(n,e,t,r){let i=Oa(e,n),o=t.axis||"xy",s=t.includeInvisible||!1,a=t.intersect?DD(n,i,o,r,s):TD(n,i,o,!1,r,s);if(a.length>0){let c=a[0].datasetIndex,u=n.getDatasetMeta(c).data;a=[];for(let l=0;l<u.length;++l)a.push({element:u[l],datasetIndex:c,index:l})}return a},point(n,e,t,r){let i=Oa(e,n),o=t.axis||"xy",s=t.includeInvisible||!1;return DD(n,i,o,r,s)},nearest(n,e,t,r){let i=Oa(e,n),o=t.axis||"xy",s=t.includeInvisible||!1;return TD(n,i,o,t.intersect,r,s)},x(n,e,t,r){let i=Oa(e,n);return j6(n,i,"x",t.intersect,r)},y(n,e,t,r){let i=Oa(e,n);return j6(n,i,"y",t.intersect,r)}}},kV=["left","top","right","bottom"];function Vp(n,e){return n.filter(t=>t.pos===e)}function H6(n,e){return n.filter(t=>kV.indexOf(t.pos)===-1&&t.box.axis===e)}function Bp(n,e){return n.sort((t,r)=>{let i=e?r:t,o=e?t:r;return i.weight===o.weight?i.index-o.index:i.weight-o.weight})}function mre(n){let e=[],t,r,i,o,s,a;for(t=0,r=(n||[]).length;t<r;++t)i=n[t],{position:o,options:{stack:s,stackWeight:a=1}}=i,e.push({index:t,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&o+s,stackWeight:a});return e}function vre(n){let e={};for(let t of n){let{stack:r,pos:i,stackWeight:o}=t;if(!r||!kV.includes(i))continue;let s=e[r]||(e[r]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=o}return e}function yre(n,e){let t=vre(n),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e,o,s,a;for(o=0,s=n.length;o<s;++o){a=n[o];let{fullSize:c}=a.box,u=t[a.stack],l=u&&a.stackWeight/u.weight;a.horizontal?(a.width=l?l*r:c&&e.availableWidth,a.height=i):(a.width=r,a.height=l?l*i:c&&e.availableHeight)}return t}function _re(n){let e=mre(n),t=Bp(e.filter(u=>u.box.fullSize),!0),r=Bp(Vp(e,"left"),!0),i=Bp(Vp(e,"right")),o=Bp(Vp(e,"top"),!0),s=Bp(Vp(e,"bottom")),a=H6(e,"x"),c=H6(e,"y");return{fullSize:t,leftAndTop:r.concat(o),rightAndBottom:i.concat(c).concat(s).concat(a),chartArea:Vp(e,"chartArea"),vertical:r.concat(i).concat(c),horizontal:o.concat(s).concat(a)}}function z6(n,e,t,r){return Math.max(n[t],e[t])+Math.max(n[r],e[r])}function FV(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function xre(n,e,t,r){let{pos:i,box:o}=t,s=n.maxPadding;if(!Ge(i)){t.size&&(n[i]-=t.size);let d=r[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?o.height:o.width),t.size=d.size/d.count,n[i]+=t.size}o.getPadding&&FV(s,o.getPadding());let a=Math.max(0,e.outerWidth-z6(s,n,"left","right")),c=Math.max(0,e.outerHeight-z6(s,n,"top","bottom")),u=a!==n.w,l=c!==n.h;return n.w=a,n.h=c,t.horizontal?{same:u,other:l}:{same:l,other:u}}function wre(n){let e=n.maxPadding;function t(r){let i=Math.max(e[r]-n[r],0);return n[r]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function Ere(n,e){let t=e.maxPadding;function r(i){let o={left:0,top:0,right:0,bottom:0};return i.forEach(s=>{o[s]=Math.max(e[s],t[s])}),o}return r(n?["left","right"]:["top","bottom"])}function Hp(n,e,t,r){let i=[],o,s,a,c,u,l;for(o=0,s=n.length,u=0;o<s;++o){a=n[o],c=a.box,c.update(a.width||e.w,a.height||e.h,Ere(a.horizontal,e));let{same:d,other:f}=xre(e,t,a,r);u|=d&&i.length,l=l||f,c.fullSize||i.push(a)}return u&&Hp(i,e,t,r)||l}function A1(n,e,t,r,i){n.top=t,n.left=e,n.right=e+r,n.bottom=t+i,n.width=r,n.height=i}function $6(n,e,t,r){let i=t.padding,{x:o,y:s}=e;for(let a of n){let c=a.box,u=r[a.stack]||{count:1,placed:0,weight:1},l=a.stackWeight/u.weight||1;if(a.horizontal){let d=e.w*l,f=u.size||c.height;bd(u.start)&&(s=u.start),c.fullSize?A1(c,i.left,s,t.outerWidth-i.right-i.left,f):A1(c,e.left+u.placed,s,d,f),u.start=s,u.placed+=d,s=c.bottom}else{let d=e.h*l,f=u.size||c.width;bd(u.start)&&(o=u.start),c.fullSize?A1(c,o,i.top,f,t.outerHeight-i.bottom-i.top):A1(c,o,e.top+u.placed,f,d),u.start=o,u.placed+=d,o=c.right}}e.x=o,e.y=s}var ur={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,r){if(!n)return;let i=Yn(n.options.layout.padding),o=Math.max(e-i.width,0),s=Math.max(t-i.height,0),a=_re(n.boxes),c=a.vertical,u=a.horizontal;ht(n.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});let l=c.reduce((m,y)=>y.box.options&&y.box.options.display===!1?m:m+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:i,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/l,hBoxMaxHeight:s/2}),f=Object.assign({},i);FV(f,Yn(r));let h=Object.assign({maxPadding:f,w:o,h:s,x:i.left,y:i.top},i),g=yre(c.concat(u),d);Hp(a.fullSize,h,d,g),Hp(c,h,d,g),Hp(u,h,d,g)&&Hp(c,h,d,g),wre(h),$6(a.leftAndTop,h,d,g),h.x+=h.w,h.y+=h.h,$6(a.rightAndBottom,h,d,g),n.chartArea={left:h.left,top:h.top,right:h.left+h.w,bottom:h.top+h.h,height:h.h,width:h.w},ht(a.chartArea,m=>{let y=m.box;Object.assign(y,n.chartArea),y.update(h.w,h.h,{left:0,top:0,right:0,bottom:0})})}},L1=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,r){}removeEventListener(e,t,r){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,r,i){return t=Math.max(0,t||e.width),r=r||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):r)}}isAttached(e){return!0}updateConfig(e){}},LD=class extends L1{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},N1="$chartjs",Cre={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},W6=n=>n===null||n==="";function bre(n,e){let t=n.style,r=n.getAttribute("height"),i=n.getAttribute("width");if(n[N1]={initial:{height:r,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",W6(i)){let o=xD(n,"width");o!==void 0&&(n.width=o)}if(W6(r))if(n.style.height==="")n.height=n.width/(e||2);else{let o=xD(n,"height");o!==void 0&&(n.height=o)}return n}var LV=S6?{passive:!0}:!1;function Ire(n,e,t){n.addEventListener(e,t,LV)}function Sre(n,e,t){n.canvas.removeEventListener(e,t,LV)}function Are(n,e){let t=Cre[n.type]||n.type,{x:r,y:i}=Oa(n,e);return{type:t,chart:e,native:n,x:r!==void 0?r:null,y:i!==void 0?i:null}}function V1(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function Dre(n,e,t){let r=n.canvas,i=new MutationObserver(o=>{let s=!1;for(let a of o)s=s||V1(a.addedNodes,r),s=s&&!V1(a.removedNodes,r);s&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function Tre(n,e,t){let r=n.canvas,i=new MutationObserver(o=>{let s=!1;for(let a of o)s=s||V1(a.removedNodes,r),s=s&&!V1(a.addedNodes,r);s&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}var $p=new Map,G6=0;function VV(){let n=window.devicePixelRatio;n!==G6&&(G6=n,$p.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function Mre(n,e){$p.size||window.addEventListener("resize",VV),$p.set(n,e)}function Ore(n){$p.delete(n),$p.size||window.removeEventListener("resize",VV)}function Pre(n,e,t){let r=n.canvas,i=r&&I1(r);if(!i)return;let o=sD((a,c)=>{let u=i.clientWidth;t(a,c),u<i.clientWidth&&t()},window),s=new ResizeObserver(a=>{let c=a[0],u=c.contentRect.width,l=c.contentRect.height;u===0&&l===0||o(u,l)});return s.observe(i),Mre(n,o),s}function MD(n,e,t){t&&t.disconnect(),e==="resize"&&Ore(n)}function Rre(n,e,t){let r=n.canvas,i=sD(o=>{n.ctx!==null&&t(Are(o,n))},n);return Ire(r,e,i),i}var VD=class extends L1{acquireContext(e,t){let r=e&&e.getContext&&e.getContext("2d");return r&&r.canvas===e?(bre(e,t),r):null}releaseContext(e){let t=e.canvas;if(!t[N1])return!1;let r=t[N1].initial;["height","width"].forEach(o=>{let s=r[o];et(s)?t.removeAttribute(o):t.setAttribute(o,s)});let i=r.style||{};return Object.keys(i).forEach(o=>{t.style[o]=i[o]}),t.width=t.width,delete t[N1],!0}addEventListener(e,t,r){this.removeEventListener(e,t);let i=e.$proxies||(e.$proxies={}),s={attach:Dre,detach:Tre,resize:Pre}[t]||Rre;i[t]=s(e,t,r)}removeEventListener(e,t){let r=e.$proxies||(e.$proxies={}),i=r[t];if(!i)return;({attach:MD,detach:MD,resize:MD}[t]||Sre)(e,t,i),r[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,r,i){return I6(e,t,r,i)}isAttached(e){let t=I1(e);return!!(t&&t.isConnected)}};function Nre(n){return!yD()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?LD:VD}var Zi=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:r}=this.getProps(["x","y"],e);return{x:t,y:r}}hasValue(){return pu(this.x)&&pu(this.y)}getProps(e,t){let r=this.$animations;if(!t||!r)return this;let i={};return e.forEach(o=>{i[o]=r[o]&&r[o].active()?r[o]._to:this[o]}),i}};function kre(n,e){let t=n.options.ticks,r=Fre(n),i=Math.min(t.maxTicksLimit||r,r),o=t.major.enabled?Vre(e):[],s=o.length,a=o[0],c=o[s-1],u=[];if(s>i)return Bre(e,u,o,s/i),u;let l=Lre(o,e,i);if(s>0){let d,f,h=s>1?Math.round((c-a)/(s-1)):null;for(D1(e,u,l,et(h)?0:a-h,a),d=0,f=s-1;d<f;d++)D1(e,u,l,o[d],o[d+1]);return D1(e,u,l,c,et(h)?e.length:c+h),u}return D1(e,u,l),u}function Fre(n){let e=n.options.offset,t=n._tickSize(),r=n._length/t+(e?0:1),i=n._maxLength/t;return Math.floor(Math.min(r,i))}function Lre(n,e,t){let r=Ure(n),i=e.length/t;if(!r)return Math.max(i,1);let o=s6(r);for(let s=0,a=o.length-1;s<a;s++){let c=o[s];if(c>i)return c}return Math.max(i,1)}function Vre(n){let e=[],t,r;for(t=0,r=n.length;t<r;t++)n[t].major&&e.push(t);return e}function Bre(n,e,t,r){let i=0,o=t[0],s;for(r=Math.ceil(r),s=0;s<n.length;s++)s===o&&(e.push(n[s]),i++,o=t[i*r])}function D1(n,e,t,r,i){let o=Te(r,0),s=Math.min(Te(i,n.length),n.length),a=0,c,u,l;for(t=Math.ceil(t),i&&(c=i-r,t=c/Math.floor(c/t)),l=o;l<0;)a++,l=Math.round(o+a*t);for(u=Math.max(o,0);u<s;u++)u===l&&(e.push(n[u]),a++,l=Math.round(o+a*t))}function Ure(n){let e=n.length,t,r;if(e<2)return!1;for(r=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==r)return!1;return r}var jre=n=>n==="left"?"right":n==="right"?"left":n,q6=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,K6=(n,e)=>Math.min(e||n,n);function Y6(n,e){let t=[],r=n.length/e,i=n.length,o=0;for(;o<i;o+=r)t.push(n[Math.floor(o)]);return t}function Hre(n,e,t){let r=n.ticks.length,i=Math.min(e,r-1),o=n._startPixel,s=n._endPixel,a=1e-6,c=n.getPixelForTick(i),u;if(!(t&&(r===1?u=Math.max(c-o,s-c):e===0?u=(n.getPixelForTick(1)-c)/2:u=(c-n.getPixelForTick(i-1))/2,c+=i<e?u:-u,c<o-a||c>s+a)))return c}function zre(n,e){ht(n,t=>{let r=t.gc,i=r.length/2,o;if(i>e){for(o=0;o<i;++o)delete t.data[r[o]];r.splice(0,i)}})}function Up(n){return n.drawTicks?n.tickLength:0}function X6(n,e){if(!n.display)return 0;let t=An(n.font,e),r=Yn(n.padding);return(Ft(n.text)?n.text.length:1)*t.lineHeight+r.height}function $re(n,e){return Cs(n,{scale:e,type:"scale"})}function Wre(n,e,t){return Cs(n,{tick:t,index:e,type:"tick"})}function Gre(n,e,t){let r=x1(n);return(t&&e!=="right"||!t&&e==="right")&&(r=jre(r)),r}function qre(n,e,t,r){let{top:i,left:o,bottom:s,right:a,chart:c}=n,{chartArea:u,scales:l}=c,d=0,f,h,g,m=s-i,y=a-o;if(n.isHorizontal()){if(h=Kn(r,o,a),Ge(t)){let x=Object.keys(t)[0],w=t[x];g=l[x].getPixelForValue(w)+m-e}else t==="center"?g=(u.bottom+u.top)/2+m-e:g=q6(n,t,e);f=a-o}else{if(Ge(t)){let x=Object.keys(t)[0],w=t[x];h=l[x].getPixelForValue(w)-y+e}else t==="center"?h=(u.left+u.right)/2-y+e:h=q6(n,t,e);g=Kn(r,s,i),d=t==="left"?-ln:ln}return{titleX:h,titleY:g,maxWidth:f,rotation:d}}var yu=class n extends Zi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:r,_suggestedMax:i}=this;return e=$r(e,Number.POSITIVE_INFINITY),t=$r(t,Number.NEGATIVE_INFINITY),r=$r(r,Number.POSITIVE_INFINITY),i=$r(i,Number.NEGATIVE_INFINITY),{min:$r(e,r),max:$r(t,i),minDefined:Xt(e),maxDefined:Xt(t)}}getMinMax(e){let{min:t,max:r,minDefined:i,maxDefined:o}=this.getUserBounds(),s;if(i&&o)return{min:t,max:r};let a=this.getMatchingVisibleMetas();for(let c=0,u=a.length;c<u;++c)s=a[c].controller.getMinMax(this,e),i||(t=Math.min(t,s.min)),o||(r=Math.max(r,s.max));return t=o&&t>r?r:t,r=i&&t>r?t:r,{min:$r(t,$r(r,t)),max:$r(r,$r(t,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Dt(this.options.beforeUpdate,[this])}update(e,t,r){let{beginAtZero:i,grace:o,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_6(this,o,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?Y6(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=kre(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,r;this.isHorizontal()?(t=this.left,r=this.right):(t=this.top,r=this.bottom,e=!e),this._startPixel=t,this._endPixel=r,this._reversePixels=e,this._length=r-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Dt(this.options.afterUpdate,[this])}beforeSetDimensions(){Dt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Dt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Dt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Dt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,r,i,o;for(r=0,i=e.length;r<i;r++)o=e[r],o.label=Dt(t.callback,[o.value,r,e],this)}afterTickToLabelConversion(){Dt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Dt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,r=K6(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,o=t.maxRotation,s=i,a,c,u;if(!this._isVisible()||!t.display||i>=o||r<=1||!this.isHorizontal()){this.labelRotation=i;return}let l=this._getLabelSizes(),d=l.widest.width,f=l.highest.height,h=Rn(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/r:h/(r-1),d+6>a&&(a=h/(r-(e.offset?.5:1)),c=this.maxHeight-Up(e.grid)-t.padding-X6(e.title,this.chart.options.font),u=Math.sqrt(d*d+f*f),s=y1(Math.min(Math.asin(Rn((l.highest.height+6)/a,-1,1)),Math.asin(Rn(c/u,-1,1))-Math.asin(Rn(f/u,-1,1)))),s=Math.max(i,Math.min(o,s))),this.labelRotation=s}afterCalculateLabelRotation(){Dt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Dt(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:r,title:i,grid:o}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){let c=X6(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=Up(o)+c):(e.height=this.maxHeight,e.width=Up(o)+c),r.display&&this.ticks.length){let{first:u,last:l,widest:d,highest:f}=this._getLabelSizes(),h=r.padding*2,g=Ei(this.labelRotation),m=Math.cos(g),y=Math.sin(g);if(a){let x=r.mirror?0:y*d.width+m*f.height;e.height=Math.min(this.maxHeight,e.height+x+h)}else{let x=r.mirror?0:m*d.width+y*f.height;e.width=Math.min(this.maxWidth,e.width+x+h)}this._calculatePadding(u,l,y,m)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,r,i){let{ticks:{align:o,padding:s},position:a}=this.options,c=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let l=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),f=0,h=0;c?u?(f=i*e.width,h=r*t.height):(f=r*e.height,h=i*t.width):o==="start"?h=t.width:o==="end"?f=e.width:o!=="inner"&&(f=e.width/2,h=t.width/2),this.paddingLeft=Math.max((f-l+s)*this.width/(this.width-l),0),this.paddingRight=Math.max((h-d+s)*this.width/(this.width-d),0)}else{let l=t.height/2,d=e.height/2;o==="start"?(l=0,d=e.height):o==="end"&&(l=t.height,d=0),this.paddingTop=l+s,this.paddingBottom=d+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Dt(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,r;for(t=0,r=e.length;t<r;t++)et(e[t].label)&&(e.splice(t,1),r--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,r=this.ticks;t<r.length&&(r=Y6(r,t)),this._labelSizes=e=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,r){let{ctx:i,_longestTextCache:o}=this,s=[],a=[],c=Math.floor(t/K6(t,r)),u=0,l=0,d,f,h,g,m,y,x,w,b,T,P;for(d=0;d<t;d+=c){if(g=e[d].label,m=this._resolveTickFontOptions(d),i.font=y=m.string,x=o[y]=o[y]||{data:{},gc:[]},w=m.lineHeight,b=T=0,!et(g)&&!Ft(g))b=Pp(i,x.data,x.gc,b,g),T=w;else if(Ft(g))for(f=0,h=g.length;f<h;++f)P=g[f],!et(P)&&!Ft(P)&&(b=Pp(i,x.data,x.gc,b,P),T+=w);s.push(b),a.push(T),u=Math.max(b,u),l=Math.max(T,l)}zre(o,t);let k=s.indexOf(u),C=a.indexOf(l),E=S=>({width:s[S]||0,height:a[S]||0});return{first:E(0),last:E(t-1),widest:E(k),highest:E(C),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return c6(this._alignToPixels?Da(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let r=t[e];return r.$context||(r.$context=Wre(this.getContext(),e,r))}return this.$context||(this.$context=$re(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=Ei(this.labelRotation),r=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),o=this._getLabelSizes(),s=e.autoSkipPadding||0,a=o?o.widest.width+s:0,c=o?o.highest.height+s:0;return this.isHorizontal()?c*r>a*i?a/r:c/i:c*i<a*r?c/r:a/i}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,r=this.chart,i=this.options,{grid:o,position:s,border:a}=i,c=o.offset,u=this.isHorizontal(),d=this.ticks.length+(c?1:0),f=Up(o),h=[],g=a.setContext(this.getContext()),m=g.display?g.width:0,y=m/2,x=function(lt){return Da(r,lt,m)},w,b,T,P,k,C,E,S,M,R,N,O;if(s==="top")w=x(this.bottom),C=this.bottom-f,S=w-y,R=x(e.top)+y,O=e.bottom;else if(s==="bottom")w=x(this.top),R=e.top,O=x(e.bottom)-y,C=w+y,S=this.top+f;else if(s==="left")w=x(this.right),k=this.right-f,E=w-y,M=x(e.left)+y,N=e.right;else if(s==="right")w=x(this.left),M=e.left,N=x(e.right)-y,k=w+y,E=this.left+f;else if(t==="x"){if(s==="center")w=x((e.top+e.bottom)/2+.5);else if(Ge(s)){let lt=Object.keys(s)[0],st=s[lt];w=x(this.chart.scales[lt].getPixelForValue(st))}R=e.top,O=e.bottom,C=w+y,S=C+f}else if(t==="y"){if(s==="center")w=x((e.left+e.right)/2);else if(Ge(s)){let lt=Object.keys(s)[0],st=s[lt];w=x(this.chart.scales[lt].getPixelForValue(st))}k=w-y,E=k-f,M=e.left,N=e.right}let qe=Te(i.ticks.maxTicksLimit,d),Ie=Math.max(1,Math.ceil(d/qe));for(b=0;b<d;b+=Ie){let lt=this.getContext(b),st=o.setContext(lt),hn=a.setContext(lt),xn=st.lineWidth,zo=st.color,Du=hn.dash||[],hr=hn.dashOffset,en=st.tickWidth,Ja=st.tickColor,Ti=st.tickBorderDash||[],ec=st.tickBorderDashOffset;T=Hre(this,b,c),T!==void 0&&(P=Da(r,T,xn),u?k=E=M=N=P:C=S=R=O=P,h.push({tx1:k,ty1:C,tx2:E,ty2:S,x1:M,y1:R,x2:N,y2:O,width:xn,color:zo,borderDash:Du,borderDashOffset:hr,tickWidth:en,tickColor:Ja,tickBorderDash:Ti,tickBorderDashOffset:ec}))}return this._ticksLength=d,this._borderValue=w,h}_computeLabelItems(e){let t=this.axis,r=this.options,{position:i,ticks:o}=r,s=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:u,padding:l,mirror:d}=o,f=Up(r.grid),h=f+l,g=d?-l:h,m=-Ei(this.labelRotation),y=[],x,w,b,T,P,k,C,E,S,M,R,N,O="middle";if(i==="top")k=this.bottom-g,C=this._getXAxisLabelAlignment();else if(i==="bottom")k=this.top+g,C=this._getXAxisLabelAlignment();else if(i==="left"){let Ie=this._getYAxisLabelAlignment(f);C=Ie.textAlign,P=Ie.x}else if(i==="right"){let Ie=this._getYAxisLabelAlignment(f);C=Ie.textAlign,P=Ie.x}else if(t==="x"){if(i==="center")k=(e.top+e.bottom)/2+h;else if(Ge(i)){let Ie=Object.keys(i)[0],lt=i[Ie];k=this.chart.scales[Ie].getPixelForValue(lt)+h}C=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")P=(e.left+e.right)/2-h;else if(Ge(i)){let Ie=Object.keys(i)[0],lt=i[Ie];P=this.chart.scales[Ie].getPixelForValue(lt)}C=this._getYAxisLabelAlignment(f).textAlign}t==="y"&&(c==="start"?O="top":c==="end"&&(O="bottom"));let qe=this._getLabelSizes();for(x=0,w=a.length;x<w;++x){b=a[x],T=b.label;let Ie=o.setContext(this.getContext(x));E=this.getPixelForTick(x)+o.labelOffset,S=this._resolveTickFontOptions(x),M=S.lineHeight,R=Ft(T)?T.length:1;let lt=R/2,st=Ie.color,hn=Ie.textStrokeColor,xn=Ie.textStrokeWidth,zo=C;s?(P=E,C==="inner"&&(x===w-1?zo=this.options.reverse?"left":"right":x===0?zo=this.options.reverse?"right":"left":zo="center"),i==="top"?u==="near"||m!==0?N=-R*M+M/2:u==="center"?N=-qe.highest.height/2-lt*M+M:N=-qe.highest.height+M/2:u==="near"||m!==0?N=M/2:u==="center"?N=qe.highest.height/2-lt*M:N=qe.highest.height-R*M,d&&(N*=-1),m!==0&&!Ie.showLabelBackdrop&&(P+=M/2*Math.sin(m))):(k=E,N=(1-R)*M/2);let Du;if(Ie.showLabelBackdrop){let hr=Yn(Ie.backdropPadding),en=qe.heights[x],Ja=qe.widths[x],Ti=N-hr.top,ec=0-hr.left;switch(O){case"middle":Ti-=en/2;break;case"bottom":Ti-=en;break}switch(C){case"center":ec-=Ja/2;break;case"right":ec-=Ja;break}Du={left:ec,top:Ti,width:Ja+hr.width,height:en+hr.height,color:Ie.backdropColor}}y.push({label:T,font:S,textOffset:N,options:{rotation:m,color:st,strokeColor:hn,strokeWidth:xn,textAlign:zo,textBaseline:O,translation:[P,k],backdrop:Du}})}return y}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-Ei(this.labelRotation))return e==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:r,mirror:i,padding:o}}=this.options,s=this._getLabelSizes(),a=e+o,c=s.widest.width,u,l;return t==="left"?i?(l=this.right+o,r==="near"?u="left":r==="center"?(u="center",l+=c/2):(u="right",l+=c)):(l=this.right-a,r==="near"?u="right":r==="center"?(u="center",l-=c/2):(u="left",l=this.left)):t==="right"?i?(l=this.left+o,r==="near"?u="right":r==="center"?(u="center",l-=c/2):(u="left",l-=c)):(l=this.left+a,r==="near"?u="left":r==="center"?(u="center",l+=c/2):(u="right",l=this.right)):u="right",{textAlign:u,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:r,top:i,width:o,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(r,i,o,s),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let i=this.ticks.findIndex(o=>o.value===e);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(e){let t=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),o,s,a=(c,u,l)=>{!l.width||!l.color||(r.save(),r.lineWidth=l.width,r.strokeStyle=l.color,r.setLineDash(l.borderDash||[]),r.lineDashOffset=l.borderDashOffset,r.beginPath(),r.moveTo(c.x,c.y),r.lineTo(u.x,u.y),r.stroke(),r.restore())};if(t.display)for(o=0,s=i.length;o<s;++o){let c=i[o];t.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:r,grid:i}}=this,o=r.setContext(this.getContext()),s=r.display?o.width:0;if(!s)return;let a=i.setContext(this.getContext(0)).lineWidth,c=this._borderValue,u,l,d,f;this.isHorizontal()?(u=Da(e,this.left,s)-s/2,l=Da(e,this.right,a)+a/2,d=f=c):(d=Da(e,this.top,s)-s/2,f=Da(e,this.bottom,a)+a/2,u=l=c),t.save(),t.lineWidth=o.width,t.strokeStyle=o.color,t.beginPath(),t.moveTo(u,d),t.lineTo(l,f),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let r=this.ctx,i=this._computeLabelArea();i&&kp(r,i);let o=this.getLabelItems(e);for(let s of o){let a=s.options,c=s.font,u=s.label,l=s.textOffset;Ta(r,u,0,l,c,a)}i&&Fp(r)}drawTitle(){let{ctx:e,options:{position:t,title:r,reverse:i}}=this;if(!r.display)return;let o=An(r.font),s=Yn(r.padding),a=r.align,c=o.lineHeight/2;t==="bottom"||t==="center"||Ge(t)?(c+=s.bottom,Ft(r.text)&&(c+=o.lineHeight*(r.text.length-1))):c+=s.top;let{titleX:u,titleY:l,maxWidth:d,rotation:f}=qre(this,c,t,a);Ta(e,r.text,0,0,o,{color:r.color,maxWidth:d,rotation:f,textAlign:Gre(a,t,i),textBaseline:"middle",translation:[u,l]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,r=Te(e.grid&&e.grid.z,-1),i=Te(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:o=>{this.draw(o)}}]:[{z:r,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[],o,s;for(o=0,s=t.length;o<s;++o){let a=t[o];a[r]===this.id&&(!e||a.type===e)&&i.push(a)}return i}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return An(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},Od=class{constructor(e,t,r){this.type=e,this.scope=t,this.override=r,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),r;Xre(t)&&(r=this.register(t));let i=this.items,o=e.id,s=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in i||(i[o]=e,Kre(e,s,r),this.override&&Ht.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){let t=this.items,r=e.id,i=this.scope;r in t&&delete t[r],i&&r in Ht[i]&&(delete Ht[i][r],this.override&&delete Aa[r])}};function Kre(n,e,t){let r=wd(Object.create(null),[t?Ht.get(t):{},Ht.get(e),n.defaults]);Ht.set(e,r),n.defaultRoutes&&Yre(e,n.defaultRoutes),n.descriptors&&Ht.describe(e,n.descriptors)}function Yre(n,e){Object.keys(e).forEach(t=>{let r=t.split("."),i=r.pop(),o=[n].concat(r).join("."),s=e[t].split("."),a=s.pop(),c=s.join(".");Ht.route(o,i,c,a)})}function Xre(n){return"id"in n&&"defaults"in n}var BD=class{constructor(){this.controllers=new Od(Ra,"datasets",!0),this.elements=new Od(Zi,"elements"),this.plugins=new Od(Object,"plugins"),this.scales=new Od(yu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,r){[...t].forEach(i=>{let o=r||this._getRegistryForType(i);r||o.isForType(i)||o===this.plugins&&i.id?this._exec(e,o,i):ht(i,s=>{let a=r||this._getRegistryForType(s);this._exec(e,a,s)})})}_exec(e,t,r){let i=v1(e);Dt(r["before"+i],[],r),t[e](r),Dt(r["after"+i],[],r)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let r=this._typedRegistries[t];if(r.isForType(e))return r}return this.plugins}_get(e,t,r){let i=t.get(e);if(i===void 0)throw new Error('"'+e+'" is not a registered '+r+".");return i}},Bo=new BD,UD=class{constructor(){this._init=[]}notify(e,t,r,i){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let o=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(o,e,t,r);return t==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,r,i){i=i||{};for(let o of e){let s=o.plugin,a=s[r],c=[t,i,o.options];if(Dt(a,c,s)===!1&&i.cancelable)return!1}return!0}invalidate(){et(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let r=e&&e.config,i=Te(r.options&&r.options.plugins,{}),o=Qre(r);return i===!1&&!t?[]:Jre(e,o,i,t)}_notifyStateChanges(e){let t=this._oldCache||[],r=this._cache,i=(o,s)=>o.filter(a=>!s.some(c=>a.plugin.id===c.plugin.id));this._notify(i(t,r),e,"stop"),this._notify(i(r,t),e,"start")}};function Qre(n){let e={},t=[],r=Object.keys(Bo.plugins.items);for(let o=0;o<r.length;o++)t.push(Bo.getPlugin(r[o]));let i=n.plugins||[];for(let o=0;o<i.length;o++){let s=i[o];t.indexOf(s)===-1&&(t.push(s),e[s.id]=!0)}return{plugins:t,localIds:e}}function Zre(n,e){return!e&&n===!1?null:n===!0?{}:n}function Jre(n,{plugins:e,localIds:t},r,i){let o=[],s=n.getContext();for(let a of e){let c=a.id,u=Zre(r[c],i);u!==null&&o.push({plugin:a,options:eie(n.config,{plugin:a,local:t[c]},u,s)})}return o}function eie(n,{plugin:e,local:t},r,i){let o=n.pluginScopeKeys(e),s=n.getOptionScopes(r,o);return t&&e.defaults&&s.push(e.defaults),n.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function jD(n,e){let t=Ht.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function tie(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function nie(n,e){return n===e?"_index_":"_value_"}function Q6(n){if(n==="x"||n==="y"||n==="r")return n}function rie(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function HD(n,...e){if(Q6(n))return n;for(let t of e){let r=t.axis||rie(t.position)||n.length>1&&Q6(n[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function Z6(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function iie(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(r=>r.xAxisID===n||r.yAxisID===n);if(t.length)return Z6(n,"x",t[0])||Z6(n,"y",t[0])}return{}}function oie(n,e){let t=Aa[n.type]||{scales:{}},r=e.scales||{},i=jD(n.type,e),o=Object.create(null);return Object.keys(r).forEach(s=>{let a=r[s];if(!Ge(a))return console.error(`Invalid scale configuration for scale: ${s}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);let c=HD(s,a,iie(s,n),Ht.scales[a.type]),u=nie(c,i),l=t.scales||{};o[s]=Cd(Object.create(null),[{axis:c},a,l[c],l[u]])}),n.data.datasets.forEach(s=>{let a=s.type||n.type,c=s.indexAxis||jD(a,e),l=(Aa[a]||{}).scales||{};Object.keys(l).forEach(d=>{let f=tie(d,c),h=s[f+"AxisID"]||f;o[h]=o[h]||Object.create(null),Cd(o[h],[{axis:f},r[h],l[d]])})}),Object.keys(o).forEach(s=>{let a=o[s];Cd(a,[Ht.scales[a.type],Ht.scale])}),o}function BV(n){let e=n.options||(n.options={});e.plugins=Te(e.plugins,{}),e.scales=oie(n,e)}function UV(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function sie(n){return n=n||{},n.data=UV(n.data),BV(n),n}var J6=new Map,jV=new Set;function T1(n,e){let t=J6.get(n);return t||(t=e(),J6.set(n,t),jV.add(t)),t}var jp=(n,e,t)=>{let r=Es(e,t);r!==void 0&&n.add(r)},zD=class{constructor(e){this._config=sie(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=UV(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),BV(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return T1(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return T1(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return T1(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,r=this.type;return T1(`${r}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let r=this._scopeCache,i=r.get(e);return(!i||t)&&(i=new Map,r.set(e,i)),i}getOptionScopes(e,t,r){let{options:i,type:o}=this,s=this._cachedScopes(e,r),a=s.get(t);if(a)return a;let c=new Set;t.forEach(l=>{e&&(c.add(e),l.forEach(d=>jp(c,e,d))),l.forEach(d=>jp(c,i,d)),l.forEach(d=>jp(c,Aa[o]||{},d)),l.forEach(d=>jp(c,Ht,d)),l.forEach(d=>jp(c,w1,d))});let u=Array.from(c);return u.length===0&&u.push(Object.create(null)),jV.has(t)&&s.set(t,u),u}chartOptionScopes(){let{options:e,type:t}=this;return[e,Aa[t]||{},Ht.datasets[t]||{},{type:t},Ht,w1]}resolveNamedOptions(e,t,r,i=[""]){let o={$shared:!0},{resolver:s,subPrefixes:a}=eV(this._resolverCache,e,i),c=s;if(cie(s,t)){o.$shared=!1,r=xs(r)?r():r;let u=this.createResolver(e,r,a);c=hu(s,r,u)}for(let u of t)o[u]=c[u];return o}createResolver(e,t,r=[""],i){let{resolver:o}=eV(this._resolverCache,e,r);return Ge(t)?hu(o,t,void 0,i):o}};function eV(n,e,t){let r=n.get(e);r||(r=new Map,n.set(e,r));let i=t.join(),o=r.get(i);return o||(o={resolver:b1(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},r.set(i,o)),o}var aie=n=>Ge(n)&&Object.getOwnPropertyNames(n).reduce((e,t)=>e||xs(n[t]),!1);function cie(n,e){let{isScriptable:t,isIndexable:r}=pD(n);for(let i of e){let o=t(i),s=r(i),a=(s||o)&&n[i];if(o&&(xs(a)||aie(a))||s&&Ft(a))return!0}return!1}var uie="4.4.0",lie=["top","bottom","left","right","chartArea"];function tV(n,e){return n==="top"||n==="bottom"||lie.indexOf(n)===-1&&e==="x"}function nV(n,e){return function(t,r){return t[n]===r[n]?t[e]-r[e]:t[n]-r[n]}}function rV(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Dt(t&&t.onComplete,[n],e)}function die(n){let e=n.chart,t=e.options.animation;Dt(t&&t.onProgress,[n],e)}function HV(n){return yD()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var k1={},iV=n=>{let e=HV(n);return Object.values(k1).filter(t=>t.canvas===e).pop()};function fie(n,e,t){let r=Object.keys(n);for(let i of r){let o=+i;if(o>=e){let s=n[i];delete n[i],(t>0||o>e)&&(n[o+t]=s)}}}function hie(n,e,t,r){return!t||n.type==="mouseout"?null:r?e:n}function M1(n,e,t){return n.options.clip?n[t]:e[t]}function pie(n,e){let{xScale:t,yScale:r}=n;return t&&r?{left:M1(t,e,"left"),right:M1(t,e,"right"),top:M1(r,e,"top"),bottom:M1(r,e,"bottom")}:e}var Rd=(()=>{class n{static defaults=Ht;static instances=k1;static overrides=Aa;static registry=Bo;static version=uie;static getChart=iV;static register(...t){Bo.add(...t),oV()}static unregister(...t){Bo.remove(...t),oV()}constructor(t,r){let i=this.config=new zD(r),o=HV(t),s=iV(o);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");let a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Nre(o)),this.platform.updateConfig(i);let c=this.platform.acquireContext(o,a.aspectRatio),u=c&&c.canvas,l=u&&u.height,d=u&&u.width;if(this.id=n6(),this.ctx=c,this.canvas=u,this.width=d,this.height=l,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new UD,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=h6(f=>this.update(f),a.resizeDelay||0),this._dataChanges=[],k1[this.id]=this,!c||!u){console.error("Failed to create chart: can't acquire context from the given item");return}bs.listen(this,"complete",rV),bs.listen(this,"progress",die),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:r},width:i,height:o,_aspectRatio:s}=this;return et(t)?r&&s?s:o?i/o:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Bo}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():_D(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return dD(this.canvas,this.ctx),this}stop(){return bs.stop(this),this}resize(t,r){bs.running(this)?this._resizeBeforeDraw={width:t,height:r}:this._resize(t,r)}_resize(t,r){let i=this.options,o=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(o,t,r,s),c=i.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,_D(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),Dt(i.onResize,[this,a],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){let r=this.options.scales||{};ht(r,(i,o)=>{i.id=o})}buildOrUpdateScales(){let t=this.options,r=t.scales,i=this.scales,o=Object.keys(i).reduce((a,c)=>(a[c]=!1,a),{}),s=[];r&&(s=s.concat(Object.keys(r).map(a=>{let c=r[a],u=HD(a,c),l=u==="r",d=u==="x";return{options:c,dposition:l?"chartArea":d?"bottom":"left",dtype:l?"radialLinear":d?"category":"linear"}}))),ht(s,a=>{let c=a.options,u=c.id,l=HD(u,c),d=Te(c.type,a.dtype);(c.position===void 0||tV(c.position,l)!==tV(a.dposition))&&(c.position=a.dposition),o[u]=!0;let f=null;if(u in i&&i[u].type===d)f=i[u];else{let h=Bo.getScale(d);f=new h({id:u,type:d,ctx:this.ctx,chart:this}),i[f.id]=f}f.init(c,t)}),ht(o,(a,c)=>{a||delete i[c]}),ht(i,a=>{ur.configure(this,a,a.options),ur.addBox(this,a)})}_updateMetasets(){let t=this._metasets,r=this.data.datasets.length,i=t.length;if(t.sort((o,s)=>o.index-s.index),i>r){for(let o=r;o<i;++o)this._destroyDatasetMeta(o);t.splice(r,i-r)}this._sortedMetasets=t.slice(0).sort(nV("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:r}}=this;t.length>r.length&&delete this._stacks,t.forEach((i,o)=>{r.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){let t=[],r=this.data.datasets,i,o;for(this._removeUnreferencedMetasets(),i=0,o=r.length;i<o;i++){let s=r[i],a=this.getDatasetMeta(i),c=s.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(i),a=this.getDatasetMeta(i)),a.type=c,a.indexAxis=s.indexAxis||jD(c,this.options),a.order=s.order||0,a.index=i,a.label=""+s.label,a.visible=this.isDatasetVisible(i),a.controller)a.controller.updateIndex(i),a.controller.linkScales();else{let u=Bo.getController(c),{datasetElementType:l,dataElementType:d}=Ht.datasets[c];Object.assign(u,{dataElementType:Bo.getElement(d),datasetElementType:l&&Bo.getElement(l)}),a.controller=new u(this,i),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){ht(this.data.datasets,(t,r)=>{this.getDatasetMeta(r).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let r=this.config;r.update();let i=this._options=r.createResolver(r.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let l=0,d=this.data.datasets.length;l<d;l++){let{controller:f}=this.getDatasetMeta(l),h=!o&&s.indexOf(f)===-1;f.buildOrUpdateElements(h),a=Math.max(+f.getMaxOverflow(),a)}a=this._minPadding=i.layout.autoPadding?a:0,this._updateLayout(a),o||ht(s,l=>{l.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(nV("z","_idx"));let{_active:c,_lastEvent:u}=this;u?this._eventHandler(u,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){ht(this.scales,t=>{ur.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,r=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!ZA(r,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,r=this._getUniformDataChanges()||[];for(let{method:i,start:o,count:s}of r){let a=i==="_removeElements"?-s:s;fie(t,o,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let r=this.data.datasets.length,i=s=>new Set(t.filter(a=>a[0]===s).map((a,c)=>c+","+a.splice(1).join(","))),o=i(0);for(let s=1;s<r;s++)if(!ZA(o,i(s)))return;return Array.from(o).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;ur.update(this,this.width,this.height,t);let r=this.chartArea,i=r.width<=0||r.height<=0;this._layers=[],ht(this.boxes,o=>{i&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,s)=>{o._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let r=0,i=this.data.datasets.length;r<i;++r)this.getDatasetMeta(r).controller.configure();for(let r=0,i=this.data.datasets.length;r<i;++r)this._updateDataset(r,xs(t)?t({datasetIndex:r}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,r){let i=this.getDatasetMeta(t),o={meta:i,index:t,mode:r,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(i.controller._update(r),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(bs.has(this)?this.attached&&!bs.running(this)&&bs.start(this):(this.draw(),rV({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:i,height:o}=this._resizeBeforeDraw;this._resize(i,o),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let r=this._layers;for(t=0;t<r.length&&r[t].z<=0;++t)r[t].draw(this.chartArea);for(this._drawDatasets();t<r.length;++t)r[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let r=this._sortedMetasets,i=[],o,s;for(o=0,s=r.length;o<s;++o){let a=r[o];(!t||a.visible)&&i.push(a)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let r=t.length-1;r>=0;--r)this._drawDataset(t[r]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let r=this.ctx,i=t._clip,o=!i.disabled,s=pie(t,this.chartArea),a={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(o&&kp(r,{left:i.left===!1?0:s.left-i.left,right:i.right===!1?this.width:s.right+i.right,top:i.top===!1?0:s.top-i.top,bottom:i.bottom===!1?this.height:s.bottom+i.bottom}),t.controller.draw(),o&&Fp(r),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return ko(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,r,i,o){let s=gre.modes[r];return typeof s=="function"?s(this,t,i,o):[]}getDatasetMeta(t){let r=this.data.datasets[t],i=this._metasets,o=i.filter(s=>s&&s._dataset===r).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:r&&r.order||0,index:t,_dataset:r,_parsed:[],_sorted:!1},i.push(o)),o}getContext(){return this.$context||(this.$context=Cs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let r=this.data.datasets[t];if(!r)return!1;let i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!r.hidden}setDatasetVisibility(t,r){let i=this.getDatasetMeta(t);i.hidden=!r}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,r,i){let o=i?"show":"hide",s=this.getDatasetMeta(t),a=s.controller._resolveAnimations(void 0,o);bd(r)?(s.data[r].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),a.update(s,{visible:i}),this.update(c=>c.datasetIndex===t?o:void 0))}hide(t,r){this._updateVisibility(t,r,!1)}show(t,r){this._updateVisibility(t,r,!0)}_destroyDatasetMeta(t){let r=this._metasets[t];r&&r.controller&&r.controller._destroy(),delete this._metasets[t]}_stop(){let t,r;for(this.stop(),bs.remove(this),t=0,r=this.data.datasets.length;t<r;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:r}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),dD(t,r),this.platform.releaseContext(r),this.canvas=null,this.ctx=null),delete k1[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,r=this.platform,i=(s,a)=>{r.addEventListener(this,s,a),t[s]=a},o=(s,a,c)=>{s.offsetX=a,s.offsetY=c,this._eventHandler(s)};ht(this.options.events,s=>i(s,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,r=this.platform,i=(u,l)=>{r.addEventListener(this,u,l),t[u]=l},o=(u,l)=>{t[u]&&(r.removeEventListener(this,u,l),delete t[u])},s=(u,l)=>{this.canvas&&this.resize(u,l)},a,c=()=>{o("attach",c),this.attached=!0,this.resize(),i("resize",s),i("detach",a)};a=()=>{this.attached=!1,o("resize",s),this._stop(),this._resize(0,0),i("attach",c)},r.isAttached(this.canvas)?c():a()}unbindEvents(){ht(this._listeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._listeners={},ht(this._responsiveListeners,(t,r)=>{this.platform.removeEventListener(this,r,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,r,i){let o=i?"set":"remove",s,a,c,u;for(r==="dataset"&&(s=this.getDatasetMeta(t[0].datasetIndex),s.controller["_"+o+"DatasetHoverStyle"]()),c=0,u=t.length;c<u;++c){a=t[c];let l=a&&this.getDatasetMeta(a.datasetIndex).controller;l&&l[o+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let r=this._active||[],i=t.map(({datasetIndex:s,index:a})=>{let c=this.getDatasetMeta(s);if(!c)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:c.data[a],index:a}});!Rp(i,r)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,r))}notifyPlugins(t,r,i){return this._plugins.notify(this,t,r,i)}isPluginEnabled(t){return this._plugins._cache.filter(r=>r.plugin.id===t).length===1}_updateHoverStyles(t,r,i){let o=this.options.hover,s=(u,l)=>u.filter(d=>!l.some(f=>d.datasetIndex===f.datasetIndex&&d.index===f.index)),a=s(r,t),c=i?t:s(t,r);a.length&&this.updateHoverStyle(a,o.mode,!1),c.length&&o.mode&&this.updateHoverStyle(c,o.mode,!0)}_eventHandler(t,r){let i={event:t,replay:r,cancelable:!0,inChartArea:this.isPointInArea(t)},o=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,o)===!1)return;let s=this._handleEvent(t,r,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,o),(s||i.changed)&&this.render(),this}_handleEvent(t,r,i){let{_active:o=[],options:s}=this,a=r,c=this._getActiveElements(t,o,i,a),u=o6(t),l=hie(t,this._lastEvent,i,u);i&&(this._lastEvent=null,Dt(s.onHover,[t,c,this],this),u&&Dt(s.onClick,[t,c,this],this));let d=!Rp(c,o);return(d||r)&&(this._active=c,this._updateHoverStyles(c,o,r)),this._lastEvent=l,d}_getActiveElements(t,r,i,o){if(t.type==="mouseout")return[];if(!i)return r;let s=this.options.hover;return this.getElementsAtEventForMode(t,s.mode,s,o)}}return n})();function oV(){return ht(Rd.instances,n=>n._plugins.invalidate())}function gie(n,e,t){let{startAngle:r,pixelMargin:i,x:o,y:s,outerRadius:a,innerRadius:c}=e,u=i/a;n.beginPath(),n.arc(o,s,a,r-u,t+u),c>i?(u=i/c,n.arc(o,s,c,t+u,r-u,!0)):n.arc(o,s,i,t+ln,r-ln),n.closePath(),n.clip()}function mie(n){return C1(n,["outerStart","outerEnd","innerStart","innerEnd"])}function vie(n,e,t,r){let i=mie(n.options.borderRadius),o=(t-e)/2,s=Math.min(o,r*e/2),a=c=>{let u=(t-Math.min(o,c))*r/2;return Rn(c,0,Math.min(o,u))};return{outerStart:a(i.outerStart),outerEnd:a(i.outerEnd),innerStart:Rn(i.innerStart,0,s),innerEnd:Rn(i.innerEnd,0,s)}}function Md(n,e,t,r){return{x:t+n*Math.cos(e),y:r+n*Math.sin(e)}}function B1(n,e,t,r,i,o){let{x:s,y:a,startAngle:c,pixelMargin:u,innerRadius:l}=e,d=Math.max(e.outerRadius+r+t-u,0),f=l>0?l+r+t+u:0,h=0,g=i-c;if(r){let Ie=l>0?l-r:0,lt=d>0?d-r:0,st=(Ie+lt)/2,hn=st!==0?g*st/(st+r):g;h=(g-hn)/2}let m=Math.max(.001,g*d-t/Lt)/d,y=(g-m)/2,x=c+y+h,w=i-y-h,{outerStart:b,outerEnd:T,innerStart:P,innerEnd:k}=vie(e,f,d,w-x),C=d-b,E=d-T,S=x+b/C,M=w-T/E,R=f+P,N=f+k,O=x+P/R,qe=w-k/N;if(n.beginPath(),o){let Ie=(S+M)/2;if(n.arc(s,a,d,S,Ie),n.arc(s,a,d,Ie,M),T>0){let xn=Md(E,M,s,a);n.arc(xn.x,xn.y,T,M,w+ln)}let lt=Md(N,w,s,a);if(n.lineTo(lt.x,lt.y),k>0){let xn=Md(N,qe,s,a);n.arc(xn.x,xn.y,k,w+ln,qe+Math.PI)}let st=(w-k/f+(x+P/f))/2;if(n.arc(s,a,f,w-k/f,st,!0),n.arc(s,a,f,st,x+P/f,!0),P>0){let xn=Md(R,O,s,a);n.arc(xn.x,xn.y,P,O+Math.PI,x-ln)}let hn=Md(C,x,s,a);if(n.lineTo(hn.x,hn.y),b>0){let xn=Md(C,S,s,a);n.arc(xn.x,xn.y,b,x-ln,S)}}else{n.moveTo(s,a);let Ie=Math.cos(S)*d+s,lt=Math.sin(S)*d+a;n.lineTo(Ie,lt);let st=Math.cos(M)*d+s,hn=Math.sin(M)*d+a;n.lineTo(st,hn)}n.closePath()}function yie(n,e,t,r,i){let{fullCircles:o,startAngle:s,circumference:a}=e,c=e.endAngle;if(o){B1(n,e,t,r,c,i);for(let u=0;u<o;++u)n.fill();isNaN(a)||(c=s+(a%Vt||Vt))}return B1(n,e,t,r,c,i),n.fill(),c}function _ie(n,e,t,r,i){let{fullCircles:o,startAngle:s,circumference:a,options:c}=e,{borderWidth:u,borderJoinStyle:l,borderDash:d,borderDashOffset:f}=c,h=c.borderAlign==="inner";if(!u)return;n.setLineDash(d||[]),n.lineDashOffset=f,h?(n.lineWidth=u*2,n.lineJoin=l||"round"):(n.lineWidth=u,n.lineJoin=l||"bevel");let g=e.endAngle;if(o){B1(n,e,t,r,g,i);for(let m=0;m<o;++m)n.stroke();isNaN(a)||(g=s+(a%Vt||Vt))}h&&gie(n,e,g),o||(B1(n,e,t,r,g,i),n.stroke())}var $D=class extends Zi{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,r){let i=this.getProps(["x","y"],r),{angle:o,distance:s}=nD(i,{x:e,y:t}),{startAngle:a,endAngle:c,innerRadius:u,outerRadius:l,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),f=(this.options.spacing+this.options.borderWidth)/2,g=Te(d,c-a)>=Vt||Sd(o,a,c),m=Lo(s,u+f,l+f);return g&&m}getCenterPoint(e){let{x:t,y:r,startAngle:i,endAngle:o,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:u}=this.options,l=(i+o)/2,d=(s+a+u+c)/2;return{x:t+Math.cos(l)*d,y:r+Math.sin(l)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:r}=this,i=(t.offset||0)/4,o=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=r>Vt?Math.floor(r/Vt):0,r===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);let c=1-Math.sin(Math.min(Lt,r||0)),u=i*c;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,yie(e,this,u,o,s),_ie(e,this,u,o,s),e.restore()}};function zV(n,e,t=e){n.lineCap=Te(t.borderCapStyle,e.borderCapStyle),n.setLineDash(Te(t.borderDash,e.borderDash)),n.lineDashOffset=Te(t.borderDashOffset,e.borderDashOffset),n.lineJoin=Te(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=Te(t.borderWidth,e.borderWidth),n.strokeStyle=Te(t.borderColor,e.borderColor)}function xie(n,e,t){n.lineTo(t.x,t.y)}function wie(n){return n.stepped?v6:n.tension||n.cubicInterpolationMode==="monotone"?y6:xie}function $V(n,e,t={}){let r=n.length,{start:i=0,end:o=r-1}=t,{start:s,end:a}=e,c=Math.max(i,s),u=Math.min(o,a),l=i<s&&o<s||i>a&&o>a;return{count:r,start:c,loop:e.loop,ilen:u<c&&!l?r+u-c:u-c}}function Eie(n,e,t,r){let{points:i,options:o}=e,{count:s,start:a,loop:c,ilen:u}=$V(i,t,r),l=wie(o),{move:d=!0,reverse:f}=r||{},h,g,m;for(h=0;h<=u;++h)g=i[(a+(f?u-h:h))%s],!g.skip&&(d?(n.moveTo(g.x,g.y),d=!1):l(n,m,g,f,o.stepped),m=g);return c&&(g=i[(a+(f?u:0))%s],l(n,m,g,f,o.stepped)),!!c}function Cie(n,e,t,r){let i=e.points,{count:o,start:s,ilen:a}=$V(i,t,r),{move:c=!0,reverse:u}=r||{},l=0,d=0,f,h,g,m,y,x,w=T=>(s+(u?a-T:T))%o,b=()=>{m!==y&&(n.lineTo(l,y),n.lineTo(l,m),n.lineTo(l,x))};for(c&&(h=i[w(0)],n.moveTo(h.x,h.y)),f=0;f<=a;++f){if(h=i[w(f)],h.skip)continue;let T=h.x,P=h.y,k=T|0;k===g?(P<m?m=P:P>y&&(y=P),l=(d*l+T)/++d):(b(),n.lineTo(T,P),g=k,d=0,m=y=P),x=P}b()}function WD(n){let e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?Cie:Eie}function bie(n){return n.stepped?A6:n.tension||n.cubicInterpolationMode==="monotone"?D6:Sa}function Iie(n,e,t,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,t,r)&&i.closePath()),zV(n,e.options),n.stroke(i)}function Sie(n,e,t,r){let{segments:i,options:o}=e,s=WD(e);for(let a of i)zV(n,o,a.style),n.beginPath(),s(n,e,a,{start:t,end:t+r-1})&&n.closePath(),n.stroke()}var Aie=typeof Path2D=="function";function Die(n,e,t,r){Aie&&!e.options.segment?Iie(n,e,t,r):Sie(n,e,t,r)}var H1=(()=>{class n extends Zi{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,r){let i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){let o=i.spanGaps?this._loop:this._fullLoop;b6(this._points,i,t,o,r),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=M6(this,this.options.segment))}first(){let t=this.segments,r=this.points;return t.length&&r[t[0].start]}last(){let t=this.segments,r=this.points,i=t.length;return i&&r[t[i-1].end]}interpolate(t,r){let i=this.options,o=t[r],s=this.points,a=bD(this,{property:r,start:o,end:o});if(!a.length)return;let c=[],u=bie(i),l,d;for(l=0,d=a.length;l<d;++l){let{start:f,end:h}=a[l],g=s[f],m=s[h];if(g===m){c.push(g);continue}let y=Math.abs((o-g[r])/(m[r]-g[r])),x=u(g,m,y,i.stepped);x[r]=t[r],c.push(x)}return c.length===1?c[0]:c}pathSegment(t,r,i){return WD(this)(t,this,r,i)}path(t,r,i){let o=this.segments,s=WD(this),a=this._loop;r=r||0,i=i||this.points.length-r;for(let c of o)a&=s(t,this,c,{start:r,end:r+i-1});return!!a}draw(t,r,i,o){let s=this.options||{};(this.points||[]).length&&s.borderWidth&&(t.save(),Die(t,this,i,o),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function sV(n,e,t,r){let i=n.options,{[t]:o}=n.getProps([t],r);return Math.abs(e-o)<i.radius+i.hitRadius}var Tie=(()=>{class n extends Zi{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,r,i){let o=this.options,{x:s,y:a}=this.getProps(["x","y"],i);return Math.pow(t-s,2)+Math.pow(r-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(t,r){return sV(this,t,"x",r)}inYRange(t,r){return sV(this,t,"y",r)}getCenterPoint(t){let{x:r,y:i}=this.getProps(["x","y"],t);return{x:r,y:i}}size(t){t=t||this.options||{};let r=t.radius||0;r=Math.max(r,r&&t.hoverRadius||0);let i=r&&t.borderWidth||0;return(r+i)*2}draw(t,r){let i=this.options;this.skip||i.radius<.1||!ko(this,r,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,E1(t,i,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n})();function WV(n,e){let{x:t,y:r,base:i,width:o,height:s}=n.getProps(["x","y","base","width","height"],e),a,c,u,l,d;return n.horizontal?(d=s/2,a=Math.min(t,i),c=Math.max(t,i),u=r-d,l=r+d):(d=o/2,a=t-d,c=t+d,u=Math.min(r,i),l=Math.max(r,i)),{left:a,top:u,right:c,bottom:l}}function Pa(n,e,t,r){return n?0:Rn(e,t,r)}function Mie(n,e,t){let r=n.options.borderWidth,i=n.borderSkipped,o=hD(r);return{t:Pa(i.top,o.top,0,t),r:Pa(i.right,o.right,0,e),b:Pa(i.bottom,o.bottom,0,t),l:Pa(i.left,o.left,0,e)}}function Oie(n,e,t){let{enableBorderRadius:r}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,o=Ma(i),s=Math.min(e,t),a=n.borderSkipped,c=r||Ge(i);return{topLeft:Pa(!c||a.top||a.left,o.topLeft,0,s),topRight:Pa(!c||a.top||a.right,o.topRight,0,s),bottomLeft:Pa(!c||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:Pa(!c||a.bottom||a.right,o.bottomRight,0,s)}}function Pie(n){let e=WV(n),t=e.right-e.left,r=e.bottom-e.top,i=Mie(n,t/2,r/2),o=Oie(n,t/2,r/2);return{outer:{x:e.left,y:e.top,w:t,h:r,radius:o},inner:{x:e.left+i.l,y:e.top+i.t,w:t-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}function OD(n,e,t,r){let i=e===null,o=t===null,a=n&&!(i&&o)&&WV(n,r);return a&&(i||Lo(e,a.left,a.right))&&(o||Lo(t,a.top,a.bottom))}function Rie(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Nie(n,e){n.rect(e.x,e.y,e.w,e.h)}function PD(n,e,t={}){let r=n.x!==t.x?-e:0,i=n.y!==t.y?-e:0,o=(n.x+n.w!==t.x+t.w?e:0)-r,s=(n.y+n.h!==t.y+t.h?e:0)-i;return{x:n.x+r,y:n.y+i,w:n.w+o,h:n.h+s,radius:n.radius}}var GD=class extends Zi{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:r,backgroundColor:i}}=this,{inner:o,outer:s}=Pie(this),a=Rie(s.radius)?Dd:Nie;e.save(),(s.w!==o.w||s.h!==o.h)&&(e.beginPath(),a(e,PD(s,t,o)),e.clip(),a(e,PD(o,-t,s)),e.fillStyle=r,e.fill("evenodd")),e.beginPath(),a(e,PD(o,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,r){return OD(this,e,t,r)}inXRange(e,t){return OD(this,e,null,t)}inYRange(e,t){return OD(this,null,e,t)}getCenterPoint(e){let{x:t,y:r,base:i,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(t+i)/2:t,y:o?r:(r+i)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}},kie=Object.freeze({__proto__:null,ArcElement:$D,BarElement:GD,LineElement:H1,PointElement:Tie}),qD=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],aV=qD.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function GV(n){return qD[n%qD.length]}function qV(n){return aV[n%aV.length]}function Fie(n,e){return n.borderColor=GV(e),n.backgroundColor=qV(e),++e}function Lie(n,e){return n.backgroundColor=n.data.map(()=>GV(e++)),e}function Vie(n,e){return n.backgroundColor=n.data.map(()=>qV(e++)),e}function Bie(n){let e=0;return(t,r)=>{let i=n.getDatasetMeta(r).controller;i instanceof tT?e=Lie(t,e):i instanceof NV?e=Vie(t,e):i&&(e=Fie(t,e))}}function cV(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function Uie(n){return n&&(n.borderColor||n.backgroundColor)}var jie={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;let{data:{datasets:r},options:i}=n.config,{elements:o}=i;if(!t.forceOverride&&(cV(r)||Uie(i)||o&&cV(o)))return;let s=Bie(n);r.forEach(s)}};function Hie(n,e,t,r,i){let o=i.samples||r;if(o>=t)return n.slice(e,e+t);let s=[],a=(t-2)/(o-2),c=0,u=e+t-1,l=e,d,f,h,g,m;for(s[c++]=n[l],d=0;d<o-2;d++){let y=0,x=0,w,b=Math.floor((d+1)*a)+1+e,T=Math.min(Math.floor((d+2)*a)+1,t)+e,P=T-b;for(w=b;w<T;w++)y+=n[w].x,x+=n[w].y;y/=P,x/=P;let k=Math.floor(d*a)+1+e,C=Math.min(Math.floor((d+1)*a)+1,t)+e,{x:E,y:S}=n[l];for(h=g=-1,w=k;w<C;w++)g=.5*Math.abs((E-y)*(n[w].y-S)-(E-n[w].x)*(x-S)),g>h&&(h=g,f=n[w],m=w);s[c++]=f,l=m}return s[c++]=n[u],s}function zie(n,e,t,r){let i=0,o=0,s,a,c,u,l,d,f,h,g,m,y=[],x=e+t-1,w=n[e].x,T=n[x].x-w;for(s=e;s<e+t;++s){a=n[s],c=(a.x-w)/T*r,u=a.y;let P=c|0;if(P===l)u<g?(g=u,d=s):u>m&&(m=u,f=s),i=(o*i+a.x)/++o;else{let k=s-1;if(!et(d)&&!et(f)){let C=Math.min(d,f),E=Math.max(d,f);C!==h&&C!==k&&y.push(xe(Q({},n[C]),{x:i})),E!==h&&E!==k&&y.push(xe(Q({},n[E]),{x:i}))}s>0&&k!==h&&y.push(n[k]),y.push(a),l=P,o=0,g=m=u,d=f=h=s}}return y}function KV(n){if(n._decimated){let e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function uV(n){n.data.datasets.forEach(e=>{KV(e)})}function $ie(n,e){let t=e.length,r=0,i,{iScale:o}=n,{min:s,max:a,minDefined:c,maxDefined:u}=o.getUserBounds();return c&&(r=Rn(No(e,o.axis,s).lo,0,t-1)),u?i=Rn(No(e,o.axis,a).hi+1,r,t)-r:i=t-r,{start:r,count:i}}var Wie={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){uV(n);return}let r=n.width;n.data.datasets.forEach((i,o)=>{let{_data:s,indexAxis:a}=i,c=n.getDatasetMeta(o),u=s||i.data;if(Td([a,n.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;let l=n.scales[c.xAxisID];if(l.type!=="linear"&&l.type!=="time"||n.options.parsing)return;let{start:d,count:f}=$ie(c,u),h=t.threshold||4*r;if(f<=h){KV(i);return}et(s)&&(i._data=u,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}}));let g;switch(t.algorithm){case"lttb":g=Hie(u,d,f,r,t);break;case"min-max":g=zie(u,d,f,r);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=g})},destroy(n){uV(n)}};function Gie(n,e,t){let r=n.segments,i=n.points,o=e.points,s=[];for(let a of r){let{start:c,end:u}=a;u=nT(c,u,i);let l=KD(t,i[c],i[u],a.loop);if(!e.segments){s.push({source:a,target:l,start:i[c],end:i[u]});continue}let d=bD(e,l);for(let f of d){let h=KD(t,o[f.start],o[f.end],f.loop),g=CD(a,i,h);for(let m of g)s.push({source:m,target:f,start:{[t]:lV(l,h,"start",Math.max)},end:{[t]:lV(l,h,"end",Math.min)}})}}return s}function KD(n,e,t,r){if(r)return;let i=e[n],o=t[n];return n==="angle"&&(i=zr(i),o=zr(o)),{property:n,start:i,end:o}}function qie(n,e){let{x:t=null,y:r=null}=n||{},i=e.points,o=[];return e.segments.forEach(({start:s,end:a})=>{a=nT(s,a,i);let c=i[s],u=i[a];r!==null?(o.push({x:c.x,y:r}),o.push({x:u.x,y:r})):t!==null&&(o.push({x:t,y:c.y}),o.push({x:t,y:u.y}))}),o}function nT(n,e,t){for(;e>n;e--){let r=t[e];if(!isNaN(r.x)&&!isNaN(r.y))break}return e}function lV(n,e,t,r){return n&&e?r(n[t],e[t]):n?n[t]:e?e[t]:0}function YV(n,e){let t=[],r=!1;return Ft(n)?(r=!0,t=n):t=qie(n,e),t.length?new H1({points:t,options:{tension:0},_loop:r,_fullLoop:r}):null}function dV(n){return n&&n.fill!==!1}function Kie(n,e,t){let i=n[e].fill,o=[e],s;if(!t)return i;for(;i!==!1&&o.indexOf(i)===-1;){if(!Xt(i))return i;if(s=n[i],!s)return!1;if(s.visible)return i;o.push(i),i=s.fill}return!1}function Yie(n,e,t){let r=Jie(n);if(Ge(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Xt(i)&&Math.floor(i)===i?Xie(r[0],e,i,t):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Xie(n,e,t,r){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=r?!1:t}function Qie(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:Ge(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function Zie(n,e,t){let r;return n==="start"?r=t:n==="end"?r=e.options.reverse?e.min:e.max:Ge(n)?r=n.value:r=e.getBaseValue(),r}function Jie(n){let e=n.options,t=e.fill,r=Te(t&&t.target,t);return r===void 0&&(r=!!e.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function eoe(n){let{scale:e,index:t,line:r}=n,i=[],o=r.segments,s=r.points,a=toe(e,t);a.push(YV({x:null,y:e.bottom},r));for(let c=0;c<o.length;c++){let u=o[c];for(let l=u.start;l<=u.end;l++)noe(i,s[l],a)}return new H1({points:i,options:{}})}function toe(n,e){let t=[],r=n.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){let o=r[i];if(o.index===e)break;o.hidden||t.unshift(o.dataset)}return t}function noe(n,e,t){let r=[];for(let i=0;i<t.length;i++){let o=t[i],{first:s,last:a,point:c}=roe(o,e,"x");if(!(!c||s&&a)){if(s)r.unshift(c);else if(n.push(c),!a)break}}n.push(...r)}function roe(n,e,t){let r=n.interpolate(e,t);if(!r)return{};let i=r[t],o=n.segments,s=n.points,a=!1,c=!1;for(let u=0;u<o.length;u++){let l=o[u],d=s[l.start][t],f=s[l.end][t];if(Lo(i,d,f)){a=i===d,c=i===f;break}}return{first:a,last:c,point:r}}var U1=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,r){let{x:i,y:o,radius:s}=this;return t=t||{start:0,end:Vt},e.arc(i,o,s,t.end,t.start,!0),!r.bounds}interpolate(e){let{x:t,y:r,radius:i}=this,o=e.angle;return{x:t+Math.cos(o)*i,y:r+Math.sin(o)*i,angle:o}}};function ioe(n){let{chart:e,fill:t,line:r}=n;if(Xt(t))return ooe(e,t);if(t==="stack")return eoe(n);if(t==="shape")return!0;let i=soe(n);return i instanceof U1?i:YV(i,r)}function ooe(n,e){let t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function soe(n){return(n.scale||{}).getPointPositionForValue?coe(n):aoe(n)}function aoe(n){let{scale:e={},fill:t}=n,r=Qie(t,e);if(Xt(r)){let i=e.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function coe(n){let{scale:e,fill:t}=n,r=e.options,i=e.getLabels().length,o=r.reverse?e.max:e.min,s=Zie(t,e,o),a=[];if(r.grid.circular){let c=e.getPointPositionForValue(0,o);return new U1({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(s)})}for(let c=0;c<i;++c)a.push(e.getPointPositionForValue(c,s));return a}function RD(n,e,t){let r=ioe(e),{line:i,scale:o,axis:s}=e,a=i.options,c=a.fill,u=a.backgroundColor,{above:l=u,below:d=u}=c||{};r&&i.points.length&&(kp(n,t),uoe(n,{line:i,target:r,above:l,below:d,area:t,scale:o,axis:s}),Fp(n))}function uoe(n,e){let{line:t,target:r,above:i,below:o,area:s,scale:a}=e,c=t._loop?"angle":e.axis;n.save(),c==="x"&&o!==i&&(fV(n,r,s.top),hV(n,{line:t,target:r,color:i,scale:a,property:c}),n.restore(),n.save(),fV(n,r,s.bottom)),hV(n,{line:t,target:r,color:o,scale:a,property:c}),n.restore()}function fV(n,e,t){let{segments:r,points:i}=e,o=!0,s=!1;n.beginPath();for(let a of r){let{start:c,end:u}=a,l=i[c],d=i[nT(c,u,i)];o?(n.moveTo(l.x,l.y),o=!1):(n.lineTo(l.x,t),n.lineTo(l.x,l.y)),s=!!e.pathSegment(n,a,{move:s}),s?n.closePath():n.lineTo(d.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function hV(n,e){let{line:t,target:r,property:i,color:o,scale:s}=e,a=Gie(t,r,i);for(let{source:c,target:u,start:l,end:d}of a){let{style:{backgroundColor:f=o}={}}=c,h=r!==!0;n.save(),n.fillStyle=f,loe(n,s,h&&KD(i,l,d)),n.beginPath();let g=!!t.pathSegment(n,c),m;if(h){g?n.closePath():pV(n,r,d,i);let y=!!r.pathSegment(n,u,{move:g,reverse:!0});m=g&&y,m||pV(n,r,l,i)}n.closePath(),n.fill(m?"evenodd":"nonzero"),n.restore()}}function loe(n,e,t){let{top:r,bottom:i}=e.chart.chartArea,{property:o,start:s,end:a}=t||{};o==="x"&&(n.beginPath(),n.rect(s,r,a-s,i-r),n.clip())}function pV(n,e,t,r){let i=e.interpolate(t,r);i&&n.lineTo(i.x,i.y)}var doe={id:"filler",afterDatasetsUpdate(n,e,t){let r=(n.data.datasets||[]).length,i=[],o,s,a,c;for(s=0;s<r;++s)o=n.getDatasetMeta(s),a=o.dataset,c=null,a&&a.options&&a instanceof H1&&(c={visible:n.isDatasetVisible(s),index:s,fill:Yie(a,s,r),chart:n,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=c,i.push(c);for(s=0;s<r;++s)c=i[s],!(!c||c.fill===!1)&&(c.fill=Kie(i,s,t.propagate))},beforeDraw(n,e,t){let r=t.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),o=n.chartArea;for(let s=i.length-1;s>=0;--s){let a=i[s].$filler;a&&(a.line.updateControlPoints(o,a.axis),r&&a.fill&&RD(n.ctx,a,o))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let r=n.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){let o=r[i].$filler;dV(o)&&RD(n.ctx,o,n.chartArea)}},beforeDatasetDraw(n,e,t){let r=e.meta.$filler;!dV(r)||t.drawTime!=="beforeDatasetDraw"||RD(n.ctx,r,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},gV=(n,e)=>{let{boxHeight:t=e,boxWidth:r=e}=n;return n.usePointStyle&&(t=Math.min(t,e),r=n.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:t,itemHeight:Math.max(e,t)}},foe=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,j1=class extends Zi{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,r){this.maxWidth=e,this.maxHeight=t,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=Dt(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(r=>e.filter(r,this.chart.data))),e.sort&&(t=t.sort((r,i)=>e.sort(r,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let r=e.labels,i=An(r.font),o=i.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=gV(r,o),u,l;t.font=i.string,this.isHorizontal()?(u=this.maxWidth,l=this._fitRows(s,o,a,c)+10):(l=this.maxHeight,u=this._fitCols(s,i,a,c)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(l,e.maxHeight||this.maxHeight)}_fitRows(e,t,r,i){let{ctx:o,maxWidth:s,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],u=this.lineWidths=[0],l=i+a,d=e;o.textAlign="left",o.textBaseline="middle";let f=-1,h=-l;return this.legendItems.forEach((g,m)=>{let y=r+t/2+o.measureText(g.text).width;(m===0||u[u.length-1]+y+2*a>s)&&(d+=l,u[u.length-(m>0?0:1)]=0,h+=l,f++),c[m]={left:0,top:h,row:f,width:y,height:i},u[u.length-1]+=y+a}),d}_fitCols(e,t,r,i){let{ctx:o,maxHeight:s,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],u=this.columnSizes=[],l=s-e,d=a,f=0,h=0,g=0,m=0;return this.legendItems.forEach((y,x)=>{let{itemWidth:w,itemHeight:b}=hoe(r,t,o,y,i);x>0&&h+b+2*a>l&&(d+=f+a,u.push({width:f,height:h}),g+=f+a,m++,f=h=0),c[x]={left:g,top:h,col:m,width:w,height:b},f=Math.max(f,w),h+=b+a}),d+=f,u.push({width:f,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:r,labels:{padding:i},rtl:o}}=this,s=gu(o,this.left,this.width);if(this.isHorizontal()){let a=0,c=Kn(r,this.left+i,this.right-this.lineWidths[a]);for(let u of t)a!==u.row&&(a=u.row,c=Kn(r,this.left+i,this.right-this.lineWidths[a])),u.top+=this.top+e+i,u.left=s.leftForLtr(s.x(c),u.width),c+=u.width+i}else{let a=0,c=Kn(r,this.top+e+i,this.bottom-this.columnSizes[a].height);for(let u of t)u.col!==a&&(a=u.col,c=Kn(r,this.top+e+i,this.bottom-this.columnSizes[a].height)),u.top=c,u.left+=this.left+i,u.left=s.leftForLtr(s.x(u.left),u.width),c+=u.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;kp(e,this),this._draw(),Fp(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:r,ctx:i}=this,{align:o,labels:s}=e,a=Ht.color,c=gu(e.rtl,this.left,this.width),u=An(s.font),{padding:l}=s,d=u.size,f=d/2,h;this.drawTitle(),i.textAlign=c.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=u.string;let{boxWidth:g,boxHeight:m,itemHeight:y}=gV(s,d),x=function(k,C,E){if(isNaN(g)||g<=0||isNaN(m)||m<0)return;i.save();let S=Te(E.lineWidth,1);if(i.fillStyle=Te(E.fillStyle,a),i.lineCap=Te(E.lineCap,"butt"),i.lineDashOffset=Te(E.lineDashOffset,0),i.lineJoin=Te(E.lineJoin,"miter"),i.lineWidth=S,i.strokeStyle=Te(E.strokeStyle,a),i.setLineDash(Te(E.lineDash,[])),s.usePointStyle){let M={radius:m*Math.SQRT2/2,pointStyle:E.pointStyle,rotation:E.rotation,borderWidth:S},R=c.xPlus(k,g/2),N=C+f;fD(i,M,R,N,s.pointStyleWidth&&g)}else{let M=C+Math.max((d-m)/2,0),R=c.leftForLtr(k,g),N=Ma(E.borderRadius);i.beginPath(),Object.values(N).some(O=>O!==0)?Dd(i,{x:R,y:M,w:g,h:m,radius:N}):i.rect(R,M,g,m),i.fill(),S!==0&&i.stroke()}i.restore()},w=function(k,C,E){Ta(i,E.text,k,C+y/2,u,{strikethrough:E.hidden,textAlign:c.textAlign(E.textAlign)})},b=this.isHorizontal(),T=this._computeTitleHeight();b?h={x:Kn(o,this.left+l,this.right-r[0]),y:this.top+l+T,line:0}:h={x:this.left+l,y:Kn(o,this.top+T+l,this.bottom-t[0].height),line:0},wD(this.ctx,e.textDirection);let P=y+l;this.legendItems.forEach((k,C)=>{i.strokeStyle=k.fontColor,i.fillStyle=k.fontColor;let E=i.measureText(k.text).width,S=c.textAlign(k.textAlign||(k.textAlign=s.textAlign)),M=g+f+E,R=h.x,N=h.y;c.setWidth(this.width),b?C>0&&R+M+l>this.right&&(N=h.y+=P,h.line++,R=h.x=Kn(o,this.left+l,this.right-r[h.line])):C>0&&N+P>this.bottom&&(R=h.x=R+t[h.line].width+l,h.line++,N=h.y=Kn(o,this.top+T+l,this.bottom-t[h.line].height));let O=c.x(R);if(x(O,N,k),R=p6(S,R+g+f,b?R+M:this.right,e.rtl),w(c.x(R),N,k),b)h.x+=M+l;else if(typeof k.text!="string"){let qe=u.lineHeight;h.y+=XV(k,qe)+l}else h.y+=P}),ED(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,r=An(t.font),i=Yn(t.padding);if(!t.display)return;let o=gu(e.rtl,this.left,this.width),s=this.ctx,a=t.position,c=r.size/2,u=i.top+c,l,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),l=this.top+u,d=Kn(e.align,d,this.right-f);else{let g=this.columnSizes.reduce((m,y)=>Math.max(m,y.height),0);l=u+Kn(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}let h=Kn(a,d,d+f);s.textAlign=o.textAlign(x1(a)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=r.string,Ta(s,t.text,h,l,r)}_computeTitleHeight(){let e=this.options.title,t=An(e.font),r=Yn(e.padding);return e.display?t.lineHeight+r.height:0}_getLegendItemAt(e,t){let r,i,o;if(Lo(e,this.left,this.right)&&Lo(t,this.top,this.bottom)){for(o=this.legendHitBoxes,r=0;r<o.length;++r)if(i=o[r],Lo(e,i.left,i.left+i.width)&&Lo(t,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(e){let t=this.options;if(!moe(e.type,t))return;let r=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let i=this._hoveredItem,o=foe(i,r);i&&!o&&Dt(t.onLeave,[e,i,this],this),this._hoveredItem=r,r&&!o&&Dt(t.onHover,[e,r,this],this)}else r&&Dt(t.onClick,[e,r,this],this)}};function hoe(n,e,t,r,i){let o=poe(r,n,e,t),s=goe(i,r,e.lineHeight);return{itemWidth:o,itemHeight:s}}function poe(n,e,t,r){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((o,s)=>o.length>s.length?o:s)),e+t.size/2+r.measureText(i).width}function goe(n,e,t){let r=n;return typeof e.text!="string"&&(r=XV(e,t)),r}function XV(n,e){let t=n.text?n.text.length:0;return e*t}function moe(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var voe={id:"legend",_element:j1,start(n,e,t){let r=n.legend=new j1({ctx:n.ctx,options:t,chart:n});ur.configure(n,r,t),ur.addBox(n,r)},stop(n){ur.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let r=n.legend;ur.configure(n,r,t),r.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let r=e.datasetIndex,i=t.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:r,textAlign:i,color:o,useBorderRadius:s,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{let u=c.controller.getStyle(t?0:void 0),l=Yn(u.borderWidth);return{text:e[c.index].label,fillStyle:u.backgroundColor,fontColor:o,hidden:!c.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(l.width+l.height)/4,strokeStyle:u.borderColor,pointStyle:r||u.pointStyle,rotation:u.rotation,textAlign:i||u.textAlign,borderRadius:s&&(a||u.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},Wp=class extends Zi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let i=Ft(r.text)?r.text.length:1;this._padding=Yn(r.padding);let o=i*An(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:r,bottom:i,right:o,options:s}=this,a=s.align,c=0,u,l,d;return this.isHorizontal()?(l=Kn(a,r,o),d=t+e,u=o-r):(s.position==="left"?(l=r+e,d=Kn(a,i,t),c=Lt*-.5):(l=o-e,d=Kn(a,t,i),c=Lt*.5),u=i-t),{titleX:l,titleY:d,maxWidth:u,rotation:c}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let r=An(t.font),o=r.lineHeight/2+this._padding.top,{titleX:s,titleY:a,maxWidth:c,rotation:u}=this._drawArgs(o);Ta(e,t.text,0,0,r,{color:t.color,maxWidth:c,rotation:u,textAlign:x1(t.align),textBaseline:"middle",translation:[s,a]})}};function yoe(n,e){let t=new Wp({ctx:n.ctx,options:e,chart:n});ur.configure(n,t,e),ur.addBox(n,t),n.titleBlock=t}var _oe={id:"title",_element:Wp,start(n,e,t){yoe(n,t)},stop(n){let e=n.titleBlock;ur.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){let r=n.titleBlock;ur.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},O1=new WeakMap,xoe={id:"subtitle",start(n,e,t){let r=new Wp({ctx:n.ctx,options:t,chart:n});ur.configure(n,r,t),ur.addBox(n,r),O1.set(n,r)},stop(n){ur.removeBox(n,O1.get(n)),O1.delete(n)},beforeUpdate(n,e,t){let r=O1.get(n);ur.configure(n,r,t),r.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},zp={average(n){if(!n.length)return!1;let e,t,r=0,i=0,o=0;for(e=0,t=n.length;e<t;++e){let s=n[e].element;if(s&&s.hasValue()){let a=s.tooltipPosition();r+=a.x,i+=a.y,++o}}return{x:r/o,y:i/o}},nearest(n,e){if(!n.length)return!1;let t=e.x,r=e.y,i=Number.POSITIVE_INFINITY,o,s,a;for(o=0,s=n.length;o<s;++o){let c=n[o].element;if(c&&c.hasValue()){let u=c.getCenterPoint(),l=g1(e,u);l<i&&(i=l,a=c)}}if(a){let c=a.tooltipPosition();t=c.x,r=c.y}return{x:t,y:r}}};function Vo(n,e){return e&&(Ft(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function Is(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function woe(n,e){let{element:t,datasetIndex:r,index:i}=e,o=n.getDatasetMeta(r).controller,{label:s,value:a}=o.getLabelAndValue(i);return{chart:n,label:s,parsed:o.getParsed(i),raw:n.data.datasets[r].data[i],formattedValue:a,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:t}}function mV(n,e){let t=n.chart.ctx,{body:r,footer:i,title:o}=n,{boxWidth:s,boxHeight:a}=e,c=An(e.bodyFont),u=An(e.titleFont),l=An(e.footerFont),d=o.length,f=i.length,h=r.length,g=Yn(e.padding),m=g.height,y=0,x=r.reduce((T,P)=>T+P.before.length+P.lines.length+P.after.length,0);if(x+=n.beforeBody.length+n.afterBody.length,d&&(m+=d*u.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),x){let T=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;m+=h*T+(x-h)*c.lineHeight+(x-1)*e.bodySpacing}f&&(m+=e.footerMarginTop+f*l.lineHeight+(f-1)*e.footerSpacing);let w=0,b=function(T){y=Math.max(y,t.measureText(T).width+w)};return t.save(),t.font=u.string,ht(n.title,b),t.font=c.string,ht(n.beforeBody.concat(n.afterBody),b),w=e.displayColors?s+2+e.boxPadding:0,ht(r,T=>{ht(T.before,b),ht(T.lines,b),ht(T.after,b)}),w=0,t.font=l.string,ht(n.footer,b),t.restore(),y+=g.width,{width:y,height:m}}function Eoe(n,e){let{y:t,height:r}=e;return t<r/2?"top":t>n.height-r/2?"bottom":"center"}function Coe(n,e,t,r){let{x:i,width:o}=r,s=t.caretSize+t.caretPadding;if(n==="left"&&i+o+s>e.width||n==="right"&&i-o-s<0)return!0}function boe(n,e,t,r){let{x:i,width:o}=t,{width:s,chartArea:{left:a,right:c}}=n,u="center";return r==="center"?u=i<=(a+c)/2?"left":"right":i<=o/2?u="left":i>=s-o/2&&(u="right"),Coe(u,n,e,t)&&(u="center"),u}function vV(n,e,t){let r=t.yAlign||e.yAlign||Eoe(n,t);return{xAlign:t.xAlign||e.xAlign||boe(n,e,t,r),yAlign:r}}function Ioe(n,e){let{x:t,width:r}=n;return e==="right"?t-=r:e==="center"&&(t-=r/2),t}function Soe(n,e,t){let{y:r,height:i}=n;return e==="top"?r+=t:e==="bottom"?r-=i+t:r-=i/2,r}function yV(n,e,t,r){let{caretSize:i,caretPadding:o,cornerRadius:s}=n,{xAlign:a,yAlign:c}=t,u=i+o,{topLeft:l,topRight:d,bottomLeft:f,bottomRight:h}=Ma(s),g=Ioe(e,a),m=Soe(e,c,u);return c==="center"?a==="left"?g+=u:a==="right"&&(g-=u):a==="left"?g-=Math.max(l,f)+i:a==="right"&&(g+=Math.max(d,h)+i),{x:Rn(g,0,r.width-e.width),y:Rn(m,0,r.height-e.height)}}function P1(n,e,t){let r=Yn(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-r.right:n.x+r.left}function _V(n){return Vo([],Is(n))}function Aoe(n,e,t){return Cs(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function xV(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var QV={beforeTitle:Fo,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,r=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return t[e.dataIndex]}return""},afterTitle:Fo,beforeBody:Fo,beforeLabel:Fo,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return et(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Fo,afterBody:Fo,beforeFooter:Fo,footer:Fo,afterFooter:Fo};function Wr(n,e,t,r){let i=n[e].call(t,r);return typeof i>"u"?QV[e].call(t,r):i}var wV=(()=>{class n extends Zi{static positioners=zp;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let r=this.chart,i=this.options.setContext(this.getContext()),o=i.enabled&&r.options.animation&&i.animations,s=new F1(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=Aoe(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,r){let{callbacks:i}=r,o=Wr(i,"beforeTitle",this,t),s=Wr(i,"title",this,t),a=Wr(i,"afterTitle",this,t),c=[];return c=Vo(c,Is(o)),c=Vo(c,Is(s)),c=Vo(c,Is(a)),c}getBeforeBody(t,r){return _V(Wr(r.callbacks,"beforeBody",this,t))}getBody(t,r){let{callbacks:i}=r,o=[];return ht(t,s=>{let a={before:[],lines:[],after:[]},c=xV(i,s);Vo(a.before,Is(Wr(c,"beforeLabel",this,s))),Vo(a.lines,Wr(c,"label",this,s)),Vo(a.after,Is(Wr(c,"afterLabel",this,s))),o.push(a)}),o}getAfterBody(t,r){return _V(Wr(r.callbacks,"afterBody",this,t))}getFooter(t,r){let{callbacks:i}=r,o=Wr(i,"beforeFooter",this,t),s=Wr(i,"footer",this,t),a=Wr(i,"afterFooter",this,t),c=[];return c=Vo(c,Is(o)),c=Vo(c,Is(s)),c=Vo(c,Is(a)),c}_createItems(t){let r=this._active,i=this.chart.data,o=[],s=[],a=[],c=[],u,l;for(u=0,l=r.length;u<l;++u)c.push(woe(this.chart,r[u]));return t.filter&&(c=c.filter((d,f,h)=>t.filter(d,f,h,i))),t.itemSort&&(c=c.sort((d,f)=>t.itemSort(d,f,i))),ht(c,d=>{let f=xV(t.callbacks,d);o.push(Wr(f,"labelColor",this,d)),s.push(Wr(f,"labelPointStyle",this,d)),a.push(Wr(f,"labelTextColor",this,d))}),this.labelColors=o,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=c,c}update(t,r){let i=this.options.setContext(this.getContext()),o=this._active,s,a=[];if(!o.length)this.opacity!==0&&(s={opacity:0});else{let c=zp[i.position].call(this,o,this._eventPosition);a=this._createItems(i),this.title=this.getTitle(a,i),this.beforeBody=this.getBeforeBody(a,i),this.body=this.getBody(a,i),this.afterBody=this.getAfterBody(a,i),this.footer=this.getFooter(a,i);let u=this._size=mV(this,i),l=Object.assign({},c,u),d=vV(this.chart,i,l),f=yV(i,l,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:f.x,y:f.y,width:u.width,height:u.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:r})}drawCaret(t,r,i,o){let s=this.getCaretPosition(t,i,o);r.lineTo(s.x1,s.y1),r.lineTo(s.x2,s.y2),r.lineTo(s.x3,s.y3)}getCaretPosition(t,r,i){let{xAlign:o,yAlign:s}=this,{caretSize:a,cornerRadius:c}=i,{topLeft:u,topRight:l,bottomLeft:d,bottomRight:f}=Ma(c),{x:h,y:g}=t,{width:m,height:y}=r,x,w,b,T,P,k;return s==="center"?(P=g+y/2,o==="left"?(x=h,w=x-a,T=P+a,k=P-a):(x=h+m,w=x+a,T=P-a,k=P+a),b=x):(o==="left"?w=h+Math.max(u,d)+a:o==="right"?w=h+m-Math.max(l,f)-a:w=this.caretX,s==="top"?(T=g,P=T-a,x=w-a,b=w+a):(T=g+y,P=T+a,x=w+a,b=w-a),k=T),{x1:x,x2:w,x3:b,y1:T,y2:P,y3:k}}drawTitle(t,r,i){let o=this.title,s=o.length,a,c,u;if(s){let l=gu(i.rtl,this.x,this.width);for(t.x=P1(this,i.titleAlign,i),r.textAlign=l.textAlign(i.titleAlign),r.textBaseline="middle",a=An(i.titleFont),c=i.titleSpacing,r.fillStyle=i.titleColor,r.font=a.string,u=0;u<s;++u)r.fillText(o[u],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,u+1===s&&(t.y+=i.titleMarginBottom-c)}}_drawColorBox(t,r,i,o,s){let a=this.labelColors[i],c=this.labelPointStyles[i],{boxHeight:u,boxWidth:l}=s,d=An(s.bodyFont),f=P1(this,"left",s),h=o.x(f),g=u<d.lineHeight?(d.lineHeight-u)/2:0,m=r.y+g;if(s.usePointStyle){let y={radius:Math.min(l,u)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},x=o.leftForLtr(h,l)+l/2,w=m+u/2;t.strokeStyle=s.multiKeyBackground,t.fillStyle=s.multiKeyBackground,E1(t,y,x,w),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,E1(t,y,x,w)}else{t.lineWidth=Ge(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let y=o.leftForLtr(h,l),x=o.leftForLtr(o.xPlus(h,1),l-2),w=Ma(a.borderRadius);Object.values(w).some(b=>b!==0)?(t.beginPath(),t.fillStyle=s.multiKeyBackground,Dd(t,{x:y,y:m,w:l,h:u,radius:w}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Dd(t,{x,y:m+1,w:l-2,h:u-2,radius:w}),t.fill()):(t.fillStyle=s.multiKeyBackground,t.fillRect(y,m,l,u),t.strokeRect(y,m,l,u),t.fillStyle=a.backgroundColor,t.fillRect(x,m+1,l-2,u-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,r,i){let{body:o}=this,{bodySpacing:s,bodyAlign:a,displayColors:c,boxHeight:u,boxWidth:l,boxPadding:d}=i,f=An(i.bodyFont),h=f.lineHeight,g=0,m=gu(i.rtl,this.x,this.width),y=function(S){r.fillText(S,m.x(t.x+g),t.y+h/2),t.y+=h+s},x=m.textAlign(a),w,b,T,P,k,C,E;for(r.textAlign=a,r.textBaseline="middle",r.font=f.string,t.x=P1(this,x,i),r.fillStyle=i.bodyColor,ht(this.beforeBody,y),g=c&&x!=="right"?a==="center"?l/2+d:l+2+d:0,P=0,C=o.length;P<C;++P){for(w=o[P],b=this.labelTextColors[P],r.fillStyle=b,ht(w.before,y),T=w.lines,c&&T.length&&(this._drawColorBox(r,t,P,m,i),h=Math.max(f.lineHeight,u)),k=0,E=T.length;k<E;++k)y(T[k]),h=f.lineHeight;ht(w.after,y)}g=0,h=f.lineHeight,ht(this.afterBody,y),t.y-=s}drawFooter(t,r,i){let o=this.footer,s=o.length,a,c;if(s){let u=gu(i.rtl,this.x,this.width);for(t.x=P1(this,i.footerAlign,i),t.y+=i.footerMarginTop,r.textAlign=u.textAlign(i.footerAlign),r.textBaseline="middle",a=An(i.footerFont),r.fillStyle=i.footerColor,r.font=a.string,c=0;c<s;++c)r.fillText(o[c],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+i.footerSpacing}}drawBackground(t,r,i,o){let{xAlign:s,yAlign:a}=this,{x:c,y:u}=t,{width:l,height:d}=i,{topLeft:f,topRight:h,bottomLeft:g,bottomRight:m}=Ma(o.cornerRadius);r.fillStyle=o.backgroundColor,r.strokeStyle=o.borderColor,r.lineWidth=o.borderWidth,r.beginPath(),r.moveTo(c+f,u),a==="top"&&this.drawCaret(t,r,i,o),r.lineTo(c+l-h,u),r.quadraticCurveTo(c+l,u,c+l,u+h),a==="center"&&s==="right"&&this.drawCaret(t,r,i,o),r.lineTo(c+l,u+d-m),r.quadraticCurveTo(c+l,u+d,c+l-m,u+d),a==="bottom"&&this.drawCaret(t,r,i,o),r.lineTo(c+g,u+d),r.quadraticCurveTo(c,u+d,c,u+d-g),a==="center"&&s==="left"&&this.drawCaret(t,r,i,o),r.lineTo(c,u+f),r.quadraticCurveTo(c,u,c+f,u),r.closePath(),r.fill(),o.borderWidth>0&&r.stroke()}_updateAnimationTarget(t){let r=this.chart,i=this.$animations,o=i&&i.x,s=i&&i.y;if(o||s){let a=zp[t.position].call(this,this._active,this._eventPosition);if(!a)return;let c=this._size=mV(this,t),u=Object.assign({},a,this._size),l=vV(r,t,u),d=yV(t,u,l,r);(o._to!==d.x||s._to!==d.y)&&(this.xAlign=l.xAlign,this.yAlign=l.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){let r=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(r);let o={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;let a=Yn(r.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;r.enabled&&c&&(t.save(),t.globalAlpha=i,this.drawBackground(s,t,o,r),wD(t,r.textDirection),s.y+=a.top,this.drawTitle(s,t,r),this.drawBody(s,t,r),this.drawFooter(s,t,r),ED(t,r.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,r){let i=this._active,o=t.map(({datasetIndex:c,index:u})=>{let l=this.chart.getDatasetMeta(c);if(!l)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:l.data[u],index:u}}),s=!Rp(i,o),a=this._positionChanged(o,r);(s||a)&&(this._active=o,this._eventPosition=r,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,r,i=!0){if(r&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let o=this.options,s=this._active||[],a=this._getActiveElements(t,s,r,i),c=this._positionChanged(a,t),u=r||!Rp(a,s)||c;return u&&(this._active=a,(o.enabled||o.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,r))),u}_getActiveElements(t,r,i,o){let s=this.options;if(t.type==="mouseout")return[];if(!o)return r;let a=this.chart.getElementsAtEventForMode(t,s.mode,s,i);return s.reverse&&a.reverse(),a}_positionChanged(t,r){let{caretX:i,caretY:o,options:s}=this,a=zp[s.position].call(this,t,r);return a!==!1&&(i!==a.x||o!==a.y)}}return n})(),Doe={id:"tooltip",_element:wV,positioners:zp,afterInit(n,e,t){t&&(n.tooltip=new wV({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",xe(Q({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:QV},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Toe=Object.freeze({__proto__:null,Colors:jie,Decimation:Wie,Filler:doe,Legend:voe,SubTitle:xoe,Title:_oe,Tooltip:Doe}),Moe=(n,e,t,r)=>(typeof e=="string"?(t=n.push(e)-1,r.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function Ooe(n,e,t,r){let i=n.indexOf(e);if(i===-1)return Moe(n,e,t,r);let o=n.lastIndexOf(e);return i!==o?t:i}var Poe=(n,e)=>n===null?null:Rn(Math.round(n),0,e);function EV(n){let e=this.getLabels();return n>=0&&n<e.length?e[n]:n}var Roe=(()=>{class n extends yu{static id="category";static defaults={ticks:{callback:EV}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let r=this._addedLabels;if(r.length){let i=this.getLabels();for(let{index:o,label:s}of r)i[o]===s&&i.splice(o,1);this._addedLabels=[]}super.init(t)}parse(t,r){if(et(t))return null;let i=this.getLabels();return r=isFinite(r)&&i[r]===t?r:Ooe(i,t,Te(r,t),this._addedLabels),Poe(r,i.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:r}=this.getUserBounds(),{min:i,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),r||(o=this.getLabels().length-1)),this.min=i,this.max=o}buildTicks(){let t=this.min,r=this.max,i=this.options.offset,o=[],s=this.getLabels();s=t===0&&r===s.length-1?s:s.slice(t,r+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let a=t;a<=r;a++)o.push({value:a});return o}getLabelForValue(t){return EV.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let r=this.ticks;return t<0||t>r.length-1?null:this.getPixelForValue(r[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function Noe(n,e){let t=[],{bounds:i,step:o,min:s,max:a,precision:c,count:u,maxTicks:l,maxDigits:d,includeBounds:f}=n,h=o||1,g=l-1,{min:m,max:y}=e,x=!et(s),w=!et(a),b=!et(u),T=(y-m)/(d+1),P=JA((y-m)/g/h)*h,k,C,E,S;if(P<1e-14&&!x&&!w)return[{value:m},{value:y}];S=Math.ceil(y/P)-Math.floor(m/P),S>g&&(P=JA(S*P/g/h)*h),et(c)||(k=Math.pow(10,c),P=Math.ceil(P*k)/k),i==="ticks"?(C=Math.floor(m/P)*P,E=Math.ceil(y/P)*P):(C=m,E=y),x&&w&&o&&a6((a-s)/o,P/1e3)?(S=Math.round(Math.min((a-s)/P,l)),P=(a-s)/S,C=s,E=a):b?(C=x?s:C,E=w?a:E,S=u-1,P=(E-C)/S):(S=(E-C)/P,Id(S,Math.round(S),P/1e3)?S=Math.round(S):S=Math.ceil(S));let M=Math.max(tD(P),tD(C));k=Math.pow(10,et(c)?M:c),C=Math.round(C*k)/k,E=Math.round(E*k)/k;let R=0;for(x&&(f&&C!==s?(t.push({value:s}),C<s&&R++,Id(Math.round((C+R*P)*k)/k,s,CV(s,T,n))&&R++):C<s&&R++);R<S;++R){let N=Math.round((C+R*P)*k)/k;if(w&&N>a)break;t.push({value:N})}return w&&f&&E!==a?t.length&&Id(t[t.length-1].value,a,CV(a,T,n))?t[t.length-1].value=a:t.push({value:a}):(!w||E===a)&&t.push({value:E}),t}function CV(n,e,{horizontal:t,minRotation:r}){let i=Ei(r),o=(t?Math.sin(i):Math.cos(i))||.001,s=.75*e*(""+n).length;return Math.min(e/o,s)}var Pd=class extends yu{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return et(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:r}=this.getUserBounds(),{min:i,max:o}=this,s=c=>i=t?i:c,a=c=>o=r?o:c;if(e){let c=Qi(i),u=Qi(o);c<0&&u<0?a(0):c>0&&u>0&&s(0)}if(i===o){let c=o===0?1:Math.abs(o*.05);a(o+c),e||s(i-c)}this.min=i,this.max=o}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:r}=e,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,r=this.getTickLimit();r=Math.max(2,r);let i={maxTicks:r,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},o=this._range||this,s=Noe(i,o);return e.bounds==="ticks"&&eD(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){let e=this.ticks,t=this.min,r=this.max;if(super.configure(),this.options.offset&&e.length){let i=(r-t)/Math.max(e.length-1,1)/2;t-=i,r+=i}this._startValue=t,this._endValue=r,this._valueRange=r-t}getLabelForValue(e){return Ad(e,this.chart.options.locale,this.options.ticks.format)}},YD=class extends Pd{static id="linear";static defaults={ticks:{callback:Np.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Xt(e)?e:0,this.max=Xt(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,r=Ei(this.options.ticks.minRotation),i=(e?Math.sin(r):Math.cos(r))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,o.lineHeight/i))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},Gp=n=>Math.floor(ws(n)),vu=(n,e)=>Math.pow(10,Gp(n)+e);function bV(n){return n/Math.pow(10,Gp(n))===1}function IV(n,e,t){let r=Math.pow(10,t),i=Math.floor(n/r);return Math.ceil(e/r)-i}function koe(n,e){let t=e-n,r=Gp(t);for(;IV(n,e,r)>10;)r++;for(;IV(n,e,r)<10;)r--;return Math.min(r,Gp(n))}function Foe(n,{min:e,max:t}){e=$r(n.min,e);let r=[],i=Gp(e),o=koe(e,t),s=o<0?Math.pow(10,Math.abs(o)):1,a=Math.pow(10,o),c=i>o?Math.pow(10,i):0,u=Math.round((e-c)*s)/s,l=Math.floor((e-c)/a/10)*a*10,d=Math.floor((u-l)/Math.pow(10,o)),f=$r(n.min,Math.round((c+l+d*Math.pow(10,o))*s)/s);for(;f<t;)r.push({value:f,major:bV(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(o++,d=2,s=o>=0?1:s),f=Math.round((c+l+d*Math.pow(10,o))*s)/s;let h=$r(n.max,f);return r.push({value:h,major:bV(h),significand:d}),r}var XD=class extends yu{static id="logarithmic";static defaults={ticks:{callback:Np.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let r=Pd.prototype.parse.apply(this,[e,t]);if(r===0){this._zero=!0;return}return Xt(r)&&r>0?r:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Xt(e)?Math.max(0,e):null,this.max=Xt(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Xt(this._userMin)&&(this.min=e===vu(this.min,0)?vu(this.min,-1):vu(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),r=this.min,i=this.max,o=a=>r=e?r:a,s=a=>i=t?i:a;r===i&&(r<=0?(o(1),s(10)):(o(vu(r,-1)),s(vu(i,1)))),r<=0&&o(vu(i,-1)),i<=0&&s(vu(r,1)),this.min=r,this.max=i}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},r=Foe(t,this);return e.bounds==="ticks"&&eD(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(e){return e===void 0?"0":Ad(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=ws(e),this._valueRange=ws(this.max)-ws(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(ws(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function QD(n){let e=n.ticks;if(e.display&&n.display){let t=Yn(e.backdropPadding);return Te(e.font&&e.font.size,Ht.font.size)+t.height}return 0}function Loe(n,e,t){return t=Ft(t)?t:[t],{w:m6(n,e.string,t),h:t.length*e.lineHeight}}function SV(n,e,t,r,i){return n===r||n===i?{start:e-t/2,end:e+t/2}:n<r||n>i?{start:e-t,end:e}:{start:e,end:e+t}}function Voe(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),r=[],i=[],o=n._pointLabels.length,s=n.options.pointLabels,a=s.centerPointLabels?Lt/o:0;for(let c=0;c<o;c++){let u=s.setContext(n.getPointLabelContext(c));i[c]=u.padding;let l=n.getPointPosition(c,n.drawingArea+i[c],a),d=An(u.font),f=Loe(n.ctx,d,n._pointLabels[c]);r[c]=f;let h=zr(n.getIndexAngle(c)+a),g=Math.round(y1(h)),m=SV(g,l.x,f.w,0,180),y=SV(g,l.y,f.h,90,270);Boe(t,e,h,m,y)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=Hoe(n,r,i)}function Boe(n,e,t,r,i){let o=Math.abs(Math.sin(t)),s=Math.abs(Math.cos(t)),a=0,c=0;r.start<e.l?(a=(e.l-r.start)/o,n.l=Math.min(n.l,e.l-a)):r.end>e.r&&(a=(r.end-e.r)/o,n.r=Math.max(n.r,e.r+a)),i.start<e.t?(c=(e.t-i.start)/s,n.t=Math.min(n.t,e.t-c)):i.end>e.b&&(c=(i.end-e.b)/s,n.b=Math.max(n.b,e.b+c))}function Uoe(n,e,t){let r=n.drawingArea,{extra:i,additionalAngle:o,padding:s,size:a}=t,c=n.getPointPosition(e,r+i+s,o),u=Math.round(y1(zr(c.angle+ln))),l=Woe(c.y,a.h,u),d=zoe(u),f=$oe(c.x,a.w,d);return{visible:!0,x:c.x,y:l,textAlign:d,left:f,top:l,right:f+a.w,bottom:l+a.h}}function joe(n,e){if(!e)return!0;let{left:t,top:r,right:i,bottom:o}=n;return!(ko({x:t,y:r},e)||ko({x:t,y:o},e)||ko({x:i,y:r},e)||ko({x:i,y:o},e))}function Hoe(n,e,t){let r=[],i=n._pointLabels.length,o=n.options,{centerPointLabels:s,display:a}=o.pointLabels,c={extra:QD(o)/2,additionalAngle:s?Lt/i:0},u;for(let l=0;l<i;l++){c.padding=t[l],c.size=e[l];let d=Uoe(n,l,c);r.push(d),a==="auto"&&(d.visible=joe(d,u),d.visible&&(u=d))}return r}function zoe(n){return n===0||n===180?"center":n<180?"left":"right"}function $oe(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function Woe(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function Goe(n,e,t){let{left:r,top:i,right:o,bottom:s}=t,{backdropColor:a}=e;if(!et(a)){let c=Ma(e.borderRadius),u=Yn(e.backdropPadding);n.fillStyle=a;let l=r-u.left,d=i-u.top,f=o-r+u.width,h=s-i+u.height;Object.values(c).some(g=>g!==0)?(n.beginPath(),Dd(n,{x:l,y:d,w:f,h,radius:c}),n.fill()):n.fillRect(l,d,f,h)}}function qoe(n,e){let{ctx:t,options:{pointLabels:r}}=n;for(let i=e-1;i>=0;i--){let o=n._pointLabelItems[i];if(!o.visible)continue;let s=r.setContext(n.getPointLabelContext(i));Goe(t,s,o);let a=An(s.font),{x:c,y:u,textAlign:l}=o;Ta(t,n._pointLabels[i],c,u+a.lineHeight/2,a,{color:s.color,textAlign:l,textBaseline:"middle"})}}function ZV(n,e,t,r){let{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,e,0,Vt);else{let o=n.getPointPosition(0,e);i.moveTo(o.x,o.y);for(let s=1;s<r;s++)o=n.getPointPosition(s,e),i.lineTo(o.x,o.y)}}function Koe(n,e,t,r,i){let o=n.ctx,s=e.circular,{color:a,lineWidth:c}=e;!s&&!r||!a||!c||t<0||(o.save(),o.strokeStyle=a,o.lineWidth=c,o.setLineDash(i.dash),o.lineDashOffset=i.dashOffset,o.beginPath(),ZV(n,t,s,r),o.closePath(),o.stroke(),o.restore())}function Yoe(n,e,t){return Cs(n,{label:t,index:e,type:"pointLabel"})}var ZD=class extends Pd{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Np.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=Yn(QD(this.options)/2),t=this.width=this.maxWidth-e.width,r=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+r/2+e.top),this.drawingArea=Math.floor(Math.min(t,r)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=Xt(e)&&!isNaN(e)?e:0,this.max=Xt(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/QD(this.options))}generateTickLabels(e){Pd.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,r)=>{let i=Dt(this.options.pointLabels.callback,[t,r],this);return i||i===0?i:""}).filter((t,r)=>this.chart.getDataVisibility(r))}fit(){let e=this.options;e.display&&e.pointLabels.display?Voe(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,r,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,r,i))}getIndexAngle(e){let t=Vt/(this._pointLabels.length||1),r=this.options.startAngle||0;return zr(e*t+Ei(r))}getDistanceFromCenterForValue(e){if(et(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(et(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let r=t[e];return Yoe(this.getContext(),e,r)}}getPointPosition(e,t,r=0){let i=this.getIndexAngle(e)-ln+r;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:r,right:i,bottom:o}=this._pointLabelItems[e];return{left:t,top:r,right:i,bottom:o}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let r=this.ctx;r.save(),r.beginPath(),ZV(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),r.closePath(),r.fillStyle=e,r.fill(),r.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:r,grid:i,border:o}=t,s=this._pointLabels.length,a,c,u;if(t.pointLabels.display&&qoe(this,s),i.display&&this.ticks.forEach((l,d)=>{if(d!==0){c=this.getDistanceFromCenterForValue(l.value);let f=this.getContext(d),h=i.setContext(f),g=o.setContext(f);Koe(this,h,c,s,g)}}),r.display){for(e.save(),a=s-1;a>=0;a--){let l=r.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:f}=l;!f||!d||(e.lineWidth=f,e.strokeStyle=d,e.setLineDash(l.borderDash),e.lineDashOffset=l.borderDashOffset,c=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),u=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,r=t.ticks;if(!r.display)return;let i=this.getIndexAngle(0),o,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&!t.reverse)return;let u=r.setContext(this.getContext(c)),l=An(u.font);if(o=this.getDistanceFromCenterForValue(this.ticks[c].value),u.showLabelBackdrop){e.font=l.string,s=e.measureText(a.label).width,e.fillStyle=u.backdropColor;let d=Yn(u.backdropPadding);e.fillRect(-s/2-d.left,-o-l.size/2-d.top,s+d.width,l.size+d.height)}Ta(e,a.label,0,-o,l,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),e.restore()}drawTitle(){}},z1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Gr=Object.keys(z1);function AV(n,e){return n-e}function DV(n,e){if(et(e))return null;let t=n._adapter,{parser:r,round:i,isoWeekday:o}=n._parseOpts,s=e;return typeof r=="function"&&(s=r(s)),Xt(s)||(s=typeof r=="string"?t.parse(s,r):t.parse(s)),s===null?null:(i&&(s=i==="week"&&(pu(o)||o===!0)?t.startOf(s,"isoWeek",o):t.startOf(s,i)),+s)}function TV(n,e,t,r){let i=Gr.length;for(let o=Gr.indexOf(n);o<i-1;++o){let s=z1[Gr[o]],a=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((t-e)/(a*s.size))<=r)return Gr[o]}return Gr[i-1]}function Xoe(n,e,t,r,i){for(let o=Gr.length-1;o>=Gr.indexOf(t);o--){let s=Gr[o];if(z1[s].common&&n._adapter.diff(i,r,s)>=e-1)return s}return Gr[t?Gr.indexOf(t):0]}function Qoe(n){for(let e=Gr.indexOf(n)+1,t=Gr.length;e<t;++e)if(z1[Gr[e]].common)return Gr[e]}function MV(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:r,hi:i}=_1(t,e),o=t[r]>=e?t[r]:t[i];n[o]=!0}}function Zoe(n,e,t,r){let i=n._adapter,o=+i.startOf(e[0].value,r),s=e[e.length-1].value,a,c;for(a=o;a<=s;a=+i.add(a,1,r))c=t[a],c>=0&&(e[c].major=!0);return e}function OV(n,e,t){let r=[],i={},o=e.length,s,a;for(s=0;s<o;++s)a=e[s],i[a]=s,r.push({value:a,major:!1});return o===0||!t?r:Zoe(n,r,i,t)}var JD=(()=>{class n extends yu{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,r={}){let i=t.time||(t.time={}),o=this._adapter=new lre._date(t.adapters.date);o.init(r),Cd(i.displayFormats,o.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=r.normalized}parse(t,r){return t===void 0?null:DV(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,r=this._adapter,i=t.time.unit||"day",{min:o,max:s,minDefined:a,maxDefined:c}=this.getUserBounds();function u(l){!a&&!isNaN(l.min)&&(o=Math.min(o,l.min)),!c&&!isNaN(l.max)&&(s=Math.max(s,l.max))}(!a||!c)&&(u(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&u(this.getMinMax(!1))),o=Xt(o)&&!isNaN(o)?o:+r.startOf(Date.now(),i),s=Xt(s)&&!isNaN(s)?s:+r.endOf(Date.now(),i)+1,this.min=Math.min(o,s-1),this.max=Math.max(o+1,s)}_getLabelBounds(){let t=this.getLabelTimestamps(),r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(r=t[0],i=t[t.length-1]),{min:r,max:i}}buildTicks(){let t=this.options,r=t.time,i=t.ticks,o=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);let s=this.min,a=this.max,c=l6(o,s,a);return this._unit=r.unit||(i.autoSkip?TV(r.minUnit,this.min,this.max,this._getLabelCapacity(s)):Xoe(this,c.length,r.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Qoe(this._unit),this.initOffsets(o),t.reverse&&c.reverse(),OV(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let r=0,i=0,o,s;this.options.offset&&t.length&&(o=this.getDecimalForValue(t[0]),t.length===1?r=1-o:r=(this.getDecimalForValue(t[1])-o)/2,s=this.getDecimalForValue(t[t.length-1]),t.length===1?i=s:i=(s-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;r=Rn(r,0,a),i=Rn(i,0,a),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){let t=this._adapter,r=this.min,i=this.max,o=this.options,s=o.time,a=s.unit||TV(s.minUnit,r,i,this._getLabelCapacity(r)),c=Te(o.ticks.stepSize,1),u=a==="week"?s.isoWeekday:!1,l=pu(u)||u===!0,d={},f=r,h,g;if(l&&(f=+t.startOf(f,"isoWeek",u)),f=+t.startOf(f,l?"day":a),t.diff(i,r,a)>1e5*c)throw new Error(r+" and "+i+" are too far apart with stepSize of "+c+" "+a);let m=o.ticks.source==="data"&&this.getDataTimestamps();for(h=f,g=0;h<i;h=+t.add(h,c,a),g++)MV(d,h,m);return(h===i||o.bounds==="ticks"||g===1)&&MV(d,h,m),Object.keys(d).sort(AV).map(y=>+y)}getLabelForValue(t){let r=this._adapter,i=this.options.time;return i.tooltipFormat?r.format(t,i.tooltipFormat):r.format(t,i.displayFormats.datetime)}format(t,r){let o=this.options.time.displayFormats,s=this._unit,a=r||o[s];return this._adapter.format(t,a)}_tickFormatFunction(t,r,i,o){let s=this.options,a=s.ticks.callback;if(a)return Dt(a,[t,r,i],this);let c=s.time.displayFormats,u=this._unit,l=this._majorUnit,d=u&&c[u],f=l&&c[l],h=i[r],g=l&&f&&h&&h.major;return this._adapter.format(t,o||(g?f:d))}generateTickLabels(t){let r,i,o;for(r=0,i=t.length;r<i;++r)o=t[r],o.label=this._tickFormatFunction(o.value,r,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let r=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((r.start+i)*r.factor)}getValueForPixel(t){let r=this._offsets,i=this.getDecimalForPixel(t)/r.factor-r.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){let r=this.options.ticks,i=this.ctx.measureText(t).width,o=Ei(this.isHorizontal()?r.maxRotation:r.minRotation),s=Math.cos(o),a=Math.sin(o),c=this._resolveTickFontOptions(0).size;return{w:i*s+c*a,h:i*a+c*s}}_getLabelCapacity(t){let r=this.options.time,i=r.displayFormats,o=i[r.unit]||i.millisecond,s=this._tickFormatFunction(t,0,OV(this,[t],this._majorUnit),o),a=this._getLabelSize(s),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],r,i;if(t.length)return t;let o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(r=0,i=o.length;r<i;++r)t=t.concat(o[r].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],r,i;if(t.length)return t;let o=this.getLabels();for(r=0,i=o.length;r<i;++r)t.push(DV(this,o[r]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return iD(t.sort(AV))}}return n})();function R1(n,e,t){let r=0,i=n.length-1,o,s,a,c;t?(e>=n[r].pos&&e<=n[i].pos&&({lo:r,hi:i}=No(n,"pos",e)),{pos:o,time:a}=n[r],{pos:s,time:c}=n[i]):(e>=n[r].time&&e<=n[i].time&&({lo:r,hi:i}=No(n,"time",e)),{time:o,pos:a}=n[r],{time:s,pos:c}=n[i]);let u=s-o;return u?a+(c-a)*(e-o)/u:a}var eT=class extends JD{static id="timeseries";static defaults=JD.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=R1(t,this.min),this._tableRange=R1(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:r}=this,i=[],o=[],s,a,c,u,l;for(s=0,a=e.length;s<a;++s)u=e[s],u>=t&&u<=r&&i.push(u);if(i.length<2)return[{time:t,pos:0},{time:r,pos:1}];for(s=0,a=i.length;s<a;++s)l=i[s+1],c=i[s-1],u=i[s],Math.round((l+c)/2)!==u&&o.push({time:u,pos:s/(a-1)});return o}_generate(){let e=this.min,t=this.max,r=super.getDataTimestamps();return(!r.includes(e)||!r.length)&&r.splice(0,0,e),(!r.includes(t)||r.length===1)&&r.push(t),r.sort((i,o)=>i-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),r=this.getLabelTimestamps();return t.length&&r.length?e=this.normalize(t.concat(r)):e=t.length?t:r,e=this._cache.all=e,e}getDecimalForValue(e){return(R1(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,r=this.getDecimalForPixel(e)/t.factor-t.end;return R1(this._table,r*this._tableRange+this._minPos,!0)}},Joe=Object.freeze({__proto__:null,CategoryScale:Roe,LinearScale:YD,LogarithmicScale:XD,RadialLinearScale:ZD,TimeScale:JD,TimeSeriesScale:eT}),JV=[ure,kie,Toe,Joe];var ese=typeof global=="object"&&global&&global.Object===Object&&global,$1=ese;var tse=typeof self=="object"&&self&&self.Object===Object&&self,nse=$1||tse||Function("return this")(),Ci=nse;var rse=Ci.Symbol,Nd=rse;var e5=Object.prototype,ise=e5.hasOwnProperty,ose=e5.toString,Kp=Nd?Nd.toStringTag:void 0;function sse(n){var e=ise.call(n,Kp),t=n[Kp];try{n[Kp]=void 0;var r=!0}catch{}var i=ose.call(n);return r&&(e?n[Kp]=t:delete n[Kp]),i}var t5=sse;var ase=Object.prototype,cse=ase.toString;function use(n){return cse.call(n)}var n5=use;var lse="[object Null]",dse="[object Undefined]",r5=Nd?Nd.toStringTag:void 0;function fse(n){return n==null?n===void 0?dse:lse:r5&&r5 in Object(n)?t5(n):n5(n)}var Na=fse;function hse(n){return n!=null&&typeof n=="object"}var Uo=hse;var pse=Array.isArray,Yp=pse;function gse(n){var e=typeof n;return n!=null&&(e=="object"||e=="function")}var qr=gse;function mse(n){return n}var W1=mse;var vse="[object AsyncFunction]",yse="[object Function]",_se="[object GeneratorFunction]",xse="[object Proxy]";function wse(n){if(!qr(n))return!1;var e=Na(n);return e==yse||e==_se||e==vse||e==xse}var kd=wse;var Ese=Ci["__core-js_shared__"],G1=Ese;var i5=function(){var n=/[^.]+$/.exec(G1&&G1.keys&&G1.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function Cse(n){return!!i5&&i5 in n}var o5=Cse;var bse=Function.prototype,Ise=bse.toString;function Sse(n){if(n!=null){try{return Ise.call(n)}catch{}try{return n+""}catch{}}return""}var s5=Sse;var Ase=/[\\^$.*+?()[\]{}|]/g,Dse=/^\[object .+?Constructor\]$/,Tse=Function.prototype,Mse=Object.prototype,Ose=Tse.toString,Pse=Mse.hasOwnProperty,Rse=RegExp("^"+Ose.call(Pse).replace(Ase,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Nse(n){if(!qr(n)||o5(n))return!1;var e=kd(n)?Rse:Dse;return e.test(s5(n))}var a5=Nse;function kse(n,e){return n?.[e]}var c5=kse;function Fse(n,e){var t=c5(n,e);return a5(t)?t:void 0}var Fd=Fse;var u5=Object.create,Lse=function(){function n(){}return function(e){if(!qr(e))return{};if(u5)return u5(e);n.prototype=e;var t=new n;return n.prototype=void 0,t}}(),l5=Lse;function Vse(n,e,t){switch(t.length){case 0:return n.call(e);case 1:return n.call(e,t[0]);case 2:return n.call(e,t[0],t[1]);case 3:return n.call(e,t[0],t[1],t[2])}return n.apply(e,t)}var d5=Vse;function Bse(n,e){var t=-1,r=n.length;for(e||(e=Array(r));++t<r;)e[t]=n[t];return e}var f5=Bse;var Use=800,jse=16,Hse=Date.now;function zse(n){var e=0,t=0;return function(){var r=Hse(),i=jse-(r-t);if(t=r,i>0){if(++e>=Use)return arguments[0]}else e=0;return n.apply(void 0,arguments)}}var h5=zse;function $se(n){return function(){return n}}var p5=$se;var Wse=function(){try{var n=Fd(Object,"defineProperty");return n({},"",{}),n}catch{}}(),Ld=Wse;var Gse=Ld?function(n,e){return Ld(n,"toString",{configurable:!0,enumerable:!1,value:p5(e),writable:!0})}:W1,g5=Gse;var qse=h5(g5),m5=qse;var Kse=9007199254740991,Yse=/^(?:0|[1-9]\d*)$/;function Xse(n,e){var t=typeof n;return e=e??Kse,!!e&&(t=="number"||t!="symbol"&&Yse.test(n))&&n>-1&&n%1==0&&n<e}var q1=Xse;function Qse(n,e,t){e=="__proto__"&&Ld?Ld(n,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):n[e]=t}var Vd=Qse;function Zse(n,e){return n===e||n!==n&&e!==e}var ka=Zse;var Jse=Object.prototype,eae=Jse.hasOwnProperty;function tae(n,e,t){var r=n[e];(!(eae.call(n,e)&&ka(r,t))||t===void 0&&!(e in n))&&Vd(n,e,t)}var v5=tae;function nae(n,e,t,r){var i=!t;t||(t={});for(var o=-1,s=e.length;++o<s;){var a=e[o],c=r?r(t[a],n[a],a,t,n):void 0;c===void 0&&(c=n[a]),i?Vd(t,a,c):v5(t,a,c)}return t}var y5=nae;var _5=Math.max;function rae(n,e,t){return e=_5(e===void 0?n.length-1:e,0),function(){for(var r=arguments,i=-1,o=_5(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var a=Array(e+1);++i<e;)a[i]=r[i];return a[e]=t(s),d5(n,this,a)}}var x5=rae;function iae(n,e){return m5(x5(n,e,W1),n+"")}var w5=iae;var oae=9007199254740991;function sae(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=oae}var K1=sae;function aae(n){return n!=null&&K1(n.length)&&!kd(n)}var Bd=aae;function cae(n,e,t){if(!qr(t))return!1;var r=typeof e;return(r=="number"?Bd(t)&&q1(e,t.length):r=="string"&&e in t)?ka(t[e],n):!1}var E5=cae;function uae(n){return w5(function(e,t){var r=-1,i=t.length,o=i>1?t[i-1]:void 0,s=i>2?t[2]:void 0;for(o=n.length>3&&typeof o=="function"?(i--,o):void 0,s&&E5(t[0],t[1],s)&&(o=i<3?void 0:o,i=1),e=Object(e);++r<i;){var a=t[r];a&&n(e,a,r,o)}return e})}var C5=uae;var lae=Object.prototype;function dae(n){var e=n&&n.constructor,t=typeof e=="function"&&e.prototype||lae;return n===t}var Y1=dae;function fae(n,e){for(var t=-1,r=Array(n);++t<n;)r[t]=e(t);return r}var b5=fae;var hae="[object Arguments]";function pae(n){return Uo(n)&&Na(n)==hae}var rT=pae;var I5=Object.prototype,gae=I5.hasOwnProperty,mae=I5.propertyIsEnumerable,vae=rT(function(){return arguments}())?rT:function(n){return Uo(n)&&gae.call(n,"callee")&&!mae.call(n,"callee")},Xp=vae;function yae(){return!1}var S5=yae;var T5=typeof exports=="object"&&exports&&!exports.nodeType&&exports,A5=T5&&typeof module=="object"&&module&&!module.nodeType&&module,_ae=A5&&A5.exports===T5,D5=_ae?Ci.Buffer:void 0,xae=D5?D5.isBuffer:void 0,wae=xae||S5,X1=wae;var Eae="[object Arguments]",Cae="[object Array]",bae="[object Boolean]",Iae="[object Date]",Sae="[object Error]",Aae="[object Function]",Dae="[object Map]",Tae="[object Number]",Mae="[object Object]",Oae="[object RegExp]",Pae="[object Set]",Rae="[object String]",Nae="[object WeakMap]",kae="[object ArrayBuffer]",Fae="[object DataView]",Lae="[object Float32Array]",Vae="[object Float64Array]",Bae="[object Int8Array]",Uae="[object Int16Array]",jae="[object Int32Array]",Hae="[object Uint8Array]",zae="[object Uint8ClampedArray]",$ae="[object Uint16Array]",Wae="[object Uint32Array]",zt={};zt[Lae]=zt[Vae]=zt[Bae]=zt[Uae]=zt[jae]=zt[Hae]=zt[zae]=zt[$ae]=zt[Wae]=!0;zt[Eae]=zt[Cae]=zt[kae]=zt[bae]=zt[Fae]=zt[Iae]=zt[Sae]=zt[Aae]=zt[Dae]=zt[Tae]=zt[Mae]=zt[Oae]=zt[Pae]=zt[Rae]=zt[Nae]=!1;function Gae(n){return Uo(n)&&K1(n.length)&&!!zt[Na(n)]}var M5=Gae;function qae(n){return function(e){return n(e)}}var O5=qae;var P5=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Qp=P5&&typeof module=="object"&&module&&!module.nodeType&&module,Kae=Qp&&Qp.exports===P5,iT=Kae&&$1.process,Yae=function(){try{var n=Qp&&Qp.require&&Qp.require("util").types;return n||iT&&iT.binding&&iT.binding("util")}catch{}}(),oT=Yae;var R5=oT&&oT.isTypedArray,Xae=R5?O5(R5):M5,Q1=Xae;var Qae=Object.prototype,Zae=Qae.hasOwnProperty;function Jae(n,e){var t=Yp(n),r=!t&&Xp(n),i=!t&&!r&&X1(n),o=!t&&!r&&!i&&Q1(n),s=t||r||i||o,a=s?b5(n.length,String):[],c=a.length;for(var u in n)(e||Zae.call(n,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||o&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||q1(u,c)))&&a.push(u);return a}var N5=Jae;function ece(n,e){return function(t){return n(e(t))}}var k5=ece;function tce(n){var e=[];if(n!=null)for(var t in Object(n))e.push(t);return e}var F5=tce;var nce=Object.prototype,rce=nce.hasOwnProperty;function ice(n){if(!qr(n))return F5(n);var e=Y1(n),t=[];for(var r in n)r=="constructor"&&(e||!rce.call(n,r))||t.push(r);return t}var L5=ice;function oce(n){return Bd(n)?N5(n,!0):L5(n)}var Z1=oce;var sce=Fd(Object,"create"),Ss=sce;function ace(){this.__data__=Ss?Ss(null):{},this.size=0}var V5=ace;function cce(n){var e=this.has(n)&&delete this.__data__[n];return this.size-=e?1:0,e}var B5=cce;var uce="__lodash_hash_undefined__",lce=Object.prototype,dce=lce.hasOwnProperty;function fce(n){var e=this.__data__;if(Ss){var t=e[n];return t===uce?void 0:t}return dce.call(e,n)?e[n]:void 0}var U5=fce;var hce=Object.prototype,pce=hce.hasOwnProperty;function gce(n){var e=this.__data__;return Ss?e[n]!==void 0:pce.call(e,n)}var j5=gce;var mce="__lodash_hash_undefined__";function vce(n,e){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=Ss&&e===void 0?mce:e,this}var H5=vce;function Ud(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Ud.prototype.clear=V5;Ud.prototype.delete=B5;Ud.prototype.get=U5;Ud.prototype.has=j5;Ud.prototype.set=H5;var sT=Ud;function yce(){this.__data__=[],this.size=0}var z5=yce;function _ce(n,e){for(var t=n.length;t--;)if(ka(n[t][0],e))return t;return-1}var Fa=_ce;var xce=Array.prototype,wce=xce.splice;function Ece(n){var e=this.__data__,t=Fa(e,n);if(t<0)return!1;var r=e.length-1;return t==r?e.pop():wce.call(e,t,1),--this.size,!0}var $5=Ece;function Cce(n){var e=this.__data__,t=Fa(e,n);return t<0?void 0:e[t][1]}var W5=Cce;function bce(n){return Fa(this.__data__,n)>-1}var G5=bce;function Ice(n,e){var t=this.__data__,r=Fa(t,n);return r<0?(++this.size,t.push([n,e])):t[r][1]=e,this}var q5=Ice;function jd(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}jd.prototype.clear=z5;jd.prototype.delete=$5;jd.prototype.get=W5;jd.prototype.has=G5;jd.prototype.set=q5;var La=jd;var Sce=Fd(Ci,"Map"),J1=Sce;function Ace(){this.size=0,this.__data__={hash:new sT,map:new(J1||La),string:new sT}}var K5=Ace;function Dce(n){var e=typeof n;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?n!=="__proto__":n===null}var Y5=Dce;function Tce(n,e){var t=n.__data__;return Y5(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Va=Tce;function Mce(n){var e=Va(this,n).delete(n);return this.size-=e?1:0,e}var X5=Mce;function Oce(n){return Va(this,n).get(n)}var Q5=Oce;function Pce(n){return Va(this,n).has(n)}var Z5=Pce;function Rce(n,e){var t=Va(this,n),r=t.size;return t.set(n,e),this.size+=t.size==r?0:1,this}var J5=Rce;function Hd(n){var e=-1,t=n==null?0:n.length;for(this.clear();++e<t;){var r=n[e];this.set(r[0],r[1])}}Hd.prototype.clear=K5;Hd.prototype.delete=X5;Hd.prototype.get=Q5;Hd.prototype.has=Z5;Hd.prototype.set=J5;var eB=Hd;var Nce=k5(Object.getPrototypeOf,Object),e_=Nce;var kce="[object Object]",Fce=Function.prototype,Lce=Object.prototype,tB=Fce.toString,Vce=Lce.hasOwnProperty,Bce=tB.call(Object);function Uce(n){if(!Uo(n)||Na(n)!=kce)return!1;var e=e_(n);if(e===null)return!0;var t=Vce.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&tB.call(t)==Bce}var nB=Uce;function jce(){this.__data__=new La,this.size=0}var rB=jce;function Hce(n){var e=this.__data__,t=e.delete(n);return this.size=e.size,t}var iB=Hce;function zce(n){return this.__data__.get(n)}var oB=zce;function $ce(n){return this.__data__.has(n)}var sB=$ce;var Wce=200;function Gce(n,e){var t=this.__data__;if(t instanceof La){var r=t.__data__;if(!J1||r.length<Wce-1)return r.push([n,e]),this.size=++t.size,this;t=this.__data__=new eB(r)}return t.set(n,e),this.size=t.size,this}var aB=Gce;function zd(n){var e=this.__data__=new La(n);this.size=e.size}zd.prototype.clear=rB;zd.prototype.delete=iB;zd.prototype.get=oB;zd.prototype.has=sB;zd.prototype.set=aB;var cB=zd;var fB=typeof exports=="object"&&exports&&!exports.nodeType&&exports,uB=fB&&typeof module=="object"&&module&&!module.nodeType&&module,qce=uB&&uB.exports===fB,lB=qce?Ci.Buffer:void 0,dB=lB?lB.allocUnsafe:void 0;function Kce(n,e){if(e)return n.slice();var t=n.length,r=dB?dB(t):new n.constructor(t);return n.copy(r),r}var hB=Kce;var Yce=Ci.Uint8Array,aT=Yce;function Xce(n){var e=new n.constructor(n.byteLength);return new aT(e).set(new aT(n)),e}var pB=Xce;function Qce(n,e){var t=e?pB(n.buffer):n.buffer;return new n.constructor(t,n.byteOffset,n.length)}var gB=Qce;function Zce(n){return typeof n.constructor=="function"&&!Y1(n)?l5(e_(n)):{}}var mB=Zce;function Jce(n){return function(e,t,r){for(var i=-1,o=Object(e),s=r(e),a=s.length;a--;){var c=s[n?a:++i];if(t(o[c],c,o)===!1)break}return e}}var vB=Jce;var eue=vB(),yB=eue;function tue(n,e,t){(t!==void 0&&!ka(n[e],t)||t===void 0&&!(e in n))&&Vd(n,e,t)}var Zp=tue;function nue(n){return Uo(n)&&Bd(n)}var _B=nue;function rue(n,e){if(!(e==="constructor"&&typeof n[e]=="function")&&e!="__proto__")return n[e]}var Jp=rue;function iue(n){return y5(n,Z1(n))}var xB=iue;function oue(n,e,t,r,i,o,s){var a=Jp(n,t),c=Jp(e,t),u=s.get(c);if(u){Zp(n,t,u);return}var l=o?o(a,c,t+"",n,e,s):void 0,d=l===void 0;if(d){var f=Yp(c),h=!f&&X1(c),g=!f&&!h&&Q1(c);l=c,f||h||g?Yp(a)?l=a:_B(a)?l=f5(a):h?(d=!1,l=hB(c,!0)):g?(d=!1,l=gB(c,!0)):l=[]:nB(c)||Xp(c)?(l=a,Xp(a)?l=xB(a):(!qr(a)||kd(a))&&(l=mB(c))):d=!1}d&&(s.set(c,l),i(l,c,r,o,s),s.delete(c)),Zp(n,t,l)}var wB=oue;function EB(n,e,t,r,i){n!==e&&yB(e,function(o,s){if(i||(i=new cB),qr(o))wB(n,e,s,t,EB,r,i);else{var a=r?r(Jp(n,s),o,s+"",n,e,i):void 0;a===void 0&&(a=o),Zp(n,s,a)}},Z1)}var CB=EB;var sue=C5(function(n,e,t){CB(n,e,t)}),t_=sue;var aue=(()=>{class n{constructor(){this.colorschemesOptions=new gn(void 0)}setColorschemesOptions(t){this.pColorschemesOptions=t,this.colorschemesOptions.next(t)}getColorschemesOptions(){return this.pColorschemesOptions}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IB=(()=>{class n{constructor(t,r,i){this.zone=r,this.themeService=i,this.type="bar",this.plugins=[],this.chartClick=new $e,this.chartHover=new $e,this.subs=[],this.ctx=t.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(vm()).subscribe(o=>this.themeChanged(o)))}ngOnChanges(t){let r=["type"],i=Object.getOwnPropertyNames(t);if(i.some(o=>r.includes(o))||i.every(o=>t[o].isFirstChange()))this.render();else{let o=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,o.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,o.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,o.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(t=>t.unsubscribe())}render(){return this.chart&&this.chart.destroy(),Rd.register(...this.plugins),this.zone.runOutsideAngular(()=>this.chart=new Rd(this.ctx,this.getChartConfiguration()))}update(t){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(t))}hideDataset(t,r){this.chart&&(this.chart.getDatasetMeta(t).hidden=r,this.update())}isDatasetHidden(t){return this.chart?.getDatasetMeta(t)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(t){this.themeOverrides=t,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return t_({onHover:(t,r)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:t,active:r}))},onClick:(t,r)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:t,active:r}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions()}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}}return n.\u0275fac=function(t){return new(t||n)(z(ir),z(He),z(aue))},n.\u0275dir=Ze({type:n,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],standalone:!1,features:[di]}),n})(),cue=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]],uue={datasets:{line:{backgroundColor:n=>Ba(Ua(n.datasetIndex),.4),borderColor:n=>Ba(Ua(n.datasetIndex),1),pointBackgroundColor:n=>Ba(Ua(n.datasetIndex),1),pointBorderColor:"#fff"},bar:{backgroundColor:n=>Ba(Ua(n.datasetIndex),.6),borderColor:n=>Ba(Ua(n.datasetIndex),1)},get radar(){return this.line},doughnut:{backgroundColor:n=>Ba(Ua(n.dataIndex),.6),borderColor:"#fff"},get pie(){return this.doughnut},polarArea:{backgroundColor:n=>Ba(Ua(n.dataIndex),.6),borderColor:n=>Ba(Ua(n.dataIndex),1)},get bubble(){return this.doughnut},get scatter(){return this.doughnut},get area(){return this.polarArea}}};function Ba(n,e){return"rgba("+n.concat(e).join(",")+")"}function cT(n,e){return Math.floor(Math.random()*(e-n+1))+n}function lue(){return[cT(0,255),cT(0,255),cT(0,255)]}function Ua(n=0){return cue[n]||lue()}var bB=(()=>{class n{constructor(){this.generateColors=!0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();Rd.register(...JV);var SB=(()=>{class n{constructor(t){t?.plugins&&Rd.register(...t?.plugins);let r=t_(t?.generateColors?uue:{},t?.defaults||{});Ht.set(r)}static forRoot(t){return{ngModule:n,providers:[{provide:bB,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(ce(bB,8))},n.\u0275mod=Lr({type:n}),n.\u0275inj=kr({}),n})();var n_=class n{constructor(e){this.firestore=e}chartData={labels:["Vendas Realizadas","Faltante"],datasets:[{data:[0,0],backgroundColor:["#4CAF50","#FF5252"]}]};chartType="doughnut";totalVendas=0;metaMensal=0;ngOnInit(){return A(this,null,function*(){yield this.carregarMeta(),yield this.calcularVendasDoMes(),this.atualizarGrafico()})}carregarMeta(){return A(this,null,function*(){try{let t=np().currentUser;if(!t){console.error("Usu\xE1rio n\xE3o autenticado.");return}let r=kt(this.firestore,`usuarios/${t.uid}/configuracoes/${t.uid}`),i=yield Hr(r);this.metaMensal=i.exists()?i.data().metaMensal:1e4,this.atualizarGrafico()}catch(e){console.error("Erro ao carregar meta:",e)}})}calcularVendasDoMes(){return A(this,null,function*(){let t=np().currentUser;if(!t){console.error("Usu\xE1rio n\xE3o autenticado.");return}let r=new Date,i=new Date(r.getFullYear(),r.getMonth(),1),o=vs(this.firestore,`usuarios/${t.uid}/vendas`),s=yield L8(o);this.totalVendas=0,s.forEach(a=>{let c=a.data(),u=c.data.toDate();u>=i&&u<=r&&(this.totalVendas+=c.total)}),this.atualizarGrafico()})}atualizarGrafico(){let e=Math.max(this.metaMensal-this.totalVendas,0);this.chartData=xe(Q({},this.chartData),{datasets:[{data:[this.totalVendas,e],backgroundColor:["#4CAF50","#FF5252"]}]})}static \u0275fac=function(t){return new(t||n)(z(jt))};static \u0275cmp=it({type:n,selectors:[["app-meta-mensal"]],decls:7,vars:10,consts:[[2,"max-width","400px","margin","auto"],["baseChart","",3,"data","type"],[1,"text-center","mt-4"]],template:function(t,r){t&1&&(F(0,"div",0),dt(1,"canvas",1),F(2,"div",2)(3,"strong"),U(4),pl(5,"currency"),pl(6,"currency"),L()()()),t&2&&($(),te("data",r.chartData)("type",r.chartType),$(3),Qf(" ",Zf(5,4,r.totalVendas,"BRL")," de ",Zf(6,7,r.metaMensal,"BRL")," "))},dependencies:[Nt,aC,SB,IB],encapsulation:2})};var bi=class n{constructor(e,t){this.firestore=e;this.auth=t}getUserId(){return A(this,null,function*(){let e=this.auth.currentUser;if(!e)throw new Error("Usu\xE1rio n\xE3o autenticado");return e.uid})}getResumo(){return A(this,null,function*(){let e=yield this.getAll(),t=e.reduce((o,s)=>o+(s.quantity??0),0),r=e.reduce((o,s)=>o+(s.quantity??0)*(s.price??0),0),i=e.reduce((o,s)=>o+(s.quantity??0)*(s.cost??0),0);return{totalItens:t,totalValor:r,totalCusto:i}})}getAll(){return A(this,null,function*(){let e=yield this.getUserId(),t=vs(this.firestore,`usuarios/${e}/produtos`);return yield fm(r1(t,{idField:"id"}))})}add(e){return A(this,null,function*(){let t=yield this.getUserId(),r=vs(this.firestore,`usuarios/${t}/produtos`);yield i1(r,{name:e.name,code:e.code??"",price:e.price,cost:e.cost??0,category:e.category??"",quantity:e.quantity??0})})}getProductById(e){return A(this,null,function*(){let t=yield this.getUserId(),r=kt(this.firestore,`usuarios/${t}/produtos/${e}`);return yield fm(k8(r,{idField:"id"}))})}updateProduct(e){return A(this,null,function*(){if(!e.id)throw new Error("Produto sem ID");let t=yield this.getUserId(),r=kt(this.firestore,`usuarios/${t}/produtos/${e.id}`);yield o1(r,Q({},e))})}delete(e){return A(this,null,function*(){let t=yield this.getUserId(),r=kt(this.firestore,`usuarios/${t}/produtos/${e}`);yield F8(r)})}static \u0275fac=function(t){return new(t||n)(ce(jt),ce(_t))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var fue=(n,e)=>({alerta:n,normal:e}),hue=n=>({"estoque-baixo":n});function pue(n,e){if(n&1&&(F(0,"div",15),U(1),L()),n&2){let t=_e();te("ngClass",Zs(2,fue,t.tipoMensagem==="alerta",t.tipoMensagem==="normal")),$(),Yt(" ",t.mensagemFlutuante,`
`)}}function gue(n,e){if(n&1){let t=bn();F(0,"div",16)(1,"div",17)(2,"p"),U(3,"Tem certeza que deseja excluir este produto?"),L(),F(4,"button",18),re("click",function(){ge(t);let i=_e();return me(i.confirmarExclusao())}),U(5,"Sim"),L(),F(6,"button",19),re("click",function(){ge(t);let i=_e();return me(i.cancelarExclusao())}),U(7,"N\xE3o"),L()()()}}function mue(n,e){if(n&1){let t=bn();F(0,"tr",20)(1,"td",21),U(2),L(),F(3,"td",22),U(4),L(),F(5,"td",23),U(6),L(),F(7,"td",24),U(8),L(),F(9,"td",25)(10,"button",26),re("click",function(){let i=ge(t).$implicit,o=_e();return me(o.editarProduto(i))}),U(11,"Editar"),L(),F(12,"button",26),re("click",function(){let i=ge(t).$implicit,o=_e();return me(o.exibirConfirmacaoExcluir(i.id))}),U(13,"Excluir"),L()()()}if(n&2){let t=e.$implicit,r=_e();te("ngClass",m0(5,hue,t.quantity<=r.estoqueCritico)),$(2),rn(t.code),$(2),rn(t.name),$(2),rn(t.quantity),$(2),rn(t.price.toFixed(2))}}function vue(n,e){n&1&&(F(0,"tr",27)(1,"td",28),U(2,"Nenhum produto com estoque baixo!"),L()())}var r_=class n{constructor(e,t,r,i){this.productService=e;this.router=t;this.firestore=r;this.auth=i}resumo={totalItens:0,totalValor:0};produtos=[];produtosFiltrados=[];filtro="";nomeEmpresa="";mensagemFlutuante="";mostrarMensagem=!1;tipoMensagem="normal";idProdutoParaExcluir=null;mostrarConfirmacaoExcluir=!1;estoqueCritico=2;estoqueNotificacao=2;ngOnInit(){return A(this,null,function*(){ty(this.auth,e=>A(this,null,function*(){if(e){let t=kt(this.firestore,`usuarios/${e.uid}`),r=yield Hr(t);if(r.exists()){let o=r.data();this.nomeEmpresa=o.nomeEmpresa||"",console.log("nomeEmpresa:",this.nomeEmpresa)}yield this.carregarConfiguracoes(e.uid),yield this.atualizarDados();let i=history.state?.mensagemEstoqueBaixo;i&&(this.exibirMensagem(i,"alerta"),history.replaceState({},"",location.pathname))}}))})}carregarConfiguracoes(e){return A(this,null,function*(){try{let t=kt(this.firestore,`usuarios/${e}/configuracoes/${e}`),r=yield Hr(t);if(r.exists()){let i=r.data(),o=Number(i.estoqueCritico),s=Number(i.estoqueNotificacao);!isNaN(o)&&o>0&&(this.estoqueCritico=o),!isNaN(s)&&s>0&&(this.estoqueNotificacao=s),console.log("Configura\xE7\xF5es carregadas:",{estoqueCritico:this.estoqueCritico,estoqueNotificacao:this.estoqueNotificacao})}else console.log("Configura\xE7\xF5es do usu\xE1rio n\xE3o encontradas. Usando padr\xF5es.")}catch(t){console.error("Erro ao carregar configura\xE7\xF5es:",t)}})}atualizarDados(){return A(this,null,function*(){this.produtos=yield this.productService.getAll(),this.produtosFiltrados=this.produtos.filter(r=>(r.quantity??0)<=this.estoqueCritico);let e=yield this.productService.getResumo();this.resumo=e;let t=this.produtos.filter(r=>(r.quantity??0)<=this.estoqueNotificacao);if(t.length>0){let i=`\u26A0 Produtos com estoque baixo: ${t.map(o=>`"${o.name}"`).join(", ")}`;this.exibirMensagem(i,"alerta",3500)}})}filtrarProdutos(){let e=this.filtro.toLowerCase();this.produtosFiltrados=this.produtos.filter(t=>(t.quantity??0)<=this.estoqueCritico).filter(t=>t.name.toLowerCase().includes(e))}exibirConfirmacaoExcluir(e){this.idProdutoParaExcluir=e,this.mostrarConfirmacaoExcluir=!0}cancelarExclusao(){this.idProdutoParaExcluir=null,this.mostrarConfirmacaoExcluir=!1}confirmarExclusao(){return A(this,null,function*(){if(this.idProdutoParaExcluir!==null)try{yield this.productService.delete(this.idProdutoParaExcluir),yield this.atualizarDados(),this.filtrarProdutos(),this.exibirMensagem("Produto exclu\xEDdo com sucesso!")}catch(e){this.exibirMensagem("Erro ao excluir o produto.","alerta"),console.error("Erro ao excluir produto:",e)}this.cancelarExclusao()})}editarProduto(e){this.router.navigate(["/editar-produto",e.id])}abrirDashboard(){this.router.navigate([""])}abrirNovaCategoria(){this.router.navigate(["/nova-categoria"])}abrirCriarProduto(){this.router.navigate(["/novo-produto"])}irParaProdutos(){this.router.navigate(["/produtos"])}irParaVendas(){this.router.navigate(["/venda"])}irParaConfiguracoes(){this.router.navigate(["/configura\xE7\xF5es"])}exibirMensagem(e,t="normal",r=2500){this.mensagemFlutuante=e,this.tipoMensagem=t,this.mostrarMensagem=!0,setTimeout(()=>{this.mostrarMensagem=!1},r)}static \u0275fac=function(t){return new(t||n)(z(bi),z(ze),z(jt),z(_t))};static \u0275cmp=it({type:n,selectors:[["app-home"]],decls:56,vars:8,consts:[[1,"container"],[1,"sidebar"],[1,"logo"],[1,"link-estilo",3,"click"],[1,"main-content"],[1,"resumo"],[1,"resumo-card"],["class","mensagem-flutuante",3,"ngClass",4,"ngIf"],["class","confirmacao-flutuante-backdrop",4,"ngIf"],[1,"filtro-produto-wrapper"],[1,"filtro-produto-container"],["type","text","placeholder","Filtrar produtos...",1,"filtro-produto-input",3,"ngModelChange","ngModel"],[1,"tabela-produtos"],[3,"ngClass",4,"ngFor","ngForOf"],["class","mensagem-vazia",4,"ngIf"],[1,"mensagem-flutuante",3,"ngClass"],[1,"confirmacao-flutuante-backdrop"],[1,"confirmacao-flutuante"],[1,"btn-sim",3,"click"],[1,"btn-nao",3,"click"],[3,"ngClass"],["data-label","Code"],["data-label","Nome"],["data-label","Quantidade"],["data-label","Pre\xE7o (R$)"],["data-label","A\xE7\xF5es"],[3,"click"],[1,"mensagem-vazia"],["colspan","5"]],template:function(t,r){t&1&&(F(0,"body")(1,"div",0)(2,"aside",1)(3,"h2",2),U(4,"StockX"),L(),F(5,"nav")(6,"ul")(7,"li")(8,"button",3),re("click",function(){return r.irParaProdutos()}),U(9,"Produtos"),L()(),F(10,"li")(11,"button",3),re("click",function(){return r.abrirDashboard()}),U(12,"Dashboard"),L()(),F(13,"li")(14,"button",3),re("click",function(){return r.irParaVendas()}),U(15,"Nova Venda"),L()(),F(16,"li")(17,"button",3),re("click",function(){return r.irParaConfiguracoes()}),U(18,"Configura\xE7\xF5es"),L()()()()(),F(19,"main",4),dt(20,"app-navbar"),F(21,"h1"),U(22),L(),F(23,"div",5)(24,"div",6)(25,"h2"),U(26,"Total de Itens"),L(),F(27,"p"),U(28),L()(),F(29,"div",6)(30,"h2"),U(31,"Valor Total em Estoque"),L(),F(32,"p"),U(33),L()()(),dt(34,"app-meta-mensal"),Le(35,pue,2,5,"div",7)(36,gue,8,0,"div",8),F(37,"div",9)(38,"div",10)(39,"input",11),vt("ngModelChange",function(o){return Et(r.filtro,o)||(r.filtro=o),o}),re("ngModelChange",function(){return r.filtrarProdutos()}),L()()(),F(40,"table",12)(41,"thead")(42,"tr")(43,"th"),U(44,"Code"),L(),F(45,"th"),U(46,"Nome"),L(),F(47,"th"),U(48,"Quantidade"),L(),F(49,"th"),U(50,"Pre\xE7o (R$)"),L(),F(51,"th"),U(52,"A\xE7\xF5es"),L()()(),F(53,"tbody"),Le(54,mue,14,7,"tr",13)(55,vue,3,0,"tr",14),L()()()()()),t&2&&($(22),Yt("Bem-vindo(a) ",r.nomeEmpresa,""),$(6),rn(r.resumo.totalItens),$(5),Yt("R$ ",r.resumo.totalValor.toFixed(2),""),$(2),te("ngIf",r.mostrarMensagem),$(),te("ngIf",r.mostrarConfirmacaoExcluir),$(3),mt("ngModel",r.filtro),$(15),te("ngForOf",r.produtosFiltrados),$(),te("ngIf",r.produtosFiltrados.length===0))},dependencies:[Nt,Vi,hi,vn,sn,Wt,on,Gn,yd,n_],styles:["body[_ngcontent-%COMP%]{margin:0;font-family:Segoe UI,sans-serif;background:linear-gradient(to right,#e3f2fd,#fce4ec)}.container[_ngcontent-%COMP%]{display:flex;height:100vh;overflow:hidden}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100vh;width:260px;background-color:#1f2937;color:#fff;padding:30px 20px;box-shadow:4px 0 10px #0003;animation:_ngcontent-%COMP%_slideIn .5s ease forwards;z-index:1000}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(-100%)}to{opacity:1;transform:translate(0)}}.sidebar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin-bottom:40px;color:#60a5fa;text-align:center}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:18px 0}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#e5e7eb;font-size:18px;text-decoration:none;font-weight:600;display:block;padding:10px;border-radius:8px;transition:background-color .3s,transform .2s}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#374151;transform:scale(1.05)}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.link-estilo[_ngcontent-%COMP%]{all:unset;color:#e5e7eb;text-decoration:none;font-size:18px;font-weight:600;display:block;padding:10px;border-radius:8px;cursor:pointer;transition:background-color .3s,transform .2s;width:100%;text-align:left}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.link-estilo[_ngcontent-%COMP%]:hover{background-color:#374151;transform:scale(1.05)}.main-content[_ngcontent-%COMP%]{flex-grow:1;padding:40px 40px 40px 300px;background-color:#f9fafb;overflow-y:auto}.main-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-left:10px;font-size:36px;font-weight:700;color:#1f2937;opacity:0;transform:translateY(20px);animation:_ngcontent-%COMP%_fadeSlideUpTitle .6s ease forwards;animation-delay:.1s;margin-bottom:25px}@keyframes _ngcontent-%COMP%_fadeSlideUpTitle{to{opacity:1;transform:translateY(0)}}.resumo[_ngcontent-%COMP%]{display:flex;gap:20px;margin-top:20px;flex-wrap:wrap}.resumo-card[_ngcontent-%COMP%]{background-color:#fff;padding:25px;border-radius:12px;box-shadow:0 8px 12px #0000001f;flex:1;min-width:220px;transition:transform .3s ease,box-shadow .3s ease;opacity:0;transform:translateY(20px);animation:_ngcontent-%COMP%_fadeSlideUp .5s forwards}.resumo-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.3s}.resumo-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.5s}.resumo-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.7s}@keyframes _ngcontent-%COMP%_fadeSlideUp{to{opacity:1;transform:translateY(.1)}}.resumo-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.03);box-shadow:0 6px 18px #0000001f}.resumo-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;font-size:20px;color:#555}.resumo-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px;font-weight:700;margin:0;color:#007bff}.btn-primary[_ngcontent-%COMP%]{margin-top:45px;margin-bottom:15px;background-color:#007bff;color:#fff;border:none;padding:12px 25px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;box-shadow:0 4px 12px #007bff66;transition:background-color .3s ease,transform .2s ease,box-shadow .3s ease;animation:_ngcontent-%COMP%_fadeIn .8s ease forwards;opacity:0}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:scale(1.05)}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;border:none;padding:12px 25px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;box-shadow:0 4px 12px #6c757d66;transition:background-color .3s ease,transform .2s ease,box-shadow .3s ease;margin-left:10px}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268;transform:scale(1.05);box-shadow:0 6px 18px #5a626880}.actions[_ngcontent-%COMP%]{flex-direction:column;width:100%}@keyframes _ngcontent-%COMP%_fadeIn{to{opacity:1}}.tabela-produtos[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0 10px;font-size:16px;background-color:transparent;animation:_ngcontent-%COMP%_fadeIn 1s ease forwards;opacity:0}.tabela-produtos[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;text-align:left;font-weight:700}.tabela-produtos[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:14px 18px;border-radius:8px 8px 0 0}.tabela-produtos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 2px 6px #00000080;transition:background-color .3s ease,box-shadow .3s ease,transform .4s ease;border-radius:10px;cursor:default}.tabela-produtos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#eef4ff;transform:translateY(-4px) scale(1.02);box-shadow:0 6px 20px #00000080}.tabela-produtos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 18px;color:#000;vertical-align:middle}.tabela-produtos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-radius:8px 0 0 8px}.tabela-produtos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-radius:0 8px 8px 0}.tabela-produtos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 14px;margin-right:2px;border:none;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:background-color .3s ease,transform .15s ease}.tabela-produtos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{background-color:#17a2b8;color:#fff}.tabela-produtos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child:hover{background-color:#138496;transform:scale(1.05)}.tabela-produtos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{background-color:#dc3545;color:#fff}.tabela-produtos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child:hover{background-color:#b52b39;transform:scale(1.05)}.mensagem-flutuante[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#333;color:#fff;padding:16px 24px;border-radius:12px;box-shadow:0 4px 20px #0000004d;font-size:18px;z-index:9999;opacity:.95;animation:_ngcontent-%COMP%_fadeInOut 2.5s ease-in-out}.mensagem-flutuante.alerta[_ngcontent-%COMP%]{background:#f44336!important;margin:40px;text-align:center;top:20px;right:20px}@keyframes _ngcontent-%COMP%_fadeInOut{0%{opacity:0;transform:translate(-50%,-60%)}10%{opacity:1;transform:translate(-50%,-50%)}90%{opacity:1;transform:translate(-50%,-50%)}to{opacity:0;transform:translate(-50%,-40%)}}@keyframes _ngcontent-%COMP%_abrirConfirmacao{0%{opacity:0;transform:scale(.7)}to{opacity:1;transform:scale(1)}}.confirmacao-flutuante[_ngcontent-%COMP%]{background-color:#fff;padding:20px 30px;border-radius:12px;box-shadow:0 4px 15px #0000004d;text-align:center;max-width:320px;font-size:16px;animation:_ngcontent-%COMP%_abrirConfirmacao .4s ease forwards}.confirmacao-flutuante-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:9998;display:flex;justify-content:center;align-items:center}.confirmacao-flutuante[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px 15px;padding:8px 18px;border:none;border-radius:8px;cursor:pointer;font-weight:600;transition:background-color .3s ease;width:100px}.btn-sim[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.btn-sim[_ngcontent-%COMP%]:hover{background-color:#962b1f}.btn-nao[_ngcontent-%COMP%]{background-color:#bdc3c7;color:#000;width:100px}.btn-nao[_ngcontent-%COMP%]:hover{background-color:#a9a9a9}.mensagem-vazia[_ngcontent-%COMP%]{text-align:center;opacity:.6;font-style:italic;font-size:1.1em;height:60px}.mensagem-vazia[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:20px}.estoque-baixo[_ngcontent-%COMP%]{background-color:#d11717!important;color:#000!important;font-weight:700!important}.estoque-baixo[_ngcontent-%COMP%]:hover{background-color:#a84d4d!important;color:#000!important;font-weight:700!important}.filtro-produto-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;margin-top:20px;flex-wrap:wrap;gap:10px}.filtro-produto-input[_ngcontent-%COMP%]{margin-right:880px;padding:8px 12px;border-radius:8px;border:1px solid #ccc;width:250px}app-meta-mensal[_ngcontent-%COMP%]{display:block;max-width:100%;padding:20px;margin-left:20px;background-color:#fff;border-radius:12px;box-shadow:0 8px 16px #0000001a;margin-top:30px;animation:_ngcontent-%COMP%_fadeSlideUp .5s ease forwards}app-meta-mensal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], app-meta-mensal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-family:Segoe UI,sans-serif;color:#1f2937;font-weight:700;margin-bottom:15px;font-size:24px}app-meta-mensal[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:100%!important;height:320px!important;max-width:700px;margin:0 auto;display:block;border-radius:12px;background:#f9fafb;box-shadow:inset 0 0 8px #0000000d}app-meta-mensal[_ngcontent-%COMP%]   .chart-legend[_ngcontent-%COMP%]{margin-top:10px;display:flex;justify-content:center;flex-wrap:wrap;gap:15px;font-family:Segoe UI,sans-serif;font-size:14px;color:#555}@media (max-width: 768px){.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:10px}.btn-secondary[_ngcontent-%COMP%]{margin-left:0}.tabela-produtos[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.tabela-produtos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:block;margin-bottom:20px;box-shadow:0 2px 8px #0003}.tabela-produtos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:12px;border-bottom:1px solid #eee}.tabela-produtos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);font-weight:700;color:#333}.tabela-produtos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-radius:10px 10px 0 0}.tabela-produtos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-radius:0 0 10px 10px}.mensagem-vazia[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;padding:16px;background-color:#f8d7da;color:#721c24}.mensagem-flutuante.alerta[_ngcontent-%COMP%]{position:fixed!important;top:50px!important;left:50%!important;transform:translate(-50%)!important;margin:0!important;max-width:calc(100% - 40px);width:auto!important;box-sizing:border-box;font-size:14px;z-index:9999;text-align:center}.sidebar[_ngcontent-%COMP%]{top:auto;bottom:0;left:0;width:100%;height:60px;flex-direction:row;align-items:center;justify-content:center;padding:0}.sidebar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:none}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%;margin:0;padding:0}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.link-estilo[_ngcontent-%COMP%]{font-size:14px;padding:10px 6px;text-align:center;width:100%}.main-content[_ngcontent-%COMP%]{padding:20px 15px 80px}.filtro-produto-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;align-items:stretch;gap:12px}.filtro-produto-input[_ngcontent-%COMP%]{width:100%;box-sizing:border-box}.actions[_ngcontent-%COMP%]{flex-direction:column;width:100%}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%}app-meta-mensal[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{height:250px!important}app-meta-mensal[_ngcontent-%COMP%]{padding:15px;margin:40px}app-meta-mensal[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], app-meta-mensal[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px}}"]})};function yue(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function _ue(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var xue=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),AB=function(n){xue(e,n);function e(t,r){var i=this.constructor,o=n.call(this,t,r)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),yue(o,i.prototype),_ue(o),o}return e}(Error);var wue=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Eue=function(n){wue(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(AB),xt=Eue;var Cue=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bue=function(n){Cue(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e}(xt),$t=bue;var Iue=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Sue=function(n){Iue(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(xt),Y=Sue;var Aue=function(){function n(e){if(this.binarizer=e,e===null)throw new Y("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var o=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(o))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),tg=Aue;var Due=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Tue=function(n){Due(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(xt),tt=Tue;var Mue=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),uT=Mue;var Oue=function(){function n(){}return n.arraycopy=function(e,t,r,i,o){for(;o--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),Me=Oue;var Pue=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rue=function(n){Pue(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(xt),$d=Rue;var Nue=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kue=function(n){Nue(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}($d),lT=kue;var Fue=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lue=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var o=t;o<r;o++)e[o]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Y("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new lT(t);if(r>e)throw new lT(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var o=Fue(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=31*i+a}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,o=new Int32Array(i);return Me.arraycopy(e,t,o,0,i),o},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,o=e.length-1;i<=o;){var s=o+i>>1,a=r(t,e[s]);if(a>0)i=s+1;else if(a<0)o=s-1;else return s}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),ot=Lue;var Vue=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),le=Vue;var Bue=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);Me.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return t;o=r[i]}var a=i*32+le.numberOfTrailingZeros(o);return a>t?t:a},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=~r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return t;o=~r[i]}var a=i*32+le.numberOfTrailingZeros(o);return a>t?t:a},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Y;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,s=r;s<=i;s++){var a=s>r?0:e&31,c=s<i?31:t&31,u=(2<<c)-(1<<a);o[s]|=u}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Y;if(t===e)return!0;t--;for(var i=Math.floor(e/32),o=Math.floor(t/32),s=this.bits,a=i;a<=o;a++){var c=a>i?0:e&31,u=a<o?31:t&31,l=(2<<u)-(1<<c)&4294967295;if((s[a]&l)!==(r?l:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Y("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Y("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var o=0;o<i;o++){for(var s=0,a=0;a<8;a++)this.get(e)&&(s|=1<<7-a),e++;t[r+o]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,o=0;o<r;o++){var s=i[o];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-o]=s}if(this.size!==r*32){for(var a=r*32-this.size,c=e[0]>>>a,o=1;o<r;o++){var u=e[o];c|=u<<32-a,e[o-1]=c,c=u>>>a}e[r-1]=c}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&ot.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+ot.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)(t&7)===0&&(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n}(),Tt=Bue;var DB=function(n){return n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS",n}(DB||{}),ve=DB;var Uue=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jue=function(n){Uue(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(xt),W=jue;var Hue=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ct=function(n){return n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR",n}(Ct||{}),zue=function(){function n(e,t,r){for(var i,o,s=[],a=3;a<arguments.length;a++)s[a-3]=arguments[a];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,u=0,l=c.length;u!==l;u++){var d=c[u];n.VALUES_TO_ECI.set(d,this)}try{for(var f=Hue(s),h=f.next();!h.done;h=f.next()){var g=h.value;n.NAME_TO_ECI.set(g,this)}}catch(m){i={error:m}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new W("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new W("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new W("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(Ct.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(Ct.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(Ct.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(Ct.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(Ct.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(Ct.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(Ct.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(Ct.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(Ct.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(Ct.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(Ct.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(Ct.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(Ct.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(Ct.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(Ct.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(Ct.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(Ct.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(Ct.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(Ct.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(Ct.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(Ct.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(Ct.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(Ct.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(Ct.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(Ct.Big5,28,"Big5"),n.GB18030=new n(Ct.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(Ct.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),Mt=zue;var $ue=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wue=function(n){$ue(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(xt),_u=Wue;var Gue=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof Mt?e:Mt.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",o=0,s=e.length;o<s;o++){var a=e[o].toString(16);a.length<2&&(a="0"+a),i+="%"+a}return decodeURIComponent(i)}if(r.equals(Mt.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new _u("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(Mt.UTF8)||e.equals(Mt.ISO8859_1)||e.equals(Mt.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],o=0;o<r.length;o++)i.push(r[o].charCodeAt(0));return new Uint8Array(i)},n}(),Nn=Gue;var que=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return Nn.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(ve.CHARACTER_SET)!==void 0)return t.get(ve.CHARACTER_SET).toString();for(var r=e.length,i=!0,o=!0,s=!0,a=0,c=0,u=0,l=0,d=0,f=0,h=0,g=0,m=0,y=0,x=0,w=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,b=0;b<r&&(i||o||s);b++){var T=e[b]&255;s&&(a>0?(T&128)===0?s=!1:a--:(T&128)!==0&&((T&64)===0?s=!1:(a++,(T&32)===0?c++:(a++,(T&16)===0?u++:(a++,(T&8)===0?l++:s=!1))))),i&&(T>127&&T<160?i=!1:T>159&&(T<192||T===215||T===247)&&x++),o&&(d>0?T<64||T===127||T>252?o=!1:d--:T===128||T===160||T>239?o=!1:T>160&&T<224?(f++,g=0,h++,h>m&&(m=h)):T>127?(d++,h=0,g++,g>y&&(y=g)):(h=0,g=0))}return s&&a>0&&(s=!1),o&&d>0&&(o=!1),s&&(w||c+u+l>0)?n.UTF8:o&&(n.ASSUME_SHIFT_JIS||m>=3||y>=3)?n.SHIFT_JIS:i&&o?m===2&&f===2||x*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:o?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function o(a,c,u,l,d,f){if(a==="%%")return"%";if(t[++i]!==void 0){a=l?parseInt(l.substr(1)):void 0;var h=d?parseInt(d.substr(1)):void 0,g;switch(f){case"s":g=t[i];break;case"c":g=t[i][0];break;case"f":g=parseFloat(t[i]).toFixed(a);break;case"p":g=parseFloat(t[i]).toPrecision(a);break;case"e":g=parseFloat(t[i]).toExponential(a);break;case"x":g=parseInt(t[i]).toString(h||16);break;case"d":g=parseFloat(parseInt(t[i],h||10).toPrecision(a)).toFixed(0);break}g=typeof g=="object"?JSON.stringify(g):(+g).toString(h);for(var m=parseInt(u),y=u&&u[0]+""=="0"?"0":" ";g.length<m;)g=c!==void 0?g+y:y+g;return g}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,o)},n.getBytes=function(e,t){return Nn.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=Mt.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Mt.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Mt.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),ye=que;var Kue=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ye.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n}(),oe=Kue;var Yue=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Y("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),o=0;o<t;o++)for(var s=e[o],a=0;a<r;a++)s[a]&&i.set(a,o);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Y("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,s=0,a=-1,c=0,u=0;u<e.length;)if(e.charAt(u)===`
`||e.charAt(u)==="\r"){if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new Y("row lengths do not match");s=o,c++}u++}else if(e.substring(u,u+t.length)===t)u+=t.length,i[o]=!0,o++;else if(e.substring(u,u+r.length)===r)u+=r.length,i[o]=!1,o++;else throw new Y("illegal character encountered: "+e.substring(u));if(o>s){if(a===-1)a=o-s;else if(o-s!==a)throw new Y("row lengths do not match");c++}for(var l=new n(a,c),d=0;d<o;d++)i[d]&&l.set(Math.floor(d%a),Math.floor(d/a));return l},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Y("input matrix dimensions do not match");for(var t=new Tt(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,o=0,s=this.height;o<s;o++)for(var a=o*r,c=e.getRow(o,t).getBitArray(),u=0;u<r;u++)i[a+u]^=c[u]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Y("Left and top must be nonnegative");if(i<1||r<1)throw new Y("Height and width must be at least 1");var o=e+r,s=t+i;if(s>this.height||o>this.width)throw new Y("The region must fit inside the matrix");for(var a=this.rowSize,c=this.bits,u=t;u<s;u++)for(var l=u*a,d=e;d<o;d++)c[l+Math.floor(d/32)]|=1<<(d&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new Tt(this.width):t.clear();for(var r=this.rowSize,i=this.bits,o=e*r,s=0;s<r;s++)t.setBulk(s*32,i[o+s]);return t},n.prototype.setRow=function(e,t){Me.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new Tt(e),i=new Tt(e),o=0,s=Math.floor((t+1)/2);o<s;o++)r=this.getRow(o,r),i=this.getRow(t-1-o,i),r.reverse(),i.reverse(),this.setRow(o,i),this.setRow(t-1-o,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,o=e,s=t,a=-1,c=-1,u=0;u<t;u++)for(var l=0;l<r;l++){var d=i[u*r+l];if(d!==0){if(u<s&&(s=u),u>c&&(c=u),l*32<o){for(var f=0;(d<<31-f&4294967295)===0;)f++;l*32+f<o&&(o=l*32+f)}if(l*32+31>a){for(var f=31;!(d>>>f);)f--;l*32+f>a&&(a=l*32+f)}}}return a<o||c<s?null:Int32Array.from([o,s,a-o+1,c-s+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,o=r%e*32,s=t[r],a=0;(s<<31-a&4294967295)===0;)a++;return o+=a,Int32Array.from([o,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),o=Math.floor(r%e)*32,s=t[r],a=31;!(s>>>a);)a--;return o+=a,Int32Array.from([o,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&ot.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ot.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new oe,o=0,s=this.height;o<s;o++){for(var a=0,c=this.width;a<c;a++)i.append(this.get(a,o)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),Ot=Yue;var Xue=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Que=function(n){Xue(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(xt),V=Que;var Zue=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Jue=function(n){Zue(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),o=i.getWidth();r==null||r.getSize()<o?r=new Tt(o):r.clear(),this.initArrays(o);for(var s=i.getRow(t,this.luminances),a=this.buckets,c=0;c<o;c++)a[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var u=e.estimateBlackPoint(a);if(o<3)for(var c=0;c<o;c++)(s[c]&255)<u&&r.set(c);else for(var l=s[0]&255,d=s[1]&255,c=1;c<o-1;c++){var f=s[c+1]&255;(d*4-l-f)/2<u&&r.set(c),l=d,d=f}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),o=new Ot(r,i);this.initArrays(r);for(var s=this.buckets,a=1;a<5;a++)for(var c=Math.floor(i*a/5),u=t.getRow(c,this.luminances),l=Math.floor(r*4/5),d=Math.floor(r/5);d<l;d++){var f=u[d]&255;s[f>>e.LUMINANCE_SHIFT]++}for(var h=e.estimateBlackPoint(s),g=t.getMatrix(),a=0;a<i;a++)for(var m=a*r,d=0;d<r;d++){var f=g[m+d]&255;f<h&&o.set(d,a)}return o},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,o=0,s=0,a=0;a<r;a++)t[a]>s&&(o=a,s=t[a]),t[a]>i&&(i=t[a]);for(var c=0,u=0,a=0;a<r;a++){var l=a-o,d=t[a]*l*l;d>u&&(c=a,u=d)}if(o>c){var f=o;o=c,c=f}if(c-o<=r/16)throw new V;for(var h=c-1,g=-1,a=c-1;a>o;a--){var m=a-o,d=m*m*(c-a)*(i-t[a]);d>g&&(h=a,g=d)}return h<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(uT),dT=Jue;var ele=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tle=function(n){ele(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=t.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;(r&e.BLOCK_SIZE_MASK)!==0&&s++;var a=i>>e.BLOCK_SIZE_POWER;(i&e.BLOCK_SIZE_MASK)!==0&&a++;var c=e.calculateBlackPoints(o,s,a,r,i),u=new Ot(r,i);e.calculateThresholdForBlock(o,s,a,r,i,c,u),this.matrix=u}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,o,s,a,c){for(var u=s-e.BLOCK_SIZE,l=o-e.BLOCK_SIZE,d=0;d<i;d++){var f=d<<e.BLOCK_SIZE_POWER;f>u&&(f=u);for(var h=e.cap(d,2,i-3),g=0;g<r;g++){var m=g<<e.BLOCK_SIZE_POWER;m>l&&(m=l);for(var y=e.cap(g,2,r-3),x=0,w=-2;w<=2;w++){var b=a[h+w];x+=b[y-2]+b[y-1]+b[y]+b[y+1]+b[y+2]}var T=x/25;e.thresholdBlock(t,m,f,T,o,c)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,o,s,a){for(var c=0,u=i*s+r;c<e.BLOCK_SIZE;c++,u+=s)for(var l=0;l<e.BLOCK_SIZE;l++)(t[u+l]&255)<=o&&a.set(r+l,i+c)},e.calculateBlackPoints=function(t,r,i,o,s){for(var a=s-e.BLOCK_SIZE,c=o-e.BLOCK_SIZE,u=new Array(i),l=0;l<i;l++){u[l]=new Int32Array(r);var d=l<<e.BLOCK_SIZE_POWER;d>a&&(d=a);for(var f=0;f<r;f++){var h=f<<e.BLOCK_SIZE_POWER;h>c&&(h=c);for(var g=0,m=255,y=0,x=0,w=d*o+h;x<e.BLOCK_SIZE;x++,w+=o){for(var b=0;b<e.BLOCK_SIZE;b++){var T=t[w+b]&255;g+=T,T<m&&(m=T),T>y&&(y=T)}if(y-m>e.MIN_DYNAMIC_RANGE)for(x++,w+=o;x<e.BLOCK_SIZE;x++,w+=o)for(var b=0;b<e.BLOCK_SIZE;b++)g+=t[w+b]&255}var P=g>>e.BLOCK_SIZE_POWER*2;if(y-m<=e.MIN_DYNAMIC_RANGE&&(P=m/2,l>0&&f>0)){var k=(u[l-1][f]+2*u[l][f-1]+u[l-1][f-1])/4;m<k&&(P=k)}u[l][f]=P}}return u},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(dT),ng=tle;var nle=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new _u("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new _u("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new _u("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new oe,r=0;r<this.height;r++){for(var i=this.getRow(r,e),o=0;o<this.width;o++){var s=i[o]&255,a=void 0;s<64?a="#":s<128?a="+":s<192?a=".":a=" ",t.append(a)}t.append(`
`)}return t.toString()},n}(),Ji=nle;var rle=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ile=function(n){rle(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),o=this.getWidth(),s=0;s<o;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),o=0;o<r;o++)i[o]=255-(t[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,o){return new e(this.delegate.crop(t,r,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Ji),As=ile;var ole=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),TB=function(n){ole(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,o){o===void 0&&(o=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!o)for(var a=0,c=0,u=t.length;a<u;a+=4,c++){var l=void 0,d=t[a+3];if(d===0)l=255;else{var f=t[a],h=t[a+1],g=t[a+2];l=306*f+601*h+117*g+512>>10}s[c]=l}else for(var a=0,c=0,m=t.length;a<m;a+=4,c++){var l=void 0,d=t[a+3];if(d===0)l=255;else{var f=t[a],h=t[a+1],g=t[a+2];l=306*f+601*h+117*g+512>>10}s[c]=255-l}return s},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Y("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return n.prototype.crop.call(this,t,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),o=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,a=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(o))*s+Math.abs(Math.sin(o))*a),u=Math.ceil(Math.abs(Math.sin(o))*s+Math.abs(Math.cos(o))*a);return r.width=c,r.height=u,i.translate(c/2,u/2),i.rotate(o),i.drawImage(this.canvas,s/-2,a/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new As(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Ji);var MB=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}();var Cr=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})},br=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(l){u=[6,l],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},sle=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ii=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Cr(this,void 0,void 0,function(){var e,t,r,i,o,s,a,c,u,l,d,f;return br(this,function(h){switch(h.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),t=[];try{for(r=sle(e),i=r.next();!i.done;i=r.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(a=o.deviceId||o.id,c=o.label||"Video device "+(t.length+1),u=o.groupId,l={deviceId:a,label:c,kind:s,groupId:u},t.push(l))}catch(g){d={error:g}}finally{try{i&&!i.done&&(f=r.return)&&f.call(r)}finally{if(d)throw d.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return Cr(this,void 0,void 0,function(){var e;return br(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new MB(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return Cr(this,void 0,void 0,function(){var t;return br(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return Cr(this,void 0,void 0,function(){return br(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Cr(this,void 0,void 0,function(){var r,i;return br(this,function(o){switch(o.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,o.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Cr(this,void 0,void 0,function(){var r;return br(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Cr(this,void 0,void 0,function(){var r,i;return br(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=o.sent(),[4,this.decodeOnce(r)];case 2:return i=o.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return Cr(this,void 0,void 0,function(){return br(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Cr(this,void 0,void 0,function(){var i,o;return br(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Cr(this,void 0,void 0,function(){var i;return br(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,o.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return Cr(this,void 0,void 0,function(){var i;return br(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,o.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return Cr(this,void 0,void 0,function(){var r;return br(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return Cr(this,void 0,void 0,function(){var t;return br(this,function(r){switch(r.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new $t("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new $t("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new $t("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new $t("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new $t("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new $t("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new $t("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new $t("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new $t("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new $t("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return Cr(this,void 0,void 0,function(){return br(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return Cr(this,void 0,void 0,function(){return br(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var o=function(s,a){if(i._stopAsyncDecode){a(new V("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);s(c)}catch(f){var u=t&&f instanceof V,l=f instanceof tt||f instanceof W,d=l&&r;if(u||d)return setTimeout(o,i._timeBetweenDecodingAttempts,s,a);a(f)}};return new Promise(function(s,a){return o(s,a)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var o=r.decode(e);t(o,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){t(null,c);var s=c instanceof tt||c instanceof W,a=c instanceof V;(s||a)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){var t=this.getCaptureCanvasContext(e),r=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),r=!0):this.drawImageOnCanvas(e);var i=this.getCaptureCanvas(e),o=new TB(i,r),s=new ng(o);return new tg(s)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}();var ale=function(){function n(e,t,r,i,o,s){r===void 0&&(r=t==null?0:8*t.length),s===void 0&&(s=Me.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=o,this.timestamp=s,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=o,this.resultMetadata=null,s==null?this.timestamp=Me.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);Me.arraycopy(t,0,r,0,t.length),Me.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),nt=ale;var OB=function(n){return n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",n}(OB||{}),X=OB;var PB=function(n){return n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",n}(PB||{}),Bt=PB;var cle=function(){function n(e,t,r,i,o,s){o===void 0&&(o=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),Ds=cle;var ule=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Y;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),xu=ule;var lle=function(){function n(e,t){if(t.length===0)throw new Y;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Me.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,o=t.length;i!==o;i++){var s=t[i];r=xu.addOrSubtract(r,s)}return r}r=t[0];for(var a=t.length,c=this.field,i=1;i<a;i++)r=xu.addOrSubtract(c.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Y("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),s=r.length-t.length;Me.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=xu.addOrSubtract(t[a-s],r[a]);return new n(this.field,o)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Y("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=this.field,c=0;c<r;c++)for(var u=t[c],l=0;l<o;l++)s[c+l]=xu.addOrSubtract(s[c+l],a.multiply(u,i[l]));return new n(a,s)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),o=this.coefficients,s=0;s<t;s++)i[s]=r.multiply(o[s],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Y;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,o=new Int32Array(i+e),s=this.field,a=0;a<i;a++)o[a]=s.multiply(r[a],t);return new n(s,o)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Y("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Y("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,o=e.getCoefficient(e.getDegree()),s=t.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var a=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),s),u=e.multiplyByMonomial(a,c),l=t.buildMonomial(a,c);r=r.addOrSubtract(l),i=i.addOrSubtract(u)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),Si=lle;var dle=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),fle=function(n){dle(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(xt),rg=fle;var hle=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ple=function(n){hle(e,n);function e(t,r,i){var o=n.call(this)||this;o.primitive=t,o.size=r,o.generatorBase=i;for(var s=new Int32Array(r),a=1,c=0;c<r;c++)s[c]=a,a*=2,a>=r&&(a^=t,a&=r-1);o.expTable=s;for(var u=new Int32Array(r),c=0;c<r-1;c++)u[s[c]]=c;return o.logTable=u,o.zero=new Si(o,Int32Array.from([0])),o.one=new Si(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Y;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Si(this,i)},e.prototype.inverse=function(t){if(t===0)throw new rg;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+le.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(xu),dn=ple;var gle=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mle=function(n){gle(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(xt),Wd=mle;var vle=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yle=function(n){vle(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(xt),yn=yle;var _le=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new Si(r,e),o=new Int32Array(t),s=!0,a=0;a<t;a++){var c=i.evaluateAt(r.exp(a+r.getGeneratorBase()));o[o.length-1-a]=c,c!==0&&(s=!1)}if(!s)for(var u=new Si(r,o),l=this.runEuclideanAlgorithm(r.buildMonomial(t,1),u,t),d=l[0],f=l[1],h=this.findErrorLocations(d),g=this.findErrorMagnitudes(f,h),a=0;a<h.length;a++){var m=e.length-1-r.log(h[a]);if(m<0)throw new Wd("Bad error location");e[m]=dn.addOrSubtract(e[m],g[a])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=this.field,s=e,a=t,c=o.getZero(),u=o.getOne();a.getDegree()>=(r/2|0);){var l=s,d=c;if(s=a,c=u,s.isZero())throw new Wd("r_{i-1} was zero");a=l;for(var f=o.getZero(),h=s.getCoefficient(s.getDegree()),g=o.inverse(h);a.getDegree()>=s.getDegree()&&!a.isZero();){var m=a.getDegree()-s.getDegree(),y=o.multiply(a.getCoefficient(a.getDegree()),g);f=f.addOrSubtract(o.buildMonomial(m,y)),a=a.addOrSubtract(s.multiplyByMonomial(m,y))}if(u=f.multiply(c).addOrSubtract(d),a.getDegree()>=s.getDegree())throw new yn("Division algorithm failed to reduce polynomial?")}var x=u.getCoefficient(0);if(x===0)throw new Wd("sigmaTilde(0) was zero");var w=o.inverse(x),b=u.multiplyScalar(w),T=a.multiplyScalar(w);return[b,T]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,o=this.field,s=1;s<o.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(r[i]=o.inverse(s),i++);if(i!==t)throw new Wd("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),o=this.field,s=0;s<r;s++){for(var a=o.inverse(t[s]),c=1,u=0;u<r;u++)if(s!==u){var l=o.multiply(t[u],a),d=(l&1)===0?l|1:l&-2;c=o.multiply(c,d)}i[s]=o.multiply(e.evaluateAt(a),o.inverse(c)),o.getGeneratorBase()!==0&&(i[s]=o.multiply(i[s],a))}return i},n}(),Ts=_le;var lr=function(n){return n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY",n}(lr||{}),xle=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),o=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),a=new Ds(o,s,null,null);return a.setNumBits(i.length),a},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=lr.UPPER,i=lr.UPPER,o="",s=0;s<t;)if(i===lr.BINARY){if(t-s<5)break;var a=n.readCode(e,s,5);if(s+=5,a===0){if(t-s<11)break;a=n.readCode(e,s,11)+31,s+=11}for(var c=0;c<a;c++){if(t-s<8){s=t;break}var u=n.readCode(e,s,8);o+=ye.castAsNonUtf8Char(u),s+=8}i=r}else{var l=i===lr.DIGIT?4:5;if(t-s<l)break;var u=n.readCode(e,s,l);s+=l;var d=n.getCharacter(i,u);d.startsWith("CTRL_")?(r=i,i=n.getTable(d.charAt(5)),d.charAt(6)==="L"&&(r=i)):(o+=d,i=r)}return o},n.getTable=function(e){switch(e){case"L":return lr.LOWER;case"P":return lr.PUNCT;case"M":return lr.MIXED;case"D":return lr.DIGIT;case"B":return lr.BINARY;case"U":default:return lr.UPPER}},n.getCharacter=function(e,t){switch(e){case lr.UPPER:return n.UPPER_TABLE[t];case lr.LOWER:return n.LOWER_TABLE[t];case lr.MIXED:return n.MIXED_TABLE[t];case lr.PUNCT:return n.PUNCT_TABLE[t];case lr.DIGIT:return n.DIGIT_TABLE[t];default:throw new yn("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=dn.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=dn.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=dn.AZTEC_DATA_10):(r=12,t=dn.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/r;if(o<i)throw new W;for(var s=e.length%r,a=new Int32Array(o),c=0;c<o;c++,s+=r)a[c]=n.readCode(e,s,r);try{var u=new Ts(t);u.decode(a,o-i)}catch(y){throw new W(y)}for(var l=(1<<r)-1,d=0,c=0;c<i;c++){var f=a[c];if(f===0||f===l)throw new W;(f===1||f===l-1)&&d++}for(var h=new Array(i*r-d),g=0,c=0;c<i;c++){var f=a[c];if(f===1||f===l-1)h.fill(f>1,g,g+r-1),g+=r-1;else for(var m=r-1;m>=0;--m)h[g++]=(f&1<<m)!==0}return h},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,o=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,t));if(t)for(var a=0;a<o.length;a++)o[a]=a;else for(var c=i+1+2*le.truncDivision(le.truncDivision(i,2)-1,15),u=i/2,l=le.truncDivision(c,2),a=0;a<u;a++){var d=a+le.truncDivision(a,15);o[u-a-1]=l-d-1,o[u+a]=l+d+1}for(var a=0,f=0;a<r;a++){for(var h=(r-a)*4+(t?9:12),g=a*2,m=i-1-g,y=0;y<h;y++)for(var x=y*2,w=0;w<2;w++)s[f+x+w]=e.get(o[g+w],o[g+y]),s[f+2*h+x+w]=e.get(o[g+y],o[m-w]),s[f+4*h+x+w]=e.get(o[m-w],o[m-y]),s[f+6*h+x+w]=e.get(o[m-y],o[g+w]);f+=h*8}return s},n.readCode=function(e,t,r){for(var i=0,o=t;o<t+r;o++)i<<=1,e[o]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),i_=xle;var wle=function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var o=e-r,s=t-i;return Math.sqrt(o*o+s*s)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var o=e[r];t+=o}return t},n}(),Oe=wle;var Ele=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),ig=Ele;var Cle=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*ig.floatToIntBits(this.x)+ig.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,s,a;if(r>=t&&r>=i?(s=e[0],o=e[1],a=e[2]):i>=r&&i>=t?(s=e[1],o=e[0],a=e[2]):(s=e[2],o=e[0],a=e[1]),this.crossProductZ(o,s,a)<0){var c=o;o=a,a=c}e[0]=o,e[1]=s,e[2]=a},n.distance=function(e,t){return Oe.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,o=t.y;return(r.x-i)*(e.y-o)-(r.y-o)*(e.x-i)},n}(),Z=Cle;var ble=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),wu=ble;var Ile=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Sle=function(n){Ile(e,n);function e(t,r,i,o,s){var a=n.call(this,t,r)||this;return a.compact=i,a.nbDatablocks=o,a.nbLayers=s,a}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(wu),fT=Sle;var Ale=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=t/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,o=!1,s=!0,a=!1,c=!1,u=!1,l=!1,d=!1,f=this.width,h=this.height;s;){s=!1;for(var g=!0;(g||!c)&&t<f;)g=this.containsBlackPoint(r,i,t,!1),g?(t++,s=!0,c=!0):c||t++;if(t>=f){o=!0;break}for(var m=!0;(m||!u)&&i<h;)m=this.containsBlackPoint(e,t,i,!0),m?(i++,s=!0,u=!0):u||i++;if(i>=h){o=!0;break}for(var y=!0;(y||!l)&&e>=0;)y=this.containsBlackPoint(r,i,e,!1),y?(e--,s=!0,l=!0):l||e--;if(e<0){o=!0;break}for(var x=!0;(x||!d)&&r>=0;)x=this.containsBlackPoint(e,t,r,!0),x?(r--,s=!0,d=!0):d||r--;if(r<0){o=!0;break}s&&(a=!0)}if(!o&&a){for(var w=t-e,b=null,T=1;b===null&&T<w;T++)b=this.getBlackPointOnSegment(e,i-T,e+T,i);if(b==null)throw new V;for(var P=null,T=1;P===null&&T<w;T++)P=this.getBlackPointOnSegment(e,r+T,e+T,r);if(P==null)throw new V;for(var k=null,T=1;k===null&&T<w;T++)k=this.getBlackPointOnSegment(t,r+T,t-T,r);if(k==null)throw new V;for(var C=null,T=1;C===null&&T<w;T++)C=this.getBlackPointOnSegment(t,i-T,t-T,i);if(C==null)throw new V;return this.centerEdges(C,b,k,P)}else throw new V},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var o=Oe.round(Oe.distance(e,t,r,i)),s=(r-e)/o,a=(i-t)/o,c=this.image,u=0;u<o;u++){var l=Oe.round(e+u*s),d=Oe.round(t+u*a);if(c.get(l,d))return new Z(l,d)}return null},n.prototype.centerEdges=function(e,t,r,i){var o=e.getX(),s=e.getY(),a=t.getX(),c=t.getY(),u=r.getX(),l=r.getY(),d=i.getX(),f=i.getY(),h=n.CORR;return o<this.width/2?[new Z(d-h,f+h),new Z(a+h,c+h),new Z(u-h,l-h),new Z(o+h,s-h)]:[new Z(d+h,f+h),new Z(a+h,c-h),new Z(u-h,l+h),new Z(o-h,s-h)]},n.prototype.containsBlackPoint=function(e,t,r,i){var o=this.image;if(i){for(var s=e;s<=t;s++)if(o.get(s,r))return!0}else for(var a=e;a<=t;a++)if(o.get(r,a))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),Gd=Ale;var Dle=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),o=!0,s=0;s<t.length&&o;s+=2){var a=Math.floor(t[s]),c=Math.floor(t[s+1]);if(a<-1||a>r||c<-1||c>i)throw new V;o=!1,a===-1?(t[s]=0,o=!0):a===r&&(t[s]=r-1,o=!0),c===-1?(t[s+1]=0,o=!0):c===i&&(t[s+1]=i-1,o=!0)}o=!0;for(var s=t.length-2;s>=0&&o;s-=2){var a=Math.floor(t[s]),c=Math.floor(t[s+1]);if(a<-1||a>r||c<-1||c>i)throw new V;o=!1,a===-1?(t[s]=0,o=!0):a===r&&(t[s]=r-1,o=!0),c===-1?(t[s+1]=0,o=!0):c===i&&(t[s+1]=i-1,o=!0)}},n}(),o_=Dle;var Tle=function(){function n(e,t,r,i,o,s,a,c,u){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=o,this.a32=s,this.a13=a,this.a23=c,this.a33=u}return n.quadrilateralToQuadrilateral=function(e,t,r,i,o,s,a,c,u,l,d,f,h,g,m,y){var x=n.quadrilateralToSquare(e,t,r,i,o,s,a,c),w=n.squareToQuadrilateral(u,l,d,f,h,g,m,y);return w.times(x)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,c=this.a23,u=this.a31,l=this.a32,d=this.a33,f=0;f<t;f+=2){var h=e[f],g=e[f+1],m=o*h+c*g+d;e[f]=(r*h+s*g+u)/m,e[f+1]=(i*h+a*g+l)/m}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,o=this.a13,s=this.a21,a=this.a22,c=this.a23,u=this.a31,l=this.a32,d=this.a33,f=e.length,h=0;h<f;h++){var g=e[h],m=t[h],y=o*g+c*m+d;e[h]=(r*g+s*m+u)/y,t[h]=(i*g+a*m+l)/y}},n.squareToQuadrilateral=function(e,t,r,i,o,s,a,c){var u=e-r+o-a,l=t-i+s-c;if(u===0&&l===0)return new n(r-e,o-r,e,i-t,s-i,t,0,0,1);var d=r-o,f=a-o,h=i-s,g=c-s,m=d*g-f*h,y=(u*g-f*l)/m,x=(d*l-u*h)/m;return new n(r-e+y*r,a-e+x*a,e,i-t+y*i,c-t+x*c,t,y,x,1)},n.quadrilateralToSquare=function(e,t,r,i,o,s,a,c){return n.squareToQuadrilateral(e,t,r,i,o,s,a,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),og=Tle;var Mle=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ole=function(n){Mle(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,o,s,a,c,u,l,d,f,h,g,m,y,x,w,b,T){var P=og.quadrilateralToQuadrilateral(o,s,a,c,u,l,d,f,h,g,m,y,x,w,b,T);return this.sampleGridWithTransform(t,r,i,P)},e.prototype.sampleGridWithTransform=function(t,r,i,o){if(r<=0||i<=0)throw new V;for(var s=new Ot(r,i),a=new Float32Array(2*r),c=0;c<i;c++){for(var u=a.length,l=c+.5,d=0;d<u;d+=2)a[d]=d/2+.5,a[d+1]=l;o.transformPoints(a),o_.checkAndNudgePoints(t,a);try{for(var d=0;d<u;d+=2)t.get(Math.floor(a[d]),Math.floor(a[d+1]))&&s.set(d/2,c)}catch{throw new V}}return s},e}(o_),hT=Ole;var Ple=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new hT,n}(),Eu=Ple;var Ir=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new Z(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}();var Rle=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var o=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new fT(o,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new V;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,o=0;o<4;o++){var s=r[(this.shift+o)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var a=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(o,s,a){var c=(o>>t-2<<1)+(o&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(le.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new V},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var o=r-i,s=new Int32Array(r),a=r-1;a>=0;--a)s[a]=e&15,e>>=4;try{var c=new Ts(dn.AZTEC_PARAM);c.decode(s,o)}catch{throw new V}for(var u=0,a=0;a<i;a++)u=(u<<4)+s[a];return u},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,o=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var a=this.getFirstDifferent(t,s,1,-1),c=this.getFirstDifferent(r,s,1,1),u=this.getFirstDifferent(i,s,-1,1),l=this.getFirstDifferent(o,s,-1,-1);if(this.nbCenterLayers>2){var d=this.distancePoint(l,a)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(d<.75||d>1.25||!this.isWhiteOrBlackRectangle(a,c,u,l))break}t=a,r=c,i=u,o=l,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;var f=new Z(t.getX()+.5,t.getY()-.5),h=new Z(r.getX()+.5,r.getY()+.5),g=new Z(i.getX()-.5,i.getY()+.5),m=new Z(o.getX()-.5,o.getY()-.5);return this.expandSquare([f,h,g,m],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var o=new Gd(this.image).detect();e=o[0],t=o[1],r=o[2],i=o[3]}catch{var s=this.image.getWidth()/2,a=this.image.getHeight()/2;e=this.getFirstDifferent(new Ir(s+7,a-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Ir(s+7,a+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Ir(s-7,a+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Ir(s-7,a-7),!1,-1,-1).toResultPoint()}var c=Oe.round((e.getX()+i.getX()+t.getX()+r.getX())/4),u=Oe.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var o=new Gd(this.image,15,c,u).detect();e=o[0],t=o[1],r=o[2],i=o[3]}catch{e=this.getFirstDifferent(new Ir(c+7,u-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Ir(c+7,u+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Ir(c-7,u+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Ir(c-7,u-7),!1,-1,-1).toResultPoint()}return c=Oe.round((e.getX()+i.getX()+t.getX()+r.getX())/4),u=Oe.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new Ir(c,u)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,o){var s=Eu.getInstance(),a=this.getDimension(),c=a/2-this.nbCenterLayers,u=a/2+this.nbCenterLayers;return s.sampleGrid(e,a,a,c,c,u,c,u,u,c,u,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),o.getX(),o.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,o=this.distanceResultPoint(e,t),s=o/r,a=e.getX(),c=e.getY(),u=s*(t.getX()-e.getX())/o,l=s*(t.getY()-e.getY())/o,d=0;d<r;d++)this.image.get(Oe.round(a+d*u),Oe.round(c+d*l))&&(i|=1<<r-d-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var o=3;e=new Ir(e.getX()-o,e.getY()+o),t=new Ir(t.getX()-o,t.getY()-o),r=new Ir(r.getX()+o,r.getY()-o),i=new Ir(i.getX()+o,i.getY()+o);var s=this.getColor(i,e);if(s===0)return!1;var a=this.getColor(e,t);return a!==s||(a=this.getColor(t,r),a!==s)?!1:(a=this.getColor(r,i),a===s)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,o=(t.getY()-e.getY())/r,s=0,a=e.getX(),c=e.getY(),u=this.image.get(e.getX(),e.getY()),l=Math.ceil(r),d=0;d<l;d++)a+=i,c+=o,this.image.get(Oe.round(a),Oe.round(c))!==u&&s++;var f=s/r;return f>.1&&f<.9?0:f<=.1===u?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var o=e.getX()+r,s=e.getY()+i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=r,s+=i;for(o-=r,s-=i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=r;for(o-=r;this.isValid(o,s)&&this.image.get(o,s)===t;)s+=i;return s-=i,new Ir(o,s)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),o=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),a=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,u=new Z(a+i*o,c+i*s),l=new Z(a-i*o,c-i*s);o=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),a=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var d=new Z(a+i*o,c+i*s),f=new Z(a-i*o,c-i*s),h=[u,d,l,f];return h},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=Oe.round(e.getX()),r=Oe.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return Oe.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return Oe.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(le.truncDivision(this.nbLayers-4,8)+1)+15},n}(),pT=Rle;var Nle=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new pT(e.getBlackMatrix()),o=null,s=null;try{var a=i.detectMirror(!1);o=a.getPoints(),this.reportFoundResultPoints(t,o),s=new i_().decode(a)}catch(d){r=d}if(s==null)try{var a=i.detectMirror(!0);o=a.getPoints(),this.reportFoundResultPoints(t,o),s=new i_().decode(a)}catch(d){throw r??d}var c=new nt(s.getText(),s.getRawBytes(),s.getNumBits(),o,X.AZTEC,Me.currentTimeMillis()),u=s.getByteSegments();u!=null&&c.putMetadata(Bt.BYTE_SEGMENTS,u);var l=s.getECLevel();return l!=null&&c.putMetadata(Bt.ERROR_CORRECTION_LEVEL,l),c},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(ve.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,o,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),ja=Nle;var kle=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yke=function(n){kle(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new ja,t)||this}return e}(Ii);var Fle=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(ve.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,t),s=o.getResultMetadata(),a=270;s!==null&&s.get(Bt.ORIENTATION)===!0&&(a=a+s.get(Bt.ORIENTATION)%360),o.putMetadata(Bt.ORIENTATION,a);var c=o.getResultPoints();if(c!==null)for(var u=i.getHeight(),l=0;l<c.length;l++)c[l]=new Z(u-c[l].getY()-1,c[l].getX());return o}else throw new V}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),o=new Tt(r),s=t&&t.get(ve.TRY_HARDER)===!0,a=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var u=Math.trunc(i/2),l=0;l<c;l++){var d=Math.trunc((l+1)/2),f=(l&1)===0,h=u+a*(f?d:-d);if(h<0||h>=i)break;try{o=e.getBlackRow(h,o)}catch{continue}for(var g=function(w){if(w===1&&(o.reverse(),t&&t.get(ve.NEED_RESULT_POINT_CALLBACK)===!0)){var b=new Map;t.forEach(function(k,C){return b.set(C,k)}),b.delete(ve.NEED_RESULT_POINT_CALLBACK),t=b}try{var T=m.decodeRow(h,o,t);if(w===1){T.putMetadata(Bt.ORIENTATION,180);var P=T.getResultPoints();P!==null&&(P[0]=new Z(r-P[0].getX()-1,P[0].getY()),P[1]=new Z(r-P[1].getX()-1,P[1].getY()))}return{value:T}}catch{}},m=this,y=0;y<2;y++){var x=g(y);if(typeof x=="object")return x.value}}throw new V},n.recordPattern=function(e,t,r){for(var i=r.length,o=0;o<i;o++)r[o]=0;var s=e.getSize();if(t>=s)throw new V;for(var a=!e.get(t),c=0,u=t;u<s;){if(e.get(u)!==a)r[c]++;else{if(++c===i)break;r[c]=1,a=!a}u++}if(!(c===i||c===i-1&&u===s))throw new V},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,o=e.get(t);t>0&&i>=0;)e.get(--t)!==o&&(i--,o=!o);if(i>=0)throw new V;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=t[a];if(o<s)return Number.POSITIVE_INFINITY;var c=o/s;r*=c;for(var u=0,l=0;l<i;l++){var d=e[l],f=t[l]*c,h=d>f?d-f:f-d;if(h>r)return Number.POSITIVE_INFINITY;u+=h}return u/o},n}(),pt=Fle;var Lle=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vle=function(n){Lle(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),o=0,s=Int32Array.from([0,0,0,0,0,0]),a=i,c=!1,u=6,l=i;l<r;l++)if(t.get(l)!==c)s[o]++;else{if(o===u-1){for(var d=e.MAX_AVG_VARIANCE,f=-1,h=e.CODE_START_A;h<=e.CODE_START_C;h++){var g=pt.patternMatchVariance(s,e.CODE_PATTERNS[h],e.MAX_INDIVIDUAL_VARIANCE);g<d&&(d=g,f=h)}if(f>=0&&t.isRange(Math.max(0,a-(l-a)/2),a,!1))return Int32Array.from([a,l,f]);a+=s[0]+s[1],s=s.slice(2,s.length),s[o-1]=0,s[o]=0,o--}else o++;s[o]=1,c=!c}throw new V},e.decodeCode=function(t,r,i){pt.recordPattern(t,i,r);for(var o=e.MAX_AVG_VARIANCE,s=-1,a=0;a<e.CODE_PATTERNS.length;a++){var c=e.CODE_PATTERNS[a],u=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);u<o&&(o=u,s=a)}if(s>=0)return s;throw new V},e.prototype.decodeRow=function(t,r,i){var o=i&&i.get(ve.ASSUME_GS1)===!0,s=e.findStartPattern(r),a=s[2],c=0,u=new Uint8Array(20);u[c++]=a;var l;switch(a){case e.CODE_START_A:l=e.CODE_CODE_A;break;case e.CODE_START_B:l=e.CODE_CODE_B;break;case e.CODE_START_C:l=e.CODE_CODE_C;break;default:throw new W}for(var d=!1,f=!1,h="",g=s[0],m=s[1],y=Int32Array.from([0,0,0,0,0,0]),x=0,w=0,b=a,T=0,P=!0,k=!1,C=!1;!d;){var E=f;switch(f=!1,x=w,w=e.decodeCode(r,y,m),u[c++]=w,w!==e.CODE_STOP&&(P=!0),w!==e.CODE_STOP&&(T++,b+=T*w),g=m,m+=y.reduce(function(st,hn){return st+hn},0),w){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new W}switch(l){case e.CODE_CODE_A:if(w<64)C===k?h+=String.fromCharCode(32+w):h+=String.fromCharCode(32+w+128),C=!1;else if(w<96)C===k?h+=String.fromCharCode(w-64):h+=String.fromCharCode(w+64),C=!1;else switch(w!==e.CODE_STOP&&(P=!1),w){case e.CODE_FNC_1:o&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!k&&C?(k=!0,C=!1):k&&C?(k=!1,C=!1):C=!0;break;case e.CODE_SHIFT:f=!0,l=e.CODE_CODE_B;break;case e.CODE_CODE_B:l=e.CODE_CODE_B;break;case e.CODE_CODE_C:l=e.CODE_CODE_C;break;case e.CODE_STOP:d=!0;break}break;case e.CODE_CODE_B:if(w<96)C===k?h+=String.fromCharCode(32+w):h+=String.fromCharCode(32+w+128),C=!1;else switch(w!==e.CODE_STOP&&(P=!1),w){case e.CODE_FNC_1:o&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!k&&C?(k=!0,C=!1):k&&C?(k=!1,C=!1):C=!0;break;case e.CODE_SHIFT:f=!0,l=e.CODE_CODE_A;break;case e.CODE_CODE_A:l=e.CODE_CODE_A;break;case e.CODE_CODE_C:l=e.CODE_CODE_C;break;case e.CODE_STOP:d=!0;break}break;case e.CODE_CODE_C:if(w<100)w<10&&(h+="0"),h+=w;else switch(w!==e.CODE_STOP&&(P=!1),w){case e.CODE_FNC_1:o&&(h.length===0?h+="]C1":h+="");break;case e.CODE_CODE_A:l=e.CODE_CODE_A;break;case e.CODE_CODE_B:l=e.CODE_CODE_B;break;case e.CODE_STOP:d=!0;break}break}E&&(l=l===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var S=m-g;if(m=r.getNextUnset(m),!r.isRange(m,Math.min(r.getSize(),m+(m-g)/2),!1))throw new V;if(b-=T*x,b%103!==x)throw new tt;var M=h.length;if(M===0)throw new V;M>0&&P&&(l===e.CODE_CODE_C?h=h.substring(0,M-2):h=h.substring(0,M-1));for(var R=(s[1]+s[0])/2,N=g+S/2,O=u.length,qe=new Uint8Array(O),Ie=0;Ie<O;Ie++)qe[Ie]=u[Ie];var lt=[new Z(R,t),new Z(N,t)];return new nt(h,qe,0,lt,X.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(pt),s_=Vle;var Ble=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ule=function(n){Ble(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var o,s,a,c,u=this.counters;u.fill(0),this.decodeRowResult="";var l=e.findAsteriskPattern(r,u),d=r.getNextSet(l[1]),f=r.getSize(),h,g;do{e.recordPattern(r,d,u);var m=e.toNarrowWidePattern(u);if(m<0)throw new V;h=e.patternToChar(m),this.decodeRowResult+=h,g=d;try{for(var y=(o=void 0,gT(u)),x=y.next();!x.done;x=y.next()){var w=x.value;d+=w}}catch(O){o={error:O}}finally{try{x&&!x.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}d=r.getNextSet(d)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var T=gT(u),P=T.next();!P.done;P=T.next()){var w=P.value;b+=w}}catch(O){a={error:O}}finally{try{P&&!P.done&&(c=T.return)&&c.call(T)}finally{if(a)throw a.error}}var k=d-g-b;if(d!==f&&k*2<b)throw new V;if(this.usingCheckDigit){for(var C=this.decodeRowResult.length-1,E=0,S=0;S<C;S++)E+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(S));if(this.decodeRowResult.charAt(C)!==e.ALPHABET_STRING.charAt(E%43))throw new tt;this.decodeRowResult=this.decodeRowResult.substring(0,C)}if(this.decodeRowResult.length===0)throw new V;var M;this.extendedMode?M=e.decodeExtended(this.decodeRowResult):M=this.decodeRowResult;var R=(l[1]+l[0])/2,N=g+b/2;return new nt(M,null,0,[new Z(R,t),new Z(N,t)],X.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),o=t.getNextSet(0),s=0,a=o,c=!1,u=r.length,l=o;l<i;l++)if(t.get(l)!==c)r[s]++;else{if(s===u-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,a-Math.floor((l-a)/2)),a,!1))return[a,l];a+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,c=!c}throw new V},e.toNarrowWidePattern=function(t){var r,i,o=t.length,s=0,a;do{var c=2147483647;try{for(var u=(r=void 0,gT(t)),l=u.next();!l.done;l=u.next()){var d=l.value;d<c&&d>s&&(c=d)}}catch(m){r={error:m}}finally{try{l&&!l.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}s=c,a=0;for(var f=0,h=0,g=0;g<o;g++){var d=t[g];d>s&&(h|=1<<o-1-g,a++,f+=d)}if(a===3){for(var g=0;g<o&&a>0;g++){var d=t[g];if(d>s&&(a--,d*2>=f))return-1}return h}}while(a>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new V},e.decodeExtended=function(t){for(var r=t.length,i="",o=0;o<r;o++){var s=t.charAt(o);if(s==="+"||s==="$"||s==="%"||s==="/"){var a=t.charAt(o+1),c="\0";switch(s){case"+":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)+32);else throw new W;break;case"$":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)-64);else throw new W;break;case"%":if(a>="A"&&a<="E")c=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")c=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")c=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")c="\0";else if(a==="V")c="@";else if(a==="W")c="`";else if(a==="X"||a==="Y"||a==="Z")c="\x7F";else throw new W;break;case"/":if(a>="A"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")c=":";else throw new W;break}i+=c,o++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(pt),a_=Ule;var jle=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hle=function(n){jle(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var o,s,a,c,u=this.findAsteriskPattern(r),l=r.getNextSet(u[1]),d=r.getSize(),f=this.counters;f.fill(0),this.decodeRowResult="";var h,g;do{e.recordPattern(r,l,f);var m=this.toPattern(f);if(m<0)throw new V;h=this.patternToChar(m),this.decodeRowResult+=h,g=l;try{for(var y=(o=void 0,mT(f)),x=y.next();!x.done;x=y.next()){var w=x.value;l+=w}}catch(S){o={error:S}}finally{try{x&&!x.done&&(s=y.return)&&s.call(y)}finally{if(o)throw o.error}}l=r.getNextSet(l)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var b=0;try{for(var T=mT(f),P=T.next();!P.done;P=T.next()){var w=P.value;b+=w}}catch(S){a={error:S}}finally{try{P&&!P.done&&(c=T.return)&&c.call(T)}finally{if(a)throw a.error}}if(l===d||!r.get(l))throw new V;if(this.decodeRowResult.length<2)throw new V;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var k=this.decodeExtended(this.decodeRowResult),C=(u[1]+u[0])/2,E=g+b/2;return new nt(k,null,0,[new Z(C,t),new Z(E,t)],X.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var o=this.counters,s=i,a=!1,c=o.length,u=0,l=i;l<r;l++)if(t.get(l)!==a)o[u]++;else{if(u===c-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([s,l]);s+=o[0]+o[1],o.copyWithin(0,2,2+u-1),o[u-1]=0,o[u]=0,u--}else u++;o[u]=1,a=!a}throw new V},e.prototype.toPattern=function(t){var r,i,o=0;try{for(var s=mT(t),a=s.next();!a.done;a=s.next()){var c=a.value;o+=c}}catch(g){r={error:g}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var u=0,l=t.length,d=0;d<l;d++){var f=Math.round(t[d]*9/o);if(f<1||f>4)return-1;if((d&1)===0)for(var h=0;h<f;h++)u=u<<1|1;else u<<=f}return u},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new V},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",o=0;o<r;o++){var s=t.charAt(o);if(s>="a"&&s<="d"){if(o>=r-1)throw new W;var a=t.charAt(o+1),c="\0";switch(s){case"d":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)+32);else throw new W;break;case"a":if(a>="A"&&a<="Z")c=String.fromCharCode(a.charCodeAt(0)-64);else throw new W;break;case"b":if(a>="A"&&a<="E")c=String.fromCharCode(a.charCodeAt(0)-38);else if(a>="F"&&a<="J")c=String.fromCharCode(a.charCodeAt(0)-11);else if(a>="K"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)+16);else if(a>="P"&&a<="T")c=String.fromCharCode(a.charCodeAt(0)+43);else if(a==="U")c="\0";else if(a==="V")c="@";else if(a==="W")c="`";else if(a>="X"&&a<="Z")c="\x7F";else throw new W;break;case"c":if(a>="A"&&a<="O")c=String.fromCharCode(a.charCodeAt(0)-32);else if(a==="Z")c=":";else throw new W;break}i+=c,o++}else i+=s}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var o=1,s=0,a=r-1;a>=0;a--)s+=o*e.ALPHABET_STRING.indexOf(t.charAt(a)),++o>i&&(o=1);if(t.charAt(r)!==e.ALPHABET_STRING[s%47])throw new tt},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(pt),c_=Hle;var zle=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$le=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Wle=function(n){zle(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var o,s,a=this.decodeStart(r),c=this.decodeEnd(r),u=new oe;e.decodeMiddle(r,a[1],c[0],u);var l=u.toString(),d=null;i!=null&&(d=i.get(ve.ALLOWED_LENGTHS)),d==null&&(d=e.DEFAULT_ALLOWED_LENGTHS);var f=l.length,h=!1,g=0;try{for(var m=$le(d),y=m.next();!y.done;y=m.next()){var x=y.value;if(f===x){h=!0;break}x>g&&(g=x)}}catch(T){o={error:T}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}if(!h&&f>g&&(h=!0),!h)throw new W;var w=[new Z(a[1],t),new Z(c[0],t)],b=new nt(l,null,0,w,X.ITF,new Date().getTime());return b},e.decodeMiddle=function(t,r,i,o){var s=new Int32Array(10),a=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),a.fill(0),c.fill(0);r<i;){pt.recordPattern(t,r,s);for(var u=0;u<5;u++){var l=2*u;a[u]=s[l],c[u]=s[l+1]}var d=e.decodeDigit(a);o.append(d.toString()),d=this.decodeDigit(c),o.append(d.toString()),s.forEach(function(f){r+=f})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var o=r-1;i>0&&o>=0&&!t.get(o);o--)i--;if(i!==0)throw new V},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new V;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof V&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var o=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-o,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var o=i.length,s=new Int32Array(o),a=t.getSize(),c=!1,u=0,l=r;s.fill(0);for(var d=r;d<a;d++)if(t.get(d)!==c)s[u]++;else{if(u===o-1){if(pt.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[l,d];l+=s[0]+s[1],Me.arraycopy(s,2,s,0,u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,c=!c}throw new V},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,s=0;s<o;s++){var a=e.PATTERNS[s],c=pt.patternMatchVariance(t,a,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=s):c===r&&(i=-1)}if(i>=0)return i%10;throw new V},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(pt),u_=Wle;var Gle=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),qle=function(n){Gle(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,o=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,o,!1,this.START_END_PATTERN,s);var a=i[0];o=i[1];var c=a-(o-a);c>=0&&(r=t.isRange(c,a,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new W;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new W;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,o){return this.findGuardPattern(t,r,i,o,new Int32Array(o.length))},e.findGuardPattern=function(t,r,i,o,s){var a=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var c=0,u=r,l=o.length,d=i,f=r;f<a;f++)if(t.get(f)!==d)s[c]++;else{if(c===l-1){if(pt.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([u,f]);u+=s[0]+s[1];for(var h=s.slice(2,s.length),g=0;g<c-1;g++)s[g]=h[g];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,d=!d}throw new V},e.decodeDigit=function(t,r,i,o){this.recordPattern(t,i,r);for(var s=this.MAX_AVG_VARIANCE,a=-1,c=o.length,u=0;u<c;u++){var l=o[u],d=pt.patternMatchVariance(r,l,e.MAX_INDIVIDUAL_VARIANCE);d<s&&(s=d,a=u)}if(a>=0)return a;throw new V},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(pt),jo=qle;var Kle=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yle=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),s=i.toString(),a=n.parseExtensionString(s),c=[new Z((r[0]+r[1])/2,e),new Z(o,e)],u=new nt(s,null,0,c,X.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&u.putAllMetadata(a),u},n.prototype.decodeMiddle=function(e,t,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),c=t[1],u=0,l=0;l<5&&c<a;l++){var d=jo.decodeDigit(e,s,c,jo.L_AND_G_PATTERNS);r+=String.fromCharCode(48+d%10);try{for(var f=(i=void 0,Kle(s)),h=f.next();!h.done;h=f.next()){var g=h.value;c+=g}}catch(y){i={error:y}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}d>=10&&(u|=1<<4-l),l!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new V;var m=this.determineCheckDigit(u);if(n.extensionChecksum(r.toString())!==m)throw new V;return c},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new V},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[Bt.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="\xA3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),o=r%100,s=o<10?"0"+o:o.toString();return t+i+"."+s},n}(),RB=Yle;var Xle=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qle=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),s=i.toString(),a=n.parseExtensionString(s),c=[new Z((r[0]+r[1])/2,e),new Z(o,e)],u=new nt(s,null,0,c,X.UPC_EAN_EXTENSION,new Date().getTime());return a!=null&&u.putAllMetadata(a),u},n.prototype.decodeMiddle=function(e,t,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var a=e.getSize(),c=t[1],u=0,l=0;l<2&&c<a;l++){var d=jo.decodeDigit(e,s,c,jo.L_AND_G_PATTERNS);r+=String.fromCharCode(48+d%10);try{for(var f=(i=void 0,Xle(s)),h=f.next();!h.done;h=f.next()){var g=h.value;c+=g}}catch(m){i={error:m}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}d>=10&&(u|=1<<1-l),l!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new V;if(parseInt(r.toString())%4!==u)throw new V;return c},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[Bt.ISSUE_NUMBER,parseInt(e)]])},n}(),NB=Qle;var Zle=function(){function n(){}return n.decodeRow=function(e,t,r){var i=jo.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new RB;return o.decodeRow(e,t,i)}catch{var s=new NB;return s.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),kB=Zle;var Jle=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ede=function(n){Jle(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(a){return Int32Array.from(a)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],o=new Int32Array(i.length),s=0;s<i.length;s++)o[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=o}return t}return e.prototype.decodeRow=function(t,r,i){var o=e.findStartGuardPattern(r),s=i==null?null:i.get(ve.NEED_RESULT_POINT_CALLBACK);if(s!=null){var a=new Z((o[0]+o[1])/2,t);s.foundPossibleResultPoint(a)}var c=this.decodeMiddle(r,o,this.decodeRowStringBuffer),u=c.rowOffset,l=c.resultString;if(s!=null){var d=new Z(u,t);s.foundPossibleResultPoint(d)}var f=e.decodeEnd(r,u);if(s!=null){var h=new Z((f[0]+f[1])/2,t);s.foundPossibleResultPoint(h)}var g=f[1],m=g+(g-f[0]);if(m>=r.getSize()||!r.isRange(g,m,!1))throw new V;var y=l.toString();if(y.length<8)throw new W;if(!e.checkChecksum(y))throw new tt;var x=(o[1]+o[0])/2,w=(f[1]+f[0])/2,b=this.getBarcodeFormat(),T=[new Z(x,t),new Z(w,t)],P=new nt(y,null,0,T,b,new Date().getTime()),k=0;try{var C=kB.decodeRow(t,r,f[1]);P.putMetadata(Bt.UPC_EAN_EXTENSION,C.getText()),P.putAllMetadata(C.getResultMetadata()),P.addResultPoints(C.getResultPoints()),k=C.getText().length}catch{}var E=i==null?null:i.get(ve.ALLOWED_EAN_EXTENSIONS);if(E!=null){var S=!1;for(var M in E)if(k.toString()===M){S=!0;break}if(!S)throw new V}return b===X.EAN_13||X.UPC_A,P},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new W;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new W;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(jo),Qt=ede;var tde=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),FB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nde=function(n){tde(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,a,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var l=t.getSize(),d=r[1],f=0,h=0;h<6&&d<l;h++){var g=Qt.decodeDigit(t,u,d,Qt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+g%10);try{for(var m=(o=void 0,FB(u)),y=m.next();!y.done;y=m.next()){var x=y.value;d+=x}}catch(P){o={error:P}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}g>=10&&(f|=1<<5-h)}i=e.determineFirstDigit(i,f);var w=Qt.findGuardPattern(t,d,!0,Qt.MIDDLE_PATTERN,new Int32Array(Qt.MIDDLE_PATTERN.length).fill(0));d=w[1];for(var h=0;h<6&&d<l;h++){var g=Qt.decodeDigit(t,u,d,Qt.L_PATTERNS);i+=String.fromCharCode(48+g);try{for(var b=(a=void 0,FB(u)),T=b.next();!T.done;T=b.next()){var x=T.value;d+=x}}catch(C){a={error:C}}finally{try{T&&!T.done&&(c=b.return)&&c.call(b)}finally{if(a)throw a.error}}}return{rowOffset:d,resultString:i}},e.prototype.getBarcodeFormat=function(){return X.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new V},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Qt),qd=nde;var rde=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),LB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ide=function(n){rde(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,a,c,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var l=t.getSize(),d=r[1],f=0;f<4&&d<l;f++){var h=Qt.decodeDigit(t,u,d,Qt.L_PATTERNS);i+=String.fromCharCode(48+h);try{for(var g=(o=void 0,LB(u)),m=g.next();!m.done;m=g.next()){var y=m.value;d+=y}}catch(T){o={error:T}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(o)throw o.error}}}var x=Qt.findGuardPattern(t,d,!0,Qt.MIDDLE_PATTERN,new Int32Array(Qt.MIDDLE_PATTERN.length).fill(0));d=x[1];for(var f=0;f<4&&d<l;f++){var h=Qt.decodeDigit(t,u,d,Qt.L_PATTERNS);i+=String.fromCharCode(48+h);try{for(var w=(a=void 0,LB(u)),b=w.next();!b.done;b=w.next()){var y=b.value;d+=y}}catch(k){a={error:k}}finally{try{b&&!b.done&&(c=w.return)&&c.call(w)}finally{if(a)throw a.error}}}return{rowOffset:d,resultString:i}},e.prototype.getBarcodeFormat=function(){return X.EAN_8},e}(Qt),vT=ide;var ode=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sde=function(n){ode(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new qd,t}return e.prototype.getBarcodeFormat=function(){return X.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new nt(r.substring(1),null,null,t.getResultPoints(),X.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new V},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Qt),yT=sde;var ade=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cde=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ude=function(n){ade(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,a=this.decodeMiddleCounters.map(function(y){return y});a[0]=0,a[1]=0,a[2]=0,a[3]=0;for(var c=t.getSize(),u=r[1],l=0,d=0;d<6&&u<c;d++){var f=e.decodeDigit(t,a,u,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+f%10);try{for(var h=(o=void 0,cde(a)),g=h.next();!g.done;g=h.next()){var m=g.value;u+=m}}catch(y){o={error:y}}finally{try{g&&!g.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}f>=10&&(l|=1<<5-d)}return e.determineNumSysAndCheckDigit(new oe(i),l),u},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Qt.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){t.insert(0,"0"+i),t.append("0"+o);return}throw V.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return X.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new oe;i.append(t.charAt(0));var o=r[5];switch(o){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(o),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(o);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Qt),_T=ude;var lde=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),VB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dde=function(n){lde(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(ve.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(X.EAN_13)>-1&&o.push(new qd),i.indexOf(X.UPC_A)>-1&&o.push(new yT),i.indexOf(X.EAN_8)>-1&&o.push(new vT),i.indexOf(X.UPC_E)>-1&&o.push(new _T)),o.length===0&&(o.push(new qd),o.push(new yT),o.push(new vT),o.push(new _T)),r.readers=o,r}return e.prototype.decodeRow=function(t,r,i){var o,s;try{for(var a=VB(this.readers),c=a.next();!c.done;c=a.next()){var u=c.value;try{var l=u.decodeRow(t,r,i),d=l.getBarcodeFormat()===X.EAN_13&&l.getText().charAt(0)==="0",f=i==null?null:i.get(ve.POSSIBLE_FORMATS),h=f==null||f.includes(X.UPC_A);if(d&&h){var g=l.getRawBytes(),m=new nt(l.getText().substring(1),g,g?g.length:null,l.getResultPoints(),X.UPC_A);return m.putAllMetadata(l.getResultMetadata()),m}return l}catch{}}}catch(y){o={error:y}}finally{try{c&&!c.done&&(s=a.return)&&s.call(a)}finally{if(o)throw o.error}}throw new V},e.prototype.reset=function(){var t,r;try{for(var i=VB(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;s.reset()}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(pt),l_=dde;var fde=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hde=function(n){fde(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var o=this.getValidRowData(r);if(!o)throw new V;var s=this.codaBarDecodeRow(o.row);if(!s)throw new V;return new nt(s,null,0,[new Z(o.left,t),new Z(o.right,t)],X.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var o=r.lastIndexOf(!0);if(o<=i)return null;r=r.slice(i,o+1);for(var s=[],a=r[0],c=1,u=1;u<r.length;u++)r[u]===a?c++:(a=r[u],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:o}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(c,u){return(c+u)/2},0));t.length>0;){var o=t.splice(0,8).splice(0,7),s=o.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var a=r.join("");return this.validCodaBarString(a)?a:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e}(pt),xT=hde;var pde=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),gde=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mde=function(n){pde(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(pt.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new V},e.count=function(t){return Oe.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,o=r[0],s=1;s<t.length;s++)r[s]>o&&(o=r[s],i=s);t[i]++},e.decrement=function(t,r){for(var i=0,o=r[0],s=1;s<t.length;s++)r[s]<o&&(o=r[s],i=s);t[i]--},e.isFinderPattern=function(t){var r,i,o=t[0]+t[1],s=o+t[2]+t[3],a=o/s;if(a>=e.MIN_FINDER_PATTERN_RATIO&&a<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,u=Number.MIN_SAFE_INTEGER;try{for(var l=gde(t),d=l.next();!d.done;d=l.next()){var f=d.value;f>u&&(u=f),f<c&&(c=f)}}catch(h){r={error:h}}finally{try{d&&!d.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return u<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(pt),Ms=mde;var vde=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),Cu=vde;var yde=function(){function n(e,t,r,i,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new Z(r,o)),this.resultPoints.push(new Z(i,o))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),d_=yde;var _de=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xde=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,o,s=0;try{for(var a=_de(e),c=a.next();!c.done;c=a.next()){var u=c.value;s+=u}}catch(w){i={error:w}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}for(var l=0,d=0,f=e.length,h=0;h<f-1;h++){var g=void 0;for(g=1,d|=1<<h;g<e[h];g++,d&=~(1<<h)){var m=n.combins(s-g-1,f-h-2);if(r&&d===0&&s-g-(f-h-1)>=f-h-1&&(m-=n.combins(s-g-(f-h),f-h-2)),f-h-1>1){for(var y=0,x=s-g-(f-h-2);x>t;x--)y+=n.combins(s-g-x-1,f-h-3);m-=y*(f-1-h)}else s-g>t&&m--;l+=m}s-=g}return l},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var o=1,s=1,a=e;a>r;a--)o*=a,s<=i&&(o/=s,s++);for(;s<=i;)o/=s,s++;return o},n}(),Ha=xde;var wde=function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new Tt(r),o=0,s=e[0],a=s.getRightChar().getValue(),c=11;c>=0;--c)(a&1<<c)!==0&&i.set(o),o++;for(var c=1;c<e.length;++c){for(var u=e[c],l=u.getLeftChar().getValue(),d=11;d>=0;--d)(l&1<<d)!==0&&i.set(o),o++;if(u.getRightChar()!==null)for(var f=u.getRightChar().getValue(),d=11;d>=0;--d)(f&1<<d)!==0&&i.set(o),o++}return i},n}(),BB=wde;var Ede=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),za=Ede;var Cde=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),Kd=Cde;var bde=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ide=function(n){bde(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(Kd),Ai=Ide;var Sde=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ade=function(n){Sde(e,n);function e(t,r,i){var o=n.call(this,t)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(Kd),$a=Ade;var Dde=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Tde=function(n){Dde(e,n);function e(t,r,i){var o=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new W;return o.firstDigit=r,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(Kd),bu=Tde;var f_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mde=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,o,s,a,c,u;if(!e)return null;if(e.length<2)throw new V;var l=e.substring(0,2);try{for(var d=f_(n.TWO_DIGIT_DATA_LENGTH),f=d.next();!f.done;f=d.next()){var h=f.value;if(h[0]===l)return h[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,h[2],e):n.processFixedAI(2,h[1],e)}}catch(k){t={error:k}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(t)throw t.error}}if(e.length<3)throw new V;var g=e.substring(0,3);try{for(var m=f_(n.THREE_DIGIT_DATA_LENGTH),y=m.next();!y.done;y=m.next()){var h=y.value;if(h[0]===g)return h[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,h[2],e):n.processFixedAI(3,h[1],e)}}catch(k){i={error:k}}finally{try{y&&!y.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}try{for(var x=f_(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),w=x.next();!w.done;w=x.next()){var h=w.value;if(h[0]===g)return h[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,h[2],e):n.processFixedAI(4,h[1],e)}}catch(k){s={error:k}}finally{try{w&&!w.done&&(a=x.return)&&a.call(x)}finally{if(s)throw s.error}}if(e.length<4)throw new V;var b=e.substring(0,4);try{for(var T=f_(n.FOUR_DIGIT_DATA_LENGTH),P=T.next();!P.done;P=T.next()){var h=P.value;if(h[0]===b)return h[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,h[2],e):n.processFixedAI(4,h[1],e)}}catch(k){c={error:k}}finally{try{P&&!P.done&&(u=T.return)&&u.call(T)}finally{if(c)throw c.error}}throw new V},n.processFixedAI=function(e,t,r){if(r.length<e)throw new V;var i=r.substring(0,e);if(r.length<e+t)throw new V;var o=r.substring(e,e+t),s=r.substring(e+t),a="("+i+")"+o,c=n.parseFieldsInGeneralPurpose(s);return c==null?a:a+c},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),o;r.length<e+t?o=r.length:o=e+t;var s=r.substring(e,o),a=r.substring(o),c="("+i+")"+s,u=n.parseFieldsInGeneralPurpose(a);return u==null?c:c+u},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),UB=Mde;var Ode=function(){function n(e){this.buffer=new oe,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var o=this.decodeGeneralPurposeField(r,i),s=UB.parseFieldsInGeneralPurpose(o.getNewString());if(s!=null&&e.append(s),o.isRemaining()?i=""+o.getRemainingValue():i=null,r===o.getNewPosition())break;r=o.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new bu(this.information.getSize(),bu.FNC1,bu.FNC1):new bu(this.information.getSize(),t-1,bu.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,o=(r-8)%11;return new bu(e+7,i,o)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,o=0;o<r;++o)e.get(t+o)&&(i|=1<<r-o-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new $a(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new $a(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new $a(this.current.getPosition(),this.buffer.toString()):t=new $a(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new za(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new $a(this.current.getPosition(),this.buffer.toString());return new za(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new za(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new $a(this.current.getPosition(),this.buffer.toString());return new za(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new za(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new $a(this.current.getPosition(),this.buffer.toString());return new za(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new za(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Ai(e+5,Ai.FNC1);if(t>=5&&t<15)return new Ai(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Ai(e+7,""+(r+1));if(r>=90&&r<116)return new Ai(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new W}return new Ai(e+8,o)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Ai(e+5,Ai.FNC1);if(t>=5&&t<15)return new Ai(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Ai(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new yn("Decoding invalid alphanumeric value: "+r)}return new Ai(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),Yd=Ode;var Pde=function(){function n(e){this.information=e,this.generalDecoder=new Yd(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),sg=Pde;var Rde=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Nde=function(n){Rde(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var o=0;o<4;++o){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,o=0;o<13;o++){var s=t.charAt(o+r).charCodeAt(0)-48;i+=(o&1)===0?3*s:s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(sg),Sr=Nde;var kde=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fde=function(n){kde(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new oe;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Sr),jB=Fde;var Lde=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vde=function(n){Lde(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new oe;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(sg),HB=Vde;var Bde=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ude=function(n){Bde(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,o);for(var s=this.checkWeight(o),a=1e5,c=0;c<5;++c)s/a===0&&t.append("0"),a/=10;t.append(s)},e}(Sr),Xd=Ude;var jde=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Hde=function(n){jde(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Xd.GTIN_SIZE+e.WEIGHT_SIZE)throw new V;var t=new oe;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+Xd.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(Xd),h_=Hde;var zde=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),$de=function(n){zde(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(h_),zB=$de;var Wde=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Gde=function(n){Wde(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(h_),$B=Gde;var qde=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Kde=function(n){qde(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Sr.GTIN_SIZE)throw new V;var t=new oe;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Sr.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Sr.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Sr),WB=Kde;var Yde=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xde=function(n){Yde(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Sr.GTIN_SIZE)throw new V;var t=new oe;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Sr.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Sr.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Sr.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Sr),GB=Xde;var Qde=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Zde=function(n){Qde(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.dateCode=i,o.firstAIdigits=r,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new V;var t=new oe;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var o=i%32;i/=32;var s=i%12+1;i/=12;var a=i;a/10===0&&t.append("0"),t.append(a),s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(Xd),Os=Zde;function wT(n){try{if(n.get(1))return new jB(n);if(!n.get(2))return new HB(n);var e=Yd.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new zB(n);case 5:return new $B(n)}var t=Yd.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new WB(n);case 13:return new GB(n)}var r=Yd.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new Os(n,"310","11");case 57:return new Os(n,"320","11");case 58:return new Os(n,"310","13");case 59:return new Os(n,"320","13");case 60:return new Os(n,"310","15");case 61:return new Os(n,"320","15");case 62:return new Os(n,"310","17");case 63:return new Os(n,"320","17")}}catch(i){throw console.log(i),new yn("unknown decoder: "+n)}}var Jde=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n}(),ET=Jde;var efe=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,o){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),qB=efe;var tfe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wa=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nfe=function(n){tfe(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(a){if(a instanceof V){if(!this.pairs.length)throw new V;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(t,!1),o){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new V},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,o,s=r;s<this.rows.length;s++){var a=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,Wa(t)),u=c.next();!u.done;u=c.next()){var l=u.value;this.pairs.push(l.getPairs())}}catch(f){i={error:f}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(a.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var d=new Array(t);d.push(a);try{return this.checkRows(d,s+1)}catch(f){console.log(f)}}}throw new V},e.isValidSequence=function(t){var r,i;try{for(var o=Wa(e.FINDER_PATTERN_SEQUENCES),s=o.next();!s.done;s=o.next()){var a=s.value;if(!(t.length>a.length)){for(var c=!0,u=0;u<t.length;u++)if(t[u].getFinderPattern().getValue()!==a[u]){c=!1;break}if(c)return!0}}}catch(l){r={error:l}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,o=!1,s=!1;i<this.rows.length;){var a=this.rows[i];if(a.getRowNumber()>t){s=a.isEquivalent(this.pairs);break}o=a.isEquivalent(this.pairs),i++}s||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new qB(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,o,s,a,c,u;try{for(var l=Wa(r),d=l.next();!d.done;d=l.next()){var f=d.value;if(f.getPairs().length!==t.length){var h=!0;try{for(var g=(s=void 0,Wa(f.getPairs())),m=g.next();!m.done;m=g.next()){var y=m.value,x=!1;try{for(var w=(c=void 0,Wa(t)),b=w.next();!b.done;b=w.next()){var T=b.value;if(ET.equals(y,T)){x=!0;break}}}catch(P){c={error:P}}finally{try{b&&!b.done&&(u=w.return)&&u.call(w)}finally{if(c)throw c.error}}x||(h=!1)}}catch(P){s={error:P}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(s)throw s.error}}}}}catch(P){i={error:P}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,o,s,a,c,u;try{for(var l=Wa(r),d=l.next();!d.done;d=l.next()){var f=d.value,h=!0;try{for(var g=(s=void 0,Wa(t)),m=g.next();!m.done;m=g.next()){var y=m.value,x=!1;try{for(var w=(c=void 0,Wa(f.getPairs())),b=w.next();!b.done;b=w.next()){var T=b.value;if(y.equals(T)){x=!0;break}}}catch(P){c={error:P}}finally{try{b&&!b.done&&(u=w.return)&&u.call(w)}finally{if(c)throw c.error}}if(!x){h=!1;break}}}catch(P){s={error:P}}finally{try{m&&!m.done&&(a=g.return)&&a.call(g)}finally{if(s)throw s.error}}if(h)return!0}}catch(P){i={error:P}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=BB.buildBitArray(t),i=wT(r),o=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),a=t[t.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],a[0],a[1]];return new nt(o,null,null,c,X.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),s=2,a=1;a<this.pairs.size();++a){var c=this.pairs.get(a);o+=c.getLeftChar().getChecksumPortion(),s++;var u=c.getRightChar();u!=null&&(o+=u.getChecksumPortion(),s++)}o%=211;var l=211*(s-4)+o;return l===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var o=r.length%2===0;this.startFromEven&&(o=!o);var s,a=!0,c=-1;do this.findNextPair(t,r,c),s=this.parseFoundFinderPattern(t,i,o),s===null?c=e.getNextSecondBar(t,this.startEnd[0]):a=!1;while(a);var u=this.decodeDataCharacter(t,s,o,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new V;var l;try{l=this.decodeDataCharacter(t,s,o,!1)}catch(d){l=null,console.log(d)}return new ET(u,l,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var s=t.getSize(),a;if(i>=0)a=i;else if(this.isEmptyPair(r))a=0;else{var c=r[r.length-1];a=c.getFinderPattern().getStartEnd()[1]}var u=r.length%2!==0;this.startFromEven&&(u=!u);for(var l=!1;a<s&&(l=!t.get(a),!!l);)a++;for(var d=0,f=a,h=a;h<s;h++)if(t.get(h)!==l)o[d]++;else{if(d===3){if(u&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=f,this.startEnd[1]=h;return}u&&e.reverseCounters(o),f+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,d--}else d++;o[d]=1,l=!l}throw new V},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var o=t[i];t[i]=t[r-i-1],t[r-i-1]=o}},e.prototype.parseFoundFinderPattern=function(t,r,i){var o,s,a;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,o=this.startEnd[0]-c,s=c,a=this.startEnd[1]}else s=this.startEnd[0],a=t.getNextUnset(this.startEnd[1]+1),o=a-this.startEnd[1];var u=this.getDecodeFinderCounters();Me.arraycopy(u,0,u,1,u.length-1),u[0]=o;var l;try{l=this.parseFinderValue(u,e.FINDER_PATTERNS)}catch{return null}return new d_(l,[s,a],s,a,r)},e.prototype.decodeDataCharacter=function(t,r,i,o){for(var s=this.getDataCharacterCounters(),a=0;a<s.length;a++)s[a]=0;if(o)e.recordPatternInReverse(t,r.getStartEnd()[0],s);else{e.recordPattern(t,r.getStartEnd()[1],s);for(var c=0,u=s.length-1;c<u;c++,u--){var l=s[c];s[c]=s[u],s[u]=l}}var d=17,f=Oe.sum(new Int32Array(s))/d,h=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(f-h)/h>.3)throw new V;for(var g=this.getOddCounts(),m=this.getEvenCounts(),y=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var w=1*s[c]/f,b=w+.5;if(b<1){if(w<.3)throw new V;b=1}else if(b>8){if(w>8.7)throw new V;b=8}var T=c/2;(c&1)===0?(g[T]=b,y[T]=w-b):(m[T]=b,x[T]=w-b)}this.adjustOddEvenCounts(d);for(var P=4*r.getValue()+(i?0:2)+(o?0:1)-1,k=0,C=0,c=g.length-1;c>=0;c--){if(e.isNotA1left(r,i,o)){var E=e.WEIGHTS[P][2*c];C+=g[c]*E}k+=g[c]}for(var S=0,c=m.length-1;c>=0;c--)if(e.isNotA1left(r,i,o)){var E=e.WEIGHTS[P][2*c+1];S+=m[c]*E}var M=C+S;if((k&1)!==0||k>13||k<4)throw new V;var R=(13-k)/2,N=e.SYMBOL_WIDEST[R],O=9-N,qe=Ha.getRSSvalue(g,N,!0),Ie=Ha.getRSSvalue(m,O,!1),lt=e.EVEN_TOTAL_SUBSET[R],st=e.GSUM[R],hn=qe*lt+Ie+st;return new Cu(hn,M)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=Oe.sum(new Int32Array(this.getOddCounts())),i=Oe.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1;r>13?s=!0:r<4&&(o=!0);var a=!1,c=!1;i>13?c=!0:i<4&&(a=!0);var u=r+i-t,l=(r&1)===1,d=(i&1)===0;if(u===1)if(l){if(d)throw new V;s=!0}else{if(!d)throw new V;c=!0}else if(u===-1)if(l){if(d)throw new V;o=!0}else{if(!d)throw new V;a=!0}else if(u===0){if(l){if(!d)throw new V;r<i?(o=!0,c=!0):(s=!0,a=!0)}else if(d)throw new V}else throw new V;if(o){if(s)throw new V;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),a){if(c)throw new V;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Ms),CT=nfe;var rfe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ife=function(n){rfe(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Cu),KB=ife;var ofe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},sfe=function(n){ofe(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var o,s,a,c,u=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,u),r.reverse();var l=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,l),r.reverse();try{for(var d=bT(this.possibleLeftPairs),f=d.next();!f.done;f=d.next()){var h=f.value;if(h.getCount()>1)try{for(var g=(a=void 0,bT(this.possibleRightPairs)),m=g.next();!m.done;m=g.next()){var y=m.value;if(y.getCount()>1&&e.checkChecksum(h,y))return e.constructResult(h,y)}}catch(x){a={error:x}}finally{try{m&&!m.done&&(c=g.return)&&c.call(g)}finally{if(a)throw a.error}}}}catch(x){o={error:x}}finally{try{f&&!f.done&&(s=d.return)&&s.call(d)}finally{if(o)throw o.error}}throw new V},e.addOrTally=function(t,r){var i,o;if(r!=null){var s=!1;try{for(var a=bT(t),c=a.next();!c.done;c=a.next()){var u=c.value;if(u.getValue()===r.getValue()){u.incrementCount(),s=!0;break}}}catch(l){i={error:l}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}s||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),o=new String(i).toString(),s=new oe,a=13-o.length;a>0;a--)s.append("0");s.append(o);for(var c=0,a=0;a<13;a++){var u=s.charAt(a).charCodeAt(0)-48;c+=(a&1)===0?3*u:u}c=10-c%10,c===10&&(c=0),s.append(c.toString());var l=t.getFinderPattern().getResultPoints(),d=r.getFinderPattern().getResultPoints();return new nt(s.toString(),null,0,[l[0],l[1],d[0],d[1]],X.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(t,r,i,o){try{var s=this.findFinderPattern(t,r),a=this.parseFoundFinderPattern(t,i,r,s),c=o==null?null:o.get(ve.NEED_RESULT_POINT_CALLBACK);if(c!=null){var u=(s[0]+s[1])/2;r&&(u=t.getSize()-1-u),c.foundPossibleResultPoint(new Z(u,i))}var l=this.decodeDataCharacter(t,a,!0),d=this.decodeDataCharacter(t,a,!1);return new KB(1597*l.getValue()+d.getValue(),l.getChecksumPortion()+4*d.getChecksumPortion(),a)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)pt.recordPatternInReverse(t,r.getStartEnd()[0],o);else{pt.recordPattern(t,r.getStartEnd()[1]+1,o);for(var a=0,c=o.length-1;a<c;a++,c--){var u=o[a];o[a]=o[c],o[c]=u}}for(var l=i?16:15,d=Oe.sum(new Int32Array(o))/l,f=this.getOddCounts(),h=this.getEvenCounts(),g=this.getOddRoundingErrors(),m=this.getEvenRoundingErrors(),a=0;a<o.length;a++){var y=o[a]/d,x=Math.floor(y+.5);x<1?x=1:x>8&&(x=8);var w=Math.floor(a/2);(a&1)===0?(f[w]=x,g[w]=y-x):(h[w]=x,m[w]=y-x)}this.adjustOddEvenCounts(i,l);for(var b=0,T=0,a=f.length-1;a>=0;a--)T*=9,T+=f[a],b+=f[a];for(var P=0,k=0,a=h.length-1;a>=0;a--)P*=9,P+=h[a],k+=h[a];var C=T+3*P;if(i){if((b&1)!==0||b>12||b<4)throw new V;var E=(12-b)/2,S=e.OUTSIDE_ODD_WIDEST[E],M=9-S,R=Ha.getRSSvalue(f,S,!1),N=Ha.getRSSvalue(h,M,!0),O=e.OUTSIDE_EVEN_TOTAL_SUBSET[E],qe=e.OUTSIDE_GSUM[E];return new Cu(R*O+N+qe,C)}else{if((k&1)!==0||k>10||k<4)throw new V;var E=(10-k)/2,S=e.INSIDE_ODD_WIDEST[E],M=9-S,R=Ha.getRSSvalue(f,S,!0),N=Ha.getRSSvalue(h,M,!1),Ie=e.INSIDE_ODD_TOTAL_SUBSET[E],qe=e.INSIDE_GSUM[E];return new Cu(N*Ie+R+qe,C)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=t.getSize(),s=!1,a=0;a<o&&(s=!t.get(a),r!==s);)a++;for(var c=0,u=a,l=a;l<o;l++)if(t.get(l)!==s)i[c]++;else{if(c===3){if(Ms.isFinderPattern(i))return[u,l];u+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new V},e.prototype.parseFoundFinderPattern=function(t,r,i,o){for(var s=t.get(o[0]),a=o[0]-1;a>=0&&s!==t.get(a);)a--;a++;var c=o[0]-a,u=this.getDecodeFinderCounters(),l=new Int32Array(u.length);Me.arraycopy(u,0,l,1,u.length-1),l[0]=c;var d=this.parseFinderValue(l,e.FINDER_PATTERNS),f=a,h=o[1];return i&&(f=t.getSize()-1-f,h=t.getSize()-1-h),new d_(d,[a,o[1]],f,h,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=Oe.sum(new Int32Array(this.getOddCounts())),o=Oe.sum(new Int32Array(this.getEvenCounts())),s=!1,a=!1,c=!1,u=!1;t?(i>12?a=!0:i<4&&(s=!0),o>12?u=!0:o<4&&(c=!0)):(i>11?a=!0:i<5&&(s=!0),o>10?u=!0:o<4&&(c=!0));var l=i+o-r,d=(i&1)===(t?1:0),f=(o&1)===1;if(l===1)if(d){if(f)throw new V;a=!0}else{if(!f)throw new V;u=!0}else if(l===-1)if(d){if(f)throw new V;s=!0}else{if(!f)throw new V;c=!0}else if(l===0){if(d){if(!f)throw new V;i<o?(s=!0,u=!0):(a=!0,c=!0)}else if(f)throw new V}else throw new V;if(s){if(a)throw new V;Ms.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&Ms.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(u)throw new V;Ms.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&Ms.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Ms),p_=sfe;var afe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cfe=function(n){afe(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(ve.POSSIBLE_FORMATS):null,o=t&&t.get(ve.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=t&&t.get(ve.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(X.EAN_13)||i.includes(X.UPC_A)||i.includes(X.EAN_8)||i.includes(X.UPC_E))&&r.readers.push(new l_(t)),i.includes(X.CODE_39)&&r.readers.push(new a_(o,s)),i.includes(X.CODE_93)&&r.readers.push(new c_),i.includes(X.CODE_128)&&r.readers.push(new s_),i.includes(X.ITF)&&r.readers.push(new u_),i.includes(X.CODABAR)&&r.readers.push(new xT),i.includes(X.RSS_14)&&r.readers.push(new p_),i.includes(X.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new CT))),r.readers.length===0&&(r.readers.push(new l_(t)),r.readers.push(new a_),r.readers.push(new c_),r.readers.push(new l_(t)),r.readers.push(new s_),r.readers.push(new u_),r.readers.push(new p_)),r}return e.prototype.decodeRow=function(t,r,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,r,i)}catch{}throw new V},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(pt),Ho=cfe;var ufe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),PLe=function(n){ufe(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new Ho(r),t,r)||this}return e}(Ii);var YB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gt=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}();var ct=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}();var lfe=function(){function n(e,t,r,i,o,s){var a,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=s;var u=0,l=s.getECCodewords(),d=s.getECBlocks();try{for(var f=YB(d),h=f.next();!h.done;h=f.next()){var g=h.value;u+=g.getCount()*(g.getDataCodewords()+l)}}catch(m){a={error:m}}finally{try{h&&!h.done&&(c=f.return)&&c.call(f)}finally{if(a)throw a.error}}this.totalCodewords=u}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if((e&1)!==0||(t&1)!==0)throw new W;try{for(var o=YB(n.VERSIONS),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.symbolSizeRows===e&&a.symbolSizeColumns===t)return a}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new W},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new gt(5,new ct(1,3))),new n(2,12,12,10,10,new gt(7,new ct(1,5))),new n(3,14,14,12,12,new gt(10,new ct(1,8))),new n(4,16,16,14,14,new gt(12,new ct(1,12))),new n(5,18,18,16,16,new gt(14,new ct(1,18))),new n(6,20,20,18,18,new gt(18,new ct(1,22))),new n(7,22,22,20,20,new gt(20,new ct(1,30))),new n(8,24,24,22,22,new gt(24,new ct(1,36))),new n(9,26,26,24,24,new gt(28,new ct(1,44))),new n(10,32,32,14,14,new gt(36,new ct(1,62))),new n(11,36,36,16,16,new gt(42,new ct(1,86))),new n(12,40,40,18,18,new gt(48,new ct(1,114))),new n(13,44,44,20,20,new gt(56,new ct(1,144))),new n(14,48,48,22,22,new gt(68,new ct(1,174))),new n(15,52,52,24,24,new gt(42,new ct(2,102))),new n(16,64,64,14,14,new gt(56,new ct(2,140))),new n(17,72,72,16,16,new gt(36,new ct(4,92))),new n(18,80,80,18,18,new gt(48,new ct(4,114))),new n(19,88,88,20,20,new gt(56,new ct(4,144))),new n(20,96,96,22,22,new gt(68,new ct(4,174))),new n(21,104,104,24,24,new gt(56,new ct(6,136))),new n(22,120,120,18,18,new gt(68,new ct(6,175))),new n(23,132,132,20,20,new gt(62,new ct(8,163))),new n(24,144,144,22,22,new gt(62,new ct(8,156),new ct(2,155))),new n(25,8,18,6,16,new gt(7,new ct(1,5))),new n(26,8,32,6,14,new gt(11,new ct(1,10))),new n(27,12,26,10,24,new gt(14,new ct(1,16))),new n(28,12,36,10,16,new gt(18,new ct(1,22))),new n(29,16,36,14,16,new gt(24,new ct(1,32))),new n(30,16,48,14,22,new gt(28,new ct(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),XB=lfe;var dfe=function(){function n(e){var t=e.getHeight();if(t<8||t>144||(t&1)!==0)throw new W;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Ot(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return XB.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,o=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),a=!1,c=!1,u=!1,l=!1;do if(r===o&&i===0&&!a)e[t++]=this.readCorner1(o,s)&255,r-=2,i+=2,a=!0;else if(r===o-2&&i===0&&(s&3)!==0&&!c)e[t++]=this.readCorner2(o,s)&255,r-=2,i+=2,c=!0;else if(r===o+4&&i===2&&(s&7)===0&&!u)e[t++]=this.readCorner3(o,s)&255,r-=2,i+=2,u=!0;else if(r===o-2&&i===0&&(s&7)===4&&!l)e[t++]=this.readCorner4(o,s)&255,r-=2,i+=2,l=!0;else{do r<o&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,o,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,o,s)&255),r+=2,i-=2;while(r<o&&i>=0);r+=3,i+=1}while(r<o||i<s);if(t!==this.version.getTotalCodewords())throw new W;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var o=0;return this.readModule(e-2,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-2,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t,r,i)&&(o|=1),o<<=1,this.readModule(e,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e,t,r,i)&&(o|=1),o},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Y("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),s=t/i|0,a=r/o|0,c=s*i,u=a*o,l=new Ot(u,c),d=0;d<s;++d)for(var f=d*i,h=0;h<a;++h)for(var g=h*o,m=0;m<i;++m)for(var y=d*(i+2)+1+m,x=f+m,w=0;w<o;++w){var b=h*(o+2)+1+w;if(e.get(b,y)){var T=g+w;l.set(T,x)}}return l},n}(),QB=dfe;var ZB=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ffe=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,o,s,a=t.getECBlocks(),c=0,u=a.getECBlocks();try{for(var l=ZB(u),d=l.next();!d.done;d=l.next()){var f=d.value;c+=f.getCount()}}catch(qe){r={error:qe}}finally{try{d&&!d.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}var h=new Array(c),g=0;try{for(var m=ZB(u),y=m.next();!y.done;y=m.next())for(var f=y.value,x=0;x<f.getCount();x++){var w=f.getDataCodewords(),b=a.getECCodewords()+w;h[g++]=new n(w,new Uint8Array(b))}}catch(qe){o={error:qe}}finally{try{y&&!y.done&&(s=m.return)&&s.call(m)}finally{if(o)throw o.error}}for(var T=h[0].codewords.length,P=T-a.getECCodewords(),k=P-1,C=0,x=0;x<k;x++)for(var E=0;E<g;E++)h[E].codewords[x]=e[C++];for(var S=t.getVersionNumber()===24,M=S?8:g,E=0;E<M;E++)h[E].codewords[P-1]=e[C++];for(var R=h[0].codewords.length,x=P;x<R;x++)for(var E=0;E<g;E++){var N=S?(E+8)%g:E,O=S&&N>7?x-1:x;h[N].codewords[O]=e[C++]}if(C!==e.length)throw new Y;return h},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),JB=ffe;var hfe=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Y(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,o=this.bytes;if(r>0){var s=8-r,a=e<s?e:s,c=s-a,u=255>>8-a<<c;t=(o[i]&u)>>c,e-=a,r+=a,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|o[i]&255,i++,e-=8;if(e>0){var c=8-e,u=255>>c<<c;t=t<<e|(o[i]&u)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),ag=hfe;var Un=function(n){return n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE",n}(Un||{}),pfe=function(){function n(){}return n.decode=function(e){var t=new ag(e),r=new oe,i=new oe,o=new Array,s=Un.ASCII_ENCODE;do if(s===Un.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,i);else{switch(s){case Un.C40_ENCODE:this.decodeC40Segment(t,r);break;case Un.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case Un.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case Un.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case Un.BASE256_ENCODE:this.decodeBase256Segment(t,r,o);break;default:throw new W}s=Un.ASCII_ENCODE}while(s!==Un.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new Ds(e,r.toString(),o.length===0?null:o,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var o=e.readBits(8);if(o===0)throw new W;if(o<=128)return i&&(o+=128),t.append(String.fromCharCode(o-1)),Un.ASCII_ENCODE;if(o===129)return Un.PAD_ENCODE;if(o<=229){var s=o-130;s<10&&t.append("0"),t.append(""+s)}else switch(o){case 230:return Un.C40_ENCODE;case 231:return Un.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return Un.ANSIX12_ENCODE;case 239:return Un.TEXT_ENCODE;case 240:return Un.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new W;break}}while(e.available()>0);return Un.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var c=i[a];switch(o){case 0:if(c<3)o=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var u=this.C40_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u)}else throw new W;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var u=this.C40_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new W}o=0;break;case 3:r?(t.append(String.fromCharCode(c+224)),r=!1):t.append(String.fromCharCode(c+96)),o=0;break;default:throw new W}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var a=0;a<3;a++){var c=i[a];switch(o){case 0:if(c<3)o=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var u=this.TEXT_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u)}else throw new W;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var u=this.TEXT_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new W}o=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var u=this.TEXT_SHIFT3_SET_CHARS[c];r?(t.append(String.fromCharCode(u.charCodeAt(0)+128)),r=!1):t.append(u),o=0}else throw new W;break;default:throw new W}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var o=0;o<3;o++){var s=r[o];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new W;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,o=Math.floor(i/1600);r[0]=o,i-=o*1600,o=Math.floor(i/40),r[1]=o,r[2]=i-o*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}(i&32)===0&&(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),s;if(o===0?s=e.available()/8|0:o<250?s=o:s=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new W;for(var a=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new W;a[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(a);try{t.append(Nn.decode(a,ye.ISO88591))}catch(u){throw new yn("Platform does not support required encoding: "+u.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7F"],n}(),IT=pfe;var gfe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},mfe=function(){function n(){this.rsDecoder=new Ts(dn.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new QB(e),o=i.getVersion(),s=i.readCodewords(),a=JB.getDataBlocks(s,o),c=0;try{for(var u=gfe(a),l=u.next();!l.done;l=u.next()){var d=l.value;c+=d.getNumDataCodewords()}}catch(b){t={error:b}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}for(var f=new Uint8Array(c),h=a.length,g=0;g<h;g++){var m=a[g],y=m.getCodewords(),x=m.getNumDataCodewords();this.correctErrors(y,x);for(var w=0;w<x;w++)f[w*h+g]=y[w]}return IT.decode(f)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new tt}for(var i=0;i<t;i++)e[i]=r[i]},n}(),e9=mfe;var vfe=function(){function n(e){this.image=e,this.rectangleDetector=new Gd(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new V;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],o=t[2],s=t[3],a=this.transitionsBetween(r,s)+1,c=this.transitionsBetween(o,s)+1;(a&1)===1&&(a+=1),(c&1)===1&&(c+=1),4*a<7*c&&4*c<7*a&&(a=c=Math.max(a,c));var u=n.sampleGrid(this.image,r,i,o,s,a,c);return new wu(u,[r,i,o,s])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),o=(t.getY()-e.getY())/(r+1);return new Z(e.getX()+i,e.getY()+o)},n.moveAway=function(e,t,r){var i=e.getX(),o=e.getY();return i<t?i-=1:i+=1,o<r?o-=1:o+=1,new Z(i,o)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],o=e[2],s=this.transitionsBetween(t,r),a=this.transitionsBetween(r,i),c=this.transitionsBetween(i,o),u=this.transitionsBetween(o,t),l=s,d=[o,t,r,i];return l>a&&(l=a,d[0]=t,d[1]=r,d[2]=i,d[3]=o),l>c&&(l=c,d[0]=r,d[1]=i,d[2]=o,d[3]=t),l>u&&(d[0]=i,d[1]=o,d[2]=t,d[3]=r),d},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),a=n.shiftPoint(r,i,(s+1)*4),c=n.shiftPoint(i,r,(s+1)*4),u=this.transitionsBetween(a,t),l=this.transitionsBetween(c,o);return u<l?(e[0]=t,e[1]=r,e[2]=i,e[3]=o):(e[0]=r,e[1]=i,e[2]=o,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),a=this.transitionsBetween(r,o),c=n.shiftPoint(t,r,(a+1)*4),u=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(c,o),a=this.transitionsBetween(u,o);var l=new Z(o.getX()+(i.getX()-r.getX())/(s+1),o.getY()+(i.getY()-r.getY())/(s+1)),d=new Z(o.getX()+(t.getX()-r.getX())/(a+1),o.getY()+(t.getY()-r.getY())/(a+1));if(!this.isValid(l))return this.isValid(d)?d:null;if(!this.isValid(d))return l;var f=this.transitionsBetween(c,l)+this.transitionsBetween(u,l),h=this.transitionsBetween(c,d)+this.transitionsBetween(u,d);return f>h?l:d},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o)+1,a=this.transitionsBetween(i,o)+1,c=n.shiftPoint(t,r,a*4),u=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(c,o)+1,a=this.transitionsBetween(u,o)+1,(s&1)===1&&(s+=1),(a&1)===1&&(a+=1);var l=(t.getX()+r.getX()+i.getX()+o.getX())/4,d=(t.getY()+r.getY()+i.getY()+o.getY())/4;t=n.moveAway(t,l,d),r=n.moveAway(r,l,d),i=n.moveAway(i,l,d),o=n.moveAway(o,l,d);var f,h;return c=n.shiftPoint(t,r,a*4),c=n.shiftPoint(c,o,s*4),f=n.shiftPoint(r,t,a*4),f=n.shiftPoint(f,i,s*4),u=n.shiftPoint(i,o,a*4),u=n.shiftPoint(u,r,s*4),h=n.shiftPoint(o,i,a*4),h=n.shiftPoint(h,t,s*4),[c,f,u,h]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,o,s,a){var c=Eu.getInstance();return c.sampleGrid(e,s,a,.5,.5,s-.5,.5,s-.5,a-.5,.5,a-.5,t.getX(),t.getY(),o.getX(),o.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(t.getX()),s=Math.trunc(t.getY()),a=Math.abs(s-i)>Math.abs(o-r);if(a){var c=r;r=i,i=c,c=o,o=s,s=c}for(var u=Math.abs(o-r),l=Math.abs(s-i),d=-u/2,f=i<s?1:-1,h=r<o?1:-1,g=0,m=this.image.get(a?i:r,a?r:i),y=r,x=i;y!==o;y+=h){var w=this.image.get(a?x:y,a?y:x);if(w!==m&&(g++,m=w),d+=l,d>0){if(x===s)break;x+=f,d-=u}}return g},n}(),t9=vfe;var yfe=function(){function n(){this.decoder=new e9}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(ve.PURE_BARCODE)){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(o),i=n.NO_POINTS}else{var s=new t9(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var a=r.getRawBytes(),c=new nt(r.getText(),a,8*a.length,i,X.DATA_MATRIX,Me.currentTimeMillis()),u=r.getByteSegments();u!=null&&c.putMetadata(Bt.BYTE_SEGMENTS,u);var l=r.getECLevel();return l!=null&&c.putMetadata(Bt.ERROR_CORRECTION_LEVEL,l),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new V;var i=this.moduleSize(t,e),o=t[1],s=r[1],a=t[0],c=r[0],u=(c-a+1)/i,l=(s-o+1)/i;if(u<=0||l<=0)throw new V;var d=i/2;o+=d,a+=d;for(var f=new Ot(u,l),h=0;h<l;h++)for(var g=o+h*i,m=0;m<u;m++)e.get(a+m*i,g)&&f.set(m,h);return f},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],o=e[1];i<r&&t.get(i,o);)i++;if(i===r)throw new V;var s=i-e[0];if(s===0)throw new V;return s},n.NO_POINTS=[],n}(),Ga=yfe;var _fe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),b8e=function(n){_fe(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Ga,t)||this}return e}(Ii);var cg=function(n){return n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H",n}(cg||{}),xfe=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new $t(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Y;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(cg.L,"L",1),n.M=new n(cg.M,"M",0),n.Q=new n(cg.Q,"Q",3),n.H=new n(cg.H,"H",2),n}(),Ar=xfe;var wfe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Efe=function(){function n(e){this.errorCorrectionLevel=Ar.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return le.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,o=Number.MAX_SAFE_INTEGER,s=0;try{for(var a=wfe(n.FORMAT_INFO_DECODE_LOOKUP),c=a.next();!c.done;c=a.next()){var u=c.value,l=u[0];if(l===e||l===t)return new n(u[1]);var d=n.numBitsDiffering(e,l);d<o&&(s=u[1],o=d),e!==t&&(d=n.numBitsDiffering(t,l),d<o&&(s=u[1],o=d))}}catch(f){r={error:f}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return o<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),ug=Efe;var Cfe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bfe=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var o=Cfe(i),s=o.next();!s.done;s=o.next()){var a=s.value;r+=a.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),j=bfe;var Ife=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),D=Ife;var Sfe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Afe=function(){function n(e,t){for(var r,i,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var a=0,c=o[0].getECCodewordsPerBlock(),u=o[0].getECBlocks();try{for(var l=Sfe(u),d=l.next();!d.done;d=l.next()){var f=d.value;a+=f.getCount()*(f.getDataCodewords()+c)}}catch(h){r={error:h}}finally{try{d&&!d.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}this.totalCodewords=a}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new W;try{return this.getVersionForNumber((e-17)/4)}catch{throw new W}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Y;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var o=n.VERSION_DECODE_INFO[i];if(o===e)return n.getVersionForNumber(i+7);var s=ug.numBitsDiffering(e,o);s<t&&(r=i+7,t=s)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Ot(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var o=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new j(7,new D(1,19)),new j(10,new D(1,16)),new j(13,new D(1,13)),new j(17,new D(1,9))),new n(2,Int32Array.from([6,18]),new j(10,new D(1,34)),new j(16,new D(1,28)),new j(22,new D(1,22)),new j(28,new D(1,16))),new n(3,Int32Array.from([6,22]),new j(15,new D(1,55)),new j(26,new D(1,44)),new j(18,new D(2,17)),new j(22,new D(2,13))),new n(4,Int32Array.from([6,26]),new j(20,new D(1,80)),new j(18,new D(2,32)),new j(26,new D(2,24)),new j(16,new D(4,9))),new n(5,Int32Array.from([6,30]),new j(26,new D(1,108)),new j(24,new D(2,43)),new j(18,new D(2,15),new D(2,16)),new j(22,new D(2,11),new D(2,12))),new n(6,Int32Array.from([6,34]),new j(18,new D(2,68)),new j(16,new D(4,27)),new j(24,new D(4,19)),new j(28,new D(4,15))),new n(7,Int32Array.from([6,22,38]),new j(20,new D(2,78)),new j(18,new D(4,31)),new j(18,new D(2,14),new D(4,15)),new j(26,new D(4,13),new D(1,14))),new n(8,Int32Array.from([6,24,42]),new j(24,new D(2,97)),new j(22,new D(2,38),new D(2,39)),new j(22,new D(4,18),new D(2,19)),new j(26,new D(4,14),new D(2,15))),new n(9,Int32Array.from([6,26,46]),new j(30,new D(2,116)),new j(22,new D(3,36),new D(2,37)),new j(20,new D(4,16),new D(4,17)),new j(24,new D(4,12),new D(4,13))),new n(10,Int32Array.from([6,28,50]),new j(18,new D(2,68),new D(2,69)),new j(26,new D(4,43),new D(1,44)),new j(24,new D(6,19),new D(2,20)),new j(28,new D(6,15),new D(2,16))),new n(11,Int32Array.from([6,30,54]),new j(20,new D(4,81)),new j(30,new D(1,50),new D(4,51)),new j(28,new D(4,22),new D(4,23)),new j(24,new D(3,12),new D(8,13))),new n(12,Int32Array.from([6,32,58]),new j(24,new D(2,92),new D(2,93)),new j(22,new D(6,36),new D(2,37)),new j(26,new D(4,20),new D(6,21)),new j(28,new D(7,14),new D(4,15))),new n(13,Int32Array.from([6,34,62]),new j(26,new D(4,107)),new j(22,new D(8,37),new D(1,38)),new j(24,new D(8,20),new D(4,21)),new j(22,new D(12,11),new D(4,12))),new n(14,Int32Array.from([6,26,46,66]),new j(30,new D(3,115),new D(1,116)),new j(24,new D(4,40),new D(5,41)),new j(20,new D(11,16),new D(5,17)),new j(24,new D(11,12),new D(5,13))),new n(15,Int32Array.from([6,26,48,70]),new j(22,new D(5,87),new D(1,88)),new j(24,new D(5,41),new D(5,42)),new j(30,new D(5,24),new D(7,25)),new j(24,new D(11,12),new D(7,13))),new n(16,Int32Array.from([6,26,50,74]),new j(24,new D(5,98),new D(1,99)),new j(28,new D(7,45),new D(3,46)),new j(24,new D(15,19),new D(2,20)),new j(30,new D(3,15),new D(13,16))),new n(17,Int32Array.from([6,30,54,78]),new j(28,new D(1,107),new D(5,108)),new j(28,new D(10,46),new D(1,47)),new j(28,new D(1,22),new D(15,23)),new j(28,new D(2,14),new D(17,15))),new n(18,Int32Array.from([6,30,56,82]),new j(30,new D(5,120),new D(1,121)),new j(26,new D(9,43),new D(4,44)),new j(28,new D(17,22),new D(1,23)),new j(28,new D(2,14),new D(19,15))),new n(19,Int32Array.from([6,30,58,86]),new j(28,new D(3,113),new D(4,114)),new j(26,new D(3,44),new D(11,45)),new j(26,new D(17,21),new D(4,22)),new j(26,new D(9,13),new D(16,14))),new n(20,Int32Array.from([6,34,62,90]),new j(28,new D(3,107),new D(5,108)),new j(26,new D(3,41),new D(13,42)),new j(30,new D(15,24),new D(5,25)),new j(28,new D(15,15),new D(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new j(28,new D(4,116),new D(4,117)),new j(26,new D(17,42)),new j(28,new D(17,22),new D(6,23)),new j(30,new D(19,16),new D(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new j(28,new D(2,111),new D(7,112)),new j(28,new D(17,46)),new j(30,new D(7,24),new D(16,25)),new j(24,new D(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new j(30,new D(4,121),new D(5,122)),new j(28,new D(4,47),new D(14,48)),new j(30,new D(11,24),new D(14,25)),new j(30,new D(16,15),new D(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new j(30,new D(6,117),new D(4,118)),new j(28,new D(6,45),new D(14,46)),new j(30,new D(11,24),new D(16,25)),new j(30,new D(30,16),new D(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new j(26,new D(8,106),new D(4,107)),new j(28,new D(8,47),new D(13,48)),new j(30,new D(7,24),new D(22,25)),new j(30,new D(22,15),new D(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new j(28,new D(10,114),new D(2,115)),new j(28,new D(19,46),new D(4,47)),new j(28,new D(28,22),new D(6,23)),new j(30,new D(33,16),new D(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new j(30,new D(8,122),new D(4,123)),new j(28,new D(22,45),new D(3,46)),new j(30,new D(8,23),new D(26,24)),new j(30,new D(12,15),new D(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new j(30,new D(3,117),new D(10,118)),new j(28,new D(3,45),new D(23,46)),new j(30,new D(4,24),new D(31,25)),new j(30,new D(11,15),new D(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new j(30,new D(7,116),new D(7,117)),new j(28,new D(21,45),new D(7,46)),new j(30,new D(1,23),new D(37,24)),new j(30,new D(19,15),new D(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new j(30,new D(5,115),new D(10,116)),new j(28,new D(19,47),new D(10,48)),new j(30,new D(15,24),new D(25,25)),new j(30,new D(23,15),new D(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new j(30,new D(13,115),new D(3,116)),new j(28,new D(2,46),new D(29,47)),new j(30,new D(42,24),new D(1,25)),new j(30,new D(23,15),new D(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new j(30,new D(17,115)),new j(28,new D(10,46),new D(23,47)),new j(30,new D(10,24),new D(35,25)),new j(30,new D(19,15),new D(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new j(30,new D(17,115),new D(1,116)),new j(28,new D(14,46),new D(21,47)),new j(30,new D(29,24),new D(19,25)),new j(30,new D(11,15),new D(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new j(30,new D(13,115),new D(6,116)),new j(28,new D(14,46),new D(23,47)),new j(30,new D(44,24),new D(7,25)),new j(30,new D(59,16),new D(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new j(30,new D(12,121),new D(7,122)),new j(28,new D(12,47),new D(26,48)),new j(30,new D(39,24),new D(14,25)),new j(30,new D(22,15),new D(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new j(30,new D(6,121),new D(14,122)),new j(28,new D(6,47),new D(34,48)),new j(30,new D(46,24),new D(10,25)),new j(30,new D(2,15),new D(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new j(30,new D(17,122),new D(4,123)),new j(28,new D(29,46),new D(14,47)),new j(30,new D(49,24),new D(10,25)),new j(30,new D(24,15),new D(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new j(30,new D(4,122),new D(18,123)),new j(28,new D(13,46),new D(32,47)),new j(30,new D(48,24),new D(14,25)),new j(30,new D(42,15),new D(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new j(30,new D(20,117),new D(4,118)),new j(28,new D(40,47),new D(7,48)),new j(30,new D(43,24),new D(22,25)),new j(30,new D(10,15),new D(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new j(30,new D(19,118),new D(6,119)),new j(28,new D(18,47),new D(31,48)),new j(30,new D(34,24),new D(34,25)),new j(30,new D(20,15),new D(61,16)))],n}(),eo=Afe;var Xn=function(n){return n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111",n}(Xn||{}),Dfe=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[Xn.DATA_MASK_000,new n(Xn.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Xn.DATA_MASK_001,new n(Xn.DATA_MASK_001,function(e,t){return(e&1)===0})],[Xn.DATA_MASK_010,new n(Xn.DATA_MASK_010,function(e,t){return t%3===0})],[Xn.DATA_MASK_011,new n(Xn.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Xn.DATA_MASK_100,new n(Xn.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Xn.DATA_MASK_101,new n(Xn.DATA_MASK_101,function(e,t){return e*t%6===0})],[Xn.DATA_MASK_110,new n(Xn.DATA_MASK_110,function(e,t){return e*t%6<3})],[Xn.DATA_MASK_111,new n(Xn.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n}(),g_=Dfe;var Tfe=function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new W;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),o=0,s=i-7,r=i-1;r>=s;r--)o=this.copyBit(8,r,o);for(var t=i-8;t<i;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=ug.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new W},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return eo.getVersionForNumber(t);for(var r=0,i=e-11,o=5;o>=0;o--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,o,r);var a=eo.decodeVersionInformation(r);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;r=0;for(var s=5;s>=0;s--)for(var o=e-9;o>=i;o--)r=this.copyBit(s,o,r);if(a=eo.decodeVersionInformation(r),a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new W},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=g_.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var o=t.buildFunctionPattern(),s=!0,a=new Uint8Array(t.getTotalCodewords()),c=0,u=0,l=0,d=i-1;d>0;d-=2){d===6&&d--;for(var f=0;f<i;f++)for(var h=s?i-1-f:f,g=0;g<2;g++)o.get(d-g,h)||(l++,u<<=1,this.bitMatrix.get(d-g,h)&&(u|=1),l===8&&(a[c++]=u,l=0,u=0));s=!s}if(c!==t.getTotalCodewords())throw new W;return a},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=g_.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,o=e.getHeight();i<o;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),n9=Tfe;var r9=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mfe=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,o,s,a;if(e.length!==t.getTotalCodewords())throw new Y;var c=t.getECBlocksForLevel(r),u=0,l=c.getECBlocks();try{for(var d=r9(l),f=d.next();!f.done;f=d.next()){var h=f.value;u+=h.getCount()}}catch(O){i={error:O}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}var g=new Array(u),m=0;try{for(var y=r9(l),x=y.next();!x.done;x=y.next())for(var h=x.value,w=0;w<h.getCount();w++){var b=h.getDataCodewords(),T=c.getECCodewordsPerBlock()+b;g[m++]=new n(b,new Uint8Array(T))}}catch(O){s={error:O}}finally{try{x&&!x.done&&(a=y.return)&&a.call(y)}finally{if(s)throw s.error}}for(var P=g[0].codewords.length,k=g.length-1;k>=0;){var C=g[k].codewords.length;if(C===P)break;k--}k++;for(var E=P-c.getECCodewordsPerBlock(),S=0,w=0;w<E;w++)for(var M=0;M<m;M++)g[M].codewords[w]=e[S++];for(var M=k;M<m;M++)g[M].codewords[E]=e[S++];for(var R=g[0].codewords.length,w=E;w<R;w++)for(var M=0;M<m;M++){var N=M<k?w:w+1;g[M].codewords[N]=e[S++]}return g},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),i9=Mfe;var to=function(n){return n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI",n}(to||{}),Ofe=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Y;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(to.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(to.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(to.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(to.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(to.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(to.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(to.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(to.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(to.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(to.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),bt=Ofe;var Pfe=function(){function n(){}return n.decode=function(e,t,r,i){var o=new ag(e),s=new oe,a=new Array,c=-1,u=-1;try{var l=null,d=!1,f=void 0;do{if(o.available()<4)f=bt.TERMINATOR;else{var h=o.readBits(4);f=bt.forBits(h)}switch(f){case bt.TERMINATOR:break;case bt.FNC1_FIRST_POSITION:case bt.FNC1_SECOND_POSITION:d=!0;break;case bt.STRUCTURED_APPEND:if(o.available()<16)throw new W;c=o.readBits(8),u=o.readBits(8);break;case bt.ECI:var g=n.parseECIValue(o);if(l=Mt.getCharacterSetECIByValue(g),l===null)throw new W;break;case bt.HANZI:var m=o.readBits(4),y=o.readBits(f.getCharacterCountBits(t));m===n.GB2312_SUBSET&&n.decodeHanziSegment(o,s,y);break;default:var x=o.readBits(f.getCharacterCountBits(t));switch(f){case bt.NUMERIC:n.decodeNumericSegment(o,s,x);break;case bt.ALPHANUMERIC:n.decodeAlphanumericSegment(o,s,x,d);break;case bt.BYTE:n.decodeByteSegment(o,s,x,l,a,i);break;case bt.KANJI:n.decodeKanjiSegment(o,s,x);break;default:throw new W}break}}while(f!==bt.TERMINATOR)}catch{throw new W}return new Ds(e,s.toString(),a.length===0?null:a,r===null?null:r.toString(),c,u)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new W;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/96<<8&4294967295|s%96;a<959?a+=41377:a+=42657,i[o]=a>>8&255,i[o+1]=a&255,o+=2,r--}try{t.append(Nn.decode(i,ye.GB2312))}catch(c){throw new W(c)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new W;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),a=s/192<<8&4294967295|s%192;a<7936?a+=33088:a+=49472,i[o]=a>>8,i[o+1]=a,o+=2,r--}try{t.append(Nn.decode(i,ye.SHIFT_JIS))}catch(c){throw new W(c)}},n.decodeByteSegment=function(e,t,r,i,o,s){if(8*r>e.available())throw new W;for(var a=new Uint8Array(r),c=0;c<r;c++)a[c]=e.readBits(8);var u;i===null?u=ye.guessEncoding(a,s):u=i.getName();try{t.append(Nn.decode(a,u))}catch(l){throw new W(l)}o.push(a)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new W;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var o=t.length();r>1;){if(e.available()<11)throw new W;var s=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(s/45))),t.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new W;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var a=o;a<t.length();a++)t.charAt(a)==="%"&&(a<t.length()-1&&t.charAt(a+1)==="%"?t.deleteCharAt(a+1):t.setCharAt(a,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new W;var i=e.readBits(10);if(i>=1e3)throw new W;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new W;var o=e.readBits(7);if(o>=100)throw new W;t.append(n.toAlphaNumericChar(Math.floor(o/10))),t.append(n.toAlphaNumericChar(o%10))}else if(r===1){if(e.available()<4)throw new W;var s=e.readBits(4);if(s>=10)throw new W;t.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(e){var t=e.readBits(8);if((t&128)===0)return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new W},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),ST=Pfe;var Rfe=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),m_=Rfe;var o9=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Nfe=function(){function n(){this.rsDecoder=new Ts(dn.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Ot.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new n9(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,t);return o.setOther(new m_(!0)),o}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,o,s,a=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),l=i9.getDataBlocks(u,a,c),d=0;try{for(var f=o9(l),h=f.next();!h.done;h=f.next()){var g=h.value;d+=g.getNumDataCodewords()}}catch(k){r={error:k}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}var m=new Uint8Array(d),y=0;try{for(var x=o9(l),w=x.next();!w.done;w=x.next()){var g=w.value,b=g.getCodewords(),T=g.getNumDataCodewords();this.correctErrors(b,T);for(var P=0;P<T;P++)m[y++]=b[P]}}catch(k){o={error:k}}finally{try{w&&!w.done&&(s=x.return)&&s.call(x)}finally{if(o)throw o.error}}return ST.decode(m,a,c,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new tt}for(var i=0;i<t;i++)e[i]=r[i]},n}(),s9=Nfe;var kfe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ffe=function(n){kfe(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var o=(this.getX()+r)/2,s=(this.getY()+t)/2,a=(this.estimatedModuleSize+i)/2;return new e(o,s,a)},e}(Z),a9=Ffe;var Lfe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vfe=function(){function n(e,t,r,i,o,s,a){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=o,this.moduleSize=s,this.resultPointCallback=a,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,o=this.startY+t/2,s=new Int32Array(3),a=this.image,c=0;c<t;c++){var u=o+((c&1)===0?Math.floor((c+1)/2):-Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var l=e;l<i&&!a.get(l,u);)l++;for(var d=0;l<i;){if(a.get(l,u))if(d===1)s[1]++;else if(d===2){if(this.foundPatternCross(s)){var f=this.handlePossibleCenter(s,u,l);if(f!==null)return f}s[0]=s[2],s[1]=1,s[2]=0,d=1}else s[++d]++;else d===1&&d++,s[d]++;l++}if(this.foundPatternCross(s)){var f=this.handlePossibleCenter(s,u,i);if(f!==null)return f}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var o=this.image,s=o.getHeight(),a=this.crossCheckStateCount;a[0]=0,a[1]=0,a[2]=0;for(var c=e;c>=0&&o.get(t,c)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&!o.get(t,c)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(t,c)&&a[1]<=r;)a[1]++,c++;if(c===s||a[1]>r)return NaN;for(;c<s&&!o.get(t,c)&&a[2]<=r;)a[2]++,c++;if(a[2]>r)return NaN;var u=a[0]+a[1]+a[2];return 5*Math.abs(u-i)>=2*i?NaN:this.foundPatternCross(a)?n.centerFromEnd(a,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,o,s=e[0]+e[1]+e[2],a=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,a,2*e[1],s);if(!isNaN(c)){var u=(e[0]+e[1]+e[2])/3;try{for(var l=Lfe(this.possibleCenters),d=l.next();!d.done;d=l.next()){var f=d.value;if(f.aboutEquals(u,c,a))return f.combineEstimate(c,a,u)}}catch(g){i={error:g}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}var h=new a9(a,c,u);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null},n}(),c9=Vfe;var Bfe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ufe=function(n){Bfe(e,n);function e(t,r,i,o){var s=n.call(this,t,r)||this;return s.estimatedModuleSize=i,s.count=o,o===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var o=this.count+1,s=(this.count*this.getX()+r)/o,a=(this.count*this.getY()+t)/o,c=(this.count*this.estimatedModuleSize+i)/o;return new e(s,a,c,o)},e}(Z),u9=Ufe;var jfe=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),l9=jfe;var lg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Hfe=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(ve.TRY_HARDER)!==void 0,r=e!=null&&e.get(ve.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),s=i.getWidth(),a=Math.floor(3*o/(4*n.MAX_MODULES));(a<n.MIN_SKIP||t)&&(a=n.MIN_SKIP);for(var c=!1,u=new Int32Array(5),l=a-1;l<o&&!c;l+=a){u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0;for(var d=0,f=0;f<s;f++)if(i.get(f,l))(d&1)===1&&d++,u[d]++;else if((d&1)===0)if(d===4)if(n.foundPatternCross(u)){var h=this.handlePossibleCenter(u,l,f,r);if(h===!0)if(a=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var g=this.findRowSkip();g>u[2]&&(l+=g-u[2]-a,f=s-1)}else{u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,d=3;continue}d=0,u[0]=0,u[1]=0,u[2]=0,u[3]=0,u[4]=0}else u[0]=u[2],u[1]=u[3],u[2]=u[4],u[3]=1,u[4]=0,d=3;else u[++d]++;else u[d]++;if(n.foundPatternCross(u)){var h=this.handlePossibleCenter(u,l,s,r);h===!0&&(a=u[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var m=this.selectBestPatterns();return Z.orderBestPatterns(m),new l9(m)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var o=t/7,s=o/2;return Math.abs(o-e[0])<s&&Math.abs(o-e[1])<s&&Math.abs(3*o-e[2])<3*s&&Math.abs(o-e[3])<s&&Math.abs(o-e[4])<s},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var o=this.getCrossCheckStateCount(),s=0,a=this.image;e>=s&&t>=s&&a.get(t-s,e-s);)o[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!a.get(t-s,e-s)&&o[1]<=r;)o[1]++,s++;if(e<s||t<s||o[1]>r)return!1;for(;e>=s&&t>=s&&a.get(t-s,e-s)&&o[0]<=r;)o[0]++,s++;if(o[0]>r)return!1;var c=a.getHeight(),u=a.getWidth();for(s=1;e+s<c&&t+s<u&&a.get(t+s,e+s);)o[2]++,s++;if(e+s>=c||t+s>=u)return!1;for(;e+s<c&&t+s<u&&!a.get(t+s,e+s)&&o[3]<r;)o[3]++,s++;if(e+s>=c||t+s>=u||o[3]>=r)return!1;for(;e+s<c&&t+s<u&&a.get(t+s,e+s)&&o[4]<r;)o[4]++,s++;if(o[4]>=r)return!1;var l=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(l-i)<2*i&&n.foundPatternCross(o)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var o=this.image,s=o.getHeight(),a=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(t,c);)a[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(t,c)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&o.get(t,c)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(t,c);)a[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(t,c)&&a[3]<r;)a[3]++,c++;if(c===s||a[3]>=r)return NaN;for(;c<s&&o.get(t,c)&&a[4]<r;)a[4]++,c++;if(a[4]>=r)return NaN;var u=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(u-i)>=2*i?NaN:n.foundPatternCross(a)?n.centerFromEnd(a,c):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var o=this.image,s=o.getWidth(),a=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(c,t);)a[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(c,t)&&a[1]<=r;)a[1]++,c--;if(c<0||a[1]>r)return NaN;for(;c>=0&&o.get(c,t)&&a[0]<=r;)a[0]++,c--;if(a[0]>r)return NaN;for(c=e+1;c<s&&o.get(c,t);)a[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(c,t)&&a[3]<r;)a[3]++,c++;if(c===s||a[3]>=r)return NaN;for(;c<s&&o.get(c,t)&&a[4]<r;)a[4]++,c++;if(a[4]>=r)return NaN;var u=a[0]+a[1]+a[2]+a[3]+a[4];return 5*Math.abs(u-i)>=i?NaN:n.foundPatternCross(a)?n.centerFromEnd(a,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],s=n.centerFromEnd(e,r),a=this.crossCheckVertical(t,Math.floor(s),e[2],o);if(!isNaN(a)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(a),e[2],o),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(a),Math.floor(s),e[2],o)))){for(var c=o/7,u=!1,l=this.possibleCenters,d=0,f=l.length;d<f;d++){var h=l[d];if(h.aboutEquals(c,a,s)){l[d]=h.combineEstimate(a,s,c),u=!0;break}}if(!u){var g=new u9(s,a,c);l.push(g),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(g)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var o=lg(this.possibleCenters),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.getCount()>=n.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,o=0,s=0,a=this.possibleCenters.length;try{for(var c=lg(this.possibleCenters),u=c.next();!u.done;u=c.next()){var l=u.value;l.getCount()>=n.CENTER_QUORUM&&(o++,s+=l.getEstimatedModuleSize())}}catch(m){e={error:m}}finally{try{u&&!u.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(o<3)return!1;var d=s/a,f=0;try{for(var h=lg(this.possibleCenters),g=h.next();!g.done;g=h.next()){var l=g.value;f+=Math.abs(l.getEstimatedModuleSize()-d)}}catch(m){r={error:m}}finally{try{g&&!g.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}return f<=.05*s},n.prototype.selectBestPatterns=function(){var e,t,r,i,o=this.possibleCenters.length;if(o<3)throw new V;var s=this.possibleCenters,a;if(o>3){var c=0,u=0;try{for(var l=lg(this.possibleCenters),d=l.next();!d.done;d=l.next()){var f=d.value,h=f.getEstimatedModuleSize();c+=h,u+=h*h}}catch(P){e={error:P}}finally{try{d&&!d.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}a=c/o;var g=Math.sqrt(u/o-a*a);s.sort(function(P,k){var C=Math.abs(k.getEstimatedModuleSize()-a),E=Math.abs(P.getEstimatedModuleSize()-a);return C<E?-1:C>E?1:0});for(var m=Math.max(.2*a,g),y=0;y<s.length&&s.length>3;y++){var x=s[y];Math.abs(x.getEstimatedModuleSize()-a)>m&&(s.splice(y,1),y--)}}if(s.length>3){var c=0;try{for(var w=lg(s),b=w.next();!b.done;b=w.next()){var T=b.value;c+=T.getEstimatedModuleSize()}}catch(k){r={error:k}}finally{try{b&&!b.done&&(i=w.return)&&i.call(w)}finally{if(r)throw r.error}}a=c/s.length,s.sort(function(k,C){if(C.getCount()===k.getCount()){var E=Math.abs(C.getEstimatedModuleSize()-a),S=Math.abs(k.getEstimatedModuleSize()-a);return E<S?1:E>S?-1:0}else return C.getCount()-k.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),d9=Hfe;var zfe=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(ve.NEED_RESULT_POINT_CALLBACK);var t=new d9(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(t,r,i);if(o<1)throw new V("No pattern found in proccess finder.");var s=n.computeDimension(t,r,i,o),a=eo.getProvisionalVersionForDimension(s),c=a.getDimensionForVersion()-7,u=null;if(a.getAlignmentPatternCenters().length>0)for(var l=r.getX()-t.getX()+i.getX(),d=r.getY()-t.getY()+i.getY(),f=1-3/c,h=Math.floor(t.getX()+f*(l-t.getX())),g=Math.floor(t.getY()+f*(d-t.getY())),m=4;m<=16;m<<=1)try{u=this.findAlignmentInRegion(o,h,g,m);break}catch(b){if(!(b instanceof V))throw b}var y=n.createTransform(t,r,i,u,s),x=n.sampleGrid(this.image,y,s),w;return u===null?w=[i,t,r]:w=[i,t,r,u],new wu(x,w)},n.createTransform=function(e,t,r,i,o){var s=o-3.5,a,c,u,l;return i!==null?(a=i.getX(),c=i.getY(),u=s-3,l=u):(a=t.getX()-e.getX()+r.getX(),c=t.getY()-e.getY()+r.getY(),u=s,l=s),og.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,u,l,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),a,c,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=Eu.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var o=Oe.round(Z.distance(e,t)/i),s=Oe.round(Z.distance(e,r)/i),a=Math.floor((o+s)/2)+7;switch(a&3){case 0:a++;break;case 2:a--;break;case 3:throw new V("Dimensions could be not found.")}return a},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var o=this.sizeOfBlackWhiteBlackRun(e,t,r,i),s=1,a=e-(r-e);a<0?(s=e/(e-a),a=0):a>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(a-e),a=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*s);return s=1,c<0?(s=t/(t-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),a=Math.floor(e+(a-e)*s),o+=this.sizeOfBlackWhiteBlackRun(e,t,a,c),o-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var o=Math.abs(i-t)>Math.abs(r-e);if(o){var s=e;e=t,t=s,s=r,r=i,i=s}for(var a=Math.abs(r-e),c=Math.abs(i-t),u=-a/2,l=e<r?1:-1,d=t<i?1:-1,f=0,h=r+l,g=e,m=t;g!==h;g+=l){var y=o?m:g,x=o?g:m;if(f===1===this.image.get(y,x)){if(f===2)return Oe.distance(g,m,e,t);f++}if(u+=c,u>0){if(m===i)break;m+=d,u-=a}}return f===2?Oe.distance(r+l,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var o=Math.floor(i*e),s=Math.max(0,t-o),a=Math.min(this.image.getWidth()-1,t+o);if(a-s<e*3)throw new V("Alignment top exceeds estimated module size.");var c=Math.max(0,r-o),u=Math.min(this.image.getHeight()-1,r+o);if(u-c<e*3)throw new V("Alignment bottom exceeds estimated module size.");var l=new c9(this.image,s,c,a-s,u-c,e,this.resultPointCallback);return l.find()},n}(),f9=zfe;var $fe=function(){function n(){this.decoder=new s9}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(ve.PURE_BARCODE)!==void 0){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,t),i=n.NO_POINTS}else{var s=new f9(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}r.getOther()instanceof m_&&r.getOther().applyMirroredCorrection(i);var a=new nt(r.getText(),r.getRawBytes(),void 0,i,X.QR_CODE,void 0),c=r.getByteSegments();c!==null&&a.putMetadata(Bt.BYTE_SEGMENTS,c);var u=r.getECLevel();return u!==null&&a.putMetadata(Bt.ERROR_CORRECTION_LEVEL,u),r.hasStructuredAppend()&&(a.putMetadata(Bt.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),a.putMetadata(Bt.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),a},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new V;var i=this.moduleSize(t,e),o=t[1],s=r[1],a=t[0],c=r[0];if(a>=c||o>=s)throw new V;if(s-o!==c-a&&(c=a+(s-o),c>=e.getWidth()))throw new V;var u=Math.round((c-a+1)/i),l=Math.round((s-o+1)/i);if(u<=0||l<=0)throw new V;if(l!==u)throw new V;var d=Math.floor(i/2);o+=d,a+=d;var f=a+Math.floor((u-1)*i)-c;if(f>0){if(f>d)throw new V;a-=f}var h=o+Math.floor((l-1)*i)-s;if(h>0){if(h>d)throw new V;o-=h}for(var g=new Ot(u,l),m=0;m<l;m++)for(var y=o+Math.floor(m*i),x=0;x<u;x++)e.get(a+Math.floor(x*i),y)&&g.set(x,m);return g},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),o=e[0],s=e[1],a=!0,c=0;o<i&&s<r;){if(a!==t.get(o,s)){if(++c===5)break;a=!a}o++,s++}if(o===i||s===r)throw new V;return(o-e[0])/7},n.NO_POINTS=new Array,n}(),qa=$fe;var Wfe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gfe=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return Oe.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var s=Wfe(e),a=s.next();!a.done;a=s.next()){var c=a.value;i[o++]=c}}catch(u){t={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=ot.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),Ve=Gfe;var qfe=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),h9=qfe;var Kfe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yfe=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),o=n.detect(r,i);return o.length||(i=i.clone(),i.rotate180(),o=n.detect(r,i)),new h9(i,o)},n.detect=function(e,t){for(var r,i,o=new Array,s=0,a=0,c=!1;s<t.getHeight();){var u=n.findVertices(t,s,a);if(u[0]==null&&u[3]==null){if(!c)break;c=!1,a=0;try{for(var l=(r=void 0,Kfe(o)),d=l.next();!d.done;d=l.next()){var f=d.value;f[1]!=null&&(s=Math.trunc(Math.max(s,f[1].getY()))),f[3]!=null&&(s=Math.max(s,Math.trunc(f[3].getY())))}}catch(h){r={error:h}}finally{try{d&&!d.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(c=!0,o.push(u),!e)break;u[2]!=null?(a=Math.trunc(u[2].getX()),s=Math.trunc(u[2].getY())):(a=Math.trunc(u[4].getX()),s=Math.trunc(u[4].getY()))}return o},n.findVertices=function(e,t,r){var i=e.getHeight(),o=e.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(e,i,o,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(e,i,o,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,o,s){for(var a=new Array(4),c=!1,u=new Int32Array(s.length);i<t;i+=n.ROW_STEP){var l=n.findGuardPattern(e,o,i,r,!1,s,u);if(l!=null){for(;i>0;){var d=n.findGuardPattern(e,o,--i,r,!1,s,u);if(d!=null)l=d;else{i++;break}}a[0]=new Z(l[0],i),a[1]=new Z(l[1],i),c=!0;break}}var f=i+1;if(c){for(var h=0,d=Int32Array.from([Math.trunc(a[0].getX()),Math.trunc(a[1].getX())]);f<t;f++){var l=n.findGuardPattern(e,d[0],f,r,!1,s,u);if(l!=null&&Math.abs(d[0]-l[0])<n.MAX_PATTERN_DRIFT&&Math.abs(d[1]-l[1])<n.MAX_PATTERN_DRIFT)d=l,h=0;else{if(h>n.SKIPPED_ROW_COUNT_MAX)break;h++}}f-=h+1,a[2]=new Z(d[0],f),a[3]=new Z(d[1],f)}return f-i<n.BARCODE_MIN_HEIGHT&&ot.fill(a,null),a},n.findGuardPattern=function(e,t,r,i,o,s,a){ot.fillWithin(a,0,a.length,0);for(var c=t,u=0;e.get(c,r)&&c>0&&u++<n.MAX_PIXEL_DRIFT;)c--;for(var l=c,d=0,f=s.length,h=o;l<i;l++){var g=e.get(l,r);if(g!==h)a[d]++;else{if(d===f-1){if(n.patternMatchVariance(a,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,l]);c+=a[0]+a[1],Me.arraycopy(a,2,a,0,d-1),a[d-1]=0,a[d]=0,d--}else d++;a[d]=1,h=!h}}return d===f-1&&n.patternMatchVariance(a,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,l-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,s=0,a=0;a<i;a++)o+=e[a],s+=t[a];if(o<s)return 1/0;var c=o/s;r*=c;for(var u=0,l=0;l<i;l++){var d=e[l],f=t[l]*c,h=d>f?d-f:f-d;if(h>r)return 1/0;u+=h}return u/o},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),p9=Yfe;var Xfe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qfe=function(){function n(e,t){if(t.length===0)throw new Y;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Me.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=Xfe(this.coefficients),s=o.next();!s.done;s=o.next()){var a=s.value;i=this.field.add(i,a)}}catch(d){t={error:d}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],u=this.coefficients.length,l=1;l<u;l++)c=this.field.add(this.field.multiply(e,c),this.coefficients[l]);return c},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Y("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),s=r.length-t.length;Me.arraycopy(r,0,o,0,s);for(var a=s;a<r.length;a++)o[a]=this.field.add(t[a-s],r[a]);return new n(this.field,o)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Y("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Y("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),a=0;a<r;a++)for(var c=t[a],u=0;u<o;u++)s[a+u]=this.field.add(s[a+u],this.field.multiply(c,i[u]));return new n(this.field,s)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Y;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new oe,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),Ps=Qfe;var Zfe=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Y;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new rg;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),g9=Zfe;var Jfe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ehe=function(n){Jfe(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var o=1,s=0;s<t;s++)i.expTable[s]=o,o=o*r%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new Ps(i,new Int32Array([0])),i.one=new Ps(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Y;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new Ps(this,i)},e.PDF417_GF=new e(Ve.NUMBER_OF_CODEWORDS,3),e}(g9),m9=ehe;var the=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nhe=function(){function n(){this.field=m9.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,o,s=new Ps(this.field,e),a=new Int32Array(t),c=!1,u=t;u>0;u--){var l=s.evaluateAt(this.field.exp(u));a[t-u]=l,l!==0&&(c=!0)}if(!c)return 0;var d=this.field.getOne();if(r!=null)try{for(var f=the(r),h=f.next();!h.done;h=f.next()){var g=h.value,m=this.field.exp(e.length-1-g),y=new Ps(this.field,new Int32Array([this.field.subtract(0,m),1]));d=d.multiply(y)}}catch(E){i={error:E}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}for(var x=new Ps(this.field,a),w=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),x,t),b=w[0],T=w[1],P=this.findErrorLocations(b),k=this.findErrorMagnitudes(T,b,P),u=0;u<P.length;u++){var C=e.length-1-this.field.log(P[u]);if(C<0)throw tt.getChecksumInstance();e[C]=this.field.subtract(e[C],k[u])}return P.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=e,s=t,a=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(r/2);){var u=o,l=a;if(o=s,a=c,o.isZero())throw tt.getChecksumInstance();s=u;for(var d=this.field.getZero(),f=o.getCoefficient(o.getDegree()),h=this.field.inverse(f);s.getDegree()>=o.getDegree()&&!s.isZero();){var g=s.getDegree()-o.getDegree(),m=this.field.multiply(s.getCoefficient(s.getDegree()),h);d=d.add(this.field.buildMonomial(g,m)),s=s.subtract(o.multiplyByMonomial(g,m))}c=d.multiply(a).subtract(l).negative()}var y=c.getCoefficient(0);if(y===0)throw tt.getChecksumInstance();var x=this.field.inverse(y),w=c.multiply(x),b=s.multiply(x);return[w,b]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,o=1;o<this.field.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=this.field.inverse(o),i++);if(i!==t)throw tt.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),o=new Int32Array(i),s=1;s<=i;s++)o[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var a=new Ps(this.field,o),c=r.length,u=new Int32Array(c),s=0;s<c;s++){var l=this.field.inverse(r[s]),d=this.field.subtract(0,e.evaluateAt(l)),f=this.field.inverse(a.evaluateAt(l));u[s]=this.field.multiply(d,f)}return u},n}(),AT=nhe;var rhe=function(){function n(e,t,r,i,o){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,o)}return n.prototype.constructor_1=function(e,t,r,i,o){var s=t==null||r==null,a=i==null||o==null;if(s&&a)throw new V;s?(t=new Z(0,i.getY()),r=new Z(0,o.getY())):a&&(i=new Z(e.getWidth()-1,t.getY()),o=new Z(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,o=this.bottomLeft,s=this.topRight,a=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,u=Math.trunc(c.getY()-e);u<0&&(u=0);var l=new Z(c.getX(),u);r?i=l:s=l}if(t>0){var d=r?this.bottomLeft:this.bottomRight,f=Math.trunc(d.getY()+t);f>=this.image.getHeight()&&(f=this.image.getHeight()-1);var h=new Z(d.getX(),f);r?o=h:a=h}return new n(this.image,i,o,s,a)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),dg=rhe;var ihe=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),v9=ihe;var ohe=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(s,a,c,u,l,d){if(s==="%%")return"%";if(t[++r]!==void 0){s=u?parseInt(u.substr(1)):void 0;var f=l?parseInt(l.substr(1)):void 0,h;switch(d){case"s":h=t[r];break;case"c":h=t[r][0];break;case"f":h=parseFloat(t[r]).toFixed(s);break;case"p":h=parseFloat(t[r]).toPrecision(s);break;case"e":h=parseFloat(t[r]).toExponential(s);break;case"x":h=parseInt(t[r]).toString(f||16);break;case"d":h=parseFloat(parseInt(t[r],f||10).toPrecision(s)).toFixed(0);break}h=typeof h=="object"?JSON.stringify(h):(+h).toString(f);for(var g=parseInt(c),m=c&&c[0]+""=="0"?"0":" ";h.length<g;)h=a!==void 0?h+m:m+h;return h}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),Qd=ohe;var she=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ahe=function(){function n(e){this.boundingBox=new dg(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new Qd,i=0;try{for(var o=she(this.codewords),s=o.next();!s.done;s=o.next()){var a=s.value;if(a==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),v_=ahe;var che=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uhe=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o},lhe=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,o=function(d,f){var h={getKey:function(){return d},getValue:function(){return f}};h.getValue()>r?(r=h.getValue(),i=[],i.push(h.getKey())):h.getValue()===r&&i.push(h.getKey())};try{for(var s=che(this.values.entries()),a=s.next();!a.done;a=s.next()){var c=uhe(a.value,2),u=c[0],l=c[1];o(u,l)}}catch(d){e={error:d}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return Ve.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),Iu=lhe;var dhe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),DT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fhe=function(n){dhe(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=DT(this.getCodewords()),o=i.next();!o.done;o=i.next()){var s=o.value;s?.setRowNumberAsRowIndicatorColumn()}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),u=-1,l=1,d=0,f=a;f<c;f++)if(r[f]!=null){var h=r[f],g=h.getRowNumber()-u;if(g===0)d++;else if(g===1)l=Math.max(l,d),d=1,u=h.getRowNumber();else if(g<0||h.getRowNumber()>=t.getRowCount()||g>f)r[f]=null;else{var m=void 0;l>2?m=(l-2)*g:m=g;for(var y=m>=f,x=1;x<=m&&!y;x++)y=r[f-x]!=null;y?r[f]=null:(u=h.getRowNumber(),d=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var s=DT(this.getCodewords()),a=s.next();!a.done;a=s.next()){var c=a.value;if(c!=null){var u=c.getRowNumber();if(u>=o.length)continue;o[u]++}}}catch(l){t={error:l}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.getCodewords(),u=-1,l=1,d=0,f=s;f<a;f++)if(c[f]!=null){var h=c[f];h.setRowNumberAsRowIndicatorColumn();var g=h.getRowNumber()-u;g===0?d++:g===1?(l=Math.max(l,d),d=1,u=h.getRowNumber()):h.getRowNumber()>=t.getRowCount()?c[f]=null:(u=h.getRowNumber(),d=1)}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),o=new Iu,s=new Iu,a=new Iu,c=new Iu;try{for(var u=DT(i),l=u.next();!l.done;l=u.next()){var d=l.value;if(d!=null){d.setRowNumberAsRowIndicatorColumn();var f=d.getValue()%30,h=d.getRowNumber();switch(this._isLeft||(h+=2),h%3){case 0:s.setValue(f*3+1);break;case 1:c.setValue(f/3),a.setValue(f%3);break;case 2:o.setValue(f+1);break}}}}catch(m){t={error:m}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}if(o.getValue().length===0||s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||o.getValue()[0]<1||s.getValue()[0]+a.getValue()[0]<Ve.MIN_ROWS_IN_BARCODE||s.getValue()[0]+a.getValue()[0]>Ve.MAX_ROWS_IN_BARCODE)return null;var g=new v9(o.getValue()[0],s.getValue()[0],a.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,g),g},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var o=t[i];if(t[i]!=null){var s=o.getValue()%30,a=o.getRowNumber();if(a>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(a+=2),a%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(v_),TT=fhe;var hhe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},phe=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Ve.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[r];o!=null&&(o.setRowNumber(e[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),o=0,s=this.barcodeColumnCount+1;s>0&&o<this.ADJUST_ROW_NUMBER_SKIP;s--){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=n.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),o=0,s=1;s<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;s++){var a=this.detectionResultColumns[s].getCodewords()[r];a!=null&&(o=n.adjustRowNumberIfValid(i,o,a),a.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,o;if(this.detectionResultColumns[e-1]!=null){var s=r[t],a=this.detectionResultColumns[e-1].getCodewords(),c=a;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var u=new Array(14);u[2]=a[t],u[3]=c[t],t>0&&(u[0]=r[t-1],u[4]=a[t-1],u[5]=c[t-1]),t>1&&(u[8]=r[t-2],u[10]=a[t-2],u[11]=c[t-2]),t<r.length-1&&(u[1]=r[t+1],u[6]=a[t+1],u[7]=c[t+1]),t<r.length-2&&(u[9]=r[t+2],u[12]=a[t+2],u[13]=c[t+2]);try{for(var l=hhe(u),d=l.next();!d.done;d=l.next()){var f=d.value;if(n.adjustRowNumber(s,f))return}}catch(h){i={error:h}}finally{try{d&&!d.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new Qd,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[r];if(o==null){t.format("    |   ");continue}t.format(" %3d|%3d",o.getRowNumber(),o.getValue())}t.format("%n")}return t.toString()},n}(),y9=phe;var ghe=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),_9=ghe;var mhe=function(){function n(){}return n.initialize=function(){for(var e=0;e<Ve.SYMBOL_TABLE.length;e++)for(var t=Ve.SYMBOL_TABLE[e],r=t&1,i=0;i<Ve.BARS_IN_MODULE;i++){for(var o=0;(t&1)===r;)o+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(Ve.BARS_IN_MODULE)),n.RATIOS_TABLE[e][Ve.BARS_IN_MODULE-i-1]=Math.fround(o/Ve.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=Oe.sum(e),r=new Int32Array(Ve.BARS_IN_MODULE),i=0,o=0,s=0;s<Ve.MODULES_IN_CODEWORD;s++){var a=t/(2*Ve.MODULES_IN_CODEWORD)+s*t/Ve.MODULES_IN_CODEWORD;o+e[i]<=a&&(o+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return Ve.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=Oe.sum(e),r=new Array(Ve.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var o=ig.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var a=0;a<n.RATIOS_TABLE.length;a++){for(var c=0,u=n.RATIOS_TABLE[a],l=0;l<Ve.BARS_IN_MODULE;l++){var d=Math.fround(u[l]-r[l]);if(c+=Math.fround(d*d),c>=o)break}c<o&&(o=c,s=Ve.SYMBOL_TABLE[a])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(Ve.SYMBOL_TABLE.length).map(function(e){return e=new Array(Ve.BARS_IN_MODULE)}),n}(),x9=mhe;var vhe=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),MT=vhe;var yhe=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),OT=yhe;var _he=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xhe=function(n){_he(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e}(xt),w9=xhe;var whe=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new w9;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new $d;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),E9=whe;var Ehe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Che=function(n){Ehe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(xt),C9=Che;var bhe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ihe=function(n){bhe(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Y("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new C9;i=le.MAX_VALUE}this.buf=ot.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new $d;this.ensureCapacity(this.count+i),Me.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return ot.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(E9),b9=Ihe;var Pt=function(n){return n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT",n}(Pt||{});function I9(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var y_;function Ka(n){if(typeof y_>"u"&&(y_=I9()),y_===null)throw new Error("BigInt is not supported!");return y_(n)}function She(){var n=[];n[0]=Ka(1);var e=Ka(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var Ahe=function(){function n(){}return n.decode=function(e,t){var r=new oe(""),i=Mt.ISO8859_1;r.enableDecoding(i);for(var o=1,s=e[o++],a=new MT;o<e[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:o=n.textCompaction(e,o,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:o=n.byteCompaction(s,e,i,o,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:o=n.numericCompaction(e,o,r);break;case n.ECI_CHARSET:var c=Mt.getCharacterSetECIByValue(e[o++]);break;case n.ECI_GENERAL_PURPOSE:o+=2;break;case n.ECI_USER_DEFINED:o++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=n.decodeMacroBlock(e,o,a);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new W;default:o--,o=n.textCompaction(e,o,r);break}if(o<e.length)s=e[o++];else throw W.getFormatInstance()}if(r.length()===0)throw W.getFormatInstance();var u=new Ds(null,r.toString(),null,t);return u.setOther(a),u},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw W.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<n.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)i[o]=e[t];r.setSegmentIndex(le.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new oe;t=n.textCompaction(e,t,s),r.setFileId(s.toString());var a=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(a=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new oe;t=n.textCompaction(e,t+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var u=new oe;t=n.textCompaction(e,t+1,u),r.setSender(u.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var l=new oe;t=n.textCompaction(e,t+1,l),r.setAddressee(l.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var d=new oe;t=n.numericCompaction(e,t+1,d),r.setSegmentCount(le.parseInt(d.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var f=new oe;t=n.numericCompaction(e,t+1,f),r.setTimestamp(OT.parseLong(f.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var h=new oe;t=n.numericCompaction(e,t+1,h),r.setChecksum(le.parseInt(h.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var g=new oe;t=n.numericCompaction(e,t+1,g),r.setFileSize(OT.parseLong(g.toString()));break;default:throw W.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw W.getFormatInstance()}if(a!==-1){var m=t-a;r.isLastSegment()&&m--,r.setOptionalData(ot.copyOfRange(e,a,a+m))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),o=new Int32Array((e[0]-t)*2),s=0,a=!1;t<e[0]&&!a;){var c=e[t++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,a=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],o[s]=c,s++;break}}return n.decodeTextCompaction(i,o,s,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var o=Pt.ALPHA,s=Pt.ALPHA,a=0;a<r;){var c=e[a],u="";switch(o){case Pt.ALPHA:if(c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case n.LL:o=Pt.LOWER;break;case n.ML:o=Pt.MIXED;break;case n.PS:s=o,o=Pt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=Pt.ALPHA;break}break;case Pt.LOWER:if(c<26)u=String.fromCharCode(97+c);else switch(c){case 26:u=" ";break;case n.AS:s=o,o=Pt.ALPHA_SHIFT;break;case n.ML:o=Pt.MIXED;break;case n.PS:s=o,o=Pt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=Pt.ALPHA;break}break;case Pt.MIXED:if(c<n.PL)u=n.MIXED_CHARS[c];else switch(c){case n.PL:o=Pt.PUNCT;break;case 26:u=" ";break;case n.LL:o=Pt.LOWER;break;case n.AL:o=Pt.ALPHA;break;case n.PS:s=o,o=Pt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=Pt.ALPHA;break}break;case Pt.PUNCT:if(c<n.PAL)u=n.PUNCT_CHARS[c];else switch(c){case n.PAL:o=Pt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=Pt.ALPHA;break}break;case Pt.ALPHA_SHIFT:if(o=s,c<26)u=String.fromCharCode(65+c);else switch(c){case 26:u=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:o=Pt.ALPHA;break}break;case Pt.PUNCT_SHIFT:if(o=s,c<n.PAL)u=n.PUNCT_CHARS[c];else switch(c){case n.PAL:o=Pt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[a]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=Pt.ALPHA;break}break}u!==""&&i.append(u),a++}},n.byteCompaction=function(e,t,r,i,o){var s=new b9,a=0,c=0,u=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var l=new Int32Array(6),d=t[i++];i<t[0]&&!u;)switch(l[a++]=d,c=900*c+d,d=t[i++],d){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,u=!0;break;default:if(a%5===0&&a>0){for(var f=0;f<6;++f)s.write(Number(Ka(c)>>Ka(8*(5-f))));c=0,a=0}break}i===t[0]&&d<n.TEXT_COMPACTION_MODE_LATCH&&(l[a++]=d);for(var h=0;h<a;h++)s.write(l[h]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!u;){var g=t[i++];if(g<n.TEXT_COMPACTION_MODE_LATCH)a++,c=900*c+g;else switch(g){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,u=!0;break}if(a%5===0&&a>0){for(var f=0;f<6;++f)s.write(Number(Ka(c)>>Ka(8*(5-f))));c=0,a=0}}break}return o.append(Nn.decode(s.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,o=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!o;){var a=e[t++];if(t===e[0]&&(o=!0),a<n.TEXT_COMPACTION_MODE_LATCH)s[i]=a,i++;else switch(a){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,o=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||a===n.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=Ka(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*Ka(e[i]);var o=r.toString();if(o.charAt(0)!=="1")throw new W;return o.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=I9()?She():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),PT=Ahe;var fg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Dhe=function(){function n(){}return n.decode=function(e,t,r,i,o,s,a){for(var c=new dg(e,t,r,i,o),u=null,l=null,d,f=!0;;f=!1){if(t!=null&&(u=n.getRowIndicatorColumn(e,c,t,!0,s,a)),i!=null&&(l=n.getRowIndicatorColumn(e,c,i,!1,s,a)),d=n.merge(u,l),d==null)throw V.getNotFoundInstance();var h=d.getBoundingBox();if(f&&h!=null&&(h.getMinY()<c.getMinY()||h.getMaxY()>c.getMaxY()))c=h;else break}d.setBoundingBox(c);var g=d.getBarcodeColumnCount()+1;d.setDetectionResultColumn(0,u),d.setDetectionResultColumn(g,l);for(var m=u!=null,y=1;y<=g;y++){var x=m?y:g-y;if(d.getDetectionResultColumn(x)===void 0){var w=void 0;x===0||x===g?w=new TT(c,x===0):w=new v_(c),d.setDetectionResultColumn(x,w);for(var b=-1,T=b,P=c.getMinY();P<=c.getMaxY();P++){if(b=n.getStartColumn(d,x,P,m),b<0||b>c.getMaxX()){if(T===-1)continue;b=T}var k=n.detectCodeword(e,c.getMinX(),c.getMaxX(),m,b,P,s,a);k!=null&&(w.setCodeword(P,k),T=b,s=Math.min(s,k.getWidth()),a=Math.max(a,k.getWidth()))}}}return n.createDecoderResult(d)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=dg.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new y9(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=n.getMax(i),s=0;try{for(var a=fg(i),c=a.next();!c.done;c=a.next()){var u=c.value;if(s+=o-u,u>0)break}}catch(h){t={error:h}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}for(var l=e.getCodewords(),d=0;s>0&&l[d]==null;d++)s--;for(var f=0,d=i.length-1;d>=0&&(f+=o-i[d],!(i[d]>0));d--);for(var d=l.length-1;f>0&&l[d]==null;d--)f--;return e.getBoundingBox().addMissingRows(s,f,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var o=fg(e),s=o.next();!s.done;s=o.next()){var a=s.value;i=Math.max(i,a)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,o,s){for(var a=new TT(t,i),c=0;c<2;c++)for(var u=c===0?1:-1,l=Math.trunc(Math.trunc(r.getX())),d=Math.trunc(Math.trunc(r.getY()));d<=t.getMaxY()&&d>=t.getMinY();d+=u){var f=n.detectCodeword(e,0,e.getWidth(),i,l,d,o,s);f!=null&&(a.setCodeword(d,f),i?l=f.getStartX():l=f.getEndX())}return a},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>Ve.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();r.setValue(o)}else i[0]!==o&&r.setValue(o)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],s=new Array,a=0;a<e.getBarcodeRowCount();a++)for(var c=0;c<e.getBarcodeColumnCount();c++){var u=t[a][c+1].getValue(),l=a*e.getBarcodeColumnCount()+c;u.length===0?r.push(l):u.length===1?i[l]=u[0]:(s.push(l),o.push(u))}for(var d=new Array(o.length),f=0;f<d.length;f++)d[f]=o[f];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Ve.toIntArray(r),Ve.toIntArray(s),d)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,o){for(var s=new Int32Array(i.length),a=100;a-- >0;){for(var c=0;c<s.length;c++)t[i[c]]=o[c][s[c]];try{return n.decodeCodewords(t,e,r)}catch(l){var u=l instanceof tt;if(!u)throw l}if(s.length===0)throw tt.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<o[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw tt.getChecksumInstance()}throw tt.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,o,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),a=0;a<s.length;a++)for(var c=0;c<s[a].length;c++)s[a][c]=new Iu;var u=0;try{for(var l=fg(e.getDetectionResultColumns()),d=l.next();!d.done;d=l.next()){var f=d.value;if(f!=null)try{for(var h=(i=void 0,fg(f.getCodewords())),g=h.next();!g.done;g=h.next()){var m=g.value;if(m!=null){var y=m.getRowNumber();if(y>=0){if(y>=s.length)continue;s[y][u].setValue(m.getValue())}}}}catch(x){i={error:x}}finally{try{g&&!g.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}u++}}catch(x){t={error:x}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return s},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var o,s,a=i?1:-1,c=null;if(n.isValidBarcodeColumn(e,t-a)&&(c=e.getDetectionResultColumn(t-a).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(e,t-a)&&(c=e.getDetectionResultColumn(t-a).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var u=0;n.isValidBarcodeColumn(e,t-a);){t-=a;try{for(var l=(o=void 0,fg(e.getDetectionResultColumn(t).getCodewords())),d=l.next();!d.done;d=l.next()){var f=d.value;if(f!=null)return(i?f.getEndX():f.getStartX())+a*u*(f.getEndX()-f.getStartX())}}catch(h){o={error:h}}finally{try{d&&!d.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}u++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,o,s,a,c){o=n.adjustCodewordStartColumn(e,t,r,i,o,s);var u=n.getModuleBitCount(e,t,r,i,o,s);if(u==null)return null;var l,d=Oe.sum(u);if(i)l=o+d;else{for(var f=0;f<u.length/2;f++){var h=u[f];u[f]=u[u.length-1-f],u[u.length-1-f]=h}l=o,o=l-d}if(!n.checkCodewordSkew(d,a,c))return null;var g=x9.getDecodedValue(u),m=Ve.getCodeword(g);return m===-1?null:new _9(o,l,n.getCodewordBucketNumber(g),m)},n.getModuleBitCount=function(e,t,r,i,o,s){for(var a=o,c=new Int32Array(8),u=0,l=i?1:-1,d=i;(i?a<r:a>=t)&&u<c.length;)e.get(a,s)===d?(c[u]++,a+=l):(u++,d=!d);return u===c.length||a===(i?r:t)&&u===c.length-1?c:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,o,s){for(var a=o,c=i?-1:1,u=0;u<2;u++){for(;(i?a>=t:a<r)&&i===e.get(a,s);){if(Math.abs(o-a)>n.CODEWORD_SKEW_SIZE)return o;a+=c}c=-c,i=!i}return a},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw W.getFormatInstance();var i=1<<t+1,o=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var s=PT.decode(e,""+t);return s.setErrorsCorrected(o),s.setErasures(r.length),s},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw tt.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw W.getFormatInstance();var r=e[0];if(r>e.length)throw W.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw W.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new Qd,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var o=e[r][i];o.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new AT,n}(),S9=Dhe;var The=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mhe=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw V.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof W||r instanceof tt?V.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,o,s=new Array,a=p9.detectMultiple(e,t,r);try{for(var c=The(a.getPoints()),u=c.next();!u.done;u=c.next()){var l=u.value,d=S9.decode(a.getBits(),l[4],l[5],l[6],l[7],n.getMinCodewordWidth(l),n.getMaxCodewordWidth(l)),f=new nt(d.getText(),d.getRawBytes(),void 0,l,X.PDF_417);f.putMetadata(Bt.ERROR_CORRECTION_LEVEL,d.getECLevel());var h=d.getOther();h!=null&&f.putMetadata(Bt.PDF417_EXTRA_METADATA,h),s.push(f)}}catch(g){i={error:g}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return s.map(function(g){return g})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?le.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*Ve.MODULES_IN_CODEWORD/Ve.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*Ve.MODULES_IN_CODEWORD/Ve.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*Ve.MODULES_IN_CODEWORD/Ve.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*Ve.MODULES_IN_CODEWORD/Ve.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),Ya=Mhe;var Ohe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Phe=function(n){Ohe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e}(xt),__=Phe;var A9=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rhe=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(ve.TRY_HARDER)!==void 0,r=e==null?null:e.get(ve.POSSIBLE_FORMATS),i=new Array;if(r!=null){var o=r.some(function(s){return s===X.UPC_A||s===X.UPC_E||s===X.EAN_13||s===X.EAN_8||s===X.CODABAR||s===X.CODE_39||s===X.CODE_93||s===X.CODE_128||s===X.ITF||s===X.RSS_14||s===X.RSS_EXPANDED});o&&!t&&i.push(new Ho(e)),r.includes(X.QR_CODE)&&i.push(new qa),r.includes(X.DATA_MATRIX)&&i.push(new Ga),r.includes(X.AZTEC)&&i.push(new ja),r.includes(X.PDF_417)&&i.push(new Ya),o&&t&&i.push(new Ho(e))}i.length===0&&(t||i.push(new Ho(e)),i.push(new qa),i.push(new Ga),i.push(new ja),i.push(new Ya),t&&i.push(new Ho(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=A9(this.readers),i=r.next();!i.done;i=r.next()){var o=i.value;o.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new __("No readers where selected, nothing can be read.");try{for(var i=A9(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;try{return s.decode(e,this.hints)}catch(a){if(a instanceof __)continue}}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new V("No MultiFormat Readers were able to detect the code.")},n}(),hg=Rhe;var Nhe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sBe=function(n){Nhe(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,o=new hg;return o.setHints(t),i=n.call(this,o,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(Ii);var khe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),lBe=function(n){khe(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Ya,t)||this}return e}(Ii);var Fhe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pBe=function(n){Fhe(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new qa,t)||this}return e}(Ii);var D9=function(n){return n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40",n}(D9||{}),Ee=D9;var Lhe=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Si(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,o=t.length;o<=e;o++){var s=r.multiply(new Si(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));t.push(s),r=s}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Y("No error correction bytes");var r=e.length-t;if(r<=0)throw new Y("No data bytes provided");var i=this.buildGenerator(t),o=new Int32Array(r);Me.arraycopy(e,0,o,0,r);var s=new Si(this.field,o);s=s.multiplyByMonomial(t,1);for(var a=s.divide(i)[1],c=a.getCoefficients(),u=t-c.length,l=0;l<u;l++)e[r+l]=0;Me.arraycopy(c,0,e,r+u,c.length)},n}(),pg=Lhe;var Vhe=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o-1;s++)for(var a=r[s],c=0;c<i-1;c++){var u=a[c];u===a[c+1]&&u===r[s+1][c]&&u===r[s+1][c+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=0;a<i;a++){var c=r[s];a+6<i&&c[a]===1&&c[a+1]===0&&c[a+2]===1&&c[a+3]===1&&c[a+4]===1&&c[a+5]===0&&c[a+6]===1&&(n.isWhiteHorizontal(c,a-4,a)||n.isWhiteHorizontal(c,a+7,a+11))&&t++,s+6<o&&r[s][a]===1&&r[s+1][a]===0&&r[s+2][a]===1&&r[s+3][a]===1&&r[s+4][a]===1&&r[s+5][a]===0&&r[s+6][a]===1&&(n.isWhiteVertical(r,a,s-4,s)||n.isWhiteVertical(r,a,s+7,s+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var o=r;o<i;o++)if(e[o][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var a=r[s],c=0;c<i;c++)a[c]===1&&t++;var u=e.getHeight()*e.getWidth(),l=Math.floor(Math.abs(t*2-u)*10/u);return l*n.N4},n.getDataMaskBit=function(e,t,r){var i,o;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:o=r*t,i=(o&1)+o%3;break;case 6:o=r*t,i=(o&1)+o%3&1;break;case 7:o=r*t,i=o%3+(r+t&1)&1;break;default:throw new Y("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),o=t?e.getWidth():e.getHeight(),s=e.getArray(),a=0;a<i;a++){for(var c=0,u=-1,l=0;l<o;l++){var d=t?s[a][l]:s[l][a];d===u?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,u=d)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),Xa=Vhe;var Bhe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Uhe=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=Bhe(this.bytes),o=i.next();!o.done;o=i.next()){var s=o.value;ot.fill(s,e)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var o=this.bytes[r],s=t.bytes[r],a=0,c=this.width;a<c;++a)if(o[a]!==s[a])return!1;return!0},n.prototype.toString=function(){for(var e=new oe,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],o=0,s=this.width;o<s;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n}(),gg=Uhe;var jhe=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new oe;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),Zd=jhe;var Hhe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zhe=function(n){Hhe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e}(xt),It=zhe;var $he=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,o){n.clearMatrix(o),n.embedBasicPatterns(r,o),n.embedTypeInfo(t,i,o),n.maybeEmbedVersionInfo(r,o),n.embedDataBits(e,i,o)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new Tt;n.makeTypeInfoBits(e,t,i);for(var o=0,s=i.getSize();o<s;++o){var a=i.get(i.getSize()-1-o),c=n.TYPE_INFO_COORDINATES[o],u=c[0],l=c[1];if(r.setBoolean(u,l,a),o<8){var d=r.getWidth()-o-1,f=8;r.setBoolean(d,f,a)}else{var d=8,f=r.getHeight()-7+(o-8);r.setBoolean(d,f,a)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new Tt;n.makeVersionInfoBits(e,r);for(var i=6*3-1,o=0;o<6;++o)for(var s=0;s<3;++s){var a=r.get(i);i--,t.setBoolean(o,t.getHeight()-11+s,a),t.setBoolean(t.getHeight()-11+s,o,a)}}},n.embedDataBits=function(e,t,r){for(var i=0,o=-1,s=r.getWidth()-1,a=r.getHeight()-1;s>0;){for(s===6&&(s-=1);a>=0&&a<r.getHeight();){for(var c=0;c<2;++c){var u=s-c;if(n.isEmpty(r.get(u,a))){var l=void 0;i<e.getSize()?(l=e.get(i),++i):l=!1,t!==255&&Xa.getDataMaskBit(t,u,a)&&(l=!l),r.setBoolean(u,a,l)}}a+=o}o=-o,a+=o,s-=2}if(i!==e.getSize())throw new It("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-le.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Y("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!Zd.isValidMaskPattern(t))throw new It("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var o=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(o,10);var s=new Tt;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new It("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new It("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new It;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new It;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new It;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var o=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,t+i,o[s])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var o=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,t+i,o[s])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],o=0,s=i.length;o!==s;o++){var a=i[o];if(a>=0)for(var c=0;c!==s;c++){var u=i[c];u>=0&&n.isEmpty(t.get(u,a))&&n.embedPositionAdjustmentPattern(u-2,a-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),x_=$he;var Whe=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),T9=Whe;var M9=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ghe=function(){function n(){}return n.calculateMaskPenalty=function(e){return Xa.applyMaskPenaltyRule1(e)+Xa.applyMaskPenaltyRule2(e)+Xa.applyMaskPenaltyRule3(e)+Xa.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,o=r!==null&&r.get(Ee.CHARACTER_SET)!==void 0;o&&(i=r.get(Ee.CHARACTER_SET).toString());var s=this.chooseMode(e,i),a=new Tt;if(s===bt.BYTE&&(o||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=Mt.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,a)}this.appendModeInfo(s,a);var u=new Tt;this.appendBytes(e,s,u,i);var l;if(r!==null&&r.get(Ee.QR_VERSION)!==void 0){var d=Number.parseInt(r.get(Ee.QR_VERSION).toString(),10);l=eo.getVersionForNumber(d);var f=this.calculateBitsNeeded(s,a,u,l);if(!this.willFit(f,l,t))throw new It("Data too big for requested version")}else l=this.recommendVersion(t,s,a,u);var h=new Tt;h.appendBitArray(a);var g=s===bt.BYTE?u.getSizeInBytes():e.length;this.appendLengthInfo(g,l,s,h),h.appendBitArray(u);var m=l.getECBlocksForLevel(t),y=l.getTotalCodewords()-m.getTotalECCodewords();this.terminateBits(y,h);var x=this.interleaveWithECBytes(h,l.getTotalCodewords(),y,m.getNumBlocks()),w=new Zd;w.setECLevel(t),w.setMode(s),w.setVersion(l);var b=l.getDimensionForVersion(),T=new gg(b,b),P=this.chooseMaskPattern(x,t,l,T);return w.setMaskPattern(P),x_.buildMatrix(x,t,l,P,T),w.setMatrix(T),w},n.recommendVersion=function(e,t,r,i){var o=this.calculateBitsNeeded(t,r,i,eo.getVersionForNumber(1)),s=this.chooseVersion(o,e),a=this.calculateBitsNeeded(t,r,i,s);return this.chooseVersion(a,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),Mt.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return bt.KANJI;for(var r=!1,i=!1,o=0,s=e.length;o<s;++o){var a=e.charAt(o);if(n.isDigit(a))r=!0;else if(this.getAlphanumericCode(a.charCodeAt(0))!==-1)i=!0;else return bt.BYTE}return i?bt.ALPHANUMERIC:r?bt.NUMERIC:bt.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=Nn.encode(e,Mt.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var o=t[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var o=Number.MAX_SAFE_INTEGER,s=-1,a=0;a<Zd.NUM_MASK_PATTERNS;a++){x_.buildMatrix(e,t,r,a,i);var c=this.calculateMaskPenalty(i);c<o&&(o=c,s=a)}return s},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=eo.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new It("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),o=t.getECBlocksForLevel(r),s=o.getTotalECCodewords(),a=i-s,c=(e+7)/8;return a>=c},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new It("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var o=t.getSize()&7;if(o>0)for(var i=o;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits((i&1)===0?236:17,8);if(t.getSize()!==r)throw new It("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,o,s){if(i>=r)throw new It("Block ID too large");var a=e%r,c=r-a,u=Math.floor(e/r),l=u+1,d=Math.floor(t/r),f=d+1,h=u-d,g=l-f;if(h!==g)throw new It("EC bytes mismatch");if(r!==c+a)throw new It("RS blocks mismatch");if(e!==(d+h)*c+(f+g)*a)throw new It("Total bytes mismatch");i<c?(o[0]=d,s[0]=h):(o[0]=f,s[0]=g)},n.interleaveWithECBytes=function(e,t,r,i){var o,s,a,c;if(e.getSizeInBytes()!==r)throw new It("Number of bits and data bytes does not match");for(var u=0,l=0,d=0,f=new Array,h=0;h<i;++h){var g=new Int32Array(1),m=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,h,g,m);var y=g[0],x=new Uint8Array(y);e.toBytes(8*u,x,0,y);var w=n.generateECBytes(x,m[0]);f.push(new T9(x,w)),l=Math.max(l,y),d=Math.max(d,w.length),u+=g[0]}if(r!==u)throw new It("Data bytes does not match offset");for(var b=new Tt,h=0;h<l;++h)try{for(var T=(o=void 0,M9(f)),P=T.next();!P.done;P=T.next()){var k=P.value,x=k.getDataBytes();h<x.length&&b.appendBits(x[h],8)}}catch(M){o={error:M}}finally{try{P&&!P.done&&(s=T.return)&&s.call(T)}finally{if(o)throw o.error}}for(var h=0;h<d;++h)try{for(var C=(a=void 0,M9(f)),E=C.next();!E.done;E=C.next()){var k=E.value,w=k.getErrorCorrectionBytes();h<w.length&&b.appendBits(w[h],8)}}catch(M){a={error:M}}finally{try{E&&!E.done&&(c=C.return)&&c.call(C)}finally{if(a)throw a.error}}if(t!==b.getSizeInBytes())throw new It("Interleaving error: "+t+" and "+b.getSizeInBytes()+" differ.");return b},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),o=0;o<r;o++)i[o]=e[o]&255;new pg(dn.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),o=0;o<t;o++)s[o]=i[r+o];return s},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var o=r.getCharacterCountBits(t);if(e>=1<<o)throw new It(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},n.appendBytes=function(e,t,r,i){switch(t){case bt.NUMERIC:n.appendNumericBytes(e,r);break;case bt.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case bt.BYTE:n.append8BitBytes(e,r,i);break;case bt.KANJI:n.appendKanjiBytes(e,r);break;default:throw new It("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var o=n.getDigit(e.charAt(i));if(i+2<r){var s=n.getDigit(e.charAt(i+1)),a=n.getDigit(e.charAt(i+2));t.appendBits(o*100+s*10+a,10),i+=3}else if(i+1<r){var s=n.getDigit(e.charAt(i+1));t.appendBits(o*10+s,7),i+=2}else t.appendBits(o,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var o=n.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new It;if(i+1<r){var s=n.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new It;t.appendBits(o*45+s,11),i+=2}else t.appendBits(o,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=Nn.encode(e,r)}catch(c){throw new It(c)}for(var o=0,s=i.length;o!==s;o++){var a=i[o];t.appendBits(a,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=Nn.encode(e,Mt.SJIS)}catch(d){throw new It(d)}for(var i=r.length,o=0;o<i;o+=2){var s=r[o]&255,a=r[o+1]&255,c=s<<8&4294967295|a,u=-1;if(c>=33088&&c<=40956?u=c-33088:c>=57408&&c<=60351&&(u=c-49472),u===-1)throw new It("Invalid byte sequence");var l=(u>>8)*192+(u&255);t.appendBits(l,13)}},n.appendECI=function(e,t){t.appendBits(bt.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Mt.UTF8.getName(),n}(),Rs=Ghe;var i9e=function(){function n(){}return n.prototype.write=function(e,t,r,i){if(i===void 0&&(i=null),e.length===0)throw new Y("Found empty contents");if(t<0||r<0)throw new Y("Requested dimensions are too small: "+t+"x"+r);var o=Ar.L,s=n.QUIET_ZONE_SIZE;i!==null&&(i.get(Ee.ERROR_CORRECTION)!==void 0&&(o=Ar.fromString(i.get(Ee.ERROR_CORRECTION).toString())),i.get(Ee.MARGIN)!==void 0&&(s=Number.parseInt(i.get(Ee.MARGIN).toString(),10)));var a=Rs.encode(e,o,i);return this.renderResult(a,t,r,s)},n.prototype.writeToDom=function(e,t,r,i,o){o===void 0&&(o=null),typeof e=="string"&&(e=document.querySelector(e));var s=this.write(t,r,i,o);e&&e.appendChild(s)},n.prototype.renderResult=function(e,t,r,i){var o=e.getMatrix();if(o===null)throw new yn;for(var s=o.getWidth(),a=o.getHeight(),c=s+i*2,u=a+i*2,l=Math.max(t,c),d=Math.max(r,u),f=Math.min(Math.floor(l/c),Math.floor(d/u)),h=Math.floor((l-s*f)/2),g=Math.floor((d-a*f)/2),m=this.createSVGElement(l,d),y=0,x=g;y<a;y++,x+=f)for(var w=0,b=h;w<s;w++,b+=f)if(o.get(w,y)===1){var T=this.createSvgRectElement(b,x,f,f);m.appendChild(T)}return m},n.prototype.createSVGElement=function(e,t){var r=document.createElementNS(n.SVG_NS,"svg");return r.setAttributeNS(null,"height",e.toString()),r.setAttributeNS(null,"width",t.toString()),r},n.prototype.createSvgRectElement=function(e,t,r,i){var o=document.createElementNS(n.SVG_NS,"rect");return o.setAttributeNS(null,"x",e.toString()),o.setAttributeNS(null,"y",t.toString()),o.setAttributeNS(null,"height",r.toString()),o.setAttributeNS(null,"width",i.toString()),o.setAttributeNS(null,"fill","#000000"),o},n.QUIET_ZONE_SIZE=4,n.SVG_NS="http://www.w3.org/2000/svg",n}();var qhe=function(){function n(){}return n.prototype.encode=function(e,t,r,i,o){if(e.length===0)throw new Y("Found empty contents");if(t!==X.QR_CODE)throw new Y("Can only encode QR_CODE, but got "+t);if(r<0||i<0)throw new Y("Requested dimensions are too small: "+r+"x"+i);var s=Ar.L,a=n.QUIET_ZONE_SIZE;o!==null&&(o.get(Ee.ERROR_CORRECTION)!==void 0&&(s=Ar.fromString(o.get(Ee.ERROR_CORRECTION).toString())),o.get(Ee.MARGIN)!==void 0&&(a=Number.parseInt(o.get(Ee.MARGIN).toString(),10)));var c=Rs.encode(e,s,o);return n.renderResult(c,r,i,a)},n.renderResult=function(e,t,r,i){var o=e.getMatrix();if(o===null)throw new yn;for(var s=o.getWidth(),a=o.getHeight(),c=s+i*2,u=a+i*2,l=Math.max(t,c),d=Math.max(r,u),f=Math.min(Math.floor(l/c),Math.floor(d/u)),h=Math.floor((l-s*f)/2),g=Math.floor((d-a*f)/2),m=new Ot(l,d),y=0,x=g;y<a;y++,x+=f)for(var w=0,b=h;w<s;w++,b+=f)o.get(w,y)===1&&m.setRegion(b,x,f,f);return m},n.QUIET_ZONE_SIZE=4,n}(),RT=qhe;var M9e=function(){function n(){}return n.prototype.encode=function(e,t,r,i,o){var s;switch(t){case X.QR_CODE:s=new RT;break;default:throw new Y("No encoder available for format "+t)}return s.encode(e,t,r,i,o)},n}();var Khe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),F9e=function(n){Khe(e,n);function e(t,r,i,o,s,a,c,u){var l=n.call(this,a,c)||this;if(l.yuvData=t,l.dataWidth=r,l.dataHeight=i,l.left=o,l.top=s,o+a>r||s+c>i)throw new Y("Crop rectangle does not fit within image data.");return u&&l.reverseHorizontal(a,c),l}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Y("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return Me.arraycopy(this.yuvData,o,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Me.arraycopy(this.yuvData,s,o,0,i),o;for(var a=0;a<r;a++){var c=a*t;Me.arraycopy(this.yuvData,s,o,c,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,o,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),o=this.yuvData,s=this.top*this.dataWidth+this.left,a=0;a<r;a++){for(var c=a*t,u=0;u<t;u++){var l=o[s+u*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+u]=4278190080|l*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,o=0,s=this.top*this.dataWidth+this.left;o<r;o++,s+=this.dataWidth)for(var a=s+t/2,c=s,u=s+t-1;c<a;c++,u--){var l=i[c];i[c]=i[u],i[u]=l}},e.prototype.invert=function(){return new As(this)},e.THUMBNAIL_SCALE_FACTOR=2,e}(Ji);var Yhe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),z9e=function(n){Yhe(e,n);function e(t,r,i,o,s,a,c){var u=n.call(this,r,i)||this;if(u.dataWidth=o,u.dataHeight=s,u.left=a,u.top=c,t.BYTES_PER_ELEMENT===4){for(var l=r*i,d=new Uint8ClampedArray(l),f=0;f<l;f++){var h=t[f],g=h>>16&255,m=h>>7&510,y=h&255;d[f]=(g+m+y)/4&255}u.luminances=d}else u.luminances=t;if(o===void 0&&(u.dataWidth=r),s===void 0&&(u.dataHeight=i),a===void 0&&(u.left=0),c===void 0&&(u.top=0),u.left+r>u.dataWidth||u.top+i>u.dataHeight)throw new Y("Crop rectangle does not fit within image data.");return u}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Y("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return Me.arraycopy(this.luminances,o,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return Me.arraycopy(this.luminances,s,o,0,i),o;for(var a=0;a<r;a++){var c=a*t;Me.arraycopy(this.luminances,s,o,c,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new As(this)},e}(Ji);var Xhe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qhe=function(n){Xhe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(Mt),Su=Qhe;var Zhe=function(){function n(){}return n.ISO_8859_1=Mt.ISO8859_1,n}(),mg=Zhe;var Jhe=function(){function n(e,t,r){this.codewords=e,this.numcols=t,this.numrows=r,this.bits=new Uint8Array(t*r),ot.fill(this.bits,2)}return n.prototype.getNumrows=function(){return this.numrows},n.prototype.getNumcols=function(){return this.numcols},n.prototype.getBits=function(){return this.bits},n.prototype.getBit=function(e,t){return this.bits[t*this.numcols+e]===1},n.prototype.setBit=function(e,t,r){this.bits[t*this.numcols+e]=r?1:0},n.prototype.noBit=function(e,t){return this.bits[t*this.numcols+e]===2},n.prototype.place=function(){var e=0,t=4,r=0;do{t===this.numrows&&r===0&&this.corner1(e++),t===this.numrows-2&&r===0&&this.numcols%4!==0&&this.corner2(e++),t===this.numrows-2&&r===0&&this.numcols%8===4&&this.corner3(e++),t===this.numrows+4&&r===2&&this.numcols%8===0&&this.corner4(e++);do t<this.numrows&&r>=0&&this.noBit(r,t)&&this.utah(t,r,e++),t-=2,r+=2;while(t>=0&&r<this.numcols);t++,r+=3;do t>=0&&r<this.numcols&&this.noBit(r,t)&&this.utah(t,r,e++),t+=2,r-=2;while(t<this.numrows&&r>=0);t+=3,r++}while(t<this.numrows||r<this.numcols);this.noBit(this.numcols-1,this.numrows-1)&&(this.setBit(this.numcols-1,this.numrows-1,!0),this.setBit(this.numcols-2,this.numrows-2,!0))},n.prototype.module=function(e,t,r,i){e<0&&(e+=this.numrows,t+=4-(this.numrows+4)%8),t<0&&(t+=this.numcols,e+=4-(this.numcols+4)%8);var o=this.codewords.charCodeAt(r);o&=1<<8-i,this.setBit(t,e,o!==0)},n.prototype.utah=function(e,t,r){this.module(e-2,t-2,r,1),this.module(e-2,t-1,r,2),this.module(e-1,t-2,r,3),this.module(e-1,t-1,r,4),this.module(e-1,t,r,5),this.module(e,t-2,r,6),this.module(e,t-1,r,7),this.module(e,t,r,8)},n.prototype.corner1=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,1,e,2),this.module(this.numrows-1,2,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},n.prototype.corner2=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-4,e,4),this.module(0,this.numcols-3,e,5),this.module(0,this.numcols-2,e,6),this.module(0,this.numcols-1,e,7),this.module(1,this.numcols-1,e,8)},n.prototype.corner3=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},n.prototype.corner4=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,this.numcols-1,e,2),this.module(0,this.numcols-3,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-3,e,6),this.module(1,this.numcols-2,e,7),this.module(1,this.numcols-1,e,8)},n}(),w_=Jhe;var NT,kT=[5,7,10,11,12,14,18,20,24,28,36,42,48,56,62,68],O9=[[228,48,15,111,62],[23,68,144,134,240,92,254],[28,24,185,166,223,248,116,255,110,61],[175,138,205,12,194,168,39,245,60,97,120],[41,153,158,91,61,42,142,213,97,178,100,242],[156,97,192,252,95,9,157,119,138,45,18,186,83,185],[83,195,100,39,188,75,66,61,241,213,109,129,94,254,225,48,90,188],[15,195,244,9,233,71,168,2,188,160,153,145,253,79,108,82,27,174,186,172],[52,190,88,205,109,39,176,21,155,197,251,223,155,21,5,172,254,124,12,181,184,96,50,193],[211,231,43,97,71,96,103,174,37,151,170,53,75,34,249,121,17,138,110,213,141,136,120,151,233,168,93,255],[245,127,242,218,130,250,162,181,102,120,84,179,220,251,80,182,229,18,2,4,68,33,101,137,95,119,115,44,175,184,59,25,225,98,81,112],[77,193,137,31,19,38,22,153,247,105,122,2,245,133,242,8,175,95,100,9,167,105,214,111,57,121,21,1,253,57,54,101,248,202,69,50,150,177,226,5,9,5],[245,132,172,223,96,32,117,22,238,133,238,231,205,188,237,87,191,106,16,147,118,23,37,90,170,205,131,88,120,100,66,138,186,240,82,44,176,87,187,147,160,175,69,213,92,253,225,19],[175,9,223,238,12,17,220,208,100,29,175,170,230,192,215,235,150,159,36,223,38,200,132,54,228,146,218,234,117,203,29,232,144,238,22,150,201,117,62,207,164,13,137,245,127,67,247,28,155,43,203,107,233,53,143,46],[242,93,169,50,144,210,39,118,202,188,201,189,143,108,196,37,185,112,134,230,245,63,197,190,250,106,185,221,175,64,114,71,161,44,147,6,27,218,51,63,87,10,40,130,188,17,163,31,176,170,4,107,232,7,94,166,224,124,86,47,11,204],[220,228,173,89,251,149,159,56,89,33,147,244,154,36,73,127,213,136,248,180,234,197,158,177,68,122,93,213,15,160,227,236,66,139,153,185,202,167,179,25,220,232,96,210,231,136,223,239,181,241,59,52,172,25,49,232,211,189,64,54,108,153,132,63,96,103,82,186]],epe=301,tpe=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=epe);return{LOG:n,ALOG:e}},vg=(NT=tpe([],[]),NT.LOG),FT=NT.ALOG;var LT=129,E_=230,P9=231,R9=235,N9=236,k9=237,F9=238,L9=239,V9=240,C_=254,B9=254,Jd="[)>05",ef="[)>06",tf="",Xe=0,Dn=1,jn=2,fn=3,_n=4,kn=5;var npe=function(){function n(){}return n.encodeECC200=function(e,t){if(e.length!==t.getDataCapacity())throw new Error("The number of codewords does not match the selected symbol");var r=new oe;r.append(e);var i=t.getInterleavedBlockCount();if(i===1){var o=this.createECCBlock(e,t.getErrorCodewords());r.append(o)}else{for(var s=[],a=[],c=0;c<i;c++)s[c]=t.getDataLengthForInterleavedBlock(c+1),a[c]=t.getErrorLengthForInterleavedBlock(c+1);for(var u=0;u<i;u++){for(var l=new oe,d=u;d<t.getDataCapacity();d+=i)l.append(e.charAt(d));for(var o=this.createECCBlock(l.toString(),a[u]),f=0,h=u;h<a[u]*i;h+=i)r.setCharAt(t.getDataCapacity()+h,o.charAt(f++))}}return r.toString()},n.createECCBlock=function(e,t){for(var r=-1,i=0;i<kT.length;i++)if(kT[i]===t){r=i;break}if(r<0)throw new Error("Illegal number of error correction codewords specified: "+t);for(var o=O9[r],s=[],i=0;i<t;i++)s[i]=0;for(var i=0;i<e.length;i++){for(var a=s[t-1]^e.charAt(i).charCodeAt(0),c=t-1;c>0;c--)a!==0&&o[c]!==0?s[c]=s[c-1]^FT[(vg[a]+vg[o[c]])%255]:s[c]=s[c-1];a!==0&&o[0]!==0?s[0]=FT[(vg[a]+vg[o[0]])%255]:s[0]=0}for(var u=[],i=0;i<t;i++)u[i]=s[t-i-1];return u.map(function(l){return String.fromCharCode(l)}).join("")},n}(),b_=npe;var VT=function(){function n(){}return n.prototype.getEncodingMode=function(){return Xe},n.prototype.encode=function(e){var t=we.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=we.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case kn:e.writeCodeword(P9),e.signalEncoderChange(kn);return;case Dn:e.writeCodeword(E_),e.signalEncoderChange(Dn);return;case fn:e.writeCodeword(F9),e.signalEncoderChange(fn);break;case jn:e.writeCodeword(L9),e.signalEncoderChange(jn);break;case _n:e.writeCodeword(V9),e.signalEncoderChange(_n);break;default:throw new Error("Illegal mode: "+i)}else we.isExtendedASCII(r)?(e.writeCodeword(R9),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(we.isDigit(e)&&we.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n}();var BT=function(){function n(){}return n.prototype.getEncodingMode=function(){return kn},n.prototype.encode=function(e){var t=new oe;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=we.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Xe);break}}var o=t.length()-1,s=1,a=e.getCodewordCount()+o+s;e.updateSymbolInfo(a);var c=e.getSymbolInfo().getDataCapacity()-a>0;if(e.hasMoreCharacters()||c)if(o<=249)t.setCharAt(0,ye.getCharAt(o));else if(o<=1555)t.setCharAt(0,ye.getCharAt(Math.floor(o/250)+249)),t.insert(1,ye.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var u=0,r=t.length();u<r;u++)e.writeCodeword(this.randomize255State(t.charAt(u).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n}();var Au=function(){function n(){}return n.prototype.getEncodingMode=function(){return Dn},n.prototype.encodeMaximal=function(e){for(var t=new oe,r=0,i=e.pos,o=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,o=t.length())}if(o!==t.length()){var a=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+a+1);e.updateSymbolInfo(c);var u=e.getSymbolInfo().getDataCapacity()-c,l=Math.floor(t.length()%3);(l===2&&u!==2||l===1&&(r>3||u!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(E_),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new oe;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),o=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+o;e.updateSymbolInfo(s);var a=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new oe;for(t.length()%3===2&&a!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||a!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var u=t.length();if(u%3===0){var l=we.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(l!==this.getEncodingMode()){e.signalEncoderChange(Xe);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var o=t.length(),s=t.toString().substring(0,o-i);t.setLengthToZero(),t.append(s),e.pos--;var a=e.getCurrentChar();return i=this.encodeChar(a,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,o=e.getCodewordCount()+r;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(C_)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(C_),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(C_)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Xe)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,o=new oe;return o.append(r),o.append(i),o.toString()},n}();var UT=function(){function n(){}return n.prototype.getEncodingMode=function(){return _n},n.prototype.encode=function(e){for(var t=new oe;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var o=t.toString().substring(4);t.setLengthToZero(),t.append(o);var s=we.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(Xe);break}}}t.append(ye.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,a=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),u=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(u=!1,e.updateSymbolInfo(e.getCodewordCount()+a.length))}u?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(a)}finally{e.signalEncoderChange(Xe)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(ye.getCharAt(e-64)):we.illegalCharacter(ye.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,o=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,a=(r<<18)+(i<<12)+(o<<6)+s,c=a>>16&255,u=a>>8&255,l=a&255,d=new oe;return d.append(c),t>=2&&d.append(u),t>=3&&d.append(l),d.toString()},n}();var rpe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ipe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ut=function(){function n(e,t,r,i,o,s,a,c){a===void 0&&(a=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=s,this.rsBlockData=a,this.rsBlockError=c}return n.lookup=function(e,t,r,i,o){var s,a;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var c=ipe(spe),u=c.next();!u.done;u=c.next()){var l=u.value;if(!(t===1&&l.rectangular)&&!(t===2&&!l.rectangular)&&!(r!=null&&(l.getSymbolWidth()<r.getWidth()||l.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(l.getSymbolWidth()>i.getWidth()||l.getSymbolHeight()>i.getHeight()))&&e<=l.dataCapacity)return l}}catch(d){s={error:d}}finally{try{u&&!u.done&&(a=c.return)&&a.call(c)}finally{if(s)throw s.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n}(),nf=ut,ope=function(n){rpe(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(ut),spe=[new ut(!1,3,5,8,8,1),new ut(!1,5,7,10,10,1),new ut(!0,5,7,16,6,1),new ut(!1,8,10,12,12,1),new ut(!0,10,11,14,6,2),new ut(!1,12,12,14,14,1),new ut(!0,16,14,24,10,1),new ut(!1,18,14,16,16,1),new ut(!1,22,18,18,18,1),new ut(!0,22,18,16,10,2),new ut(!1,30,20,20,20,1),new ut(!0,32,24,16,14,2),new ut(!1,36,24,22,22,1),new ut(!1,44,28,24,24,1),new ut(!0,49,28,22,14,2),new ut(!1,62,36,14,14,4),new ut(!1,86,42,16,16,4),new ut(!1,114,48,18,18,4),new ut(!1,144,56,20,20,4),new ut(!1,174,68,22,22,4),new ut(!1,204,84,24,24,4,102,42),new ut(!1,280,112,14,14,16,140,56),new ut(!1,368,144,16,16,16,92,36),new ut(!1,456,192,18,18,16,114,48),new ut(!1,576,224,20,20,16,144,56),new ut(!1,696,272,22,22,16,174,68),new ut(!1,816,336,24,24,16,136,56),new ut(!1,1050,408,18,18,36,175,68),new ut(!1,1304,496,20,20,36,163,62),new ope];var jT=function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(a){return a.charCodeAt(0)}),r=new oe,i=0,o=t.length;i<o;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new oe,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=nf.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}();var ape=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),HT=function(n){ape(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return fn},e.prototype.encode=function(t){for(var r=new oe;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var o=r.length();if(o%3===0){this.writeNextTriplet(t,r);var s=we.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(Xe);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):we.illegalCharacter(ye.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),o=r.length();t.pos-=o,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(B9),t.getNewEncoding()<0&&t.signalEncoderChange(Xe)},e}(Au);var cpe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zT=function(n){cpe(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return jn},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e}(Au);var upe=function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=LT+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,o){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!1);var s=new Au,a=[new VT,s,new zT,new HT,new UT,new BT],c=new jT(e);c.setSymbolShape(t),c.setSizeConstraints(r,i),e.startsWith(Jd)&&e.endsWith(tf)?(c.writeCodeword(N9),c.setSkipAtEnd(2),c.pos+=Jd.length):e.startsWith(ef)&&e.endsWith(tf)&&(c.writeCodeword(k9),c.setSkipAtEnd(2),c.pos+=ef.length);var u=Xe;for(o&&(s.encodeMaximal(c),u=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)a[u].encode(c),c.getNewEncoding()>=0&&(u=c.getNewEncoding(),c.resetEncoderSignal());var l=c.getCodewordCount();c.updateSymbolInfo();var d=c.getSymbolInfo().getDataCapacity();l<d&&u!==Xe&&u!==kn&&u!==_n&&c.writeCodeword("\xFE");var f=c.getCodewords();for(f.length()<d&&f.append(LT);f.length()<d;)f.append(this.randomize253State(f.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===fn&&i===fn){for(var o=Math.min(t+3,e.length),s=t;s<o;s++)if(!this.isNativeX12(e.charCodeAt(s)))return Xe}else if(r===_n&&i===_n){for(var o=Math.min(t+4,e.length),s=t;s<o;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return Xe}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===Xe?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var o=0,s=new Uint8Array(6),a=[];;){if(t+o===e.length){ot.fill(s,0),ot.fill(a,0);var c=this.findMinimums(i,a,le.MAX_VALUE,s),u=this.getMinimumCount(s);if(a[Xe]===c)return Xe;if(u===1){if(s[kn]>0)return kn;if(s[_n]>0)return _n;if(s[jn]>0)return jn;if(s[fn]>0)return fn}return Dn}var l=e.charCodeAt(t+o);if(o++,this.isDigit(l)?i[Xe]+=.5:this.isExtendedASCII(l)?(i[Xe]=Math.ceil(i[Xe]),i[Xe]+=2):(i[Xe]=Math.ceil(i[Xe]),i[Xe]++),this.isNativeC40(l)?i[Dn]+=2/3:this.isExtendedASCII(l)?i[Dn]+=8/3:i[Dn]+=4/3,this.isNativeText(l)?i[jn]+=2/3:this.isExtendedASCII(l)?i[jn]+=8/3:i[jn]+=4/3,this.isNativeX12(l)?i[fn]+=2/3:this.isExtendedASCII(l)?i[fn]+=13/3:i[fn]+=10/3,this.isNativeEDIFACT(l)?i[_n]+=3/4:this.isExtendedASCII(l)?i[_n]+=17/4:i[_n]+=13/4,this.isSpecialB256(l)?i[kn]+=4:i[kn]++,o>=4){if(ot.fill(s,0),ot.fill(a,0),this.findMinimums(i,a,le.MAX_VALUE,s),a[Xe]<this.min(a[kn],a[Dn],a[jn],a[fn],a[_n]))return Xe;if(a[kn]<a[Xe]||a[kn]+1<this.min(a[Dn],a[jn],a[fn],a[_n]))return kn;if(a[_n]+1<this.min(a[kn],a[Dn],a[jn],a[fn],a[Xe]))return _n;if(a[jn]+1<this.min(a[kn],a[Dn],a[_n],a[fn],a[Xe]))return jn;if(a[fn]+1<this.min(a[kn],a[Dn],a[_n],a[jn],a[Xe]))return fn;if(a[Dn]+1<this.min(a[Xe],a[kn],a[_n],a[jn])){if(a[Dn]<a[fn])return Dn;if(a[Dn]===a[fn]){for(var d=t+o+1;d<e.length;){var f=e.charCodeAt(d);if(this.isX12TermSep(f))return fn;if(!this.isNativeX12(f))break;d++}return Dn}}}}},n.min=function(e,t,r,i,o){var s=Math.min(e,Math.min(t,Math.min(r,i)));return o===void 0?s:Math.min(s,o)},n.findMinimums=function(e,t,r,i){for(var o=0;o<6;o++){var s=t[o]=Math.ceil(e[o]);r>s&&(r=s,ot.fill(i,0)),r===s&&(i[o]=i[o]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=le.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n}(),we=upe;var $T=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},U9=function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return Nn.encode(e,this.charset)!=null}catch{return!1}},n}(),j9=function(){function n(e,t,r){var i,o,s,a,c,u;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(S){return new U9(Su.forName(S))}),this.encoders=[];var l=[];l.push(new U9(mg.ISO_8859_1));for(var d=t!=null&&t.name.startsWith("UTF"),f=0;f<e.length;f++){var h=!1;try{for(var g=(i=void 0,$T(l)),m=g.next();!m.done;m=g.next()){var y=m.value,x=e.charAt(f),w=x.charCodeAt(0);if(w===r||y.canEncode(x)){h=!0;break}}}catch(S){i={error:S}}finally{try{m&&!m.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}if(!h)try{for(var b=(s=void 0,$T(this.ENCODERS)),T=b.next();!T.done;T=b.next()){var y=T.value;if(y.canEncode(e.charAt(f))){l.push(y),h=!0;break}}}catch(S){s={error:S}}finally{try{T&&!T.done&&(a=b.return)&&a.call(b)}finally{if(s)throw s.error}}h||(d=!0)}if(l.length===1&&!d)this.encoders=[l[0]];else{this.encoders=[];var P=0;try{for(var k=$T(l),C=k.next();!C.done;C=k.next()){var y=C.value;this.encoders[P++]=y}}catch(S){c={error:S}}finally{try{C&&!C.done&&(u=k.return)&&u.call(k)}finally{if(c)throw c.error}}}var E=-1;if(t!=null){for(var f=0;f<this.encoders.length;f++)if(this.encoders[f]!=null&&t.name===this.encoders[f].name){E=f;break}}this.priorityEncoderIndex=E}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return Nn.encode(ye.getCharAt(e),this.encoders[t].name)},n}();var lpe=3,z9=function(){function n(e,t,r){this.fnc1=r;var i=new j9(e,t,r);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var s=e.charAt(o).charCodeAt(0);this.bytes[o]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new oe,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,o,s){var a=e.charAt(i).charCodeAt(0),c=0,u=t.length();t.getPriorityEncoderIndex()>=0&&(a===s||t.canEncode(a,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),u=c+1);for(var l=c;l<u;l++)(a===s||t.canEncode(a,l))&&this.addEdge(r,i+1,new H9(a,t,l,o,s))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,o=new H9[i+1][t.length()];this.addEdges(e,t,o,0,null,r);for(var s=1;s<=i;s++){for(var a=0;a<t.length();a++)o[s][a]!=null&&s<i&&this.addEdges(e,t,o,s,o[s][a],r);for(var a=0;a<t.length();a++)o[s-1][a]=null}for(var c=-1,u=le.MAX_VALUE,a=0;a<t.length();a++)if(o[i][a]!=null){var l=o[i][a];l.cachedTotalSize<u&&(u=l.cachedTotalSize,c=a)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var d=[],f=o[i][c];f!=null;){if(f.isFNC1())d.unshift(1e3);else for(var h=t.encode(f.c,f.encoderIndex),s=h.length-1;s>=0;s--)d.unshift(h[s]&255);var g=f.previous===null?0:f.previous.encoderIndex;g!==f.encoderIndex&&d.unshift(256+t.getECIValue(f.encoderIndex)),f=f.previous}for(var m=[],s=0;s<m.length;s++)m[s]=d[s];return m},n}();var H9=function(){function n(e,t,r,i,o){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var s=this.isFNC1()?1:t.encode(e,r).length,a=i===null?0:i.encoderIndex;a!==r&&(s+=lpe),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n}();var dpe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fpe=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o},hpe=function(){for(var n=[],e=0;e<arguments.length;e++)n=n.concat(fpe(arguments[e]));return n},ee=function(n){return n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256",n}(ee||{}),ppe=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],dr=function(){function n(){}return n.isExtendedASCII=function(e,t){return e!==t&&e>=128&&e<=255},n.isInC40Shift1Set=function(e){return e<=31},n.isInC40Shift2Set=function(e,t){var r,i;try{for(var o=yg(ppe),s=o.next();!s.done;s=o.next()){var a=s.value;if(a.charCodeAt(0)===e)return!0}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return e===t},n.isInTextShift1Set=function(e){return this.isInC40Shift1Set(e)},n.isInTextShift2Set=function(e,t){return this.isInC40Shift2Set(e,t)},n.encodeHighLevel=function(e,t,r,i){t===void 0&&(t=null),r===void 0&&(r=-1),i===void 0&&(i=0);var o=0;return e.startsWith(Jd)&&e.endsWith(tf)?(o=5,e=e.substring(Jd.length,e.length-2)):e.startsWith(ef)&&e.endsWith(tf)&&(o=6,e=e.substring(ef.length,e.length-2)),decodeURIComponent(escape(String.fromCharCode.apply(String,hpe(this.encode(e,t,r,i,o)))))},n.encode=function(e,t,r,i,o){return this.encodeMinimally(new mpe(e,t,r,i,o)).getBytes()},n.addEdge=function(e,t){var r=t.fromPosition+t.characterLength;(e[r][t.getEndMode()]===null||e[r][t.getEndMode()].cachedTotalSize>t.cachedTotalSize)&&(e[r][t.getEndMode()]=t)},n.getNumberOfC40Words=function(e,t,r,i){for(var o=0,s=t;s<e.length();s++){if(e.isECI(s))return i[0]=0,0;var a=e.charAt(s);if(r&&we.isNativeC40(a)||!r&&we.isNativeText(a))o++;else if(!n.isExtendedASCII(a,e.getFNC1Character()))o+=2;else{var c=a&255;c>=128&&(r&&we.isNativeC40(c-128)||!r&&we.isNativeText(c-128))?o+=3:o+=4}if(o%3===0||(o-2)%3===0&&s+1===e.length())return i[0]=s-t+1,Math.ceil(o/3)}return i[0]=0,0},n.addEdges=function(e,t,r,i){var o,s;if(e.isECI(r)){this.addEdge(t,new Di(e,ee.ASCII,r,1,i));return}var a=e.charAt(r);if(i===null||i.getEndMode()!==ee.EDF){we.isDigit(a)&&e.haveNCharacters(r,2)&&we.isDigit(e.charAt(r+1))?this.addEdge(t,new Di(e,ee.ASCII,r,2,i)):this.addEdge(t,new Di(e,ee.ASCII,r,1,i));var c=[ee.C40,ee.TEXT];try{for(var u=yg(c),l=u.next();!l.done;l=u.next()){var d=l.value,f=[];n.getNumberOfC40Words(e,r,d===ee.C40,f)>0&&this.addEdge(t,new Di(e,d,r,f[0],i))}}catch(m){o={error:m}}finally{try{l&&!l.done&&(s=u.return)&&s.call(u)}finally{if(o)throw o.error}}e.haveNCharacters(r,3)&&we.isNativeX12(e.charAt(r))&&we.isNativeX12(e.charAt(r+1))&&we.isNativeX12(e.charAt(r+2))&&this.addEdge(t,new Di(e,ee.X12,r,3,i)),this.addEdge(t,new Di(e,ee.B256,r,1,i))}var h;for(h=0;h<3;h++){var g=r+h;if(e.haveNCharacters(g,1)&&we.isNativeEDIFACT(e.charAt(g)))this.addEdge(t,new Di(e,ee.EDF,r,h+1,i));else break}h===3&&e.haveNCharacters(r,4)&&we.isNativeEDIFACT(e.charAt(r+3))&&this.addEdge(t,new Di(e,ee.EDF,r,4,i))},n.encodeMinimally=function(e){var t=e.length(),r=Array(t+1).fill(null).map(function(){return Array(6).fill(0)});this.addEdges(e,r,0,null);for(var i=1;i<=t;i++){for(var o=0;o<6;o++)r[i][o]!==null&&i<t&&this.addEdges(e,r,i,r[i][o]);for(var o=0;o<6;o++)r[i-1][o]=null}for(var s=-1,a=le.MAX_VALUE,o=0;o<6;o++)if(r[t][o]!==null){var c=r[t][o],u=o>=1&&o<=3?c.cachedTotalSize+1:c.cachedTotalSize;u<a&&(a=u,s=o)}if(s<0)throw new Error('Failed to encode "'+e+'"');return new gpe(r[t][s])},n}();var gpe=function(){function n(e){var t=e.input,r=0,i=[],o=[],s=[];(e.mode===ee.C40||e.mode===ee.TEXT||e.mode===ee.X12)&&e.getEndMode()!==ee.ASCII&&(r+=this.prepend(Di.getBytes(254),i));for(var a=e;a!==null;)r+=this.prepend(a.getDataBytes(),i),(a.previous===null||a.getPreviousStartMode()!==a.getMode())&&(a.getMode()===ee.B256&&(r<=249?(i.unshift(r),r++):(i.unshift(r%250),i.unshift(r/250+249),r+=2),o.push(i.length),s.push(r)),this.prepend(a.getLatchBytes(),i),r=0),a=a.previous;t.getMacroId()===5?r+=this.prepend(Di.getBytes(236),i):t.getMacroId()===6&&(r+=this.prepend(Di.getBytes(237),i)),t.getFNC1Character()>0&&(r+=this.prepend(Di.getBytes(232),i));for(var c=0;c<o.length;c++)this.applyRandomPattern(i,i.length-o[c],s[c]);var u=e.getMinSymbolSize(i.length);for(i.length<u&&i.push(129);i.length<u;)i.push(this.randomize253State(i.length+1));this.bytes=new Uint8Array(i.length);for(var c=0;c<this.bytes.length;c++)this.bytes[c]=i[c]}return n.prototype.prepend=function(e,t){for(var r=e.length-1;r>=0;r--)t.unshift(e[r]);return e.length},n.prototype.randomize253State=function(e){var t=149*e%253+1,r=129+t;return r<=254?r:r-254},n.prototype.applyRandomPattern=function(e,t,r){for(var i=0;i<r;i++){var o=t+i,s=e[o]&255,a=149*(o+1)%255+1,c=s+a;e[o]=c<=255?c:c-256}},n.prototype.getBytes=function(){return this.bytes},n}(),Di=function(){function n(e,t,r,i,o){if(this.input=e,this.mode=t,this.fromPosition=r,this.characterLength=i,this.previous=o,this.allCodewordCapacities=[3,5,8,10,12,16,18,22,30,32,36,44,49,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.squareCodewordCapacities=[3,5,8,12,18,22,30,36,44,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.rectangularCodewordCapacities=[5,10,16,33,32,49],!(r+i<=e.length()))throw new Error("Invalid edge");var s=o!==null?o.cachedTotalSize:0,a=this.getPreviousMode();switch(t){case ee.ASCII:s++,(e.isECI(r)||dr.isExtendedASCII(e.charAt(r),e.getFNC1Character()))&&s++,(a===ee.C40||a===ee.TEXT||a===ee.X12)&&s++;break;case ee.B256:s++,(a!==ee.B256||this.getB256Size()===250)&&s++,a===ee.ASCII?s++:(a===ee.C40||a===ee.TEXT||a===ee.X12)&&(s+=2);break;case ee.C40:case ee.TEXT:case ee.X12:if(t===ee.X12)s+=2;else{var c=[];s+=dr.getNumberOfC40Words(e,r,t===ee.C40,c)*2}a===ee.ASCII||a===ee.B256?s++:a!==t&&(a===ee.C40||a===ee.TEXT||a===ee.X12)&&(s+=2);break;case ee.EDF:s+=3,a===ee.ASCII||a===ee.B256?s++:(a===ee.C40||a===ee.TEXT||a===ee.X12)&&(s+=2);break}this.cachedTotalSize=s}return n.prototype.getB256Size=function(){for(var e=0,t=this;t!==null&&t.mode===ee.B256&&e<=250;)e++,t=t.previous;return e},n.prototype.getPreviousStartMode=function(){return this.previous===null?ee.ASCII:this.previous.mode},n.prototype.getPreviousMode=function(){return this.previous===null?ee.ASCII:this.previous.getEndMode()},n.prototype.getEndMode=function(){if(this.mode===ee.EDF){if(this.characterLength<4)return ee.ASCII;var e=this.getLastASCII();if(e>0&&this.getCodewordsRemaining(this.cachedTotalSize+e)<=2-e)return ee.ASCII}if(this.mode===ee.C40||this.mode===ee.TEXT||this.mode===ee.X12){if(this.fromPosition+this.characterLength>=this.input.length()&&this.getCodewordsRemaining(this.cachedTotalSize)===0)return ee.ASCII;var e=this.getLastASCII();if(e===1&&this.getCodewordsRemaining(this.cachedTotalSize+1)===0)return ee.ASCII}return this.mode},n.prototype.getMode=function(){return this.mode},n.prototype.getLastASCII=function(){var e=this.input.length(),t=this.fromPosition+this.characterLength;return e-t>4||t>=e?0:e-t===1?dr.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())?0:1:e-t===2?dr.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())||dr.isExtendedASCII(this.input.charAt(t+1),this.input.getFNC1Character())?0:we.isDigit(this.input.charAt(t))&&we.isDigit(this.input.charAt(t+1))?1:2:e-t===3?we.isDigit(this.input.charAt(t))&&we.isDigit(this.input.charAt(t+1))&&!dr.isExtendedASCII(this.input.charAt(t+2),this.input.getFNC1Character())||we.isDigit(this.input.charAt(t+1))&&we.isDigit(this.input.charAt(t+2))&&!dr.isExtendedASCII(this.input.charAt(t),this.input.getFNC1Character())?2:0:we.isDigit(this.input.charAt(t))&&we.isDigit(this.input.charAt(t+1))&&we.isDigit(this.input.charAt(t+2))&&we.isDigit(this.input.charAt(t+3))?2:0},n.prototype.getMinSymbolSize=function(e){var t,r,i,o,s,a;switch(this.input.getShapeHint()){case 1:try{for(var c=yg(this.squareCodewordCapacities),u=c.next();!u.done;u=c.next()){var l=u.value;if(l>=e)return l}}catch(m){t={error:m}}finally{try{u&&!u.done&&(r=c.return)&&r.call(c)}finally{if(t)throw t.error}}break;case 2:try{for(var d=yg(this.rectangularCodewordCapacities),f=d.next();!f.done;f=d.next()){var l=f.value;if(l>=e)return l}}catch(m){i={error:m}}finally{try{f&&!f.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}break}try{for(var h=yg(this.allCodewordCapacities),g=h.next();!g.done;g=h.next()){var l=g.value;if(l>=e)return l}}catch(m){s={error:m}}finally{try{g&&!g.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return this.allCodewordCapacities[this.allCodewordCapacities.length-1]},n.prototype.getCodewordsRemaining=function(e){return this.getMinSymbolSize(e)-e},n.getBytes=function(e,t){var r=new Uint8Array(t?2:1);return r[0]=e,t&&(r[1]=t),r},n.prototype.setC40Word=function(e,t,r,i,o){var s=1600*(r&255)+40*(i&255)+(o&255)+1;e[t]=s/256,e[t+1]=s%256},n.prototype.getX12Value=function(e){return e===13?0:e===42?1:e===62?2:e===32?3:e>=48&&e<=57?e-44:e>=65&&e<=90?e-51:e},n.prototype.getX12Words=function(){if(this.characterLength%3!==0)throw new Error("X12 words must be a multiple of 3");for(var e=new Uint8Array(this.characterLength/3*2),t=0;t<e.length;t+=2)this.setC40Word(e,t,this.getX12Value(this.input.charAt(this.fromPosition+t/2*3)),this.getX12Value(this.input.charAt(this.fromPosition+t/2*3+1)),this.getX12Value(this.input.charAt(this.fromPosition+t/2*3+2)));return e},n.prototype.getShiftValue=function(e,t,r){return t&&dr.isInC40Shift1Set(e)||!t&&dr.isInTextShift1Set(e)?0:t&&dr.isInC40Shift2Set(e,r)||!t&&dr.isInTextShift2Set(e,r)?1:2},n.prototype.getC40Value=function(e,t,r,i){if(r===i){if(t!==2)throw new Error("FNC1 cannot be used in C40 shift 2");return 27}return e?r<=31?r:r===32?3:r<=47?r-33:r<=57?r-44:r<=64?r-43:r<=90?r-51:r<=95?r-69:r<=127?r-96:r:r===0?0:t===0&&r<=3?r-1:t===1&&r<=31?r:r===32?3:r>=33&&r<=47?r-33:r>=48&&r<=57?r-44:r>=58&&r<=64?r-43:r>=65&&r<=90?r-64:r>=91&&r<=95?r-69:r===96?0:r>=97&&r<=122?r-83:r>=123&&r<=127?r-96:r},n.prototype.getC40Words=function(e,t){for(var r=[],i=0;i<this.characterLength;i++){var o=this.input.charAt(this.fromPosition+i);if(e&&we.isNativeC40(o)||!e&&we.isNativeText(o))r.push(this.getC40Value(e,0,o,t));else if(dr.isExtendedASCII(o,t)){var a=(o&255)-128;if(e&&we.isNativeC40(a)||!e&&we.isNativeText(a))r.push(1),r.push(30),r.push(this.getC40Value(e,0,a,t));else{r.push(1),r.push(30);var s=this.getShiftValue(a,e,t);r.push(s),r.push(this.getC40Value(e,s,a,t))}}else{var s=this.getShiftValue(o,e,t);r.push(s),r.push(this.getC40Value(e,s,o,t))}}if(r.length%3!==0){if(!((r.length-2)%3===0&&this.fromPosition+this.characterLength===this.input.length()))throw new Error("C40 words must be a multiple of 3");r.push(0)}for(var c=new Uint8Array(r.length/3*2),u=0,i=0;i<r.length;i+=3)this.setC40Word(c,u,r[i]&255,r[i+1]&255,r[i+2]&255),u+=2;return c},n.prototype.getEDFBytes=function(){for(var e=Math.ceil(this.characterLength/4),t=new Uint8Array(e*3),r=this.fromPosition,i=Math.min(this.fromPosition+this.characterLength-1,this.input.length()-1),o=0;o<e;o+=3){for(var s=[],a=0;a<4;a++)r<=i?s[a]=this.input.charAt(r++)&63:s[a]=r===i+1?31:0;var c=s[0]<<18;c|=s[1]<<12,c|=s[2]<<6,c|=s[3],t[o]=c>>16&255,t[o+1]=c>>8&255,t[o+2]=c&255}return t},n.prototype.getLatchBytes=function(){switch(this.getPreviousMode()){case ee.ASCII:case ee.B256:switch(this.mode){case ee.B256:return n.getBytes(231);case ee.C40:return n.getBytes(230);case ee.TEXT:return n.getBytes(239);case ee.X12:return n.getBytes(238);case ee.EDF:return n.getBytes(240)}break;case ee.C40:case ee.TEXT:case ee.X12:if(this.mode!==this.getPreviousMode())switch(this.mode){case ee.ASCII:return n.getBytes(254);case ee.B256:return n.getBytes(254,231);case ee.C40:return n.getBytes(254,230);case ee.TEXT:return n.getBytes(254,239);case ee.X12:return n.getBytes(254,238);case ee.EDF:return n.getBytes(254,240)}break;case ee.EDF:if(this.mode!==ee.EDF)throw new Error("Cannot switch from EDF to "+this.mode);break}return new Uint8Array(0)},n.prototype.getDataBytes=function(){switch(this.mode){case ee.ASCII:return this.input.isECI(this.fromPosition)?n.getBytes(241,this.input.getECIValue(this.fromPosition)+1):dr.isExtendedASCII(this.input.charAt(this.fromPosition),this.input.getFNC1Character())?n.getBytes(235,this.input.charAt(this.fromPosition)-127):this.characterLength===2?n.getBytes(this.input.charAt(this.fromPosition)*10+this.input.charAt(this.fromPosition+1)+130):this.input.isFNC1(this.fromPosition)?n.getBytes(232):n.getBytes(this.input.charAt(this.fromPosition)+1);case ee.B256:return n.getBytes(this.input.charAt(this.fromPosition));case ee.C40:return this.getC40Words(!0,this.input.getFNC1Character());case ee.TEXT:return this.getC40Words(!1,this.input.getFNC1Character());case ee.X12:return this.getX12Words();case ee.EDF:return this.getEDFBytes()}},n}(),mpe=function(n){dpe(e,n);function e(t,r,i,o,s){var a=n.call(this,t,r,i)||this;return a.shape=o,a.macroId=s,a}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e}(z9);var wUe=function(){function n(){}return n.prototype.encode=function(e,t,r,i,o){if(o===void 0&&(o=null),e.trim()==="")throw new Error("Found empty contents");if(t!==X.DATA_MATRIX)throw new Error("Can only encode DATA_MATRIX, but got "+t);if(r<0||i<0)throw new Error("Requested dimensions can't be negative: "+r+"x"+i);var s=0,a=null,c=null;if(o!=null){var u=o.get(Ee.DATA_MATRIX_SHAPE);u!=null&&(s=u);var l=o.get(Ee.MIN_SIZE);l!=null&&(a=l);var d=o.get(Ee.MAX_SIZE);d!=null&&(c=d)}var f,h=o!=null&&o.has(Ee.DATA_MATRIX_COMPACT)&&!!o.get(Ee.DATA_MATRIX_COMPACT).toString();if(h){var g=o.has(Ee.GS1_FORMAT)&&!!o.get(Ee.GS1_FORMAT).toString(),m=null,y=o.has(Ee.CHARACTER_SET);y&&(m=Su.forName(o.get(Ee.CHARACTER_SET).toString())),f=dr.encodeHighLevel(e,m,g?29:-1,s)}else{var x=o!=null&&o.has(Ee.FORCE_C40)&&!!o.get(Ee.FORCE_C40).toString();f=we.encodeHighLevel(e,s,a,c,x)}var w=nf.lookup(f.length,s,a,c,!0),b=b_.encodeECC200(f,w),T=new w_(b,w.getSymbolDataWidth(),w.getSymbolDataHeight());return T.place(),this.encodeLowLevel(T,w,r,i)},n.prototype.encodeLowLevel=function(e,t,r,i){for(var o=t.getSymbolDataWidth(),s=t.getSymbolDataHeight(),a=new gg(t.getSymbolWidth(),t.getSymbolHeight()),c=0,u=0;u<s;u++){var l=void 0;if(u%t.matrixHeight===0){l=0;for(var d=0;d<t.getSymbolWidth();d++)a.setBoolean(l,c,d%2===0),l++;c++}l=0;for(var d=0;d<o;d++)d%t.matrixWidth===0&&(a.setBoolean(l,c,!0),l++),a.setBoolean(l,c,e.getBit(d,u)),l++,d%t.matrixWidth===t.matrixWidth-1&&(a.setBoolean(l,c,u%2===0),l++);if(c++,u%t.matrixHeight===t.matrixHeight-1){l=0;for(var d=0;d<t.getSymbolWidth();d++)a.setBoolean(l,c,!0),l++;c++}}return this.convertByteMatrixToBitMatrix(a,r,i)},n.prototype.convertByteMatrixToBitMatrix=function(e,t,r){var i=e.getWidth(),o=e.getHeight(),s=Math.max(t,i),a=Math.max(r,o),c=Math.min(s/i,a/o),u=(s-i*c)/2,l=(a-o*c)/2,d;r<o||t<i?(u=0,l=0,d=new Ot(i,o)):d=new Ot(t,r),d.clear();for(var f=0,h=l;f<o;f++,h+=c)for(var g=0,m=u;g<i;g++,m+=c)e.get(g,f)===1&&d.setRegion(m,h,c,c);return d},n}();var vpe=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),WT=vpe;var ype=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),GT=ype;var _pe=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),$9=_pe;var xpe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wpe=function(n){xpe(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.value=r,o.bitCount=i,o}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+le.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}($9),rf=wpe;var Epe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cpe=function(n){Epe(e,n);function e(t,r,i){var o=n.call(this,t,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(rf),W9=Cpe;function G9(n,e,t){return new W9(n,e,t)}function of(n,e,t){return new rf(n,e,t)}var q9=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],no=0,sf=1,fr=2,I_=3,Kr=4,K9=new rf(null,0,0);var A_=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];var Spe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Ape(n){var e,t;try{for(var r=Spe(n),i=r.next();!i.done;i=r.next()){var o=i.value;ot.fill(o,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[no][Kr]=0,n[sf][Kr]=0,n[sf][no]=28,n[I_][Kr]=0,n[fr][Kr]=0,n[fr][no]=15,n}var D_=Ape(ot.createInt32Array(6,6));var Dpe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Tpe=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var o=A_[this.mode][e];i=of(i,o&65535,o>>16),r+=o>>16}var s=e===fr?4:5;return i=of(i,t,s),new n(i,e,0,r+s)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===fr?4:5;return r=of(r,D_[this.mode][e],i),r=of(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===Kr||this.mode===fr){var o=A_[r][no];t=of(t,o&65535,o>>16),i+=o>>16,r=no}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,a=new n(t,r,this.binaryShiftByteCount+1,i+s);return a.binaryShiftByteCount===2078&&(a=a.endBinaryShift(e+1)),a},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=G9(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(A_[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var s=new Tt;try{for(var a=Dpe(i),c=a.next();!c.done;c=a.next()){var u=c.value;u.appendTo(s,e)}}catch(l){t={error:l}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return s},n.prototype.toString=function(){return ye.format("%s bits=%d bytes=%d",q9[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(K9,no,0,0),n}(),X9=Tpe;function Mpe(n){var e=ye.getCharCode(" "),t=ye.getCharCode("."),r=ye.getCharCode(",");n[no][e]=1;for(var i=ye.getCharCode("Z"),o=ye.getCharCode("A"),s=o;s<=i;s++)n[no][s]=s-o+2;n[sf][e]=1;for(var a=ye.getCharCode("z"),c=ye.getCharCode("a"),s=c;s<=a;s++)n[sf][s]=s-c+2;n[fr][e]=1;for(var u=ye.getCharCode("9"),l=ye.getCharCode("0"),s=l;s<=u;s++)n[fr][s]=s-l+2;n[fr][r]=12,n[fr][t]=13;for(var d=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"],f=0;f<d.length;f++)n[I_][ye.getCharCode(d[f])]=f;for(var h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],f=0;f<h.length;f++)ye.getCharCode(h[f])>0&&(n[Kr][ye.getCharCode(h[f])]=f);return n}var T_=Mpe(ot.createInt32Array(5,256));var M_=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ppe=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=ye.getCharCode(" "),t=ye.getCharCode(`
`),r=GT.singletonList(X9.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case ye.getCharCode("\r"):o=s===t?2:0;break;case ye.getCharCode("."):o=s===e?3:0;break;case ye.getCharCode(","):o=s===e?4:0;break;case ye.getCharCode(":"):o=s===e?5:0;break;default:o=0}o>0?(r=n.updateStateListForPair(r,i,o),i++):r=this.updateStateListForChar(r,i)}var a=GT.min(r,function(c,u){return c.getBitCount()-u.getBitCount()});return a.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,o=[];try{for(var s=M_(e),a=s.next();!a.done;a=s.next()){var c=a.value;this.updateStateForChar(c,t,o)}}catch(u){r={error:u}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(o)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,o=T_[e.getMode()][i]>0,s=null,a=0;a<=Kr;a++){var c=T_[a][i];if(c>0){if(s==null&&(s=e.endBinaryShift(t)),!o||a===e.getMode()||a===fr){var u=s.latchAndAppend(a,c);r.push(u)}if(!o&&D_[e.getMode()][a]>=0){var l=s.shiftAndAppend(a,c);r.push(l)}}}if(e.getBinaryShiftByteCount()>0||T_[e.getMode()][i]===0){var d=e.addBinaryShiftChar(t);r.push(d)}},n.updateStateListForPair=function(e,t,r){var i,o,s=[];try{for(var a=M_(e),c=a.next();!c.done;c=a.next()){var u=c.value;this.updateStateForPair(u,t,r,s)}}catch(l){i={error:l}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(e,t,r,i){var o=e.endBinaryShift(t);if(i.push(o.latchAndAppend(Kr,r)),e.getMode()!==Kr&&i.push(o.shiftAndAppend(Kr,r)),r===3||r===4){var s=o.latchAndAppend(fr,16-r).latchAndAppend(fr,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var a=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(a)}},n.simplifyStates=function(e){var t,r,i,o,s=[];try{for(var a=M_(e),c=a.next();!c.done;c=a.next()){var u=c.value,l=!0,d=function(y){if(y.isBetterThanOrEqualTo(u))return l=!1,"break";u.isBetterThanOrEqualTo(y)&&(s=s.filter(function(x){return x!==y}))};try{for(var f=(i=void 0,M_(s)),h=f.next();!h.done;h=f.next()){var g=h.value,m=d(g);if(m==="break")break}}catch(y){i={error:y}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}l&&s.push(u)}}catch(y){t={error:y}}finally{try{c&&!c.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return s},n}(),qT=Ppe;var Rpe=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Npe=function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new qT(e).encode(),o=le.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+o,a,c,u,l,d;if(r!==n.DEFAULT_AZTEC_LAYERS){if(a=r<0,c=Math.abs(r),c>(a?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Y(ye.format("Illegal value %s for layers",r));u=n.totalBitsInLayer(c,a),l=n.WORD_SIZE[c];var f=u-u%l;if(d=n.stuffBits(i,l),d.getSize()+o>f)throw new Y("Data to large for user specified layer");if(a&&d.getSize()>l*64)throw new Y("Data to large for user specified layer")}else{l=0,d=null;for(var h=0;;h++){if(h>n.MAX_NB_BITS)throw new Y("Data too large for an Aztec code");if(a=h<=3,c=a?h+1:h,u=n.totalBitsInLayer(c,a),!(s>u)){(d==null||l!==n.WORD_SIZE[c])&&(l=n.WORD_SIZE[c],d=n.stuffBits(i,l));var f=u-u%l;if(!(a&&d.getSize()>l*64)&&d.getSize()+o<=f)break}}}var g=n.generateCheckWords(d,u,l),m=d.getSize()/l,y=n.generateModeMessage(a,c,m),x=(a?11:14)+c*4,w=new Int32Array(x),b;if(a){b=x;for(var h=0;h<w.length;h++)w[h]=h}else{b=x+1+2*le.truncDivision(le.truncDivision(x,2)-1,15);for(var T=le.truncDivision(x,2),P=le.truncDivision(b,2),h=0;h<T;h++){var k=h+le.truncDivision(h,15);w[T-h-1]=P-k-1,w[T+h]=P+k+1}}for(var C=new Ot(b),h=0,E=0;h<c;h++){for(var S=(c-h)*4+(a?9:12),M=0;M<S;M++)for(var R=M*2,N=0;N<2;N++)g.get(E+R+N)&&C.set(w[h*2+N],w[h*2+M]),g.get(E+S*2+R+N)&&C.set(w[h*2+M],w[x-1-h*2-N]),g.get(E+S*4+R+N)&&C.set(w[x-1-h*2-N],w[x-1-h*2-M]),g.get(E+S*6+R+N)&&C.set(w[x-1-h*2-M],w[h*2+N]);E+=S*8}if(n.drawModeMessage(C,a,b,y),a)n.drawBullsEye(C,le.truncDivision(b,2),5);else{n.drawBullsEye(C,le.truncDivision(b,2),7);for(var h=0,M=0;h<le.truncDivision(x,2)-1;h+=15,M+=16)for(var N=le.truncDivision(b,2)&1;N<b;N+=2)C.set(le.truncDivision(b,2)-M,N),C.set(le.truncDivision(b,2)+M,N),C.set(N,le.truncDivision(b,2)-M),C.set(N,le.truncDivision(b,2)+M)}var O=new WT;return O.setCompact(a),O.setSize(b),O.setLayers(c),O.setCodeWords(m),O.setMatrix(C),O},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var o=t-i;o<=t+i;o++)e.set(o,t-i),e.set(o,t+i),e.set(t-i,o),e.set(t+i,o);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new Tt;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var o=le.truncDivision(r,2);if(t)for(var s=0;s<7;s++){var a=o-3+s;i.get(s)&&e.set(a,o-5),i.get(s+7)&&e.set(o+5,a),i.get(20-s)&&e.set(a,o+5),i.get(27-s)&&e.set(o-5,a)}else for(var s=0;s<10;s++){var a=o-5+s+le.truncDivision(s,5);i.get(s)&&e.set(a,o-7),i.get(s+10)&&e.set(o+7,a),i.get(29-s)&&e.set(a,o+7),i.get(39-s)&&e.set(o-7,a)}},n.generateCheckWords=function(e,t,r){var i,o,s=e.getSize()/r,a=new pg(n.getGF(r)),c=le.truncDivision(t,r),u=n.bitsToWords(e,r,c);a.encode(u,c-s);var l=t%r,d=new Tt;d.appendBits(0,l);try{for(var f=Rpe(Array.from(u)),h=f.next();!h.done;h=f.next()){var g=h.value;d.appendBits(g,r)}}catch(m){i={error:m}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}return d},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),o,s;for(o=0,s=e.getSize()/t;o<s;o++){for(var a=0,c=0;c<t;c++)a|=e.get(o*t+c)?1<<t-c-1:0;i[o]=a}return i},n.getGF=function(e){switch(e){case 4:return dn.AZTEC_PARAM;case 6:return dn.AZTEC_DATA_6;case 8:return dn.AZTEC_DATA_8;case 10:return dn.AZTEC_DATA_10;case 12:return dn.AZTEC_DATA_12;default:throw new Y("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new Tt,i=e.getSize(),o=(1<<t)-2,s=0;s<i;s+=t){for(var a=0,c=0;c<t;c++)(s+c>=i||e.get(s+c))&&(a|=1<<t-1-c);(a&o)===o?(r.appendBits(a&o,t),s--):(a&o)===0?(r.appendBits(a|1,t),s--):r.appendBits(a,t)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n}(),_g=Npe;var lje=function(){function n(){}return n.prototype.encode=function(e,t,r,i){return this.encodeWithHints(e,t,r,i,null)},n.prototype.encodeWithHints=function(e,t,r,i,o){var s=mg.ISO_8859_1,a=_g.DEFAULT_EC_PERCENT,c=_g.DEFAULT_AZTEC_LAYERS;return o!=null&&(o.has(Ee.CHARACTER_SET)&&(s=Su.forName(o.get(Ee.CHARACTER_SET).toString())),o.has(Ee.ERROR_CORRECTION)&&(a=le.parseInt(o.get(Ee.ERROR_CORRECTION).toString())),o.has(Ee.AZTEC_LAYERS)&&(c=le.parseInt(o.get(Ee.AZTEC_LAYERS).toString()))),n.encodeLayers(e,t,r,i,s,a,c)},n.encodeLayers=function(e,t,r,i,o,s,a){if(t!==X.AZTEC)throw new Y("Can only encode AZTEC, but got "+t);var c=_g.encode(ye.getBytes(e,o),s,a);return n.renderResult(c,r,i)},n.renderResult=function(e,t,r){var i=e.getMatrix();if(i==null)throw new yn;for(var o=i.getWidth(),s=i.getHeight(),a=Math.max(t,o),c=Math.max(r,s),u=Math.min(a/o,c/s),l=(a-o*u)/2,d=(c-s*u)/2,f=new Ot(a,c),h=0,g=d;h<s;h++,g+=u)for(var m=0,y=l;m<o;m++,y+=u)i.get(m,h)&&f.setRegion(y,g,u,u);return f},n}();var kpe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Q9=function(n){kpe(e,n);function e(t){var r=n.call(this,t.width,t.height)||this;return r.canvas=t,r.tempCanvasElement=null,r.buffer=e.makeBufferFromCanvasImageData(t),r}return e.makeBufferFromCanvasImageData=function(t){var r;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}if(!r)throw new Error("Couldn't get canvas context.");var i=r.getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height)},e.toGrayscaleBuffer=function(t,r,i){for(var o=new Uint8ClampedArray(r*i),s=0,a=0,c=t.length;s<c;s+=4,a++){var u=void 0,l=t[s+3];if(l===0)u=255;else{var d=t[s],f=t[s+1],h=t[s+2];u=306*d+601*f+117*h+512>>10}o[a]=u}return o},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Y("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return n.prototype.crop.call(this,t,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new As(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement();if(!r)throw new Error("Could not create a Canvas element.");var i=t*e.DEGREE_TO_RADIANS,o=this.canvas.width,s=this.canvas.height,a=Math.ceil(Math.abs(Math.cos(i))*o+Math.abs(Math.sin(i))*s),c=Math.ceil(Math.abs(Math.sin(i))*o+Math.abs(Math.cos(i))*s);r.width=a,r.height=c;var u=r.getContext("2d");if(!u)throw new Error("Could not create a Canvas Context element.");return u.translate(a/2,c/2),u.rotate(i),u.drawImage(this.canvas,o/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(Ji);function KT(){return typeof navigator<"u"}function Fpe(){return KT()&&!!navigator.mediaDevices}function Z9(){return!!(Fpe()&&navigator.mediaDevices.enumerateDevices)}var af=function(){return af=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i])}return n},af.apply(this,arguments)},Zt=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(n,e||[])).next())})},Jt=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(l){return c([u,l])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(n,t)}catch(l){u=[6,l],i=0}finally{r=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},YT=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lpe={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Hn=function(){function n(e,t,r){t===void 0&&(t=new Map),r===void 0&&(r={}),this.reader=e,this.hints=t,this.options=af(af({},Lpe),r)}return Object.defineProperty(n.prototype,"possibleFormats",{set:function(e){this.hints.set(ve.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),n.addVideoSource=function(e,t){try{e.srcObject=t}catch{console.error("got interrupted by new loading request")}},n.mediaStreamSetTorch=function(e,t){return Zt(this,void 0,void 0,function(){return Jt(this,function(r){switch(r.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:t?"flash":"off",torch:!!t}]})];case 1:return r.sent(),[2]}})})},n.mediaStreamIsTorchCompatible=function(e){var t,r,i=e.getVideoTracks();try{for(var o=YT(i),s=o.next();!s.done;s=o.next()){var a=s.value;if(n.mediaStreamIsTorchCompatibleTrack(a))return!0}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return!1},n.mediaStreamIsTorchCompatibleTrack=function(e){try{var t=e.getCapabilities();return"torch"in t}catch(r){return console.error(r),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},n.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},n.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new $t("element with id '".concat(e,"' not found"));if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new $t("element with id '".concat(e,"' must be an ").concat(t," element"));return r},n.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return n.getMediaElement(e,"video");if(!e&&typeof document<"u"){var t=document.createElement("video");return t.width=200,t.height=200,t}throw new Error("Couldn't get videoElement from videoSource!")},n.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return n.getMediaElement(e,"img");if(typeof e>"u"){var t=document.createElement("img");return t.width=200,t.height=200,t}throw new Error("Couldn't get imageElement from imageSource!")},n.prepareVideoElement=function(e){var t=n.createVideoElement(e);return t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.createBinaryBitmapFromCanvas=function(e){var t=new Q9(e),r=new ng(t);return new tg(r)},n.drawImageOnCanvas=function(e,t){e.drawImage(t,0,0)},n.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},n.createCaptureCanvas=function(e){if(!e)throw new $t("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var t=document.createElement("canvas"),r=n.getMediaElementDimensions(e),i=r.width,o=r.height;return t.style.width=i+"px",t.style.height=o+"px",t.width=i,t.height=o,t},n.tryPlayVideo=function(e){return Zt(this,void 0,void 0,function(){var t;return Jt(this,function(r){switch(r.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(n.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.play()];case 2:return r.sent(),[2,!0];case 3:return t=r.sent(),console.warn("It was not possible to play the video.",t),[2,!1];case 4:return[2]}})})},n.createCanvasFromMediaElement=function(e){var t=n.createCaptureCanvas(e),r=t.getContext("2d");if(!r)throw new Error("Couldn't find Canvas 2D Context.");return n.drawImageOnCanvas(r,e),t},n.createBinaryBitmapFromMediaElem=function(e){var t=n.createCanvasFromMediaElement(e);return n.createBinaryBitmapFromCanvas(t)},n.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},n.listVideoInputDevices=function(){return Zt(this,void 0,void 0,function(){var e,t,r,i,o,s,a,c,u,l,d,f;return Jt(this,function(h){switch(h.label){case 0:if(!KT())throw new Error("Can't enumerate devices, navigator is not present.");if(!Z9())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),t=[];try{for(r=YT(e),i=r.next();!i.done;i=r.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(a=o.deviceId||o.id,c=o.label||"Video device ".concat(t.length+1),u=o.groupId,l={deviceId:a,label:c,kind:s,groupId:u},t.push(l))}catch(g){d={error:g}}finally{try{i&&!i.done&&(f=r.return)&&f.call(r)}finally{if(d)throw d.error}}return[2,t]}})})},n.findDeviceById=function(e){return Zt(this,void 0,void 0,function(){var t;return Jt(this,function(r){switch(r.label){case 0:return[4,n.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2]}})})},n.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},n.releaseAllStreams=function(){n.streamTracker.length!==0&&n.streamTracker.forEach(function(e){e.getTracks().forEach(function(t){return t.stop()})}),n.streamTracker=[]},n.playVideoOnLoadAsync=function(e,t){return Zt(this,void 0,void 0,function(){var r;return Jt(this,function(i){switch(i.label){case 0:return[4,n.tryPlayVideo(e)];case 1:return r=i.sent(),r?[2,!0]:[2,new Promise(function(o,s){var a=setTimeout(function(){n.isVideoPlaying(e)||(s(!1),e.removeEventListener("canplay",c))},t),c=function(){n.tryPlayVideo(e).then(function(u){clearTimeout(a),e.removeEventListener("canplay",c),o(u)})};e.addEventListener("canplay",c)})]}})})},n.attachStreamToVideo=function(e,t,r){return r===void 0&&(r=5e3),Zt(this,void 0,void 0,function(){var i;return Jt(this,function(o){switch(o.label){case 0:return i=n.prepareVideoElement(t),n.addVideoSource(i,e),[4,n.playVideoOnLoadAsync(i,r)];case 1:return o.sent(),[2,i]}})})},n._waitImageLoad=function(e){return new Promise(function(t,r){var i=1e4,o=setTimeout(function(){n.isImageLoaded(e)||(e.removeEventListener("load",s),r())},i),s=function(){clearTimeout(o),e.removeEventListener("load",s),t()};e.addEventListener("load",s)})},n.checkCallbackFnOrThrow=function(e){if(!e)throw new $t("`callbackFn` is a required parameter, you cannot capture results without it.")},n.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(t){return t.stop()}),e=void 0},n.prototype.decode=function(e){var t=n.createCanvasFromMediaElement(e);return this.decodeFromCanvas(t)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},n.prototype.decodeFromCanvas=function(e){var t=n.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(t)},n.prototype.decodeFromImageElement=function(e){return Zt(this,void 0,void 0,function(){var t;return Jt(this,function(r){switch(r.label){case 0:if(!e)throw new $t("An image element must be provided.");return t=n.prepareImageElement(e),[4,this._decodeOnLoadImage(t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeFromImageUrl=function(e){return Zt(this,void 0,void 0,function(){var t;return Jt(this,function(r){switch(r.label){case 0:if(!e)throw new $t("An URL must be provided.");t=n.prepareImageElement(),t.src=e,r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.decodeFromImageElement(t)];case 2:return[2,r.sent()];case 3:return n.destroyImageElement(t),[7];case 4:return[2]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Zt(this,void 0,void 0,function(){var i,o;return Jt(this,function(s){switch(s.label){case 0:return n.checkCallbackFnOrThrow(r),[4,this.getUserMedia(e)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.decodeFromStream(i,t,r)];case 3:return[2,s.sent()];case 4:throw o=s.sent(),n.disposeMediaStream(i),o;case 5:return[2]}})})},n.prototype.decodeFromStream=function(e,t,r){return Zt(this,void 0,void 0,function(){var i,o,s,a,c,u,l,d,f,h=this;return Jt(this,function(g){switch(g.label){case 0:return n.checkCallbackFnOrThrow(r),i=this.options.tryPlayVideoTimeout,[4,n.attachStreamToVideo(e,t,i)];case 1:return o=g.sent(),s=function(){n.disposeMediaStream(e),n.cleanVideoSource(o)},a=this.scan(o,r,s),c=e.getVideoTracks(),u=af(af({},a),{stop:function(){a.stop()},streamVideoConstraintsApply:function(m,y){return Zt(this,void 0,void 0,function(){var x,w,b,T,P,k,C;return Jt(this,function(E){switch(E.label){case 0:x=y?c.filter(y):c,E.label=1;case 1:E.trys.push([1,6,7,8]),w=YT(x),b=w.next(),E.label=2;case 2:return b.done?[3,5]:(T=b.value,[4,T.applyConstraints(m)]);case 3:E.sent(),E.label=4;case 4:return b=w.next(),[3,2];case 5:return[3,8];case 6:return P=E.sent(),k={error:P},[3,8];case 7:try{b&&!b.done&&(C=w.return)&&C.call(w)}finally{if(k)throw k.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(m){return c.find(m).getConstraints()},streamVideoSettingsGet:function(m){return c.find(m).getSettings()},streamVideoCapabilitiesGet:function(m){return c.find(m).getCapabilities()}}),l=n.mediaStreamIsTorchCompatible(e),l&&(d=c?.find(function(m){return n.mediaStreamIsTorchCompatibleTrack(m)}),f=function(m){return Zt(h,void 0,void 0,function(){return Jt(this,function(y){switch(y.label){case 0:return[4,n.mediaStreamSetTorch(d,m)];case 1:return y.sent(),[2]}})})},u.switchTorch=f,u.stop=function(){return Zt(h,void 0,void 0,function(){return Jt(this,function(m){switch(m.label){case 0:return a.stop(),[4,f(!1)];case 1:return m.sent(),[2]}})})}),[2,u]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Zt(this,void 0,void 0,function(){var i,o;return Jt(this,function(s){switch(s.label){case 0:return n.checkCallbackFnOrThrow(r),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromVideoElement=function(e,t){return Zt(this,void 0,void 0,function(){var r,i;return Jt(this,function(o){switch(o.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new $t("A video element must be provided.");return r=n.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,i)];case 1:return o.sent(),[2,this.scan(r,t)]}})})},n.prototype.decodeFromVideoUrl=function(e,t){return Zt(this,void 0,void 0,function(){var r,i,o,s;return Jt(this,function(a){switch(a.label){case 0:if(n.checkCallbackFnOrThrow(t),!e)throw new $t("An URL must be provided.");return r=n.prepareVideoElement(),r.src=e,i=function(){n.cleanVideoSource(r)},o=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(r,o)];case 1:return a.sent(),s=this.scan(r,t,i),[2,s]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Zt(this,void 0,void 0,function(){var r;return Jt(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Zt(this,void 0,void 0,function(){var r,i,o;return Jt(this,function(s){switch(s.label){case 0:return r=!!t,[4,n.attachStreamToVideo(e,t)];case 1:i=s.sent(),s.label=2;case 2:return s.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return o=s.sent(),[2,o];case 4:return r||n.cleanVideoSource(i),[7];case 5:return[2]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Zt(this,void 0,void 0,function(){var r,i;return Jt(this,function(o){switch(o.label){case 0:return e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,o.sent()]}})})},n.prototype.decodeOnceFromVideoElement=function(e){return Zt(this,void 0,void 0,function(){var t,r;return Jt(this,function(i){switch(i.label){case 0:if(!e)throw new $t("A video element must be provided.");return t=n.prepareVideoElement(e),r=this.options.tryPlayVideoTimeout,[4,n.playVideoOnLoadAsync(t,r)];case 1:return i.sent(),[4,this.scanOneResult(t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromVideoUrl=function(e){return Zt(this,void 0,void 0,function(){var t,r;return Jt(this,function(i){switch(i.label){case 0:if(!e)throw new $t("An URL must be provided.");t=n.prepareVideoElement(),t.src=e,r=this.decodeOnceFromVideoElement(t),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,r];case 2:return[2,i.sent()];case 3:return n.cleanVideoSource(t),[7];case 4:return[2]}})})},n.prototype.scanOneResult=function(e,t,r,i){var o=this;return t===void 0&&(t=!0),r===void 0&&(r=!0),i===void 0&&(i=!0),new Promise(function(s,a){o.scan(e,function(c,u,l){if(c){s(c),l.stop();return}if(u){if(u instanceof V&&t||u instanceof tt&&r||u instanceof W&&i)return;l.stop(),a(u)}})})},n.prototype.scan=function(e,t,r){var i=this;n.checkCallbackFnOrThrow(t);var o=n.createCaptureCanvas(e),s;try{s=o.getContext("2d",{willReadFrequently:!0})}catch{s=o.getContext("2d")}if(!s)throw new Error("Couldn't create canvas for visual element scan.");var a=function(){s=void 0,o=void 0},c=!1,u,l=function(){c=!0,clearTimeout(u),a(),r&&r()},d={stop:l},f=function(){if(!c)try{n.drawImageOnCanvas(s,e);var h=i.decodeFromCanvas(o);t(h,void 0,d),u=setTimeout(f,i.options.delayBetweenScanSuccess)}catch(x){t(void 0,x,d);var g=x instanceof tt,m=x instanceof W,y=x instanceof V;if(g||m||y){u=setTimeout(f,i.options.delayBetweenScanAttempts);return}a(),r&&r(x)}};return f(),d},n.prototype._decodeOnLoadImage=function(e){return Zt(this,void 0,void 0,function(){var t;return Jt(this,function(r){switch(r.label){case 0:return t=n.isImageLoaded(e),t?[3,2]:[4,n._waitImageLoad(e)];case 1:r.sent(),r.label=2;case 2:return[2,this.decode(e)]}})})},n.prototype.getUserMedia=function(e){return Zt(this,void 0,void 0,function(){var t;return Jt(this,function(r){switch(r.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return t=r.sent(),n.streamTracker.push(t),[2,t]}})})},n.streamTracker=[],n}();var Vpe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_ze=function(n){Vpe(e,n);function e(t,r){return n.call(this,new ja,t,r)||this}return e}(Hn);var Bpe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Cze=function(n){Bpe(e,n);function e(t,r){return n.call(this,new Ho(t),t,r)||this}return e}(Hn);var Upe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Aze=function(n){Upe(e,n);function e(t,r){return n.call(this,new Ga,t,r)||this}return e}(Hn);var jpe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),J9=function(n){jpe(e,n);function e(t,r){var i=this,o=new hg;return o.setHints(t),i=n.call(this,o,t,r)||this,i.reader=o,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(t){this.hints.set(ve.POSSIBLE_FORMATS,t),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e.prototype.setHints=function(t){this.hints=t,this.reader.setHints(this.hints)},e}(Hn);var Hpe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Nze=function(n){Hpe(e,n);function e(t,r){return n.call(this,new Ya,t,r)||this}return e}(Hn);var zpe=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vze=function(n){zpe(e,n);function e(t,r){return n.call(this,new qa,t,r)||this}return e}(Hn);var Ns="http://www.w3.org/2000/svg",jze=function(){function n(e){if(typeof e=="string"){var t=document.getElementById(e);if(!t)throw new Error("Could not find a Container element with '".concat(e,"'."));this.containerElement=t}else this.containerElement=e}return n.prototype.write=function(e,t,r,i){if(e.length===0)throw new Y("Found empty contents");if(t<0||r<0)throw new Y("Requested dimensions are too small: "+t+"x"+r);var o=i&&i.get(Ee.MARGIN)!==void 0?Number.parseInt(i.get(Ee.MARGIN).toString(),10):n.QUIET_ZONE_SIZE,s=this.encode(i,e);return this.renderResult(s,t,r,o)},n.prototype.createSVGElement=function(e,t){var r=document.createElementNS(n.SVG_NS,"svg");return r.setAttributeNS(Ns,"width",t.toString()),r.setAttributeNS(Ns,"height",e.toString()),r},n.prototype.createSvgPathPlaceholderElement=function(e,t){var r=document.createElementNS(n.SVG_NS,"path");return r.setAttributeNS(Ns,"d","M0 0h".concat(e,"v").concat(t,"H0z")),r.setAttributeNS(Ns,"fill","none"),r},n.prototype.createSvgRectElement=function(e,t,r,i){var o=document.createElementNS(n.SVG_NS,"rect");return o.setAttributeNS(Ns,"x",e.toString()),o.setAttributeNS(Ns,"y",t.toString()),o.setAttributeNS(Ns,"height",r.toString()),o.setAttributeNS(Ns,"width",i.toString()),o.setAttributeNS(Ns,"fill","#000000"),o},n.prototype.encode=function(e,t){var r=Ar.L;if(e&&e.get(Ee.ERROR_CORRECTION)!==void 0){var i=e.get(Ee.ERROR_CORRECTION).toString();r=Ar.fromString(i)}var o=Rs.encode(t,r,e);return o},n.prototype.renderResult=function(e,t,r,i){var o=e.getMatrix();if(o===null)throw new yn;var s=o.getWidth(),a=o.getHeight(),c=s+i*2,u=a+i*2,l=Math.max(t,c),d=Math.max(r,u),f=Math.min(Math.floor(l/c),Math.floor(d/u)),h=Math.floor((l-s*f)/2),g=Math.floor((d-a*f)/2),m=this.createSVGElement(l,d),y=this.createSvgPathPlaceholderElement(t,r);m.appendChild(y),this.containerElement.appendChild(m);for(var x=0,w=g;x<a;x++,w+=f)for(var b=0,T=h;b<s;b++,T+=f)if(o.get(b,x)===1){var P=this.createSvgRectElement(T,w,f,f);m.appendChild(P)}return m},n.QUIET_ZONE_SIZE=4,n.SVG_NS="http://www.w3.org/2000/svg",n}();var e7="http://www.w3.org/2000/svg",$ze=function(){function n(){}return n.prototype.write=function(e,t,r,i){if(e.length===0)throw new Y("Found empty contents");if(t<0||r<0)throw new Y("Requested dimensions are too small: "+t+"x"+r);var o=Ar.L,s=n.QUIET_ZONE_SIZE;if(i){if(i.get(Ee.ERROR_CORRECTION)!==void 0){var a=i.get(Ee.ERROR_CORRECTION).toString();o=Ar.fromString(a)}i.get(Ee.MARGIN)!==void 0&&(s=Number.parseInt(i.get(Ee.MARGIN).toString(),10))}var c=Rs.encode(e,o,i);return this.renderResult(c,t,r,s)},n.prototype.writeToDom=function(e,t,r,i,o){if(typeof e=="string"){var s=document.querySelector(e);if(!s)throw new Error("Could no find the target HTML element.");e=s}var a=this.write(t,r,i,o);e instanceof HTMLElement&&e.appendChild(a)},n.prototype.renderResult=function(e,t,r,i){var o=e.getMatrix();if(o===null)throw new yn;for(var s=o.getWidth(),a=o.getHeight(),c=s+i*2,u=a+i*2,l=Math.max(t,c),d=Math.max(r,u),f=Math.min(Math.floor(l/c),Math.floor(d/u)),h=Math.floor((l-s*f)/2),g=Math.floor((d-a*f)/2),m=this.createSVGElement(l,d),y=0,x=g;y<a;y++,x+=f)for(var w=0,b=h;w<s;w++,b+=f)if(o.get(w,y)===1){var T=this.createSvgRectElement(b,x,f,f);m.appendChild(T)}return m},n.prototype.createSVGElement=function(e,t){var r=document.createElementNS(e7,"svg"),i=e.toString(),o=t.toString();return r.setAttribute("height",o),r.setAttribute("width",i),r.setAttribute("viewBox","0 0 "+i+" "+o),r},n.prototype.createSvgRectElement=function(e,t,r,i){var o=document.createElementNS(e7,"rect");return o.setAttribute("x",e.toString()),o.setAttribute("y",t.toString()),o.setAttribute("height",r.toString()),o.setAttribute("width",i.toString()),o.setAttribute("fill","#000000"),o},n.QUIET_ZONE_SIZE=4,n}();var $pe=["preview"],xg=class extends J9{getScannerControls(){if(!this.scannerControls)throw new Error("No scanning is running at the time.");return this.scannerControls}scanFromDeviceObservable(e,t){return A(this,null,function*(){let r=new gn({}),i;try{i=yield this.decodeFromVideoDevice(e,t,(o,s)=>{if(!s){r.next({result:o});return}let a=s.name;if(a===V.name||a===tt.name||a===W.name||s.message.includes("No MultiFormat Readers were able to detect the code.")){r.next({error:s});return}r.error(s),this.scannerControls.stop(),this.scannerControls=void 0}),this.scannerControls=xe(Q({},i),{stop(){i.stop(),r.complete()}})}catch(o){r.error(o),this.scannerControls?.stop(),this.scannerControls=void 0}return r.asObservable()})}},Qa=(()=>{class n{get codeReader(){return this._codeReader}set device(t){if(!this._ready){this._devicePreStart=t;return}if(this.isAutostarting){console.warn("Avoid setting a device during auto-start.");return}if(this.isCurrentDevice(t)){console.warn("Setting the same device is not allowed.");return}if(!this.hasPermission){console.warn("Permissions not set yet, waiting for them to be set to apply device change.");return}this.setDevice(t)}get device(){return this._device}get formats(){return this.hints.get(ve.POSSIBLE_FORMATS)}set formats(t){if(typeof t=="string")throw new Error("Invalid formats, make sure the [formats] input is a binding.");let r=t.map(o=>this.getBarcodeFormatOrFail(o)),i=this.hints;i.set(ve.POSSIBLE_FORMATS,r),this.hints=i}get hints(){return this._hints}set hints(t){this._hints=t,this.codeReader?.setHints(this._hints)}set videoConstraints(t){let r=this.codeReader?.getScannerControls();r&&r?.streamVideoConstraintsApply(t)}set isAutostarting(t){this._isAutostarting=t,this.autostarting.next(t)}get isAutostarting(){return this._isAutostarting}set torch(t){try{this.getCodeReader().getScannerControls().switchTorch(t)}catch{}}set enable(t){this._enabled!==!!t&&(this._enabled=!!t,this._enabled?this.device?this.scanFromDevice(this.device.deviceId):this.init():(this.reset(),xg.releaseAllStreams()))}get enabled(){return this._enabled}get tryHarder(){return this.hints.get(ve.TRY_HARDER)}set tryHarder(t){let r=this.hints;t?r.set(ve.TRY_HARDER,!0):r.delete(ve.TRY_HARDER),this.hints=r}constructor(){this.timeBetweenScans=500,this.delayBetweenScanSuccess=500,this.previewFitMode="cover",this.poster="",this._ready=!1,this.autostarted=new $e,this.autostarting=new $e,this.torchCompatible=new $e(!1),this.scanSuccess=new $e,this.scanFailure=new $e,this.scanError=new $e,this.scanComplete=new $e,this.camerasFound=new $e,this.camerasNotFound=new $e,this.permissionResponse=new $e(!0),this.hasDevices=new $e,this.deviceChange=new $e,this._enabled=!0,this._hints=new Map,this.autofocusEnabled=!0,this.autostart=!0,this.formats=[X.QR_CODE],this.hasNavigator=typeof navigator<"u",this.isMediaDevicesSupported=this.hasNavigator&&!!navigator.mediaDevices}askForPermission(){return A(this,null,function*(){if(!this.hasNavigator)return console.error("@zxing/ngx-scanner","Can't ask permission, navigator is not present."),this.setPermission(null),this.hasPermission;if(!this.isMediaDevicesSupported)return console.error("@zxing/ngx-scanner","Can't get user media, this is not supported."),this.setPermission(null),this.hasPermission;let t,r;try{t=yield this.getAnyVideoDevice(),r=!!t}catch(i){return this.handlePermissionException(i)}finally{this.terminateStream(t)}return this.setPermission(r),r})}getAnyVideoDevice(){return navigator.mediaDevices.getUserMedia({video:!0})}terminateStream(t){t&&t.getTracks().forEach(r=>r.stop()),t=void 0}init(){return A(this,null,function*(){if(!this.autostart){console.warn("Feature 'autostart' disabled. Permissions and devices recovery has to be run manually."),this.initAutostartOff(),this._ready=!0;return}yield this.initAutostartOn(),this._ready=!0})}initAutostartOff(){this.isAutostarting=!1,this.updateVideoInputDevices(),this._device&&this._devicePreStart&&this.setDevice(this._devicePreStart)}initAutostartOn(){return A(this,null,function*(){this.isAutostarting=!0;let t;try{t=yield this.askForPermission()}catch(r){console.error("Exception occurred while asking for permission:",r);return}if(t){let r=yield this.updateVideoInputDevices();yield this.autostartScanner([...r])}this.isAutostarting=!1,this.autostarted.next()})}isCurrentDevice(t){return t?.deviceId===this._device?.deviceId}ngOnDestroy(){this.reset(),Hn.cleanVideoSource(this.previewElemRef.nativeElement),xg.releaseAllStreams()}ngOnInit(){this.init()}scanStop(){this._scanSubscription&&(this.codeReader?.getScannerControls().stop(),this._scanSubscription?.unsubscribe(),this._scanSubscription=void 0)}scanStart(){if(this._scanSubscription)throw new Error("There is already a scan process running.");if(!this._device)throw new Error("No device defined, cannot start scan, please define a device.");this.scanFromDevice(this._device.deviceId)}restart(){this._codeReader=void 0;let t=this._reset();t&&(this.device=t)}updateVideoInputDevices(){return A(this,null,function*(){let t=(yield Hn.listVideoInputDevices())||[],r=t&&t.length>0;return this.hasDevices.next(r),this.camerasFound.next([...t]),r||this.camerasNotFound.next(null),t})}autostartScanner(t){return A(this,null,function*(){let r=({label:o})=>/back|trs|rear|traseira|environment|ambiente/gi.test(o),i=t.find(r)||t.pop();if(!i)throw new Error("Impossible to autostart, no input devices available.");yield this.setDevice(i),this.deviceChange.next(i)})}dispatchScanSuccess(t){this.scanSuccess.next(t.getText())}dispatchScanFailure(t){this.scanFailure.next(t)}dispatchScanError(t){this.scanError.observed||(console.error(`zxing scanner component: ${t.name}`,t),console.warn("Use the `(scanError)` property to handle errors like this!")),this.scanError.next(t)}dispatchScanComplete(t){this.scanComplete.next(t)}handlePermissionException(t){console.error("@zxing/ngx-scanner","Error when asking for permission.",t);let r;switch(t.name){case"NotSupportedError":console.warn("@zxing/ngx-scanner",t.message),r=null,this.hasDevices.next(null);break;case"NotAllowedError":console.warn("@zxing/ngx-scanner",t.message),r=!1,this.hasDevices.next(!0);break;case"NotFoundError":console.warn("@zxing/ngx-scanner",t.message),r=null,this.hasDevices.next(!1),this.camerasNotFound.next(t);break;case"NotReadableError":console.warn("@zxing/ngx-scanner","Couldn't read the device(s)'s stream, it's probably in use by another app."),r=null,this.hasDevices.next(!1),this.camerasNotFound.next(t);break;case"AbortError":console.warn("@zxing/ngx-scanner","It seems that the required permissions have been granted, but something else failed",t),r=!0,this.hasDevices.next(null),this.camerasNotFound.next(t);break;default:console.warn("@zxing/ngx-scanner","I was not able to define if I have permissions for camera or not.",t),r=null;break}return this.setPermission(r),this.permissionResponse.error(t),r}getBarcodeFormatOrFail(t){return typeof t=="string"?X[t.trim().toUpperCase()]:t}getCodeReader(){if(!this._codeReader){let t={delayBetweenScanAttempts:this.timeBetweenScans,delayBetweenScanSuccess:this.delayBetweenScanSuccess};this._codeReader=new xg(this.hints,t)}return this._codeReader}scanFromDevice(t){return A(this,null,function*(){let r=this.previewElemRef.nativeElement,i=this.getCodeReader(),o=yield i.scanFromDeviceObservable(t,r);if(!o)throw new Error("Undefined decoding stream, aborting.");let s=d=>this._onDecodeResult(d.result,d.error),a=d=>this._onDecodeError(d),c=()=>{};if(this._scanSubscription=o.subscribe(s,a,c),this._scanSubscription.closed)return;let l=typeof i.getScannerControls().switchTorch<"u";this.torchCompatible.next(l)})}_onDecodeError(t){this.dispatchScanError(t)}_onDecodeResult(t,r){t?this.dispatchScanSuccess(t):this.dispatchScanFailure(r),this.dispatchScanComplete(t)}_reset(){if(!this._codeReader)return;this.scanStop();try{let r=this.previewElemRef.nativeElement;Hn.cleanVideoSource(r)}catch{}try{Hn.releaseAllStreams()}catch{}this._codeReader=void 0;let t=this._device;return this.device=void 0,t}reset(){this._reset(),this.deviceChange.emit(null)}setDevice(t){return A(this,null,function*(){this.scanStop(),this._device=t||void 0,this._device||Hn.cleanVideoSource(this.previewElemRef.nativeElement),this._enabled&&t&&(yield this.scanFromDevice(t.deviceId))})}setPermission(t){this.hasPermission=t,this.permissionResponse.next(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=it({type:n,selectors:[["zxing-scanner"]],viewQuery:function(r,i){if(r&1&&hl($pe,7),r&2){let o;Pc(o=Rc())&&(i.previewElemRef=o.first)}},inputs:{autofocusEnabled:"autofocusEnabled",timeBetweenScans:"timeBetweenScans",delayBetweenScanSuccess:"delayBetweenScanSuccess",autostart:"autostart",previewFitMode:"previewFitMode",poster:"poster",device:"device",formats:"formats",videoConstraints:"videoConstraints",torch:"torch",enable:"enable",tryHarder:"tryHarder"},outputs:{autostarted:"autostarted",autostarting:"autostarting",torchCompatible:"torchCompatible",scanSuccess:"scanSuccess",scanFailure:"scanFailure",scanError:"scanError",scanComplete:"scanComplete",camerasFound:"camerasFound",camerasNotFound:"camerasNotFound",permissionResponse:"permissionResponse",hasDevices:"hasDevices",deviceChange:"deviceChange"},standalone:!1,decls:6,vars:3,consts:[["preview",""],[3,"poster"]],template:function(r,i){r&1&&(F(0,"video",1,0)(2,"p"),U(3," Your browser does not support this feature, please try to upgrade it. "),L(),F(4,"p"),U(5," Seu navegador n\xE3o suporta este recurso, por favor tente atualiz\xE1-lo. "),L()()),r&2&&(GE("object-fit",i.previewFitMode),te("poster",i.poster,AE))},styles:["[_nghost-%COMP%]{display:block}video[_ngcontent-%COMP%]{width:100%;height:auto;object-fit:contain}"],changeDetection:0})}}return n})(),O_=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Lr({type:n})}static{this.\u0275inj=kr({imports:[Nt,sn]})}}return n})();var Za=class n{constructor(e,t){this.firestore=e;this.auth=t}getCategorias(){return ZF(this.auth).pipe(Or(e=>{if(!e)return fe([]);let t=vs(this.firestore,`usuarios/${e.uid}/categorias`);return r1(t).pipe(Ae(r=>r.map(i=>i.nome)))}))}addCategoria(e){return A(this,null,function*(){let t=yield this.auth.currentUser;if(!t)throw new Error("Usu\xE1rio n\xE3o autenticado");let r=kt(this.firestore,`usuarios/${t.uid}/categorias/${e}`);return ys(r,{nome:e})})}static \u0275fac=function(t){return new(t||n)(ce(jt),ce(_t))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};function Wpe(n,e){if(n&1&&(F(0,"div",27),U(1),L()),n&2){let t=_e();te("ngClass",t.tipoMensagem==="alerta"?"mensagem-alerta":"mensagem-normal"),$(),Yt(" ",t.mensagemFlutuante,`
`)}}function Gpe(n,e){n&1&&(F(0,"p",32),U(1," Permiss\xE3o para c\xE2mera n\xE3o concedida. "),L())}function qpe(n,e){if(n&1){let t=bn();F(0,"zxing-scanner",33,1),re("camerasFound",function(i){ge(t);let o=_e(2);return me(o.camerasFound(i))})("scanSuccess",function(i){ge(t);let o=_e(2);return me(o.onCodeScanned(i))})("permissionResponse",function(i){ge(t);let o=_e(2);return me(o.onHasPermission(i))})("scanError",function(i){ge(t);let o=_e(2);return me(o.onScanError(i))}),L()}if(n&2){let t=_e(2);te("device",t.currentDevice)("formats",t.formats)("enable",t.scannerRunning)}}function Kpe(n,e){n&1&&(F(0,"div",34)(1,"p"),U(2,"Iniciando scanner..."),L()())}function Ype(n,e){if(n&1&&(F(0,"div",28),Le(1,Gpe,2,0,"p",29)(2,qpe,2,3,"zxing-scanner",30)(3,Kpe,3,0,"div",31),L()),n&2){let t=_e();$(),te("ngIf",!t.hasPermission),$(),te("ngIf",t.mostrarScanner),$(),te("ngIf",t.mostrarScanner&&!t.scannerRunning&&t.hasPermission)}}function Xpe(n,e){if(n&1&&(F(0,"option",35),U(1),L()),n&2){let t=e.$implicit;te("value",t),$(),rn(t)}}var P_=class n{constructor(e,t,r,i,o){this.productService=e;this.router=t;this.categoryService=r;this.cdr=i;this.ngZone=o;this.carregarCategorias()}scanner;produto={name:"",code:"",price:0,quantity:0,category:"",cost:0};categorias=[];mensagemFlutuante="";mostrarMensagem=!1;tipoMensagem="normal";mostrarScanner=!1;scannerRunning=!1;hasPermission=!1;formats=[X.CODE_128,X.EAN_13,X.EAN_8,X.QR_CODE];availableDevices=[];currentDevice;ngAfterViewInit(){setTimeout(()=>{this.scanner&&(this.scanner.permissionResponse?.subscribe(e=>{this.ngZone.run(()=>{this.hasPermission=e})}),this.scanner.camerasFound?.subscribe(e=>{this.ngZone.run(()=>{this.availableDevices=e,e.length>0&&(this.currentDevice=e[0])})}))})}carregarCategorias(){this.categoryService.getCategorias().subscribe({next:e=>this.categorias=e,error:e=>console.error("Erro ao carregar categorias:",e)})}salvarProduto(){return A(this,null,function*(){try{if(!this.produto.name||this.produto.price<=0||this.produto.quantity<0){this.exibirMensagem("Preencha os campos obrigat\xF3rios corretamente.","alerta");return}yield this.productService.add(this.produto),this.exibirMensagem("Produto criado com sucesso!"),setTimeout(()=>this.router.navigate(["/produtos"]),1500)}catch(e){console.error("Erro ao salvar produto:",e),this.exibirMensagem("Erro ao salvar produto.","alerta")}})}voltar(){this.router.navigate(["/produtos"])}exibirMensagem(e,t="normal",r=2500){this.mensagemFlutuante=e,this.tipoMensagem=t,this.mostrarMensagem=!0,setTimeout(()=>this.mostrarMensagem=!1,r)}toggleScanner(){return A(this,null,function*(){if(this.mostrarScanner){this.mostrarScanner=!1,this.scannerRunning=!1;return}this.mostrarScanner=!0,this.scannerRunning=!1;try{if(yield new Promise(e=>setTimeout(e,100)),!this.scanner)throw new Error("Scanner component not initialized");if(this.hasPermission=yield this.scanner.askForPermission(),!this.hasPermission)throw new Error("Permiss\xE3o da c\xE2mera negada");this.availableDevices.length===0&&(yield new Promise((e,t)=>{let r=setTimeout(()=>t("Nenhuma c\xE2mera encontrada"),5e3),i=this.scanner.camerasFound.subscribe(o=>{clearTimeout(r),o.length>0?(this.availableDevices=o,e()):t("Nenhuma c\xE2mera dispon\xEDvel"),i.unsubscribe()})})),this.currentDevice=this.availableDevices[0],this.scanner.device=this.currentDevice,this.scannerRunning=!0}catch(e){this.handleScannerError(e),this.mostrarScanner=!1,this.scannerRunning=!1}})}handleScannerError(e){let t="Erro no scanner";if(e instanceof Error)if(console.error("Scanner error:",e),e.name==="NotReadableError")t="A c\xE2mera n\xE3o pode ser acessada. Verifique se n\xE3o est\xE1 sendo usada por outro aplicativo.";else if(e.name==="NotAllowedError")t="Permiss\xE3o para usar a c\xE2mera foi negada.";else{if(e.message.includes("No scanning is running"))return;t=e.message}this.exibirMensagem(t,"alerta")}onCodeScanned(e){this.ngZone.run(()=>{this.produto.code=e,this.exibirMensagem("C\xF3digo escaneado: "+e),this.mostrarScanner=!1,this.safeResetScanner(),this.scannerRunning=!1})}onScanError(e){console.error("Erro ao escanear:",e),this.ngZone.run(()=>{e.name==="NotReadableError"?this.exibirMensagem("A c\xE2mera est\xE1 em uso por outro aplicativo ou bloqueada.","alerta"):e.name==="NotAllowedError"?this.exibirMensagem("Permiss\xE3o para c\xE2mera negada.","alerta"):this.exibirMensagem("Erro ao acessar a c\xE2mera: "+e.message,"alerta"),this.mostrarScanner=!1,this.scannerRunning=!1,this.safeResetScanner()})}camerasFound(e){this.ngZone.run(()=>{if(this.availableDevices=e,e.length>0){if(this.currentDevice=e[0],this.scanner)try{this.scanner.reset(),this.scanner.device=this.currentDevice}catch(t){console.warn("Erro ao resetar scanner:",t)}}else this.exibirMensagem("Nenhuma c\xE2mera encontrada.","alerta"),this.mostrarScanner=!1})}onHasPermission(e){this.ngZone.run(()=>{this.hasPermission=e,console.log("Permiss\xE3o da c\xE2mera:",e)})}onScanStart(){this.ngZone.run(()=>{this.scannerRunning=!0,this.exibirMensagem("Escaneamento iniciado.")})}onScanStop(){this.ngZone.run(()=>{this.scannerRunning=!1,this.exibirMensagem("Escaneamento parado.")})}safeResetScanner(){return A(this,null,function*(){if(this.scanner)try{this.scannerRunning&&(yield this.scanner.scanStop(),yield new Promise(e=>setTimeout(e,100)))}catch(e){(!(e instanceof Error)||!e.message.includes("No scanning is running"))&&console.warn("Aviso ao resetar scanner:",e)}finally{this.scannerRunning=!1}})}ngOnDestroy(){if(!(!this.mostrarScanner&&!this.scannerRunning)&&(this.mostrarScanner=!1,this.scannerRunning=!1,this.scanner))try{this.scanner.reset()}catch{}}static \u0275fac=function(t){return new(t||n)(z(bi),z(ze),z(Za),z(Vr),z(He))};static \u0275cmp=it({type:n,selectors:[["app-create-product"]],viewQuery:function(t,r){if(t&1&&hl(Qa,5),t&2){let i;Pc(i=Rc())&&(r.scanner=i.first)}},decls:42,vars:11,consts:[["form","ngForm"],["scanner",""],[1,"body"],["class","mensagem-flutuante","role","alert","aria-live","assertive",3,"ngClass",4,"ngIf"],["class","scanner-box","style","margin-bottom: 20px;",4,"ngIf"],[1,"container-form"],[1,"form-title"],["novalidate","",1,"form-box",3,"ngSubmit"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","required","",3,"ngModelChange","ngModel"],["for","code"],["type","text","id","code","name","code",3,"ngModelChange","ngModel"],["type","button","aria-label","Alternar leitura de c\xF3digo de barras",1,"btn","btn-secondary",2,"margin-top","8px",3,"click"],["for","quantity"],["type","number","id","quantity","name","quantity","required","","min","0",3,"ngModelChange","ngModel"],["for","price"],["type","number","step","0.01","id","price","name","price","required","","min","0",3,"ngModelChange","ngModel"],["for","category"],["id","category","name","category",3,"ngModelChange","ngModel"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["for","cost"],["type","number","step","0.01","id","cost","name","cost","required","","min","0",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],["role","alert","aria-live","assertive",1,"mensagem-flutuante",3,"ngClass"],[1,"scanner-box",2,"margin-bottom","20px"],["class","mensagem-alerta",4,"ngIf"],[3,"device","formats","enable","camerasFound","scanSuccess","permissionResponse","scanError",4,"ngIf"],["class","scanner-loading",4,"ngIf"],[1,"mensagem-alerta"],[3,"camerasFound","scanSuccess","permissionResponse","scanError","device","formats","enable"],[1,"scanner-loading"],[3,"value"]],template:function(t,r){if(t&1){let i=bn();F(0,"div",2),Le(1,Wpe,2,2,"div",3)(2,Ype,4,3,"div",4),F(3,"div",5)(4,"h2",6),U(5,"Novo Produto"),L(),F(6,"form",7,0),re("ngSubmit",function(){return ge(i),me(r.salvarProduto())}),F(8,"div",8)(9,"label",9),U(10,"Nome: *"),L(),F(11,"input",10),vt("ngModelChange",function(s){return ge(i),Et(r.produto.name,s)||(r.produto.name=s),me(s)}),L()(),F(12,"div",8)(13,"label",11),U(14,"C\xF3digo:"),L(),F(15,"input",12),vt("ngModelChange",function(s){return ge(i),Et(r.produto.code,s)||(r.produto.code=s),me(s)}),L(),F(16,"button",13),re("click",function(){return ge(i),me(r.toggleScanner())}),U(17),L(),F(18,"div",8)(19,"label",14),U(20,"Quantidade: *"),L(),F(21,"input",15),vt("ngModelChange",function(s){return ge(i),Et(r.produto.quantity,s)||(r.produto.quantity=s),me(s)}),L()(),F(22,"div",8)(23,"label",16),U(24,"Pre\xE7o (R$): *"),L(),F(25,"input",17),vt("ngModelChange",function(s){return ge(i),Et(r.produto.price,s)||(r.produto.price=s),me(s)}),L()(),F(26,"div",8)(27,"label",18),U(28,"Categoria:"),L(),F(29,"select",19),vt("ngModelChange",function(s){return ge(i),Et(r.produto.category,s)||(r.produto.category=s),me(s)}),F(30,"option",20),U(31,"Selecione uma categoria"),L(),Le(32,Xpe,2,2,"option",21),L()(),F(33,"div",8)(34,"label",22),U(35,"Custo (R$): *"),L(),F(36,"input",23),vt("ngModelChange",function(s){return ge(i),Et(r.produto.cost,s)||(r.produto.cost=s),me(s)}),L()(),F(37,"div",24)(38,"button",25),U(39,"Salvar"),L(),F(40,"button",26),re("click",function(){return ge(i),me(r.voltar())}),U(41,"Cancelar"),L()()()()()()}if(t&2){let i=ho(7);$(),te("ngIf",r.mostrarMensagem),$(),te("ngIf",r.mostrarScanner),$(9),mt("ngModel",r.produto.name),$(4),mt("ngModel",r.produto.code),$(2),Yt(" ",r.mostrarScanner?"Fechar Scanner":"Ler C\xF3digo de Barras"," "),$(4),mt("ngModel",r.produto.quantity),$(4),mt("ngModel",r.produto.price),$(4),mt("ngModel",r.produto.category),$(3),te("ngForOf",r.categorias),$(4),mt("ngModel",r.produto.cost),$(2),te("disabled",i.invalid)}},dependencies:[Nt,Vi,hi,vn,sn,sr,Pl,Rl,Wt,is,aa,on,or,Hi,Wc,Gn,ji,O_,Qa],styles:['@font-face{font-family:Lemon Milk;src:url(/assets/fonts/LEMONMILK-Regular.ttf) format("truetype");font-weight:400;font-style:normal}*[_ngcontent-%COMP%]{box-sizing:border-box}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;padding:0}.body[_ngcontent-%COMP%]{background:linear-gradient(to right,#e3f2fd,#fce4ec);font-family:Segoe UI,sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh}.container-form[_ngcontent-%COMP%]{width:100%;max-width:550px;padding:30px;background-color:#fff;border-radius:16px;box-shadow:0 8px 24px #0000001a;transition:transform .3s ease;animation:_ngcontent-%COMP%_fadeIn .6s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.form-title[_ngcontent-%COMP%]{font-family:Lemon Milk,sans-serif;text-align:center;font-size:42px;margin-bottom:30px;color:#007bff;letter-spacing:1.5px;animation:_ngcontent-%COMP%_slideDown .5s ease-in-out}@keyframes _ngcontent-%COMP%_slideDown{0%{transform:translateY(-15px);opacity:0}to{transform:translateY(0);opacity:1}}.form-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:6px;font-size:14px;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;border:2px solid #dee2e6;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;font-size:16px;background-color:#fff}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{border-color:#b3d7ff}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none;box-shadow:0 0 0 4px #007bff26}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:10px}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:8px;cursor:pointer;font-weight:600;font-size:15px;transition:transform .2s ease,box-shadow .2s ease}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#495057}.mensagem-flutuante[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#333;color:#fff;padding:16px 24px;border-radius:12px;box-shadow:0 4px 20px #0000004d;font-size:18px;z-index:9999;opacity:.95;animation:_ngcontent-%COMP%_fadeInOut 2.5s ease-in-out}@keyframes _ngcontent-%COMP%_fadeInOut{0%{opacity:0;transform:translate(-50%,-60%)}10%{opacity:1;transform:translate(-50%,-50%)}90%{opacity:1;transform:translate(-50%,-50%)}to{opacity:0;transform:translate(-50%,-40%)}}@media (max-width: 480px){.form-title[_ngcontent-%COMP%]{font-size:28px}.btn[_ngcontent-%COMP%]{width:100%;text-align:center}.form-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}']})};function Qpe(n,e){n&1&&(F(0,"div",23),U(1," O nome deve ter pelo menos 3 caracteres. "),L())}function Zpe(n,e){if(n&1&&(F(0,"div",24),U(1),L()),n&2){let t=_e();$(),Yt(" ",t.mensagemFlutuante," ")}}function Jpe(n,e){n&1&&(F(0,"div",23),U(1," A quantidade n\xE3o pode ser negativa. "),L())}function ege(n,e){n&1&&(F(0,"div",23),U(1," O pre\xE7o n\xE3o pode ser negativo. "),L())}function tge(n,e){n&1&&(F(0,"div",23),U(1," O custo n\xE3o pode ser negativo. "),L())}function nge(n,e){if(n&1&&(F(0,"option",25),U(1),L()),n&2){let t=e.$implicit;te("value",t),$(),rn(t)}}function rge(n,e){n&1&&(F(0,"div",23),U(1," A categoria \xE9 obrigat\xF3ria. "),L())}var R_=class n{constructor(e,t,r,i){this.route=e;this.productService=t;this.router=r;this.categoryService=i;this.carregarCategorias()}id;produto={id:"",name:"",quantity:0,price:0,cost:0,category:""};categorias=[];ngOnInit(){this.id=this.route.snapshot.paramMap.get("id")||"",this.id?this.loadProduct():(alert("ID inv\xE1lido!"),this.router.navigate(["/"]))}carregarCategorias(){this.categoryService.getCategorias().subscribe({next:e=>{this.categorias=e},error:e=>{console.error("Erro ao carregar categorias:",e)}})}loadProduct(){return A(this,null,function*(){let e=yield this.productService.getProductById(this.id);e?this.produto=Q({},e):(alert("Produto n\xE3o encontrado!"),this.router.navigate(["/"]))})}atualizarProduto(){this.productService.updateProduct(this.produto);let e="";this.produto.quantity<=2&&(e=`\u26A0 Estoque baixo: "${this.produto.name}" tem apenas ${this.produto.quantity} unidade(s)!`),this.exibirMensagem("Produto atualizado com sucesso!"),setTimeout(()=>{this.router.navigate(["/"],{state:{mensagemEstoqueBaixo:e}})},1100)}cancelar(){this.router.navigate(["/"])}mensagemFlutuante="";mostrarMensagem=!1;exibirMensagem(e,t=2500){this.mensagemFlutuante=e,this.mostrarMensagem=!0,setTimeout(()=>{this.mostrarMensagem=!1},t)}static \u0275fac=function(t){return new(t||n)(z(mi),z(bi),z(ze),z(Za))};static \u0275cmp=it({type:n,selectors:[["app-edit-product"]],decls:41,vars:14,consts:[["produtoForm","ngForm"],[1,"container-form"],[1,"form-title"],["novalidate","",3,"ngSubmit"],[1,"form-box"],[1,"form-group"],["for","name"],["type","text","id","name","name","name","required","","minlength","3","placeholder","Digite o nome do produto",3,"ngModelChange","ngModel"],["class","error",4,"ngIf"],["class","mensagem-flutuante",4,"ngIf"],["for","quantity"],["type","number","id","quantity","name","quantity","required","","min","0","placeholder","Quantidade dispon\xEDvel",3,"ngModelChange","ngModel"],["for","price"],["type","number","id","price","name","price","required","","min","0","step","0.01","placeholder","Pre\xE7o do produto",3,"ngModelChange","ngModel"],["for","cost"],["type","number","id","cost","name","cost","required","","min","0","step","0.01","placeholder","Custo do produto",3,"ngModelChange","ngModel"],["for","category"],["id","category","name","category","required","",3,"ngModelChange","ngModel"],["value","","disabled","",3,"selected"],[3,"value",4,"ngFor","ngForOf"],[1,"form-actions"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-secondary",3,"click"],[1,"error"],[1,"mensagem-flutuante"],[3,"value"]],template:function(t,r){if(t&1){let i=bn();F(0,"body")(1,"div",1)(2,"h2",2),U(3,"Editar Produto"),L(),F(4,"form",3,0),re("ngSubmit",function(){return ge(i),me(r.atualizarProduto())}),F(6,"div",4)(7,"div",5)(8,"label",6),U(9,"Nome do Produto"),L(),F(10,"input",7),vt("ngModelChange",function(s){return ge(i),Et(r.produto.name,s)||(r.produto.name=s),me(s)}),L(),Le(11,Qpe,2,0,"div",8),L(),Le(12,Zpe,2,1,"div",9),F(13,"div",5)(14,"label",10),U(15,"Quantidade"),L(),F(16,"input",11),vt("ngModelChange",function(s){return ge(i),Et(r.produto.quantity,s)||(r.produto.quantity=s),me(s)}),L(),Le(17,Jpe,2,0,"div",8),L(),F(18,"div",5)(19,"label",12),U(20,"Pre\xE7o (R$)"),L(),F(21,"input",13),vt("ngModelChange",function(s){return ge(i),Et(r.produto.price,s)||(r.produto.price=s),me(s)}),L(),Le(22,ege,2,0,"div",8),L(),F(23,"div",5)(24,"label",14),U(25,"Custo (R$)"),L(),F(26,"input",15),vt("ngModelChange",function(s){return ge(i),Et(r.produto.cost,s)||(r.produto.cost=s),me(s)}),L(),Le(27,tge,2,0,"div",8),L(),F(28,"div",5)(29,"label",16),U(30,"Categoria"),L(),F(31,"select",17),vt("ngModelChange",function(s){return ge(i),Et(r.produto.category,s)||(r.produto.category=s),me(s)}),F(32,"option",18),U(33,"Selecione uma categoria"),L(),Le(34,nge,2,2,"option",19),L(),Le(35,rge,2,0,"div",8),L(),F(36,"div",20)(37,"button",21),U(38," Salvar "),L(),F(39,"button",22),re("click",function(){return ge(i),me(r.cancelar())}),U(40," Cancelar "),L()()()()()()}if(t&2){let i=ho(5);$(10),mt("ngModel",r.produto.name),$(),te("ngIf",i.submitted&&r.produto.name&&r.produto.name.length<3),$(),te("ngIf",r.mostrarMensagem),$(4),mt("ngModel",r.produto.quantity),$(),te("ngIf",i.submitted&&r.produto.quantity<0),$(4),mt("ngModel",r.produto.price),$(),te("ngIf",i.submitted&&r.produto.price<0),$(4),mt("ngModel",r.produto.cost),$(),te("ngIf",i.submitted&&r.produto.cost<0),$(4),mt("ngModel",r.produto.category),$(),te("selected",!r.produto.category),$(2),te("ngForOf",r.categorias),$(),te("ngIf",i.submitted&&!r.produto.category),$(2),te("disabled",i.invalid)}},dependencies:[Nt,hi,vn,sn,sr,Pl,Rl,Wt,is,aa,on,or,Hi,Nh,Wc,Gn,ji],styles:['@font-face{font-family:Lemon Milk;src:url(/assets/fonts/LEMONMILK-Regular.ttf) format("truetype");font-weight:400;font-style:normal}*[_ngcontent-%COMP%]{box-sizing:border-box}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;padding:0}body[_ngcontent-%COMP%]{background:linear-gradient(to right,#e3f2fd,#fce4ec);font-family:Segoe UI,sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh}.container-form[_ngcontent-%COMP%]{width:100%;max-width:550px;padding:30px;background-color:#fff;border-radius:16px;box-shadow:0 8px 24px #0000001a;transition:transform .3s ease;animation:_ngcontent-%COMP%_zoomIn .6s ease-out}@keyframes _ngcontent-%COMP%_zoomIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}.form-title[_ngcontent-%COMP%]{font-family:Lemon Milk,sans-serif;text-align:center;font-size:42px;margin-bottom:30px;color:#007bff;letter-spacing:1.5px;animation:_ngcontent-%COMP%_slideDown .5s ease-in-out}@keyframes _ngcontent-%COMP%_slideDown{0%{transform:translateY(-15px);opacity:0}to{transform:translateY(0);opacity:1}}.form-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:6px;font-size:14px;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;border:2px solid #dee2e6;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;font-size:16px;background-color:#fff}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none;box-shadow:0 0 0 4px #007bff26}.form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{appearance:none;-webkit-appearance:none;-moz-appearance:none}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:10px}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:8px;cursor:pointer;font-weight:600;font-size:15px;transition:transform .2s ease,box-shadow .2s ease}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#495057}.error[_ngcontent-%COMP%]{color:red;font-size:13px;margin-top:5px}.mensagem-flutuante[_ngcontent-%COMP%]{position:fixed;top:20px;left:50%;transform:translate(-50%);background-color:#28a745;color:#fff;padding:12px 24px;border-radius:8px;font-weight:600;box-shadow:0 4px 12px #0003;z-index:9999;animation:_ngcontent-%COMP%_fadeMessage .5s ease-in-out}@keyframes _ngcontent-%COMP%_fadeMessage{0%{opacity:0;transform:translate(-50%) translateY(-10px)}to{opacity:1;transform:translate(-50%) translateY(0)}}']})};function ige(n,e){n&1&&(F(0,"div",14),U(1,"Email ou senha incorretos."),L())}var N_=class n{constructor(e,t,r){this.authService=e;this.router=t;this.auth=r;$l(this.auth).subscribe(i=>{i&&this.router.navigate(["/"])})}email="";password="";error="";login(){this.authService.login(this.email,this.password).then(()=>{let e=$l(this.auth).subscribe(t=>{t&&(e.unsubscribe(),this.router.navigate(["/"]))})}).catch(e=>{console.error("Erro ao fazer login:",e),e.code==="auth/user-not-found"?this.error="Usu\xE1rio n\xE3o encontrado.":e.code==="auth/wrong-password"?this.error="Senha incorreta.":this.error="Erro ao fazer login."})}static \u0275fac=function(t){return new(t||n)(z(Ca),z(ze),z(_t))};static \u0275cmp=it({type:n,selectors:[["app-login"]],decls:22,vars:3,consts:[[1,"login-container"],[1,"login-title"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","",3,"ngModelChange","ngModel"],["for","password"],["type","password","id","password","name","password","required","",3,"ngModelChange","ngModel"],["type","submit",1,"login-button"],["class","error-message",4,"ngIf"],[1,"register-link"],["routerLink","/register"],[1,"reset-password-link"],["routerLink","/recuperar-senha"],[1,"error-message"]],template:function(t,r){t&1&&(F(0,"div",0)(1,"h2",1),U(2,"Bem-vindo ao StockX"),L(),F(3,"form",2),re("ngSubmit",function(){return r.login()}),F(4,"div",3)(5,"label",4),U(6,"Email"),L(),F(7,"input",5),vt("ngModelChange",function(o){return Et(r.email,o)||(r.email=o),o}),L()(),F(8,"div",3)(9,"label",6),U(10,"Senha"),L(),F(11,"input",7),vt("ngModelChange",function(o){return Et(r.password,o)||(r.password=o),o}),L()(),F(12,"button",8),U(13,"Entrar"),L(),Le(14,ige,2,0,"div",9),L(),F(15,"p",10),U(16," N\xE3o tem conta? "),F(17,"a",11),U(18,"Registre-se"),L()(),F(19,"p",12)(20,"a",13),U(21,"Esqueci minha senha"),L()()()),t&2&&($(7),mt("ngModel",r.email),$(4),mt("ngModel",r.password),$(3),te("ngIf",r.error))},dependencies:[sn,sr,Wt,on,or,Hi,Gn,ji,Nt,vn,Ui,vi],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background:linear-gradient(135deg,#1e1e2f,#34344e);font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;animation:_ngcontent-%COMP%_fadeInBg 1.2s ease-out}.login-container[_ngcontent-%COMP%]{background:#ffffff0f;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);padding:48px 36px;border-radius:20px;box-shadow:0 12px 32px #0006;width:100%;max-width:420px;animation:_ngcontent-%COMP%_fadeInCard .8s ease-out;border:1px solid rgba(255,255,255,.1)}.login-title[_ngcontent-%COMP%]{text-align:center;font-size:28px;margin-bottom:32px;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.3)}.form-group[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;flex-direction:column}label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:8px;color:#ddd}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%;padding:12px 1px;border:none;border-radius:12px;background:#ffffff1a;color:#fff;font-size:15px;outline:none;transition:background .3s,box-shadow .3s}input[type=email][_ngcontent-%COMP%]::placeholder, input[type=password][_ngcontent-%COMP%]::placeholder{color:#ccc}input[type=email][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus{background:#ffffff26;box-shadow:0 0 12px #007bff66}.login-button[_ngcontent-%COMP%]{width:100%;padding:14px;background:linear-gradient(135deg,#007bff,#0056b3);border:none;border-radius:12px;color:#fff;font-weight:700;font-size:16px;transition:transform .2s ease,box-shadow .3s ease;cursor:pointer}.login-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 6px 16px #007bff80}.login-button[_ngcontent-%COMP%]:active{transform:scale(.97)}.error-message[_ngcontent-%COMP%]{margin-top:16px;color:#ff5f5f;text-align:center;font-size:14px;animation:_ngcontent-%COMP%_fadeInError .3s ease-out}@keyframes _ngcontent-%COMP%_fadeInBg{0%{opacity:0;background-position:center}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeInCard{0%{opacity:0;transform:translateY(20px) scale(.96)}to{opacity:1;transform:translateY(0) scale(1)}}@keyframes _ngcontent-%COMP%_fadeInError{0%{opacity:0;transform:translateY(-6px)}to{opacity:1;transform:translateY(0)}}.register-link[_ngcontent-%COMP%]{margin-top:16px;text-align:center;color:#ccc;font-size:14px}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none;font-weight:600;cursor:pointer;transition:color .3s ease}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0056b3;text-decoration:underline}.reset-password-link[_ngcontent-%COMP%]{margin-top:8px;text-align:center;color:#ccc;font-size:14px}.reset-password-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#0056b3;text-decoration:none;font-weight:600;cursor:pointer;transition:color .3s ease}.reset-password-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0056b3;text-decoration:underline}"]})};var ks=()=>{let n=G(_t),e=G(ze);return new Promise(t=>{let r=n.onAuthStateChanged(i=>{r(),i?t(!0):(e.navigate(["/login"]),t(!1))})})};function oge(n,e){n&1&&(F(0,"div",17),U(1,` O nome da empresa \xE9 obrigat\xF3rio (m\xEDnimo 2 caracteres).
`),L())}function sge(n,e){n&1&&(F(0,"div",17),U(1," Por favor, informe um email v\xE1lido. "),L())}function age(n,e){n&1&&(F(0,"div",17),U(1," A senha \xE9 obrigat\xF3ria e deve ter pelo menos 6 caracteres. "),L())}function cge(n,e){if(n&1&&(F(0,"div",17),U(1),L()),n&2){let t=_e();$(),rn(t.error)}}var k_=class n{constructor(e,t,r,i,o){this.authService=e;this.router=t;this.cd=r;this.ngZone=i;this.firestore=o}email="";password="";nomeEmpresa="";error="";register(e){if(e.invalid){e.control.markAllAsTouched(),this.error="Por favor, preencha todos os campos corretamente.";return}let t=e.value.email.trim(),r=e.value.password.trim(),i=this.nomeEmpresa.trim();if(!i){this.error="Por favor, informe o nome da empresa.";return}this.error="",this.authService.register(t,r).then(o=>ys(kt(this.firestore,"usuarios",o.user.uid),{email:t,nomeEmpresa:i,criadoEm:new Date})).then(()=>{this.ngZone.run(()=>{alert("Conta criada com sucesso!"),this.router.navigate(["/login"])})}).catch(o=>{this.ngZone.run(()=>{o.code==="auth/email-already-in-use"?this.error="Este email j\xE1 est\xE1 cadastrado.":o.code==="auth/invalid-email"?this.error="Email inv\xE1lido.":o.code==="auth/weak-password"?this.error="A senha deve ter pelo menos 6 caracteres.":this.error="Erro ao criar conta. Tente novamente.",this.cd.detectChanges()})})}static \u0275fac=function(t){return new(t||n)(z(Ca),z(ze),z(Vr),z(He),z(jt))};static \u0275cmp=it({type:n,selectors:[["app-register"]],decls:26,vars:8,consts:[["registerForm","ngForm"],["nomeEmpresaCtrl","ngModel"],["emailCtrl","ngModel"],["passwordCtrl","ngModel"],[1,"register-container"],[1,"register-title"],[3,"ngSubmit"],["for","nomeEmpresa"],["id","nomeEmpresa","type","text","name","nomeEmpresa","required","","minlength","2",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],["for","email"],["id","email","type","email","name","email","required","","email","",3,"ngModelChange","ngModel"],["for","password"],["id","password","type","password","name","password","required","","minlength","6",3,"ngModelChange","ngModel"],["type","submit",3,"disabled"],[1,"register-link"],["routerLink","/login"],[1,"error-message"]],template:function(t,r){if(t&1){let i=bn();F(0,"div",4)(1,"h2",5),U(2,"Criar Conta"),L(),F(3,"form",6,0),re("ngSubmit",function(){ge(i);let s=ho(4);return me(r.register(s))}),F(5,"label",7),U(6,"Nome da Empresa"),L(),F(7,"input",8,1),vt("ngModelChange",function(s){return ge(i),Et(r.nomeEmpresa,s)||(r.nomeEmpresa=s),me(s)}),L(),Le(9,oge,2,0,"div",9),F(10,"label",10),U(11,"Email"),L(),F(12,"input",11,2),vt("ngModelChange",function(s){return ge(i),Et(r.email,s)||(r.email=s),me(s)}),L(),Le(14,sge,2,0,"div",9),F(15,"label",12),U(16,"Senha"),L(),F(17,"input",13,3),vt("ngModelChange",function(s){return ge(i),Et(r.password,s)||(r.password=s),me(s)}),L(),Le(19,age,2,0,"div",9),F(20,"button",14),U(21,"Cadastrar"),L()(),Le(22,cge,2,1,"div",9),F(23,"div",15)(24,"a",16),U(25,"J\xE1 tenho conta"),L()()()}if(t&2){let i=ho(4),o=ho(8),s=ho(13),a=ho(18);$(7),mt("ngModel",r.nomeEmpresa),$(2),te("ngIf",o.invalid&&(o.touched||i.submitted)),$(3),mt("ngModel",r.email),$(2),te("ngIf",s.invalid&&(s.touched||i.submitted)),$(3),mt("ngModel",r.password),$(2),te("ngIf",a.invalid&&(a.touched||i.submitted)),$(),te("disabled",i.invalid),$(2),te("ngIf",r.error)}},dependencies:[sn,sr,Wt,on,or,Hi,Nh,ib,Gn,ji,Ui,vi,Nt,vn],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background:linear-gradient(135deg,#1e1e2f,#34344e);font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;animation:fadeInBg 1.2s ease-out}.register-container[_ngcontent-%COMP%]{background:#ffffff0f;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);padding:48px 36px;border-radius:20px;box-shadow:0 12px 32px #0006;width:100%;max-width:420px;border:1px solid rgba(255,255,255,.1);animation:_ngcontent-%COMP%_slideFade .6s ease-out}.register-title[_ngcontent-%COMP%]{text-align:center;font-size:28px;margin-bottom:32px;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.3);animation:_ngcontent-%COMP%_fadeIn 1s ease-in}.register-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .register-container[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .register-container[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;padding:12px 1px;margin-bottom:20px;border:1px solid rgba(255,255,255,.1);background:#ffffff1a;border-radius:6px;font-size:14px;transition:all .3s ease}.register-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 5px #007bff4d;outline:none}.register-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:#007bff;color:#fff;border:none;border-radius:6px;font-size:16px;cursor:pointer;transition:background-color .3s ease,transform .2s ease;animation:_ngcontent-%COMP%_popIn .5s ease}.register-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#fff;font-weight:500;margin-bottom:6px;margin-top:12px;font-size:14px;animation:_ngcontent-%COMP%_fadeIn .8s ease-in}.register-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:scale(1.03)}.register-link[_ngcontent-%COMP%]{text-align:center;margin-top:16px;font-size:14px}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none;transition:color .3s ease}.register-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0056b3}.error-message[_ngcontent-%COMP%]{color:red;text-align:center;margin-top:10px;animation:_ngcontent-%COMP%_shake .3s ease}@keyframes _ngcontent-%COMP%_slideFade{0%{opacity:0;transform:translateY(40px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_popIn{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}"]})};function uge(n,e){if(n&1&&(F(0,"p"),U(1),L()),n&2){let t=_e();$(),rn(t.mensagem)}}function lge(n,e){if(n&1&&(F(0,"p",10),U(1),L()),n&2){let t=_e();$(),rn(t.erro)}}var F_=class n{constructor(e){this.auth=e}email="";mensagem="";erro="";reset(){this.mensagem="",this.erro="",Zh(this.auth,this.email).then(()=>{this.mensagem="Email de recupera\xE7\xE3o enviado!",this.email=""}).catch(e=>{this.erro="Erro ao enviar email. Verifique o endere\xE7o informado.",console.error(e)})}static \u0275fac=function(t){return new(t||n)(z(_t))};static \u0275cmp=it({type:n,selectors:[["app-reset-password"]],decls:14,vars:3,consts:[["form","ngForm"],[1,"reset-container"],[3,"ngSubmit"],["type","email","name","email","placeholder","Digite seu email","required","",3,"ngModelChange","ngModel"],["type","submit"],[1,"reset-link"],["routerLink","/login"],[1,"arrow-icon"],[4,"ngIf"],["class","error",4,"ngIf"],[1,"error"]],template:function(t,r){if(t&1){let i=bn();F(0,"div",1)(1,"h2"),U(2,"Recuperar Senha"),L(),F(3,"form",2,0),re("ngSubmit",function(){return ge(i),me(r.reset())}),F(5,"input",3),vt("ngModelChange",function(s){return ge(i),Et(r.email,s)||(r.email=s),me(s)}),L(),F(6,"button",4),U(7,"Enviar link de recupera\xE7\xE3o"),L()(),F(8,"div",5)(9,"a",6),dt(10,"span",7),U(11," Voltar para o login "),L()(),Le(12,uge,2,1,"p",8)(13,lge,2,1,"p",9),L()}t&2&&($(5),mt("ngModel",r.email),$(7),te("ngIf",r.mensagem),$(),te("ngIf",r.erro))},dependencies:[Nt,vn,sn,sr,Wt,on,or,Hi,Gn,ji,Ui,vi],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background:linear-gradient(135deg,#1e1e2f,#34344e);font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;animation:_ngcontent-%COMP%_fadeInBg 1.2s ease-out}.reset-container[_ngcontent-%COMP%]{background:#ffffff0f;-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);padding:48px 36px;border-radius:20px;box-shadow:0 12px 32px #0006;width:100%;max-width:420px;border:1px solid rgba(255,255,255,.1);animation:_ngcontent-%COMP%_slideFade .6s ease-out}.reset-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;font-size:28px;margin-bottom:32px;color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,.3);animation:_ngcontent-%COMP%_fadeIn 1s ease-in}.reset-container[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{width:100%;padding:12px 1px;margin-bottom:20px;border:1px solid rgba(255,255,255,.1);background:#ffffff1a;border-radius:6px;font-size:14px;color:#fff;transition:all .3s ease}.reset-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#007bff;box-shadow:0 0 5px #007bff4d;outline:none}.reset-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:12px;background-color:#007bff;color:#fff;border:none;border-radius:6px;font-size:16px;cursor:pointer;transition:background-color .3s ease,transform .2s ease;animation:_ngcontent-%COMP%_popIn .5s ease}.reset-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:scale(1.03)}.reset-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{text-align:center;margin-top:16px;font-size:14px;color:#ccc}.reset-container[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:red;animation:_ngcontent-%COMP%_shake .3s ease}.reset-link[_ngcontent-%COMP%]{text-align:center;margin-top:20px;font-size:14px}.reset-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none;transition:color .3s ease;display:inline-flex;align-items:center;gap:6px}.reset-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0056b3}.arrow-icon[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;border-left:2px solid #007bff;border-bottom:2px solid #007bff;transform:rotate(45deg);margin-top:2px;transition:border-color .3s ease}.reset-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .arrow-icon[_ngcontent-%COMP%]{border-color:#0056b3}@keyframes _ngcontent-%COMP%_slideFade{0%{opacity:0;transform:translateY(40px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeInBg{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_popIn{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}"]})};function dge(n,e){if(n&1&&(F(0,"p"),U(1),L()),n&2){let t=_e();fl("mensagem-flutuante",!0)("alerta",t.mensagem.includes("Erro"))("normal",!t.mensagem.includes("Erro")),$(),Yt(" ",t.mensagem," ")}}var L_=class n{constructor(e,t){this.categoryService=e;this.router=t}nomeCategoria="";mensagem="";salvarCategoria(){return A(this,null,function*(){if(!this.nomeCategoria.trim()){this.mensagem="Informe um nome v\xE1lido para a categoria.";return}try{yield this.categoryService.addCategoria(this.nomeCategoria.trim()),this.mensagem="Categoria criada com sucesso!",setTimeout(()=>{this.router.navigate(["/"])},1500)}catch(e){console.error("Erro ao criar categoria",e),this.mensagem="Erro ao criar categoria."}})}cancelar(){this.router.navigate(["/produtos"])}static \u0275fac=function(t){return new(t||n)(z(Za),z(ze))};static \u0275cmp=it({type:n,selectors:[["app-nova-categoria"]],decls:15,vars:2,consts:[[1,"container-nova-categoria"],[1,"titulo-nova-categoria"],[1,"box-nova-categoria"],[1,"grupo-nova-categoria"],["for","nomeCategoria"],["id","nomeCategoria","type","text",3,"ngModelChange","ngModel"],[1,"acoes-nova-categoria"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[3,"mensagem-flutuante","alerta","normal",4,"ngIf"]],template:function(t,r){t&1&&(F(0,"body")(1,"div",0)(2,"h2",1),U(3,"Nova Categoria"),L(),F(4,"div",2)(5,"div",3)(6,"label",4),U(7,"Nome da Categoria"),L(),F(8,"input",5),vt("ngModelChange",function(o){return Et(r.nomeCategoria,o)||(r.nomeCategoria=o),o}),L()()(),F(9,"div",6)(10,"button",7),re("click",function(){return r.salvarCategoria()}),U(11,"Salvar Categoria"),L(),F(12,"button",8),re("click",function(){return r.cancelar()}),U(13,"Cancelar"),L()(),Le(14,dge,2,7,"p",9),L()()),t&2&&($(8),mt("ngModel",r.nomeCategoria),$(6),te("ngIf",r.mensagem))},dependencies:[sn,Wt,on,Gn],styles:['@font-face{font-family:Lemon Milk;src:url(/assets/fonts/LEMONMILK-Regular.ttf) format("truetype");font-weight:400;font-style:normal}*[_ngcontent-%COMP%]{box-sizing:border-box}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;padding:0}body[_ngcontent-%COMP%]{background:linear-gradient(to right,#e3f2fd,#fce4ec);font-family:Segoe UI,sans-serif;display:flex;align-items:center;justify-content:center;min-height:100vh}.container-nova-categoria[_ngcontent-%COMP%]{width:100%;max-width:550px;padding:30px;background-color:#fff;border-radius:16px;box-shadow:0 8px 24px #0000001a;transition:transform .3s ease;animation:_ngcontent-%COMP%_fadeIn .6s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.titulo-nova-categoria[_ngcontent-%COMP%]{font-family:Lemon Milk,sans-serif;text-align:center;font-size:42px;margin-bottom:30px;color:#007bff;letter-spacing:1.5px;animation:_ngcontent-%COMP%_slideDown .5s ease-in-out}@keyframes _ngcontent-%COMP%_slideDown{0%{transform:translateY(-15px);opacity:0}to{transform:translateY(0);opacity:1}}.box-nova-categoria[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px}.grupo-nova-categoria[_ngcontent-%COMP%]{display:flex;flex-direction:column}.grupo-nova-categoria[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:6px;font-size:14px;color:#333}.grupo-nova-categoria[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .grupo-nova-categoria[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:10px;border:2px solid #dee2e6;border-radius:8px;transition:border-color .3s ease,box-shadow .3s ease;font-size:16px;background-color:#fff}.grupo-nova-categoria[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover, .grupo-nova-categoria[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{border-color:#b3d7ff}.grupo-nova-categoria[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .grupo-nova-categoria[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none;box-shadow:0 0 0 4px #007bff26}.acoes-nova-categoria[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;margin-top:10px}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:8px;cursor:pointer;font-weight:600;font-size:15px;transition:transform .2s ease,box-shadow .2s ease}.btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.btn-primary[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#495057}.mensagem-flutuante[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#333;color:#fff;padding:16px 24px;border-radius:12px;box-shadow:0 4px 20px #0000004d;font-size:18px;z-index:9999;opacity:.95;animation:_ngcontent-%COMP%_fadeInOut 2.5s ease-in-out}@keyframes _ngcontent-%COMP%_fadeInOut{0%{opacity:0;transform:translate(-50%,-60%)}10%{opacity:1;transform:translate(-50%,-50%)}90%{opacity:1;transform:translate(-50%,-50%)}to{opacity:0;transform:translate(-50%,-40%)}}@media (max-width: 480px){.titulo-nova-categoria[_ngcontent-%COMP%]{font-size:28px}.btn[_ngcontent-%COMP%]{width:100%;text-align:center}.acoes-nova-categoria[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}']})};var fge=(n,e)=>({alerta:n,normal:e}),hge=n=>({"estoque-baixo":n});function pge(n,e){if(n&1&&(F(0,"div",18),U(1),L()),n&2){let t=_e();te("ngClass",Zs(2,fge,t.tipoMensagem==="alerta",t.tipoMensagem==="normal")),$(),Yt(" ",t.mensagemFlutuante,`
`)}}function gge(n,e){if(n&1){let t=bn();F(0,"div",19)(1,"div",20)(2,"p"),U(3,"Tem certeza que deseja excluir este produto?"),L(),F(4,"button",21),re("click",function(){ge(t);let i=_e();return me(i.confirmarExclusao())}),U(5,"Sim"),L(),F(6,"button",22),re("click",function(){ge(t);let i=_e();return me(i.cancelarExclusao())}),U(7,"N\xE3o"),L()()()}}function mge(n,e){if(n&1){let t=bn();F(0,"tr",23)(1,"td",24),U(2),L(),F(3,"td",25),U(4),L(),F(5,"td",26),U(6),L(),F(7,"td",27),U(8),L(),F(9,"td",28)(10,"button",29),re("click",function(){let i=ge(t).$implicit,o=_e();return me(o.editarProduto(i))}),U(11,"Editar"),L(),F(12,"button",29),re("click",function(){let i=ge(t).$implicit,o=_e();return me(o.exibirConfirmacaoExcluir(i.id))}),U(13,"Excluir"),L()()()}if(n&2){let t=e.$implicit,r=_e();te("ngClass",m0(5,hge,(t.quantity||0)<=r.limiteEstoqueCritico)),$(2),rn(t.code),$(2),rn(t.name),$(2),rn(t.quantity),$(2),rn(t.price.toFixed(2))}}function vge(n,e){n&1&&(F(0,"tr",30)(1,"td",31),U(2,"Nenhum produto cadastrado!"),L()())}var V_=class n{constructor(e,t,r,i){this.productService=e;this.router=t;this.firestore=r;this.auth=i}resumo={totalItens:0,totalValor:0};produtos=[];produtosFiltrados=[];filtro="";nomeEmpresa="";limiteEstoqueCritico=2;mensagemFlutuante="";mostrarMensagem=!1;tipoMensagem="normal";idProdutoParaExcluir=null;mostrarConfirmacaoExcluir=!1;ngOnInit(){return A(this,null,function*(){ty(this.auth,e=>A(this,null,function*(){if(e){let t=kt(this.firestore,`usuarios/${e.uid}/configuracoes/${e.uid}`),r=yield Hr(t);if(r.exists()){let o=r.data();this.nomeEmpresa=o.nomeEmpresa||"",this.limiteEstoqueCritico=o.estoqueCritico??2}yield this.atualizarDados();let i=history.state?.mensagemEstoqueBaixo;i&&(this.exibirMensagem(i,"alerta"),history.replaceState({},"",location.pathname))}}))})}atualizarDados(){return A(this,null,function*(){this.produtos=yield this.productService.getAll(),console.log("Produtos carregados:",this.produtos),this.produtosFiltrados=[...this.produtos];let e=yield this.productService.getResumo();this.resumo=e;let t=this.produtos.filter(r=>(r.quantity||0)<=this.limiteEstoqueCritico);if(t.length>0){let i=`\u26A0 Produtos com estoque muito baixo: ${t.map(o=>`"${o.name}"`).join(", ")}`;this.exibirMensagem(i,"alerta",2500)}})}filtrarProdutos(){let e=this.filtro.toLowerCase();this.produtosFiltrados=this.produtos.filter(t=>t.name.toLowerCase().includes(e))}exibirConfirmacaoExcluir(e){this.idProdutoParaExcluir=e,this.mostrarConfirmacaoExcluir=!0}cancelarExclusao(){this.idProdutoParaExcluir=null,this.mostrarConfirmacaoExcluir=!1}confirmarExclusao(){return A(this,null,function*(){if(this.idProdutoParaExcluir!==null)try{yield this.productService.delete(this.idProdutoParaExcluir),yield this.atualizarDados(),this.filtrarProdutos(),this.exibirMensagem("Produto exclu\xEDdo com sucesso!")}catch(e){this.exibirMensagem("Erro ao excluir o produto.","alerta"),console.error("Erro ao excluir produto:",e)}this.cancelarExclusao()})}editarProduto(e){this.router.navigate(["/editar-produto",e.id])}abrirDashboard(){this.router.navigate([""])}abrirNovaCategoria(){this.router.navigate(["/nova-categoria"])}abrirCriarProduto(){this.router.navigate(["/novo-produto"])}irParaProdutos(){this.router.navigate(["/produtos"])}irParaVendas(){this.router.navigate(["/venda"])}irParaConfiguracoes(){this.router.navigate(["/configura\xE7\xF5es"])}exibirMensagem(e,t="normal",r=2500){this.mensagemFlutuante=e,this.tipoMensagem=t,this.mostrarMensagem=!0,setTimeout(()=>{this.mostrarMensagem=!1},r)}static \u0275fac=function(t){return new(t||n)(z(bi),z(ze),z(jt),z(_t))};static \u0275cmp=it({type:n,selectors:[["app-products"]],decls:58,vars:7,consts:[[1,"container"],[1,"sidebar"],[1,"logo"],[1,"link-estilo",3,"click"],[1,"main-content"],[1,"resumo"],[1,"resumo-card"],["class","mensagem-flutuante",3,"ngClass",4,"ngIf"],["class","confirmacao-flutuante-backdrop",4,"ngIf"],[2,"display","flex","justify-content","space-between","align-items","center","margin-bottom","20px"],[1,"actions"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"filtro-produto-container"],["type","text","placeholder","Filtrar produtos...",1,"filtro-produto-input",3,"ngModelChange","ngModel"],[1,"tabela-produtos"],[3,"ngClass",4,"ngFor","ngForOf"],["class","mensagem-vazia",4,"ngIf"],[1,"mensagem-flutuante",3,"ngClass"],[1,"confirmacao-flutuante-backdrop"],[1,"confirmacao-flutuante"],[1,"btn-sim",3,"click"],[1,"btn-nao",3,"click"],[3,"ngClass"],["data-label","Code"],["data-label","Nome"],["data-label","Quantidade"],["data-label","Pre\xE7o (R$)"],["data-label","A\xE7\xF5es"],[3,"click"],[1,"mensagem-vazia"],["colspan","5"]],template:function(t,r){t&1&&(F(0,"body")(1,"div",0)(2,"aside",1)(3,"h2",2),U(4,"StockX"),L(),F(5,"nav")(6,"ul")(7,"li")(8,"button",3),re("click",function(){return r.irParaProdutos()}),U(9,"Produtos"),L()(),F(10,"li")(11,"button",3),re("click",function(){return r.abrirDashboard()}),U(12,"Dashboard"),L()(),F(13,"li")(14,"button",3),re("click",function(){return r.irParaVendas()}),U(15,"Nova Venda"),L()(),F(16,"li")(17,"button",3),re("click",function(){return r.irParaConfiguracoes()}),U(18,"Configura\xE7\xF5es"),L()()()()(),F(19,"main",4),dt(20,"app-navbar"),F(21,"div",5)(22,"div",6)(23,"h2"),U(24,"Total de Itens"),L(),F(25,"p"),U(26),L()(),F(27,"div",6)(28,"h2"),U(29,"Valor Total em Estoque"),L(),F(30,"p"),U(31),L()()(),Le(32,pge,2,5,"div",7)(33,gge,8,0,"div",8),F(34,"div",9)(35,"div",10)(36,"button",11),re("click",function(){return r.abrirCriarProduto()}),U(37,"Novo Produto"),L(),F(38,"button",12),re("click",function(){return r.abrirNovaCategoria()}),U(39,"Nova Categoria"),L(),F(40,"div",13)(41,"input",14),vt("ngModelChange",function(o){return Et(r.filtro,o)||(r.filtro=o),o}),re("ngModelChange",function(){return r.filtrarProdutos()}),L()()()(),F(42,"table",15)(43,"thead")(44,"tr")(45,"th"),U(46,"Code"),L(),F(47,"th"),U(48,"Nome"),L(),F(49,"th"),U(50,"Quantidade"),L(),F(51,"th"),U(52,"Pre\xE7o (R$)"),L(),F(53,"th"),U(54,"A\xE7\xF5es"),L()()(),F(55,"tbody"),Le(56,mge,14,7,"tr",16)(57,vge,3,0,"tr",17),L()()()()()),t&2&&($(26),rn(r.resumo.totalItens),$(5),Yt("R$ ",r.resumo.totalValor.toFixed(2),""),$(),te("ngIf",r.mostrarMensagem),$(),te("ngIf",r.mostrarConfirmacaoExcluir),$(8),mt("ngModel",r.filtro),$(15),te("ngForOf",r.produtosFiltrados),$(),te("ngIf",r.produtosFiltrados.length===0))},dependencies:[Nt,Vi,hi,vn,sn,Wt,on,Gn,yd],styles:["body[_ngcontent-%COMP%]{margin:0;font-family:Segoe UI,sans-serif;background:linear-gradient(to right,#e3f2fd,#fce4ec)}.container[_ngcontent-%COMP%]{display:flex;height:100vh;overflow:hidden}.sidebar[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100vh;width:260px;background-color:#1f2937;color:#fff;padding:30px 20px;box-shadow:4px 0 10px #0003;animation:_ngcontent-%COMP%_slideIn .5s ease forwards;z-index:1000}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(-100%)}to{opacity:1;transform:translate(0)}}.sidebar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin-bottom:40px;color:#60a5fa;text-align:center}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:18px 0}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#e5e7eb;font-size:18px;text-decoration:none;font-weight:600;display:block;padding:10px;border-radius:8px;transition:background-color .3s,transform .2s}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#374151;transform:scale(1.05)}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.link-estilo[_ngcontent-%COMP%]{all:unset;color:#e5e7eb;text-decoration:none;font-size:18px;font-weight:600;display:block;padding:10px;border-radius:8px;cursor:pointer;transition:background-color .3s,transform .2s;width:100%;text-align:left}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.link-estilo[_ngcontent-%COMP%]:hover{background-color:#374151;transform:scale(1.05)}.main-content[_ngcontent-%COMP%]{flex-grow:1;padding:40px 40px 40px 300px;background-color:#f9fafb;overflow-y:auto}.main-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-left:10px;font-size:36px;font-weight:700;color:#1f2937;opacity:0;transform:translateY(20px);animation:_ngcontent-%COMP%_fadeSlideUpTitle .6s ease forwards;animation-delay:.1s;margin-bottom:25px}@keyframes _ngcontent-%COMP%_fadeSlideUpTitle{to{opacity:1;transform:translateY(0)}}.resumo[_ngcontent-%COMP%]{display:flex;gap:20px;margin-top:20px;flex-wrap:wrap}.resumo-card[_ngcontent-%COMP%]{background-color:#fff;padding:25px;border-radius:12px;box-shadow:0 8px 12px #0000001f;flex:1;min-width:220px;transition:transform .3s ease,box-shadow .3s ease;opacity:0;transform:translateY(20px);animation:_ngcontent-%COMP%_fadeSlideUp .5s forwards}.resumo-card[_ngcontent-%COMP%]:nth-child(1){animation-delay:.3s}.resumo-card[_ngcontent-%COMP%]:nth-child(2){animation-delay:.5s}.resumo-card[_ngcontent-%COMP%]:nth-child(3){animation-delay:.7s}@keyframes _ngcontent-%COMP%_fadeSlideUp{to{opacity:1;transform:translateY(.1)}}.resumo-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px) scale(1.03);box-shadow:0 6px 18px #0000001f}.resumo-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;font-size:20px;color:#555}.resumo-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:26px;font-weight:700;margin:0;color:#007bff}.btn-primary[_ngcontent-%COMP%]{margin-top:45px;margin-bottom:15px;background-color:#007bff;color:#fff;border:none;padding:12px 25px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;box-shadow:0 4px 12px #007bff66;transition:background-color .3s ease,transform .2s ease,box-shadow .3s ease;animation:_ngcontent-%COMP%_fadeIn .8s ease forwards;opacity:0}.btn-primary[_ngcontent-%COMP%]:hover{background-color:#0056b3;transform:scale(1.05)}.btn-secondary[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;border:none;padding:12px 25px;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;box-shadow:0 4px 12px #6c757d66;transition:background-color .3s ease,transform .2s ease,box-shadow .3s ease;margin-left:10px}.btn-secondary[_ngcontent-%COMP%]:hover{background-color:#5a6268;transform:scale(1.05);box-shadow:0 6px 18px #5a626880}.actions[_ngcontent-%COMP%]{flex-direction:column;width:100%}@keyframes _ngcontent-%COMP%_fadeIn{to{opacity:1}}.tabela-produtos[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0 10px;font-size:16px;background-color:transparent;animation:_ngcontent-%COMP%_fadeIn 1s ease forwards;opacity:0}.tabela-produtos[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;text-align:left;font-weight:700}.tabela-produtos[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:14px 18px;border-radius:8px 8px 0 0}.tabela-produtos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 2px 6px #00000080;transition:background-color .3s ease,box-shadow .3s ease,transform .4s ease;border-radius:10px;cursor:default}.tabela-produtos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#eef4ff;transform:translateY(-4px) scale(1.02);box-shadow:0 6px 20px #00000080}.tabela-produtos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:14px 18px;color:#000;vertical-align:middle}.tabela-produtos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-radius:8px 0 0 8px}.tabela-produtos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-radius:0 8px 8px 0}.tabela-produtos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 14px;margin-right:2px;border:none;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:background-color .3s ease,transform .15s ease}.tabela-produtos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{background-color:#17a2b8;color:#fff}.tabela-produtos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child:hover{background-color:#138496;transform:scale(1.05)}.tabela-produtos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child{background-color:#dc3545;color:#fff}.tabela-produtos[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-child:hover{background-color:#b52b39;transform:scale(1.05)}.mensagem-flutuante[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#333;color:#fff;padding:16px 24px;border-radius:12px;box-shadow:0 4px 20px #0000004d;font-size:18px;z-index:9999;opacity:.95;animation:_ngcontent-%COMP%_fadeInOut 2.5s ease-in-out}.mensagem-flutuante.alerta[_ngcontent-%COMP%]{background:#f44336!important;margin:40px;text-align:center;top:20px;right:20px}@keyframes _ngcontent-%COMP%_fadeInOut{0%{opacity:0;transform:translate(-50%,-60%)}10%{opacity:1;transform:translate(-50%,-50%)}90%{opacity:1;transform:translate(-50%,-50%)}to{opacity:0;transform:translate(-50%,-40%)}}@keyframes _ngcontent-%COMP%_abrirConfirmacao{0%{opacity:0;transform:scale(.7)}to{opacity:1;transform:scale(1)}}.confirmacao-flutuante[_ngcontent-%COMP%]{background-color:#fff;padding:20px 30px;border-radius:12px;box-shadow:0 4px 15px #0000004d;text-align:center;max-width:320px;font-size:16px;animation:_ngcontent-%COMP%_abrirConfirmacao .4s ease forwards}.confirmacao-flutuante-backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:9998;display:flex;justify-content:center;align-items:center}.confirmacao-flutuante[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:10px 15px;padding:8px 18px;border:none;border-radius:8px;cursor:pointer;font-weight:600;transition:background-color .3s ease;width:100px}.btn-sim[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.btn-sim[_ngcontent-%COMP%]:hover{background-color:#962b1f}.btn-nao[_ngcontent-%COMP%]{background-color:#bdc3c7;color:#000;width:100px}.btn-nao[_ngcontent-%COMP%]:hover{background-color:#a9a9a9}.mensagem-vazia[_ngcontent-%COMP%]{text-align:center;opacity:.6;font-style:italic;font-size:1.1em;height:60px}.mensagem-vazia[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:20px}.estoque-baixo[_ngcontent-%COMP%]{background-color:#d11717!important;color:#000!important;font-weight:700!important}.estoque-baixo[_ngcontent-%COMP%]:hover{background-color:#a84d4d!important;color:#000!important;font-weight:700!important}.filtro-produto-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;flex-wrap:wrap;gap:10px}.filtro-produto-input[_ngcontent-%COMP%]{margin-right:880px;padding:8px 12px;border-radius:8px;border:1px solid #ccc;width:250px}@media (max-width: 768px){.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{display:block;width:100%;margin-bottom:10px}.btn-secondary[_ngcontent-%COMP%]{margin-left:0}.tabela-produtos[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.tabela-produtos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:block;margin-bottom:20px;box-shadow:0 2px 8px #0003}.tabela-produtos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:12px;border-bottom:1px solid #eee}.tabela-produtos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);font-weight:700;color:#333}.tabela-produtos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:first-child{border-radius:10px 10px 0 0}.tabela-produtos[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:last-child{border-radius:0 0 10px 10px}.mensagem-vazia[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center;padding:16px;background-color:#f8d7da;color:#721c24}.mensagem-flutuante.alerta[_ngcontent-%COMP%]{position:fixed!important;top:50px!important;left:50%!important;transform:translate(-50%)!important;margin:0!important;max-width:calc(100% - 40px);width:auto!important;box-sizing:border-box;font-size:14px;z-index:9999;text-align:center}.sidebar[_ngcontent-%COMP%]{top:auto;bottom:0;left:0;width:100%;height:60px;flex-direction:row;align-items:center;justify-content:center;padding:0}.sidebar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:none}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%;margin:0;padding:0}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.link-estilo[_ngcontent-%COMP%]{font-size:14px;padding:10px 6px;text-align:center;width:100%}.main-content[_ngcontent-%COMP%]{padding:20px 15px 80px}.filtro-produto-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;align-items:stretch;gap:12px}.filtro-produto-input[_ngcontent-%COMP%]{width:100%;box-sizing:border-box}.actions[_ngcontent-%COMP%]{flex-direction:column;width:100%}.btn-primary[_ngcontent-%COMP%], .btn-secondary[_ngcontent-%COMP%]{width:100%}}"]})};var B_=class n{constructor(e,t){this.firestore=e;this.auth=t}salvarVenda(e){return A(this,null,function*(){let t=this.auth.currentUser;if(!t)throw new Error("Usu\xE1rio n\xE3o autenticado");for(let i of e.itens)yield this.atualizarEstoqueProduto(i.codigo,i.quantidade);let r=vs(this.firestore,`usuarios/${t.uid}/vendas`);return i1(r,e)})}atualizarEstoqueProduto(e,t){return A(this,null,function*(){if(t=Number(t),isNaN(t)||t<=0)throw new Error(`Quantidade inv\xE1lida para venda: ${t}`);let r=this.auth.currentUser;if(!r)throw new Error("Usu\xE1rio n\xE3o autenticado");let i=kt(this.firestore,`usuarios/${r.uid}/produtos/${e}`),o=yield Hr(i);if(!o.exists())throw new Error(`Produto com ID ${e} n\xE3o encontrado para atualizar estoque`);let s=o.data(),a=Number(s.quantity??0);if(a<t)throw new Error(`Estoque insuficiente para o produto ${e}. Estoque atual: ${a}, quantidade vendida: ${t}`);yield o1(i,{quantity:a-t})})}static \u0275fac=function(t){return new(t||n)(ce(jt),ce(_t))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};function _ge(n,e){if(n&1){let t=bn();F(0,"li",30),re("click",function(){let i=ge(t).$implicit,o=_e(2).index,s=_e();return me(s.selecionarProduto(i,o))}),U(1),L()}if(n&2){let t=e.$implicit;$(),Qf(" ",t.name," - ",t.code||t.id," ")}}function xge(n,e){if(n&1&&(F(0,"ul",28),Le(1,_ge,2,2,"li",29),L()),n&2){let t=e.ngIf;$(),te("ngForOf",t)}}function wge(n,e){if(n&1){let t=bn();F(0,"button",8),re("click",function(){ge(t);let i=_e().index,o=_e();return me(o.removerItem(i))}),U(1,"Remover"),L()}}function Ege(n,e){if(n&1){let t=bn();F(0,"div",18)(1,"label"),U(2,"Nome do Produto:"),L(),F(3,"input",19),re("focus",function(){let i=ge(t).index,o=_e();return me(o.onCampoNomeFocado(i))}),L(),Le(4,xge,2,1,"ul",20),pl(5,"async"),F(6,"label"),U(7,"C\xF3digo do produto:"),L(),dt(8,"input",21),F(9,"div",22)(10,"button",23),re("click",function(){ge(t);let i=_e();return me(i.toggleScanner())}),U(11),L()(),F(12,"label"),U(13,"Quantidade:"),L(),dt(14,"input",24),F(15,"label"),U(16,"Pre\xE7o (R$):"),L(),dt(17,"input",25),F(18,"label"),U(19,"Categoria:"),L(),dt(20,"input",26),Le(21,wge,2,0,"button",27),dt(22,"hr"),L()}if(n&2){let t=e.index,r=_e();te("formGroupName",t),$(4),te("ngIf",r.mostrarSugestoes(t)&&qR(5,4,r.produtosFiltrados[t])),$(7),Yt(" ",r.mostrarScanner?"Fechar Scanner":"Abrir Scanner"," "),$(10),te("ngIf",r.itens.length>1)}}function Cge(n,e){if(n&1){let t=bn();F(0,"zxing-scanner",31),re("camerasFound",function(i){ge(t);let o=_e();return me(o.camerasFound(i))})("scanSuccess",function(i){ge(t);let o=_e();return me(o.onCodeScanned(i))})("permissionResponse",function(i){ge(t);let o=_e();return me(o.onHasPermission(i))})("scanError",function(i){ge(t);let o=_e();return me(o.onScanError(i))}),L()}if(n&2){let t,r=_e();te("device",(t=r.currentDevice)!==null&&t!==void 0?t:void 0)("formats",r.allowedFormats)("enable",r.scannerRunning)}}function bge(n,e){n&1&&(F(0,"div",32)(1,"p"),U(2,"Iniciando scanner..."),L()())}var U_=class n{constructor(e,t,r,i,o,s){this.fb=e;this.productService=t;this.router=r;this.vendaService=i;this.cdr=o;this.ngZone=s}scanner;allowedFormats=[X.QR_CODE,X.EAN_13,X.CODE_128];mensagemFlutuante="";mostrarMensagem=!1;tipoMensagem="normal";mostrarScanner=!1;scannerRunning=!1;hasPermission=!1;vendaForm;produtos=[];produtosFiltrados=[];currentDevice;availableDevices=[];ngOnInit(){return A(this,null,function*(){this.vendaForm=this.fb.group({formaPagamento:["",yi.required],itens:this.fb.array([this.criarItem()])}),this.produtos=yield this.productService.getAll(),this.configurarAutocompleteParaItem(0)})}ngAfterViewInit(){setTimeout(()=>{this.scanner&&(this.scanner.permissionResponse?.subscribe(e=>{this.ngZone.run(()=>{this.hasPermission=e})}),this.scanner.camerasFound?.subscribe(e=>{this.ngZone.run(()=>{this.availableDevices=e,e.length>0&&(this.currentDevice=e[0])})}))})}get itens(){return this.vendaForm.get("itens")}criarItem(){return this.fb.group({nome:["",yi.required],codigo:[""],quantidade:[1,[yi.required,yi.min(1)]],preco:[0,yi.required],categoria:[""]})}adicionarItem(){this.itens.push(this.criarItem()),this.configurarAutocompleteParaItem(this.itens.length-1)}removerItem(e){this.itens.removeAt(e),this.produtosFiltrados.splice(e,1)}mostrarSugestoes(e){let t=this.itens.at(e).get("nome")?.value;return t&&t.trim().length>0}configurarAutocompleteParaItem(e){let t=this.itens.at(e).get("nome");if(t){let r=t.valueChanges.pipe(Gu(""),$x(200),Ae(i=>this.filtrarProdutos(i)));this.produtosFiltrados[e]=r}}filtrarProdutos(e){let t=e?.toLowerCase()||"";return this.produtos.filter(r=>r.name?.toLowerCase().includes(t)||r.id?.toLowerCase().includes(t))}ngOnDestroy(){if(!(!this.mostrarScanner&&!this.scannerRunning)&&(this.mostrarScanner=!1,this.scannerRunning=!1,this.scanner))try{this.scanner.reset()}catch{}}selecionarProduto(e,t){this.itens.at(t).patchValue({nome:e.name,codigo:e.id,preco:e.price,categoria:e.category})}calcularTotal(){return this.itens.controls.reduce((e,t)=>{let r=t.get("quantidade")?.value||0,i=t.get("preco")?.value||0;return e+r*i},0)}finalizarVenda(){return A(this,null,function*(){if(this.vendaForm.invalid){alert("Formul\xE1rio inv\xE1lido, preencha todos os campos corretamente!");return}let e={formaPagamento:this.vendaForm.value.formaPagamento,itens:this.vendaForm.value.itens,total:this.calcularTotal(),data:new Date};try{for(let t of e.itens){let r=this.produtos.find(i=>i.id===t.codigo);if(r){let i=Number(t.quantidade);if(r.quantity<i){alert(`Estoque insuficiente para o produto ${r.name}.`);return}}}yield this.vendaService.salvarVenda(e),alert("Venda salva e estoque atualizado com sucesso!"),this.vendaForm.reset(),this.itens.clear(),this.adicionarItem()}catch(t){console.error("Erro ao salvar venda ou atualizar estoque:",t),alert("Erro ao salvar a venda ou atualizar o estoque. Tente novamente.")}})}toggleScanner(){return A(this,null,function*(){if(this.mostrarScanner){this.mostrarScanner=!1,this.scannerRunning=!1;return}this.mostrarScanner=!0,this.scannerRunning=!1;try{if(yield new Promise(e=>setTimeout(e,100)),!this.scanner)throw new Error("Scanner component not initialized");if(this.hasPermission=yield this.scanner.askForPermission(),!this.hasPermission)throw new Error("Permiss\xE3o da c\xE2mera negada");this.availableDevices.length===0&&(yield new Promise((e,t)=>{let r=setTimeout(()=>t("Nenhuma c\xE2mera encontrada"),5e3),i=this.scanner.camerasFound.subscribe(o=>{clearTimeout(r),o.length>0?(this.availableDevices=o,e()):t("Nenhuma c\xE2mera dispon\xEDvel"),i.unsubscribe()})})),this.currentDevice=this.availableDevices[0],this.scanner.device=this.currentDevice,this.scannerRunning=!0}catch(e){this.handleScannerError(e),this.mostrarScanner=!1,this.scannerRunning=!1}})}handleScannerError(e){let t="Erro no scanner";if(e instanceof Error)if(console.error("Scanner error:",e),e.name==="NotReadableError")t="A c\xE2mera n\xE3o pode ser acessada. Verifique se n\xE3o est\xE1 sendo usada por outro aplicativo.";else if(e.name==="NotAllowedError")t="Permiss\xE3o para usar a c\xE2mera foi negada.";else{if(e.message.includes("No scanning is running"))return;t=e.message}this.exibirMensagem(t,"alerta")}onScanError(e){console.error("Erro ao escanear:",e),this.ngZone.run(()=>{e.name==="NotReadableError"?this.exibirMensagem("A c\xE2mera est\xE1 em uso por outro aplicativo ou bloqueada.","alerta"):e.name==="NotAllowedError"?this.exibirMensagem("Permiss\xE3o para c\xE2mera negada.","alerta"):this.exibirMensagem("Erro ao acessar a c\xE2mera: "+e.message,"alerta"),this.mostrarScanner=!1,this.scannerRunning=!1,this.safeResetScanner()})}camerasFound(e){this.ngZone.run(()=>{if(this.availableDevices=e,e.length>0){if(this.currentDevice=e[0],this.scanner)try{this.scanner.reset(),this.scanner.device=this.currentDevice}catch(t){console.warn("Erro ao resetar scanner:",t)}}else this.exibirMensagem("Nenhuma c\xE2mera encontrada.","alerta"),this.mostrarScanner=!1})}onHasPermission(e){this.ngZone.run(()=>{this.hasPermission=e,console.log("Permiss\xE3o da c\xE2mera:",e)})}onScanStart(){this.ngZone.run(()=>{this.scannerRunning=!0,this.exibirMensagem("Escaneamento iniciado.")})}onScanStop(){this.ngZone.run(()=>{this.scannerRunning=!1,this.exibirMensagem("Escaneamento parado.")})}safeResetScanner(){return A(this,null,function*(){if(this.scanner)try{this.scannerRunning&&(yield this.scanner.scanStop(),yield new Promise(e=>setTimeout(e,100)))}catch(e){(!(e instanceof Error)||!e.message.includes("No scanning is running"))&&console.warn("Aviso ao resetar scanner:",e)}finally{this.scannerRunning=!1}})}indiceAtivo=0;onCampoNomeFocado(e){this.indiceAtivo=e}onCodeScanned(e){this.mostrarScanner=!1,this.scannerRunning=!1;let t=this.produtos.find(i=>i.id===e||i.code===e);if(!t){alert("Produto n\xE3o encontrado com este c\xF3digo.");return}let r=this.criarItem();r.patchValue({nome:t.name,codigo:t.id,preco:t.price,categoria:t.category}),this.itens.push(r),this.configurarAutocompleteParaItem(this.itens.length-1)}irParaProdutos(){this.router.navigate(["/produtos"])}abrirDashboard(){this.router.navigate([""])}irParaVendas(){this.router.navigate(["/venda"])}irParaConfiguracoes(){this.router.navigate(["/configura\xE7\xF5es"])}exibirMensagem(e,t="normal",r=2500){this.mensagemFlutuante=e,this.tipoMensagem=t,this.mostrarMensagem=!0,setTimeout(()=>this.mostrarMensagem=!1,r)}static \u0275fac=function(t){return new(t||n)(z(Nl),z(bi),z(ze),z(B_),z(Vr),z(He))};static \u0275cmp=it({type:n,selectors:[["app-venda"]],viewQuery:function(t,r){if(t&1&&hl(Qa,5),t&2){let i;Pc(i=Rc())&&(r.scanner=i.first)}},decls:43,vars:9,consts:[[1,"layout-container"],[1,"sidebar"],[1,"logo"],[1,"link-estilo",3,"click"],[1,"main-content"],[3,"ngSubmit","formGroup"],["formArrayName","itens"],["class","item-bloco",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",3,"click"],[1,"scanner-container"],[3,"device","formats","enable","camerasFound","scanSuccess","permissionResponse","scanError",4,"ngIf"],["class","scanner-loading",4,"ngIf"],["formControlName","formaPagamento"],["value",""],["value","Pix"],["value","Cart\xE3o"],["value","Dinheiro"],["type","submit",3,"disabled"],[1,"item-bloco",3,"formGroupName"],["type","text","formControlName","nome","placeholder","Digite ou selecione","autocomplete","off",3,"focus"],["class","autocomplete-list",4,"ngIf"],["type","text","formControlName","codigo","placeholder","Digite ou escaneie o c\xF3digo"],[1,"scanner-button-container"],["type","button",1,"scanner-btn",3,"click"],["type","number","formControlName","quantidade","min","1"],["type","number","formControlName","preco","step","0.01"],["type","text","formControlName","categoria"],["type","button",3,"click",4,"ngIf"],[1,"autocomplete-list"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[3,"camerasFound","scanSuccess","permissionResponse","scanError","device","formats","enable"],[1,"scanner-loading"]],template:function(t,r){t&1&&(F(0,"div",0)(1,"aside",1)(2,"h2",2),U(3,"StockX"),L(),F(4,"nav")(5,"ul")(6,"li")(7,"button",3),re("click",function(){return r.irParaProdutos()}),U(8,"Produtos"),L()(),F(9,"li")(10,"button",3),re("click",function(){return r.abrirDashboard()}),U(11,"Dashboard"),L()(),F(12,"li")(13,"button",3),re("click",function(){return r.irParaVendas()}),U(14,"Nova Venda"),L()(),F(15,"li")(16,"button",3),re("click",function(){return r.irParaConfiguracoes()}),U(17,"Configura\xE7\xF5es"),L()()()()(),F(18,"main",4)(19,"form",5),re("ngSubmit",function(){return r.finalizarVenda()}),F(20,"div",6),Le(21,Ege,23,6,"div",7),L(),F(22,"button",8),re("click",function(){return r.adicionarItem()}),U(23,"+ Adicionar item"),L(),F(24,"div",9),Le(25,Cge,1,3,"zxing-scanner",10)(26,bge,3,0,"div",11),L(),F(27,"label"),U(28,"Forma de Pagamento:"),L(),F(29,"select",12)(30,"option",13),U(31,"Selecione"),L(),F(32,"option",14),U(33,"Pix"),L(),F(34,"option",15),U(35,"Cart\xE3o"),L(),F(36,"option",16),U(37,"Dinheiro"),L()(),F(38,"h3"),U(39),pl(40,"number"),L(),F(41,"button",17),U(42,"Finalizar Venda"),L()()()()),t&2&&($(19),te("formGroup",r.vendaForm),$(2),te("ngForOf",r.itens.controls),$(4),te("ngIf",r.mostrarScanner),$(),te("ngIf",r.mostrarScanner&&!r.scannerRunning&&r.hasPermission),$(13),Yt("Total: R$ ",Zf(40,6,r.calcularTotal(),"1.2-2"),""),$(2),te("disabled",r.vendaForm.invalid))},dependencies:[Nt,hi,vn,oC,sC,ca,sr,Pl,Rl,Wt,is,aa,on,or,Wc,sa,$c,_v,xv,O_,Qa],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}body[_ngcontent-%COMP%]{background:linear-gradient(to right,#e3f2fd,#fce4ec);font-family:Segoe UI,sans-serif;display:flex;justify-content:center;padding:40px 15px;min-height:100vh;margin:0}.mensagem-flutuante[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#333;color:#fff;padding:16px 24px;border-radius:12px;box-shadow:0 4px 20px #0000004d;font-size:18px;z-index:9999;opacity:.95;animation:fadeInOut 2.5s ease-in-out}.layout-container[_ngcontent-%COMP%]{display:flex;height:100vh;width:100%}.sidebar[_ngcontent-%COMP%]{position:fixed;font-family:Segoe UI,sans-serif;top:0;left:0;height:100vh;width:260px;background-color:#1f2937;color:#fff;padding:30px 20px;box-shadow:4px 0 10px #0003;animation:_ngcontent-%COMP%_slideIn .5s ease forwards;z-index:1000}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translate(-100%)}to{opacity:1;transform:translate(0)}}.sidebar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:32px;font-weight:700;margin-bottom:40px;color:#60a5fa;text-align:center}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:18px 0}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.link-estilo[_ngcontent-%COMP%]{all:unset;color:#e5e7eb;font-size:18px;font-weight:600;display:block;padding:10px;border-radius:8px;cursor:pointer;transition:background-color .3s,transform .2s;width:100%;text-align:left}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.link-estilo[_ngcontent-%COMP%]:hover{background-color:#374151;transform:scale(1.05)}.main-content[_ngcontent-%COMP%]{flex:1;margin-left:260px;padding:40px;background-color:#f4f6f8;overflow-y:auto}form[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;background:#fff;padding:20px;border-radius:12px;box-shadow:0 2px 8px #0000001a;font-family:Segoe UI,sans-serif}.item-bloco[_ngcontent-%COMP%]{border:1.5px solid #dee2e6;border-radius:12px;padding:20px 25px;margin-bottom:20px;position:relative;background:#f9fbff;box-shadow:inset 0 0 8px #e0ebff;transition:box-shadow .3s ease}.item-bloco[_ngcontent-%COMP%]:hover{box-shadow:0 0 15px #7aa7ff}.item-bloco[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;font-size:14px;margin-top:12px;display:block;color:#3a3a3a}.scanner-button-container[_ngcontent-%COMP%]{all:unset;margin-top:8px;text-align:left}.scanner-btn[_ngcontent-%COMP%]{all:unset;background-color:#22c55e!important;color:#fff;font-weight:600;font-size:14px;margin-top:15px;padding:8px 16px;border:none;border-radius:8px;cursor:pointer;transition:background-color .3s ease,transform .2s ease!important}.scanner-btn[_ngcontent-%COMP%]:hover{background-color:#16a34a!important;transform:scale(1.03)}.item-bloco[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:2px solid #ced4da;border-radius:8px;font-size:16px;margin-top:6px;transition:border-color .3s ease,box-shadow .3s ease}.item-bloco[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#4f7bff;outline:none;box-shadow:0 0 8px #4f7bffaa;background-color:#f0f5ff;transition:background-color .3s ease}.item-bloco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:6px 12px;margin:8px 0 0;background:#fff;border:1.5px solid #4f7bff;border-radius:0 0 12px 12px;max-height:120px;overflow-y:auto;box-shadow:0 4px 12px #4f7bff40;cursor:pointer;-webkit-user-select:none;user-select:none;font-size:15px}.item-bloco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:8px 6px;border-bottom:1px solid #dde6ff;transition:background-color .2s ease}.item-bloco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child{border-bottom:none}.item-bloco[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#4f7bff33;color:#0042c6}.item-bloco[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;background-color:#ff5c5c;border:none;color:#fff;padding:6px 12px;font-weight:700;border-radius:8px;cursor:pointer;font-size:14px;transition:background-color .3s ease,transform .15s ease}.item-bloco[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#e04747;transform:scale(1.05)}form[_ngcontent-%COMP%] > button[type=button][_ngcontent-%COMP%]{background-color:#007bff;color:#fff;font-weight:700;font-size:16px;padding:12px 22px;border-radius:10px;border:none;cursor:pointer;margin-bottom:30px;width:100%;max-width:250px;transition:background-color .3s ease,box-shadow .3s ease;display:block;margin-left:auto;margin-right:auto}form[_ngcontent-%COMP%] > button[type=button][_ngcontent-%COMP%]:hover{background-color:#0056b3;box-shadow:0 6px 12px #0056b333}select[_ngcontent-%COMP%]{width:100%;padding:12px 14px;margin-bottom:30px;border-radius:10px;border:2px solid #ced4da;font-size:16px;font-weight:600;transition:border-color .3s ease;font-family:Segoe UI,sans-serif;background-color:#fff}select[_ngcontent-%COMP%]:focus{outline:none;border-color:#4f7bff;box-shadow:0 0 8px #4f7bffaa}.resumo[_ngcontent-%COMP%]{font-weight:700;font-size:22px;margin-bottom:30px;text-align:right;color:#333}button[type=submit][_ngcontent-%COMP%]{width:100%;background-color:#28a745;color:#fff;font-size:20px;font-weight:700;padding:16px 0;border:none;border-radius:12px;cursor:pointer;transition:background-color .3s ease}button[type=submit][_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1e7e34}button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#94d3a2;cursor:not-allowed}@media (max-width: 768px){.layout-container[_ngcontent-%COMP%]{flex-direction:column;padding-bottom:60px}.main-content[_ngcontent-%COMP%]{margin-left:0;padding:20px 15px}form[_ngcontent-%COMP%]{width:100%;padding:20px 15px;box-sizing:border-box}.item-bloco[_ngcontent-%COMP%]{padding:14px;font-size:14px}.item-bloco[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:13px}.item-bloco[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-size:14px;padding:10px}button[type=submit][_ngcontent-%COMP%], form[_ngcontent-%COMP%] > button[type=button][_ngcontent-%COMP%]{font-size:15px;padding:12px 16px;width:100%}.resumo[_ngcontent-%COMP%]{font-size:18px;text-align:center}.sidebar[_ngcontent-%COMP%]{top:auto;bottom:0;left:0;width:100%;height:60px;flex-direction:row;align-items:center;justify-content:center;padding:0}.sidebar[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:none}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;justify-content:space-around;width:100%;margin:0;padding:0}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:0}.sidebar[_ngcontent-%COMP%]   nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.link-estilo[_ngcontent-%COMP%]{font-size:14px;padding:10px 6px;text-align:center;width:100%}.scanner-button-container[_ngcontent-%COMP%]{margin-top:8px;text-align:left}.scanner-btn[_ngcontent-%COMP%]{background-color:#22c55e!important;color:#fff;font-weight:600;font-size:14px;margin-top:205px;padding:8px 16px;border:none;border-radius:8px;cursor:pointer;transition:background-color .3s ease,transform .2s ease!important}.scanner-btn[_ngcontent-%COMP%]:hover{background-color:#16a34a!important;transform:scale(1.03)}}"]})};var Ige=(n,e)=>({alerta:n,normal:e});function Sge(n,e){if(n&1&&(F(0,"div",19),U(1),L()),n&2){let t=_e();te("ngClass",Zs(2,Ige,t.tipoMensagem==="alerta",t.tipoMensagem==="normal")),$(),Yt(" ",t.mensagemFlutuante," ")}}var j_=class n{constructor(e,t,r,i){this.fb=e;this.firestore=t;this.router=r;this.auth=i;this.form=this.fb.group({nome:[""],metaMensal:[0],estoqueNotificacao:[0],estoqueCritico:[0]})}form;user=null;mensagemFlutuante="";mostrarMensagem=!1;tipoMensagem="normal";ngOnInit(){return A(this,null,function*(){if(this.user=this.auth.currentUser,!this.user)return;let e=this.user.uid,t=kt(this.firestore,`usuarios/${e}`),r=yield Hr(t);if(r.exists()){let s=r.data();this.form.patchValue({nome:s.nomeEmpresa||""})}let i=kt(this.firestore,`usuarios/${e}/configuracoes/${e}`),o=yield Hr(i);if(o.exists()){let s=o.data();this.form.patchValue({metaMensal:s.metaMensal||0,estoqueNotificacao:s.estoqueNotificacao||0,estoqueCritico:s.estoqueCritico||0})}})}salvarConfiguracoes(){return A(this,null,function*(){if(!this.user)return;let e=this.user.uid,t=kt(this.firestore,`usuarios/${e}`);yield ys(t,{nomeEmpresa:this.form.value.nome},{merge:!0});let s=this.form.value,{nome:r}=s,i=eM(s,["nome"]),o=kt(this.firestore,`usuarios/${e}/configuracoes/${e}`);yield ys(o,i,{merge:!0}),this.exibirMensagem("Configura\xE7\xF5es salvas!")})}irParaAlterarEmail(){this.router.navigate(["/alterar-email"])}enviarEmailTrocaSenha(){return A(this,null,function*(){this.user?.email&&(yield e4(this.auth,this.user.email),this.exibirMensagem("E-mail de redefini\xE7\xE3o de senha enviado!"))})}exibirMensagem(e,t="normal",r=2500){this.mensagemFlutuante=e,this.tipoMensagem=t,this.mostrarMensagem=!0,setTimeout(()=>{this.mostrarMensagem=!1},r)}static \u0275fac=function(t){return new(t||n)(z(Nl),z(jt),z(ze),z(_t))};static \u0275cmp=it({type:n,selectors:[["app-configuracoes"]],decls:33,vars:2,consts:[["class","mensagem-flutuante",3,"ngClass",4,"ngIf"],[1,"config-container"],[1,"config-title"],[3,"ngSubmit","formGroup"],[1,"config-group"],["for","nome"],["id","nome","type","text","formControlName","nome","placeholder","Seu nome"],["for","metaMensal"],["id","metaMensal","type","number","formControlName","metaMensal"],["for","estoqueNotificacao"],["id","estoqueNotificacao","type","number","formControlName","estoqueNotificacao"],["for","estoqueCritico"],["id","estoqueCritico","type","number","formControlName","estoqueCritico"],["type","submit",1,"config-button"],[1,"config-actions"],[1,"config-button",3,"click"],[1,"inicio-link"],["routerLink","/"],[1,"arrow-icon"],[1,"mensagem-flutuante",3,"ngClass"]],template:function(t,r){t&1&&(F(0,"body"),Le(1,Sge,2,5,"div",0),F(2,"div",1)(3,"h2",2),U(4,"Configura\xE7\xF5es"),L(),F(5,"form",3),re("ngSubmit",function(){return r.salvarConfiguracoes()}),F(6,"div",4)(7,"label",5),U(8,"Nome"),L(),dt(9,"input",6),L(),F(10,"div",4)(11,"label",7),U(12,"Meta mensal (R$)"),L(),dt(13,"input",8),L(),F(14,"div",4)(15,"label",9),U(16,"Notificar estoque abaixo de"),L(),dt(17,"input",10),L(),F(18,"div",4)(19,"label",11),U(20,"Estoque cr\xEDtico (destacar em vermelho)"),L(),dt(21,"input",12),L(),F(22,"button",13),U(23,"Salvar Configura\xE7\xF5es"),L()(),F(24,"div",14)(25,"button",15),re("click",function(){return r.irParaAlterarEmail()}),U(26,"Alterar E-mail"),L(),F(27,"button",15),re("click",function(){return r.enviarEmailTrocaSenha()}),U(28,"Redefinir Senha"),L(),F(29,"div",16)(30,"a",17),dt(31,"span",18),U(32," Voltar para In\xEDcio "),L()()()()()),t&2&&($(),te("ngIf",r.mostrarMensagem),$(4),te("formGroup",r.form))},dependencies:[Nt,Vi,vn,ca,sr,Wt,is,on,or,sa,$c,Ui,vi],styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;height:100vh;background:linear-gradient(-45deg,#0f2027,#203a43,#2c5364,#1c1c2b);background-size:400% 400%;animation:_ngcontent-%COMP%_gradientMove 12s ease infinite;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;display:flex;justify-content:center;align-items:center}@keyframes _ngcontent-%COMP%_gradientMove{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.config-container[_ngcontent-%COMP%]{background:#ffffff14;border:1px solid rgba(255,255,255,.15);backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);border-radius:18px;padding:40px 32px;max-width:480px;width:100%;box-shadow:0 12px 40px #0006;animation:_ngcontent-%COMP%_fadeIn .8s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.config-title[_ngcontent-%COMP%]{font-size:28px;font-weight:700;text-align:center;margin-bottom:30px;color:#fff;text-shadow:0 1px 3px rgba(0,0,0,.4)}.config-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:20px}label[_ngcontent-%COMP%]{color:#ccc;font-weight:600;margin-bottom:8px}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{padding:12px 14px;border:none;border-radius:10px;background:#ffffff1a;color:#fff;font-size:15px;transition:all .3s ease;outline:none}input[_ngcontent-%COMP%]::placeholder{color:#aaa}input[_ngcontent-%COMP%]:focus{background:#fff3;box-shadow:0 0 0 2px #007bff66}.config-button[_ngcontent-%COMP%]{background:linear-gradient(135deg,#00b4db,#0083b0);border:none;padding:14px;color:#fff;font-weight:700;font-size:16px;border-radius:12px;cursor:pointer;margin-top:12px;width:100%;transition:all .3s ease}.config-button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#20c4ff,#0095e3);transform:scale(1.03);box-shadow:0 6px 16px #007bff66}.config-button[_ngcontent-%COMP%]:active{transform:scale(.98)}.config-actions[_ngcontent-%COMP%]{margin-top:28px;display:flex;flex-direction:column;gap:12px}.mensagem-flutuante[_ngcontent-%COMP%]{position:fixed;top:50px;left:50%;transform:translate(-50%);margin:0;max-width:calc(100% - 40px);width:auto;box-sizing:border-box;font-size:14px;z-index:9999;text-align:center;padding:12px 24px;border-radius:8px;color:#fff;background-color:#000000bf;font-weight:600}.mensagem-flutuante.alerta[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.inicio-link[_ngcontent-%COMP%]{text-align:center;margin-top:16px;font-size:14px}.inicio-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none;transition:color .3s ease}.inicio-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0056b3}.arrow-icon[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;border-left:2px solid #007bff;border-bottom:2px solid #007bff;transform:rotate(45deg);margin-top:2px;transition:border-color .3s ease}.reset-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .arrow-icon[_ngcontent-%COMP%]{border-color:#0056b3}"]})};var Age=(n,e)=>({alerta:n,normal:e});function Dge(n,e){if(n&1&&(F(0,"div",9),U(1),L()),n&2){let t=_e();te("ngClass",Zs(2,Age,t.tipoMensagem==="alerta",t.tipoMensagem==="normal")),$(),Yt(" ",t.mensagemFlutuante,`
`)}}var H_=class n{constructor(e,t,r){this.fb=e;this.auth=t;this.router=r;this.form=this.fb.group({novoEmail:["",[yi.required,yi.email]],senhaAtual:["",[yi.required]]}),this.user=this.auth.currentUser}form;user=null;mensagemFlutuante="";mostrarMensagem=!1;tipoMensagem="normal";alterarEmail(){return A(this,null,function*(){if(this.form.invalid){this.form.markAllAsTouched();return}let e=this.form.get("novoEmail")?.value,t=this.form.get("senhaAtual")?.value;if(!this.user||!e||!t){this.exibirMensagem("Preencha todos os campos obrigat\xF3rios.");return}try{let r=Xv.credential(this.user.email,t);yield Qv(this.user,r),yield Jv(this.user,e),yield Zv(this.user),this.exibirMensagem("E-mail alterado com sucesso! Verifique sua caixa de entrada."),this.router.navigate(["/"])}catch(r){console.error("Erro ao alterar e-mail:",r),r.code==="auth/wrong-password"||r.code==="auth/invalid-credential"?this.exibirMensagem("Senha atual inv\xE1lida.","alerta"):r.code==="auth/too-many-requests"?this.exibirMensagem("Muitas tentativas. Tente novamente mais tarde.","alerta"):this.exibirMensagem("Erro: "+(r.message||r.code),"alerta")}})}exibirMensagem(e,t="normal",r=2500){console.log("Exibindo mensagem:",e),this.mensagemFlutuante=e,this.tipoMensagem=t,this.mostrarMensagem=!0,setTimeout(()=>{this.mostrarMensagem=!1},r)}static \u0275fac=function(t){return new(t||n)(z(Nl),z(_t),z(ze))};static \u0275cmp=it({type:n,selectors:[["app-alterar-email"]],decls:16,vars:2,consts:[["class","mensagem-flutuante",3,"ngClass",4,"ngIf"],[1,"config-container"],[3,"ngSubmit","formGroup"],["type","email","formControlName","novoEmail"],["type","password","formControlName","senhaAtual"],["type","submit"],[1,"inicio-link"],["routerLink","/"],[1,"arrow-icon"],[1,"mensagem-flutuante",3,"ngClass"]],template:function(t,r){t&1&&(F(0,"body"),Le(1,Dge,2,5,"div",0),F(2,"div",1)(3,"form",2),re("ngSubmit",function(){return r.alterarEmail()}),F(4,"label"),U(5," Novo E-mail: "),dt(6,"input",3),L(),F(7,"label"),U(8," Senha Atual: "),dt(9,"input",4),L(),F(10,"button",5),U(11,"Alterar E-mail"),L(),F(12,"div",6)(13,"a",7),dt(14,"span",8),U(15," Voltar para In\xEDcio"),L()()()()()),t&2&&($(),te("ngIf",r.mostrarMensagem),$(2),te("formGroup",r.form))},dependencies:[Nt,Vi,vn,ca,sr,Wt,on,or,sa,$c,Ui,vi],styles:["body[_ngcontent-%COMP%]{margin:0;padding:0;height:100vh;background:linear-gradient(-45deg,#0f2027,#203a43,#2c5364,#1c1c2b);background-size:400% 400%;animation:_ngcontent-%COMP%_gradientMove 12s ease infinite;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;display:flex;justify-content:center;align-items:center}@keyframes _ngcontent-%COMP%_gradientMove{0%{background-position:0% 50%}50%{background-position:100% 50%}to{background-position:0% 50%}}.config-container[_ngcontent-%COMP%]{background:#ffffff14;border:1px solid rgba(255,255,255,.15);backdrop-filter:blur(16px);-webkit-backdrop-filter:blur(16px);border-radius:18px;padding:40px 32px;max-width:480px;width:100%;box-shadow:0 12px 40px #0006;animation:_ngcontent-%COMP%_fadeIn .8s ease-out;color:#fff}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}form[_ngcontent-%COMP%]{width:100%}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;color:#ccc;font-weight:600;margin-bottom:20px;font-size:14px}form[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], form[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{padding:12px 14px;border:none;border-radius:10px;background:#ffffff1a;color:#fff;font-size:15px;transition:all .3s ease;outline:none}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#aaa}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{background:#fff3;box-shadow:0 0 0 2px #007bff66}form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background:linear-gradient(135deg,#00b4db,#0083b0);border:none;padding:14px;color:#fff;font-weight:700;font-size:16px;border-radius:12px;cursor:pointer;width:100%;transition:all .3s ease;margin-top:12px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#20c4ff,#0095e3);transform:scale(1.03);box-shadow:0 6px 16px #007bff66}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:scale(.98)}.mensagem-flutuante[_ngcontent-%COMP%]{position:fixed;top:50px;left:50%;transform:translate(-50%);margin:0;max-width:calc(100% - 40px);width:auto;box-sizing:border-box;font-size:14px;z-index:9999;text-align:center;padding:12px 24px;border-radius:8px;color:#fff;background-color:#000000bf;font-weight:600}.mensagem-flutuante.alerta[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.inicio-link[_ngcontent-%COMP%]{text-align:center;margin-top:16px;font-size:14px}.inicio-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none;transition:color .3s ease}.inicio-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0056b3}.arrow-icon[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;border-left:2px solid #007bff;border-bottom:2px solid #007bff;transform:rotate(45deg);margin-top:2px;transition:border-color .3s ease}.reset-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover   .arrow-icon[_ngcontent-%COMP%]{border-color:#0056b3}"]})};var n7=[{path:"login",component:N_},{path:"register",component:k_},{path:"recuperar-senha",component:F_},{path:"",component:r_,canActivate:[ks]},{path:"produtos",component:V_,canActivate:[ks]},{path:"configura\xE7\xF5es",component:j_,canActivate:[ks]},{path:"alterar-email",component:H_,canActivate:[ks]},{path:"venda",component:U_,canActivate:[ks]},{path:"nova-categoria",component:L_,canActivate:[ks]},{path:"novo-produto",component:P_,canActivate:[ks]},{path:"editar-produto/:id",component:R_,canActivate:[ks]}];var r7={production:!1,firebase:{apiKey:"AIzaSyDxYLntTQ9OcKrpfbY8UW2QPf2B_7nsxGg",authDomain:"stockx-bbac4.firebaseapp.com",projectId:"stockx-bbac4",storageBucket:"stockx-bbac4.appspot.com",messagingSenderId:"883777672058",appId:"1:883777672058:web:8efb4c5348eafc060cfcc3",measurementId:"G-6SMK7SXTVX"}};yC(s1,{providers:[rE(sn),U3(()=>j3(r7.firebase)),N8(()=>V8()),QF(()=>np()),GC(n7)]}).catch(n=>console.error(n));
